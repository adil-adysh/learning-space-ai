{
	"summary": {
		"changed": 0,
		"unchanged": 42,
		"matches": 0,
		"duration": { "secs": 0, "nanos": 12196700 },
		"scannerDuration": { "secs": 0, "nanos": 1733900 },
		"errors": 0,
		"warnings": 65,
		"infos": 4,
		"skipped": 0,
		"suggestedFixesSkipped": 0,
		"diagnosticsNotPrinted": 0
	},
	"diagnostics": [
		{
			"category": "lint/style/useTemplate",
			"severity": "information",
			"description": "Template literals are preferred over string concatenation.",
			"message": [
				{ "elements": ["Emphasis"], "content": "Template" },
				{ "elements": [], "content": " literals are preferred over " },
				{ "elements": ["Emphasis"], "content": "string concatenation." }
			],
			"advices": {
				"advices": [
					{
						"log": [
							"info",
							[
								{ "elements": [], "content": "Unsafe fix: Use a " },
								{ "elements": ["Emphasis"], "content": "template literal" },
								{ "elements": [], "content": "." }
							]
						]
					},
					{
						"diff": {
							"dictionary": "import { app, BrowserWindow, ipcMain, shell } from \"electron\";\nimport * as path from \"node:path\";\nimport { inspect } from \"node:util\";\nfunction logError(...items: unknown[]) {\n\tprocess.stderr.write(`${items.map(formatLogItem).join(\" \") + \"}\\n\");\n}\n\t}\n});\n",
							"ops": [
								{ "diffOp": { "equal": { "range": [0, 134] } } },
								{ "equalLines": { "line_count": 38 } },
								{ "diffOp": { "equal": { "range": [134, 198] } } },
								{ "diffOp": { "insert": { "range": [198, 201] } } },
								{ "diffOp": { "equal": { "range": [201, 235] } } },
								{ "diffOp": { "delete": { "range": [235, 239] } } },
								{ "diffOp": { "insert": { "range": [239, 240] } } },
								{ "diffOp": { "equal": { "range": [240, 242] } } },
								{ "diffOp": { "delete": { "range": [242, 243] } } },
								{ "diffOp": { "insert": { "range": [198, 199] } } },
								{ "diffOp": { "equal": { "range": [243, 248] } } },
								{ "equalLines": { "line_count": 429 } },
								{ "diffOp": { "equal": { "range": [248, 255] } } }
							]
						}
					}
				]
			},
			"verboseAdvices": { "advices": [] },
			"location": {
				"path": { "file": "src\\main.ts" },
				"span": [1242, 1283],
				"sourceCode": "import { app, BrowserWindow, ipcMain, shell } from \"electron\";\nimport * as path from \"node:path\";\nimport { inspect } from \"node:util\";\nimport { randomUUID } from \"node:crypto\";\nimport { promises as fs } from \"node:fs\";\nimport type { IncomingMessage, Server, ServerResponse } from \"http\";\nimport { createServer } from \"http\";\nimport type { RawCard, Status, RawNote } from \"./types\";\nimport {\n\tinitDatabase,\n\treadCards,\n\taddCard as dbAddCard,\n\tupdateCard,\n\tdeleteCard,\n\treadNotes,\n\taddNote as dbAddNote,\n\tupdateNote as dbUpdateNote,\n\tdeleteNote as dbDeleteNote,\n\treadProjects,\n\taddProject as dbAddProject,\n\tupdateProject as dbUpdateProject,\n\tdeleteProject as dbDeleteProject,\n\tfindProjectByName,\n\tclearProjectFromCards,\n} from \"./db\";\nimport { buildChatGPTUrl } from \"./util\";\nconst STATIC_PORT = Number(process.env.STATIC_PORT) || 4173;\nconst BUILD_DIR = path.join(__dirname, \"..\", \"build\");\nlet staticServer: Server | null = null;\n\nlet mainWindow: BrowserWindow | null = null;\n\nfunction formatLogItem(item: unknown) {\n\tif (typeof item === \"string\") {\n\t\treturn item;\n\t}\n\tif (item instanceof Error) {\n\t\treturn item.stack ?? item.message;\n\t}\n\treturn inspect(item, { depth: 1 });\n}\n\nfunction logError(...items: unknown[]) {\n\tprocess.stderr.write(items.map(formatLogItem).join(\" \") + \"\\n\");\n}\n\nasync function startStaticServer() {\n\tif (staticServer) {\n\t\treturn;\n\t}\n\n\tstaticServer = createServer((req, res) => {\n\t\tvoid handleStaticRequest(req, res);\n\t});\n\n\tawait new Promise<void>((resolve) => {\n\t\tstaticServer?.listen(STATIC_PORT, \"127.0.0.1\", () => resolve());\n\t});\n}\n\nasync function handleStaticRequest(req: IncomingMessage, res: ServerResponse) {\n\tconst url = new URL(req.url ?? \"/\", \"http://localhost\");\n\tconst pathname = decodeURIComponent(url.pathname);\n\tconst normalized = path.normalize(path.join(BUILD_DIR, pathname));\n\tlet target = normalized;\n\n\tif (!target.startsWith(BUILD_DIR)) {\n\t\ttarget = path.join(BUILD_DIR, \"index.html\");\n\t}\n\n\ttry {\n\t\tconst stat = await fs.stat(target);\n\t\tif (stat.isDirectory()) {\n\t\t\ttarget = path.join(target, \"index.html\");\n\t\t}\n\t} catch {\n\t\ttarget = path.join(BUILD_DIR, \"index.html\");\n\t}\n\n\tconst ext = path.extname(target);\n\tres.setHeader(\"Content-Type\", getMime(ext));\n\n\ttry {\n\t\tconst data = await fs.readFile(target);\n\t\tres.writeHead(200);\n\t\tres.end(data);\n\t} catch {\n\t\tconst fallback = await fs.readFile(path.join(BUILD_DIR, \"index.html\"));\n\t\tres.writeHead(200, { \"Content-Type\": \"text/html\" });\n\t\tres.end(fallback);\n\t}\n}\n\nfunction getMime(ext: string) {\n\tswitch (ext) {\n\t\tcase \".js\":\n\t\t\treturn \"application/javascript\";\n\t\tcase \".css\":\n\t\t\treturn \"text/css\";\n\t\tcase \".json\":\n\t\t\treturn \"application/json\";\n\t\tcase \".svg\":\n\t\t\treturn \"image/svg+xml\";\n\t\tcase \".woff2\":\n\t\t\treturn \"font/woff2\";\n\t\tcase \".woff\":\n\t\t\treturn \"font/woff\";\n\t\tcase \".ttf\":\n\t\t\treturn \"font/ttf\";\n\t\tdefault:\n\t\t\treturn \"text/html\";\n\t}\n}\n\nfunction createWindow() {\n\t// Construct preload path - __dirname in esbuild context points to dist directory\n\tconst preloadPath = path.join(__dirname, \"preload.cjs\");\n\n\tconst win = new BrowserWindow({\n\t\twidth: 900,\n\t\theight: 700,\n\t\twebPreferences: {\n\t\t\tpreload: preloadPath,\n\t\t\tcontextIsolation: true,\n\t\t\tnodeIntegration: false,\n\t\t},\n\t});\n\n\tmainWindow = win;\n\twin.on(\"closed\", () => {\n\t\tmainWindow = null;\n\t});\n\n\t// Debug: Log when preload is loaded\n\twin.webContents.on(\"preload-error\", (_event, processType, error) => {\n\t\tlogError(\"[main] Preload error:\", processType, error);\n\t});\n\n\t// Load the SvelteKit build output via local server to avoid file:// 404s\n\tconst targetUrl = `http://127.0.0.1:${STATIC_PORT}`;\n\tvoid win.loadURL(targetUrl);\n\n\t// Security: open external links in user's default browser and prevent in-app navigation\n\twin.webContents.setWindowOpenHandler(({ url }) => {\n\t\tvoid shell.openExternal(url);\n\t\treturn { action: \"deny\" };\n\t});\n\n\twin.webContents.on(\"will-navigate\", (event, url) => {\n\t\tif (!url.startsWith(\"file:\")) {\n\t\t\tevent.preventDefault();\n\t\t\tvoid shell.openExternal(url);\n\t\t}\n\t});\n}\n\n// Ensure single instance for a cleaner UX\nif (!app.requestSingleInstanceLock()) {\n\tapp.quit();\n}\n\napp.on(\"second-instance\", () => {\n\tif (mainWindow) {\n\t\tif (mainWindow.isMinimized()) {\n\t\t\tmainWindow.restore();\n\t\t}\n\t\tmainWindow.focus();\n\t}\n});\n\nasync function bootstrap() {\n\tawait app.whenReady();\n\tawait startStaticServer();\n\n\t// Initialize the lowdb database\n\tconst userDataPath = app.getPath(\"userData\");\n\tawait initDatabase(userDataPath);\n\n\tipcMain.handle(\"cards:get\", async () => {\n\t\treturn await readCards();\n\t});\n\n\tipcMain.handle(\n\t\t\"cards:add\",\n\t\tasync (\n\t\t\t_ev,\n\t\t\tdata: { title: string; prompt: string; topic?: string; project?: string },\n\t\t) => {\n\t\t\tif (\n\t\t\t\t!data ||\n\t\t\t\ttypeof data.title !== \"string\" ||\n\t\t\t\ttypeof data.prompt !== \"string\"\n\t\t\t) {\n\t\t\t\tthrow new Error(\"Invalid input\");\n\t\t\t}\n\n\t\t\tlet projectId = (data.project || \"\").trim();\n\t\t\tif (projectId) {\n\t\t\t\t// if provided value matches a project name, resolve to id\n\t\t\t\tconst foundByName = await findProjectByName(projectId);\n\t\t\t\tif (foundByName) {\n\t\t\t\t\tprojectId = foundByName.id;\n\t\t\t\t} else {\n\t\t\t\t\t// Check if it's an existing project id\n\t\t\t\t\tconst projects = await readProjects();\n\t\t\t\t\tconst existsById = projects.find((p) => p.id === projectId);\n\t\t\t\t\tif (!existsById) {\n\t\t\t\t\t\t// Create new project\n\t\t\t\t\t\tconst newProj = {\n\t\t\t\t\t\t\tid: randomUUID(),\n\t\t\t\t\t\t\tname: projectId,\n\t\t\t\t\t\t\tcreatedAt: new Date().toISOString(),\n\t\t\t\t\t\t};\n\t\t\t\t\t\tawait dbAddProject(newProj);\n\t\t\t\t\t\tprojectId = newProj.id;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst newCard: RawCard = {\n\t\t\t\tid: randomUUID(),\n\t\t\t\ttitle: data.title,\n\t\t\t\tprompt: data.prompt,\n\t\t\t\ttopic: data.topic || \"\",\n\t\t\t\tproject: projectId || \"\",\n\t\t\t\tstatus: \"active\",\n\t\t\t\tcreatedAt: new Date().toISOString(),\n\t\t\t};\n\n\t\t\treturn await dbAddCard(newCard);\n\t\t},\n\t);\n\n\tipcMain.handle(\n\t\t\"cards:update\",\n\t\tasync (\n\t\t\t_ev,\n\t\t\tpayload: {\n\t\t\t\tid: string;\n\t\t\t\ttitle?: string;\n\t\t\t\tprompt?: string;\n\t\t\t\ttopic?: string;\n\t\t\t\tproject?: string;\n\t\t\t},\n\t\t) => {\n\t\t\tconst id = (payload.id || \"\").trim();\n\t\t\tif (!id) {\n\t\t\t\tthrow new Error(\"Card ID is required\");\n\t\t\t}\n\n\t\t\tconst updates: Partial<RawCard> = {};\n\t\t\tif (payload.title !== undefined) {\n\t\t\t\tupdates.title = payload.title;\n\t\t\t}\n\t\t\tif (payload.prompt !== undefined) {\n\t\t\t\tupdates.prompt = payload.prompt;\n\t\t\t}\n\t\t\tif (payload.topic !== undefined) {\n\t\t\t\tupdates.topic = payload.topic;\n\t\t\t}\n\t\t\tif (payload.project !== undefined) {\n\t\t\t\tlet projectId = payload.project.trim();\n\t\t\t\tif (projectId) {\n\t\t\t\t\tconst foundByName = await findProjectByName(projectId);\n\t\t\t\t\tif (foundByName) {\n\t\t\t\t\t\tprojectId = foundByName.id;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tupdates.project = projectId;\n\t\t\t}\n\n\t\t\tconst updated = await updateCard(id, updates);\n\t\t\tif (!updated) {\n\t\t\t\tthrow new Error(\"Card not found\");\n\t\t\t}\n\n\t\t\treturn updated;\n\t\t},\n\t);\n\n\tipcMain.handle(\"cards:delete\", async (_ev, id: string) => {\n\t\tconst cardId = (id || \"\").trim();\n\t\tif (!cardId) {\n\t\t\tthrow new Error(\"Card ID is required\");\n\t\t}\n\n\t\tconst deleted = await deleteCard(cardId);\n\t\tif (!deleted) {\n\t\t\tthrow new Error(\"Card not found\");\n\t\t}\n\n\t\treturn deleted;\n\t});\n\n\t// Projects CRUD IPC\n\tipcMain.handle(\"projects:list\", async () => {\n\t\treturn await readProjects();\n\t});\n\n\tipcMain.handle(\"projects:get\", async (_ev, id: string) => {\n\t\tconst projects = await readProjects();\n\t\treturn projects.find((p) => p.id === id) || null;\n\t});\n\n\tipcMain.handle(\n\t\t\"projects:create\",\n\t\tasync (_ev, payload: { name: string; systemPrompt?: string }) => {\n\t\t\tconst n = (payload.name || \"\").trim();\n\t\t\tif (!n) {\n\t\t\t\tthrow new Error(\"Invalid project name\");\n\t\t\t}\n\n\t\t\t// prevent duplicate names\n\t\t\tconst existing = await findProjectByName(n);\n\t\t\tif (existing) {\n\t\t\t\treturn existing;\n\t\t\t}\n\n\t\t\tconst newProj = {\n\t\t\t\tid: randomUUID(),\n\t\t\t\tname: n,\n\t\t\t\tsystemPrompt: payload.systemPrompt?.trim() || undefined,\n\t\t\t\tcreatedAt: new Date().toISOString(),\n\t\t\t};\n\t\t\treturn await dbAddProject(newProj);\n\t\t},\n\t);\n\n\tipcMain.handle(\n\t\t\"projects:update\",\n\t\tasync (\n\t\t\t_ev,\n\t\t\tpayload: { id: string; name: string; systemPrompt?: string },\n\t\t) => {\n\t\t\tconst id = (payload.id || \"\").trim();\n\t\t\tconst name = (payload.name || \"\").trim();\n\t\t\tif (!id || !name) {\n\t\t\t\tthrow new Error(\"Invalid input\");\n\t\t\t}\n\n\t\t\tconst updated = await dbUpdateProject(id, {\n\t\t\t\tname,\n\t\t\t\tsystemPrompt: payload.systemPrompt?.trim() || undefined,\n\t\t\t});\n\t\t\tif (!updated) {\n\t\t\t\tthrow new Error(\"Project not found\");\n\t\t\t}\n\n\t\t\treturn updated;\n\t\t},\n\t);\n\n\tipcMain.handle(\"projects:delete\", async (_ev, id: string) => {\n\t\tconst removed = await dbDeleteProject(id);\n\t\tif (!removed) {\n\t\t\tthrow new Error(\"Project not found\");\n\t\t}\n\n\t\t// Remove project references from cards\n\t\ttry {\n\t\t\tawait clearProjectFromCards(id);\n\t\t} catch (err) {\n\t\t\tlogError(\"[main] Failed to cleanup card project references\", err);\n\t\t}\n\n\t\treturn removed;\n\t});\n\n\tipcMain.handle(\n\t\t\"cards:toggle\",\n\t\tasync (_ev, args: { id: string; status: Status }) => {\n\t\t\tconst { id, status } = args;\n\t\t\tconst updated = await updateCard(id, { status });\n\t\t\tif (!updated) {\n\t\t\t\tthrow new Error(\"Card not found\");\n\t\t\t}\n\t\t\treturn updated;\n\t\t},\n\t);\n\n\t// Notes IPC\n\tipcMain.handle(\"notes:list\", async (_ev, cardId?: string) => {\n\t\treturn await readNotes(cardId);\n\t});\n\n\tipcMain.handle(\n\t\t\"notes:create\",\n\t\tasync (\n\t\t\t_ev,\n\t\t\tpayload: {\n\t\t\t\tcardId: string;\n\t\t\t\ttitle: string;\n\t\t\t\tcontent: string;\n\t\t\t\ttags?: string[];\n\t\t\t},\n\t\t) => {\n\t\t\tconst cardId = (payload.cardId || \"\").trim();\n\t\t\tif (!cardId) throw new Error(\"cardId required\");\n\t\t\tconst newNote: RawNote = {\n\t\t\t\tid: randomUUID(),\n\t\t\t\tcardId,\n\t\t\t\ttitle: payload.title || \"\",\n\t\t\t\tcontent: payload.content || \"\",\n\t\t\t\ttags: payload.tags || [],\n\t\t\t\tcreatedAt: new Date().toISOString(),\n\t\t\t};\n\t\t\treturn await dbAddNote(newNote);\n\t\t},\n\t);\n\n\tipcMain.handle(\n\t\t\"notes:update\",\n\t\tasync (\n\t\t\t_ev,\n\t\t\tpayload: {\n\t\t\t\tid: string;\n\t\t\t\ttitle?: string;\n\t\t\t\tcontent?: string;\n\t\t\t\ttags?: string[];\n\t\t\t},\n\t\t) => {\n\t\t\tconst id = (payload.id || \"\").trim();\n\t\t\tif (!id) throw new Error(\"note id required\");\n\t\t\tconst updates: Partial<RawNote> = {};\n\t\t\tif (payload.title !== undefined) updates.title = payload.title;\n\t\t\tif (payload.content !== undefined) updates.content = payload.content;\n\t\t\tif (payload.tags !== undefined) updates.tags = payload.tags;\n\t\t\tupdates.updatedAt = new Date().toISOString();\n\t\t\tconst updated = await dbUpdateNote(id, updates);\n\t\t\tif (!updated) throw new Error(\"Note not found\");\n\t\t\treturn updated;\n\t\t},\n\t);\n\n\tipcMain.handle(\"notes:delete\", async (_ev, id: string) => {\n\t\tconst nid = (id || \"\").trim();\n\t\tif (!nid) throw new Error(\"note id required\");\n\t\tconst removed = await dbDeleteNote(nid);\n\t\tif (!removed) throw new Error(\"Note not found\");\n\t\treturn removed;\n\t});\n\n\tipcMain.handle(\"cards:run\", async (_ev, prompt: string) => {\n\t\tif (typeof prompt !== \"string\") {\n\t\t\tthrow new Error(\"Invalid prompt\");\n\t\t}\n\t\tconst url = buildChatGPTUrl(prompt);\n\t\tif (!url.startsWith(\"https://chat.openai.com/\")) {\n\t\t\tthrow new Error(\"Blocked external URL\");\n\t\t}\n\t\tawait shell.openExternal(url);\n\t\treturn true;\n\t});\n\n\tcreateWindow();\n\n\tapp.on(\"activate\", () => {\n\t\tif (BrowserWindow.getAllWindows().length === 0) {\n\t\t\tcreateWindow();\n\t\t}\n\t});\n}\n\nvoid bootstrap();\n\napp.on(\"window-all-closed\", () => {\n\tif (process.platform !== \"darwin\") {\n\t\tapp.quit();\n\t}\n});\n\napp.on(\"before-quit\", () => {\n\tif (staticServer) {\n\t\tstaticServer.close();\n\t\tstaticServer = null;\n\t}\n});\n"
			},
			"tags": ["fixable"],
			"source": null
		},
		{
			"category": "lint/style/useNodejsImportProtocol",
			"severity": "information",
			"description": "A Node.js builtin module should be imported with the node: protocol.",
			"message": [
				{
					"elements": [],
					"content": "A Node.js builtin module should be imported with the "
				},
				{ "elements": ["Emphasis"], "content": "node:" },
				{ "elements": [], "content": " protocol." }
			],
			"advices": {
				"advices": [
					{
						"log": [
							"info",
							[
								{ "elements": [], "content": "Using the " },
								{ "elements": ["Emphasis"], "content": "node:" },
								{
									"elements": [],
									"content": " protocol is more explicit and signals that the imported module belongs to Node.js."
								}
							]
						]
					},
					{
						"log": [
							"info",
							[
								{ "elements": [], "content": "Unsafe fix: Add the " },
								{ "elements": ["Emphasis"], "content": "node:" },
								{ "elements": [], "content": " protocol." }
							]
						]
					},
					{
						"diff": {
							"dictionary": "import { app, BrowserWindow, ipcMain, shell } from \"electron\";\nimport * as path from \"node:path\";\nimport { inspect } from \"node:util\";\nimport { randomUUID } from \"node:crypto\";\nimport { promises as fs } from \"node:fs\";\nimport type { IncomingMessage, Server, ServerResponse } from \"httpnode:http;\nimport { createServer } from \"http\";\nimport type { RawCard, Status, RawNote } from \"./types\";\t}\n});\n",
							"ops": [
								{ "diffOp": { "equal": { "range": [0, 280] } } },
								{ "diffOp": { "equal": { "range": [280, 281] } } },
								{ "diffOp": { "delete": { "range": [281, 285] } } },
								{ "diffOp": { "insert": { "range": [285, 294] } } },
								{ "diffOp": { "equal": { "range": [280, 281] } } },
								{ "diffOp": { "equal": { "range": [294, 389] } } },
								{ "equalLines": { "line_count": 467 } },
								{ "diffOp": { "equal": { "range": [389, 396] } } }
							]
						}
					}
				]
			},
			"verboseAdvices": { "advices": [] },
			"location": {
				"path": { "file": "src\\main.ts" },
				"span": [280, 286],
				"sourceCode": "import { app, BrowserWindow, ipcMain, shell } from \"electron\";\nimport * as path from \"node:path\";\nimport { inspect } from \"node:util\";\nimport { randomUUID } from \"node:crypto\";\nimport { promises as fs } from \"node:fs\";\nimport type { IncomingMessage, Server, ServerResponse } from \"http\";\nimport { createServer } from \"http\";\nimport type { RawCard, Status, RawNote } from \"./types\";\nimport {\n\tinitDatabase,\n\treadCards,\n\taddCard as dbAddCard,\n\tupdateCard,\n\tdeleteCard,\n\treadNotes,\n\taddNote as dbAddNote,\n\tupdateNote as dbUpdateNote,\n\tdeleteNote as dbDeleteNote,\n\treadProjects,\n\taddProject as dbAddProject,\n\tupdateProject as dbUpdateProject,\n\tdeleteProject as dbDeleteProject,\n\tfindProjectByName,\n\tclearProjectFromCards,\n} from \"./db\";\nimport { buildChatGPTUrl } from \"./util\";\nconst STATIC_PORT = Number(process.env.STATIC_PORT) || 4173;\nconst BUILD_DIR = path.join(__dirname, \"..\", \"build\");\nlet staticServer: Server | null = null;\n\nlet mainWindow: BrowserWindow | null = null;\n\nfunction formatLogItem(item: unknown) {\n\tif (typeof item === \"string\") {\n\t\treturn item;\n\t}\n\tif (item instanceof Error) {\n\t\treturn item.stack ?? item.message;\n\t}\n\treturn inspect(item, { depth: 1 });\n}\n\nfunction logError(...items: unknown[]) {\n\tprocess.stderr.write(items.map(formatLogItem).join(\" \") + \"\\n\");\n}\n\nasync function startStaticServer() {\n\tif (staticServer) {\n\t\treturn;\n\t}\n\n\tstaticServer = createServer((req, res) => {\n\t\tvoid handleStaticRequest(req, res);\n\t});\n\n\tawait new Promise<void>((resolve) => {\n\t\tstaticServer?.listen(STATIC_PORT, \"127.0.0.1\", () => resolve());\n\t});\n}\n\nasync function handleStaticRequest(req: IncomingMessage, res: ServerResponse) {\n\tconst url = new URL(req.url ?? \"/\", \"http://localhost\");\n\tconst pathname = decodeURIComponent(url.pathname);\n\tconst normalized = path.normalize(path.join(BUILD_DIR, pathname));\n\tlet target = normalized;\n\n\tif (!target.startsWith(BUILD_DIR)) {\n\t\ttarget = path.join(BUILD_DIR, \"index.html\");\n\t}\n\n\ttry {\n\t\tconst stat = await fs.stat(target);\n\t\tif (stat.isDirectory()) {\n\t\t\ttarget = path.join(target, \"index.html\");\n\t\t}\n\t} catch {\n\t\ttarget = path.join(BUILD_DIR, \"index.html\");\n\t}\n\n\tconst ext = path.extname(target);\n\tres.setHeader(\"Content-Type\", getMime(ext));\n\n\ttry {\n\t\tconst data = await fs.readFile(target);\n\t\tres.writeHead(200);\n\t\tres.end(data);\n\t} catch {\n\t\tconst fallback = await fs.readFile(path.join(BUILD_DIR, \"index.html\"));\n\t\tres.writeHead(200, { \"Content-Type\": \"text/html\" });\n\t\tres.end(fallback);\n\t}\n}\n\nfunction getMime(ext: string) {\n\tswitch (ext) {\n\t\tcase \".js\":\n\t\t\treturn \"application/javascript\";\n\t\tcase \".css\":\n\t\t\treturn \"text/css\";\n\t\tcase \".json\":\n\t\t\treturn \"application/json\";\n\t\tcase \".svg\":\n\t\t\treturn \"image/svg+xml\";\n\t\tcase \".woff2\":\n\t\t\treturn \"font/woff2\";\n\t\tcase \".woff\":\n\t\t\treturn \"font/woff\";\n\t\tcase \".ttf\":\n\t\t\treturn \"font/ttf\";\n\t\tdefault:\n\t\t\treturn \"text/html\";\n\t}\n}\n\nfunction createWindow() {\n\t// Construct preload path - __dirname in esbuild context points to dist directory\n\tconst preloadPath = path.join(__dirname, \"preload.cjs\");\n\n\tconst win = new BrowserWindow({\n\t\twidth: 900,\n\t\theight: 700,\n\t\twebPreferences: {\n\t\t\tpreload: preloadPath,\n\t\t\tcontextIsolation: true,\n\t\t\tnodeIntegration: false,\n\t\t},\n\t});\n\n\tmainWindow = win;\n\twin.on(\"closed\", () => {\n\t\tmainWindow = null;\n\t});\n\n\t// Debug: Log when preload is loaded\n\twin.webContents.on(\"preload-error\", (_event, processType, error) => {\n\t\tlogError(\"[main] Preload error:\", processType, error);\n\t});\n\n\t// Load the SvelteKit build output via local server to avoid file:// 404s\n\tconst targetUrl = `http://127.0.0.1:${STATIC_PORT}`;\n\tvoid win.loadURL(targetUrl);\n\n\t// Security: open external links in user's default browser and prevent in-app navigation\n\twin.webContents.setWindowOpenHandler(({ url }) => {\n\t\tvoid shell.openExternal(url);\n\t\treturn { action: \"deny\" };\n\t});\n\n\twin.webContents.on(\"will-navigate\", (event, url) => {\n\t\tif (!url.startsWith(\"file:\")) {\n\t\t\tevent.preventDefault();\n\t\t\tvoid shell.openExternal(url);\n\t\t}\n\t});\n}\n\n// Ensure single instance for a cleaner UX\nif (!app.requestSingleInstanceLock()) {\n\tapp.quit();\n}\n\napp.on(\"second-instance\", () => {\n\tif (mainWindow) {\n\t\tif (mainWindow.isMinimized()) {\n\t\t\tmainWindow.restore();\n\t\t}\n\t\tmainWindow.focus();\n\t}\n});\n\nasync function bootstrap() {\n\tawait app.whenReady();\n\tawait startStaticServer();\n\n\t// Initialize the lowdb database\n\tconst userDataPath = app.getPath(\"userData\");\n\tawait initDatabase(userDataPath);\n\n\tipcMain.handle(\"cards:get\", async () => {\n\t\treturn await readCards();\n\t});\n\n\tipcMain.handle(\n\t\t\"cards:add\",\n\t\tasync (\n\t\t\t_ev,\n\t\t\tdata: { title: string; prompt: string; topic?: string; project?: string },\n\t\t) => {\n\t\t\tif (\n\t\t\t\t!data ||\n\t\t\t\ttypeof data.title !== \"string\" ||\n\t\t\t\ttypeof data.prompt !== \"string\"\n\t\t\t) {\n\t\t\t\tthrow new Error(\"Invalid input\");\n\t\t\t}\n\n\t\t\tlet projectId = (data.project || \"\").trim();\n\t\t\tif (projectId) {\n\t\t\t\t// if provided value matches a project name, resolve to id\n\t\t\t\tconst foundByName = await findProjectByName(projectId);\n\t\t\t\tif (foundByName) {\n\t\t\t\t\tprojectId = foundByName.id;\n\t\t\t\t} else {\n\t\t\t\t\t// Check if it's an existing project id\n\t\t\t\t\tconst projects = await readProjects();\n\t\t\t\t\tconst existsById = projects.find((p) => p.id === projectId);\n\t\t\t\t\tif (!existsById) {\n\t\t\t\t\t\t// Create new project\n\t\t\t\t\t\tconst newProj = {\n\t\t\t\t\t\t\tid: randomUUID(),\n\t\t\t\t\t\t\tname: projectId,\n\t\t\t\t\t\t\tcreatedAt: new Date().toISOString(),\n\t\t\t\t\t\t};\n\t\t\t\t\t\tawait dbAddProject(newProj);\n\t\t\t\t\t\tprojectId = newProj.id;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst newCard: RawCard = {\n\t\t\t\tid: randomUUID(),\n\t\t\t\ttitle: data.title,\n\t\t\t\tprompt: data.prompt,\n\t\t\t\ttopic: data.topic || \"\",\n\t\t\t\tproject: projectId || \"\",\n\t\t\t\tstatus: \"active\",\n\t\t\t\tcreatedAt: new Date().toISOString(),\n\t\t\t};\n\n\t\t\treturn await dbAddCard(newCard);\n\t\t},\n\t);\n\n\tipcMain.handle(\n\t\t\"cards:update\",\n\t\tasync (\n\t\t\t_ev,\n\t\t\tpayload: {\n\t\t\t\tid: string;\n\t\t\t\ttitle?: string;\n\t\t\t\tprompt?: string;\n\t\t\t\ttopic?: string;\n\t\t\t\tproject?: string;\n\t\t\t},\n\t\t) => {\n\t\t\tconst id = (payload.id || \"\").trim();\n\t\t\tif (!id) {\n\t\t\t\tthrow new Error(\"Card ID is required\");\n\t\t\t}\n\n\t\t\tconst updates: Partial<RawCard> = {};\n\t\t\tif (payload.title !== undefined) {\n\t\t\t\tupdates.title = payload.title;\n\t\t\t}\n\t\t\tif (payload.prompt !== undefined) {\n\t\t\t\tupdates.prompt = payload.prompt;\n\t\t\t}\n\t\t\tif (payload.topic !== undefined) {\n\t\t\t\tupdates.topic = payload.topic;\n\t\t\t}\n\t\t\tif (payload.project !== undefined) {\n\t\t\t\tlet projectId = payload.project.trim();\n\t\t\t\tif (projectId) {\n\t\t\t\t\tconst foundByName = await findProjectByName(projectId);\n\t\t\t\t\tif (foundByName) {\n\t\t\t\t\t\tprojectId = foundByName.id;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tupdates.project = projectId;\n\t\t\t}\n\n\t\t\tconst updated = await updateCard(id, updates);\n\t\t\tif (!updated) {\n\t\t\t\tthrow new Error(\"Card not found\");\n\t\t\t}\n\n\t\t\treturn updated;\n\t\t},\n\t);\n\n\tipcMain.handle(\"cards:delete\", async (_ev, id: string) => {\n\t\tconst cardId = (id || \"\").trim();\n\t\tif (!cardId) {\n\t\t\tthrow new Error(\"Card ID is required\");\n\t\t}\n\n\t\tconst deleted = await deleteCard(cardId);\n\t\tif (!deleted) {\n\t\t\tthrow new Error(\"Card not found\");\n\t\t}\n\n\t\treturn deleted;\n\t});\n\n\t// Projects CRUD IPC\n\tipcMain.handle(\"projects:list\", async () => {\n\t\treturn await readProjects();\n\t});\n\n\tipcMain.handle(\"projects:get\", async (_ev, id: string) => {\n\t\tconst projects = await readProjects();\n\t\treturn projects.find((p) => p.id === id) || null;\n\t});\n\n\tipcMain.handle(\n\t\t\"projects:create\",\n\t\tasync (_ev, payload: { name: string; systemPrompt?: string }) => {\n\t\t\tconst n = (payload.name || \"\").trim();\n\t\t\tif (!n) {\n\t\t\t\tthrow new Error(\"Invalid project name\");\n\t\t\t}\n\n\t\t\t// prevent duplicate names\n\t\t\tconst existing = await findProjectByName(n);\n\t\t\tif (existing) {\n\t\t\t\treturn existing;\n\t\t\t}\n\n\t\t\tconst newProj = {\n\t\t\t\tid: randomUUID(),\n\t\t\t\tname: n,\n\t\t\t\tsystemPrompt: payload.systemPrompt?.trim() || undefined,\n\t\t\t\tcreatedAt: new Date().toISOString(),\n\t\t\t};\n\t\t\treturn await dbAddProject(newProj);\n\t\t},\n\t);\n\n\tipcMain.handle(\n\t\t\"projects:update\",\n\t\tasync (\n\t\t\t_ev,\n\t\t\tpayload: { id: string; name: string; systemPrompt?: string },\n\t\t) => {\n\t\t\tconst id = (payload.id || \"\").trim();\n\t\t\tconst name = (payload.name || \"\").trim();\n\t\t\tif (!id || !name) {\n\t\t\t\tthrow new Error(\"Invalid input\");\n\t\t\t}\n\n\t\t\tconst updated = await dbUpdateProject(id, {\n\t\t\t\tname,\n\t\t\t\tsystemPrompt: payload.systemPrompt?.trim() || undefined,\n\t\t\t});\n\t\t\tif (!updated) {\n\t\t\t\tthrow new Error(\"Project not found\");\n\t\t\t}\n\n\t\t\treturn updated;\n\t\t},\n\t);\n\n\tipcMain.handle(\"projects:delete\", async (_ev, id: string) => {\n\t\tconst removed = await dbDeleteProject(id);\n\t\tif (!removed) {\n\t\t\tthrow new Error(\"Project not found\");\n\t\t}\n\n\t\t// Remove project references from cards\n\t\ttry {\n\t\t\tawait clearProjectFromCards(id);\n\t\t} catch (err) {\n\t\t\tlogError(\"[main] Failed to cleanup card project references\", err);\n\t\t}\n\n\t\treturn removed;\n\t});\n\n\tipcMain.handle(\n\t\t\"cards:toggle\",\n\t\tasync (_ev, args: { id: string; status: Status }) => {\n\t\t\tconst { id, status } = args;\n\t\t\tconst updated = await updateCard(id, { status });\n\t\t\tif (!updated) {\n\t\t\t\tthrow new Error(\"Card not found\");\n\t\t\t}\n\t\t\treturn updated;\n\t\t},\n\t);\n\n\t// Notes IPC\n\tipcMain.handle(\"notes:list\", async (_ev, cardId?: string) => {\n\t\treturn await readNotes(cardId);\n\t});\n\n\tipcMain.handle(\n\t\t\"notes:create\",\n\t\tasync (\n\t\t\t_ev,\n\t\t\tpayload: {\n\t\t\t\tcardId: string;\n\t\t\t\ttitle: string;\n\t\t\t\tcontent: string;\n\t\t\t\ttags?: string[];\n\t\t\t},\n\t\t) => {\n\t\t\tconst cardId = (payload.cardId || \"\").trim();\n\t\t\tif (!cardId) throw new Error(\"cardId required\");\n\t\t\tconst newNote: RawNote = {\n\t\t\t\tid: randomUUID(),\n\t\t\t\tcardId,\n\t\t\t\ttitle: payload.title || \"\",\n\t\t\t\tcontent: payload.content || \"\",\n\t\t\t\ttags: payload.tags || [],\n\t\t\t\tcreatedAt: new Date().toISOString(),\n\t\t\t};\n\t\t\treturn await dbAddNote(newNote);\n\t\t},\n\t);\n\n\tipcMain.handle(\n\t\t\"notes:update\",\n\t\tasync (\n\t\t\t_ev,\n\t\t\tpayload: {\n\t\t\t\tid: string;\n\t\t\t\ttitle?: string;\n\t\t\t\tcontent?: string;\n\t\t\t\ttags?: string[];\n\t\t\t},\n\t\t) => {\n\t\t\tconst id = (payload.id || \"\").trim();\n\t\t\tif (!id) throw new Error(\"note id required\");\n\t\t\tconst updates: Partial<RawNote> = {};\n\t\t\tif (payload.title !== undefined) updates.title = payload.title;\n\t\t\tif (payload.content !== undefined) updates.content = payload.content;\n\t\t\tif (payload.tags !== undefined) updates.tags = payload.tags;\n\t\t\tupdates.updatedAt = new Date().toISOString();\n\t\t\tconst updated = await dbUpdateNote(id, updates);\n\t\t\tif (!updated) throw new Error(\"Note not found\");\n\t\t\treturn updated;\n\t\t},\n\t);\n\n\tipcMain.handle(\"notes:delete\", async (_ev, id: string) => {\n\t\tconst nid = (id || \"\").trim();\n\t\tif (!nid) throw new Error(\"note id required\");\n\t\tconst removed = await dbDeleteNote(nid);\n\t\tif (!removed) throw new Error(\"Note not found\");\n\t\treturn removed;\n\t});\n\n\tipcMain.handle(\"cards:run\", async (_ev, prompt: string) => {\n\t\tif (typeof prompt !== \"string\") {\n\t\t\tthrow new Error(\"Invalid prompt\");\n\t\t}\n\t\tconst url = buildChatGPTUrl(prompt);\n\t\tif (!url.startsWith(\"https://chat.openai.com/\")) {\n\t\t\tthrow new Error(\"Blocked external URL\");\n\t\t}\n\t\tawait shell.openExternal(url);\n\t\treturn true;\n\t});\n\n\tcreateWindow();\n\n\tapp.on(\"activate\", () => {\n\t\tif (BrowserWindow.getAllWindows().length === 0) {\n\t\t\tcreateWindow();\n\t\t}\n\t});\n}\n\nvoid bootstrap();\n\napp.on(\"window-all-closed\", () => {\n\tif (process.platform !== \"darwin\") {\n\t\tapp.quit();\n\t}\n});\n\napp.on(\"before-quit\", () => {\n\tif (staticServer) {\n\t\tstaticServer.close();\n\t\tstaticServer = null;\n\t}\n});\n"
			},
			"tags": ["fixable"],
			"source": null
		},
		{
			"category": "lint/style/useNodejsImportProtocol",
			"severity": "information",
			"description": "A Node.js builtin module should be imported with the node: protocol.",
			"message": [
				{
					"elements": [],
					"content": "A Node.js builtin module should be imported with the "
				},
				{ "elements": ["Emphasis"], "content": "node:" },
				{ "elements": [], "content": " protocol." }
			],
			"advices": {
				"advices": [
					{
						"log": [
							"info",
							[
								{ "elements": [], "content": "Using the " },
								{ "elements": ["Emphasis"], "content": "node:" },
								{
									"elements": [],
									"content": " protocol is more explicit and signals that the imported module belongs to Node.js."
								}
							]
						]
					},
					{
						"log": [
							"info",
							[
								{ "elements": [], "content": "Unsafe fix: Add the " },
								{ "elements": ["Emphasis"], "content": "node:" },
								{ "elements": [], "content": " protocol." }
							]
						]
					},
					{
						"diff": {
							"dictionary": "import { app, BrowserWindow, ipcMain, shell } from \"electron\";\nimport * as path from \"node:path\";\nimport { inspect } from \"node:util\";import { promises as fs } from \"node:fs\";\nimport type { IncomingMessage, Server, ServerResponse } from \"http\";\nimport { createServer } from \"httpnode:http;\nimport type { RawCard, Status, RawNote } from \"./types\";\nimport {\t}\n});\n",
							"ops": [
								{ "diffOp": { "equal": { "range": [0, 134] } } },
								{ "equalLines": { "line_count": 1 } },
								{ "diffOp": { "equal": { "range": [134, 274] } } },
								{ "diffOp": { "equal": { "range": [274, 275] } } },
								{ "diffOp": { "delete": { "range": [275, 279] } } },
								{ "diffOp": { "insert": { "range": [279, 288] } } },
								{ "diffOp": { "equal": { "range": [274, 275] } } },
								{ "diffOp": { "equal": { "range": [288, 355] } } },
								{ "equalLines": { "line_count": 466 } },
								{ "diffOp": { "equal": { "range": [355, 362] } } }
							]
						}
					}
				]
			},
			"verboseAdvices": { "advices": [] },
			"location": {
				"path": { "file": "src\\main.ts" },
				"span": [317, 323],
				"sourceCode": "import { app, BrowserWindow, ipcMain, shell } from \"electron\";\nimport * as path from \"node:path\";\nimport { inspect } from \"node:util\";\nimport { randomUUID } from \"node:crypto\";\nimport { promises as fs } from \"node:fs\";\nimport type { IncomingMessage, Server, ServerResponse } from \"http\";\nimport { createServer } from \"http\";\nimport type { RawCard, Status, RawNote } from \"./types\";\nimport {\n\tinitDatabase,\n\treadCards,\n\taddCard as dbAddCard,\n\tupdateCard,\n\tdeleteCard,\n\treadNotes,\n\taddNote as dbAddNote,\n\tupdateNote as dbUpdateNote,\n\tdeleteNote as dbDeleteNote,\n\treadProjects,\n\taddProject as dbAddProject,\n\tupdateProject as dbUpdateProject,\n\tdeleteProject as dbDeleteProject,\n\tfindProjectByName,\n\tclearProjectFromCards,\n} from \"./db\";\nimport { buildChatGPTUrl } from \"./util\";\nconst STATIC_PORT = Number(process.env.STATIC_PORT) || 4173;\nconst BUILD_DIR = path.join(__dirname, \"..\", \"build\");\nlet staticServer: Server | null = null;\n\nlet mainWindow: BrowserWindow | null = null;\n\nfunction formatLogItem(item: unknown) {\n\tif (typeof item === \"string\") {\n\t\treturn item;\n\t}\n\tif (item instanceof Error) {\n\t\treturn item.stack ?? item.message;\n\t}\n\treturn inspect(item, { depth: 1 });\n}\n\nfunction logError(...items: unknown[]) {\n\tprocess.stderr.write(items.map(formatLogItem).join(\" \") + \"\\n\");\n}\n\nasync function startStaticServer() {\n\tif (staticServer) {\n\t\treturn;\n\t}\n\n\tstaticServer = createServer((req, res) => {\n\t\tvoid handleStaticRequest(req, res);\n\t});\n\n\tawait new Promise<void>((resolve) => {\n\t\tstaticServer?.listen(STATIC_PORT, \"127.0.0.1\", () => resolve());\n\t});\n}\n\nasync function handleStaticRequest(req: IncomingMessage, res: ServerResponse) {\n\tconst url = new URL(req.url ?? \"/\", \"http://localhost\");\n\tconst pathname = decodeURIComponent(url.pathname);\n\tconst normalized = path.normalize(path.join(BUILD_DIR, pathname));\n\tlet target = normalized;\n\n\tif (!target.startsWith(BUILD_DIR)) {\n\t\ttarget = path.join(BUILD_DIR, \"index.html\");\n\t}\n\n\ttry {\n\t\tconst stat = await fs.stat(target);\n\t\tif (stat.isDirectory()) {\n\t\t\ttarget = path.join(target, \"index.html\");\n\t\t}\n\t} catch {\n\t\ttarget = path.join(BUILD_DIR, \"index.html\");\n\t}\n\n\tconst ext = path.extname(target);\n\tres.setHeader(\"Content-Type\", getMime(ext));\n\n\ttry {\n\t\tconst data = await fs.readFile(target);\n\t\tres.writeHead(200);\n\t\tres.end(data);\n\t} catch {\n\t\tconst fallback = await fs.readFile(path.join(BUILD_DIR, \"index.html\"));\n\t\tres.writeHead(200, { \"Content-Type\": \"text/html\" });\n\t\tres.end(fallback);\n\t}\n}\n\nfunction getMime(ext: string) {\n\tswitch (ext) {\n\t\tcase \".js\":\n\t\t\treturn \"application/javascript\";\n\t\tcase \".css\":\n\t\t\treturn \"text/css\";\n\t\tcase \".json\":\n\t\t\treturn \"application/json\";\n\t\tcase \".svg\":\n\t\t\treturn \"image/svg+xml\";\n\t\tcase \".woff2\":\n\t\t\treturn \"font/woff2\";\n\t\tcase \".woff\":\n\t\t\treturn \"font/woff\";\n\t\tcase \".ttf\":\n\t\t\treturn \"font/ttf\";\n\t\tdefault:\n\t\t\treturn \"text/html\";\n\t}\n}\n\nfunction createWindow() {\n\t// Construct preload path - __dirname in esbuild context points to dist directory\n\tconst preloadPath = path.join(__dirname, \"preload.cjs\");\n\n\tconst win = new BrowserWindow({\n\t\twidth: 900,\n\t\theight: 700,\n\t\twebPreferences: {\n\t\t\tpreload: preloadPath,\n\t\t\tcontextIsolation: true,\n\t\t\tnodeIntegration: false,\n\t\t},\n\t});\n\n\tmainWindow = win;\n\twin.on(\"closed\", () => {\n\t\tmainWindow = null;\n\t});\n\n\t// Debug: Log when preload is loaded\n\twin.webContents.on(\"preload-error\", (_event, processType, error) => {\n\t\tlogError(\"[main] Preload error:\", processType, error);\n\t});\n\n\t// Load the SvelteKit build output via local server to avoid file:// 404s\n\tconst targetUrl = `http://127.0.0.1:${STATIC_PORT}`;\n\tvoid win.loadURL(targetUrl);\n\n\t// Security: open external links in user's default browser and prevent in-app navigation\n\twin.webContents.setWindowOpenHandler(({ url }) => {\n\t\tvoid shell.openExternal(url);\n\t\treturn { action: \"deny\" };\n\t});\n\n\twin.webContents.on(\"will-navigate\", (event, url) => {\n\t\tif (!url.startsWith(\"file:\")) {\n\t\t\tevent.preventDefault();\n\t\t\tvoid shell.openExternal(url);\n\t\t}\n\t});\n}\n\n// Ensure single instance for a cleaner UX\nif (!app.requestSingleInstanceLock()) {\n\tapp.quit();\n}\n\napp.on(\"second-instance\", () => {\n\tif (mainWindow) {\n\t\tif (mainWindow.isMinimized()) {\n\t\t\tmainWindow.restore();\n\t\t}\n\t\tmainWindow.focus();\n\t}\n});\n\nasync function bootstrap() {\n\tawait app.whenReady();\n\tawait startStaticServer();\n\n\t// Initialize the lowdb database\n\tconst userDataPath = app.getPath(\"userData\");\n\tawait initDatabase(userDataPath);\n\n\tipcMain.handle(\"cards:get\", async () => {\n\t\treturn await readCards();\n\t});\n\n\tipcMain.handle(\n\t\t\"cards:add\",\n\t\tasync (\n\t\t\t_ev,\n\t\t\tdata: { title: string; prompt: string; topic?: string; project?: string },\n\t\t) => {\n\t\t\tif (\n\t\t\t\t!data ||\n\t\t\t\ttypeof data.title !== \"string\" ||\n\t\t\t\ttypeof data.prompt !== \"string\"\n\t\t\t) {\n\t\t\t\tthrow new Error(\"Invalid input\");\n\t\t\t}\n\n\t\t\tlet projectId = (data.project || \"\").trim();\n\t\t\tif (projectId) {\n\t\t\t\t// if provided value matches a project name, resolve to id\n\t\t\t\tconst foundByName = await findProjectByName(projectId);\n\t\t\t\tif (foundByName) {\n\t\t\t\t\tprojectId = foundByName.id;\n\t\t\t\t} else {\n\t\t\t\t\t// Check if it's an existing project id\n\t\t\t\t\tconst projects = await readProjects();\n\t\t\t\t\tconst existsById = projects.find((p) => p.id === projectId);\n\t\t\t\t\tif (!existsById) {\n\t\t\t\t\t\t// Create new project\n\t\t\t\t\t\tconst newProj = {\n\t\t\t\t\t\t\tid: randomUUID(),\n\t\t\t\t\t\t\tname: projectId,\n\t\t\t\t\t\t\tcreatedAt: new Date().toISOString(),\n\t\t\t\t\t\t};\n\t\t\t\t\t\tawait dbAddProject(newProj);\n\t\t\t\t\t\tprojectId = newProj.id;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst newCard: RawCard = {\n\t\t\t\tid: randomUUID(),\n\t\t\t\ttitle: data.title,\n\t\t\t\tprompt: data.prompt,\n\t\t\t\ttopic: data.topic || \"\",\n\t\t\t\tproject: projectId || \"\",\n\t\t\t\tstatus: \"active\",\n\t\t\t\tcreatedAt: new Date().toISOString(),\n\t\t\t};\n\n\t\t\treturn await dbAddCard(newCard);\n\t\t},\n\t);\n\n\tipcMain.handle(\n\t\t\"cards:update\",\n\t\tasync (\n\t\t\t_ev,\n\t\t\tpayload: {\n\t\t\t\tid: string;\n\t\t\t\ttitle?: string;\n\t\t\t\tprompt?: string;\n\t\t\t\ttopic?: string;\n\t\t\t\tproject?: string;\n\t\t\t},\n\t\t) => {\n\t\t\tconst id = (payload.id || \"\").trim();\n\t\t\tif (!id) {\n\t\t\t\tthrow new Error(\"Card ID is required\");\n\t\t\t}\n\n\t\t\tconst updates: Partial<RawCard> = {};\n\t\t\tif (payload.title !== undefined) {\n\t\t\t\tupdates.title = payload.title;\n\t\t\t}\n\t\t\tif (payload.prompt !== undefined) {\n\t\t\t\tupdates.prompt = payload.prompt;\n\t\t\t}\n\t\t\tif (payload.topic !== undefined) {\n\t\t\t\tupdates.topic = payload.topic;\n\t\t\t}\n\t\t\tif (payload.project !== undefined) {\n\t\t\t\tlet projectId = payload.project.trim();\n\t\t\t\tif (projectId) {\n\t\t\t\t\tconst foundByName = await findProjectByName(projectId);\n\t\t\t\t\tif (foundByName) {\n\t\t\t\t\t\tprojectId = foundByName.id;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tupdates.project = projectId;\n\t\t\t}\n\n\t\t\tconst updated = await updateCard(id, updates);\n\t\t\tif (!updated) {\n\t\t\t\tthrow new Error(\"Card not found\");\n\t\t\t}\n\n\t\t\treturn updated;\n\t\t},\n\t);\n\n\tipcMain.handle(\"cards:delete\", async (_ev, id: string) => {\n\t\tconst cardId = (id || \"\").trim();\n\t\tif (!cardId) {\n\t\t\tthrow new Error(\"Card ID is required\");\n\t\t}\n\n\t\tconst deleted = await deleteCard(cardId);\n\t\tif (!deleted) {\n\t\t\tthrow new Error(\"Card not found\");\n\t\t}\n\n\t\treturn deleted;\n\t});\n\n\t// Projects CRUD IPC\n\tipcMain.handle(\"projects:list\", async () => {\n\t\treturn await readProjects();\n\t});\n\n\tipcMain.handle(\"projects:get\", async (_ev, id: string) => {\n\t\tconst projects = await readProjects();\n\t\treturn projects.find((p) => p.id === id) || null;\n\t});\n\n\tipcMain.handle(\n\t\t\"projects:create\",\n\t\tasync (_ev, payload: { name: string; systemPrompt?: string }) => {\n\t\t\tconst n = (payload.name || \"\").trim();\n\t\t\tif (!n) {\n\t\t\t\tthrow new Error(\"Invalid project name\");\n\t\t\t}\n\n\t\t\t// prevent duplicate names\n\t\t\tconst existing = await findProjectByName(n);\n\t\t\tif (existing) {\n\t\t\t\treturn existing;\n\t\t\t}\n\n\t\t\tconst newProj = {\n\t\t\t\tid: randomUUID(),\n\t\t\t\tname: n,\n\t\t\t\tsystemPrompt: payload.systemPrompt?.trim() || undefined,\n\t\t\t\tcreatedAt: new Date().toISOString(),\n\t\t\t};\n\t\t\treturn await dbAddProject(newProj);\n\t\t},\n\t);\n\n\tipcMain.handle(\n\t\t\"projects:update\",\n\t\tasync (\n\t\t\t_ev,\n\t\t\tpayload: { id: string; name: string; systemPrompt?: string },\n\t\t) => {\n\t\t\tconst id = (payload.id || \"\").trim();\n\t\t\tconst name = (payload.name || \"\").trim();\n\t\t\tif (!id || !name) {\n\t\t\t\tthrow new Error(\"Invalid input\");\n\t\t\t}\n\n\t\t\tconst updated = await dbUpdateProject(id, {\n\t\t\t\tname,\n\t\t\t\tsystemPrompt: payload.systemPrompt?.trim() || undefined,\n\t\t\t});\n\t\t\tif (!updated) {\n\t\t\t\tthrow new Error(\"Project not found\");\n\t\t\t}\n\n\t\t\treturn updated;\n\t\t},\n\t);\n\n\tipcMain.handle(\"projects:delete\", async (_ev, id: string) => {\n\t\tconst removed = await dbDeleteProject(id);\n\t\tif (!removed) {\n\t\t\tthrow new Error(\"Project not found\");\n\t\t}\n\n\t\t// Remove project references from cards\n\t\ttry {\n\t\t\tawait clearProjectFromCards(id);\n\t\t} catch (err) {\n\t\t\tlogError(\"[main] Failed to cleanup card project references\", err);\n\t\t}\n\n\t\treturn removed;\n\t});\n\n\tipcMain.handle(\n\t\t\"cards:toggle\",\n\t\tasync (_ev, args: { id: string; status: Status }) => {\n\t\t\tconst { id, status } = args;\n\t\t\tconst updated = await updateCard(id, { status });\n\t\t\tif (!updated) {\n\t\t\t\tthrow new Error(\"Card not found\");\n\t\t\t}\n\t\t\treturn updated;\n\t\t},\n\t);\n\n\t// Notes IPC\n\tipcMain.handle(\"notes:list\", async (_ev, cardId?: string) => {\n\t\treturn await readNotes(cardId);\n\t});\n\n\tipcMain.handle(\n\t\t\"notes:create\",\n\t\tasync (\n\t\t\t_ev,\n\t\t\tpayload: {\n\t\t\t\tcardId: string;\n\t\t\t\ttitle: string;\n\t\t\t\tcontent: string;\n\t\t\t\ttags?: string[];\n\t\t\t},\n\t\t) => {\n\t\t\tconst cardId = (payload.cardId || \"\").trim();\n\t\t\tif (!cardId) throw new Error(\"cardId required\");\n\t\t\tconst newNote: RawNote = {\n\t\t\t\tid: randomUUID(),\n\t\t\t\tcardId,\n\t\t\t\ttitle: payload.title || \"\",\n\t\t\t\tcontent: payload.content || \"\",\n\t\t\t\ttags: payload.tags || [],\n\t\t\t\tcreatedAt: new Date().toISOString(),\n\t\t\t};\n\t\t\treturn await dbAddNote(newNote);\n\t\t},\n\t);\n\n\tipcMain.handle(\n\t\t\"notes:update\",\n\t\tasync (\n\t\t\t_ev,\n\t\t\tpayload: {\n\t\t\t\tid: string;\n\t\t\t\ttitle?: string;\n\t\t\t\tcontent?: string;\n\t\t\t\ttags?: string[];\n\t\t\t},\n\t\t) => {\n\t\t\tconst id = (payload.id || \"\").trim();\n\t\t\tif (!id) throw new Error(\"note id required\");\n\t\t\tconst updates: Partial<RawNote> = {};\n\t\t\tif (payload.title !== undefined) updates.title = payload.title;\n\t\t\tif (payload.content !== undefined) updates.content = payload.content;\n\t\t\tif (payload.tags !== undefined) updates.tags = payload.tags;\n\t\t\tupdates.updatedAt = new Date().toISOString();\n\t\t\tconst updated = await dbUpdateNote(id, updates);\n\t\t\tif (!updated) throw new Error(\"Note not found\");\n\t\t\treturn updated;\n\t\t},\n\t);\n\n\tipcMain.handle(\"notes:delete\", async (_ev, id: string) => {\n\t\tconst nid = (id || \"\").trim();\n\t\tif (!nid) throw new Error(\"note id required\");\n\t\tconst removed = await dbDeleteNote(nid);\n\t\tif (!removed) throw new Error(\"Note not found\");\n\t\treturn removed;\n\t});\n\n\tipcMain.handle(\"cards:run\", async (_ev, prompt: string) => {\n\t\tif (typeof prompt !== \"string\") {\n\t\t\tthrow new Error(\"Invalid prompt\");\n\t\t}\n\t\tconst url = buildChatGPTUrl(prompt);\n\t\tif (!url.startsWith(\"https://chat.openai.com/\")) {\n\t\t\tthrow new Error(\"Blocked external URL\");\n\t\t}\n\t\tawait shell.openExternal(url);\n\t\treturn true;\n\t});\n\n\tcreateWindow();\n\n\tapp.on(\"activate\", () => {\n\t\tif (BrowserWindow.getAllWindows().length === 0) {\n\t\t\tcreateWindow();\n\t\t}\n\t});\n}\n\nvoid bootstrap();\n\napp.on(\"window-all-closed\", () => {\n\tif (process.platform !== \"darwin\") {\n\t\tapp.quit();\n\t}\n});\n\napp.on(\"before-quit\", () => {\n\tif (staticServer) {\n\t\tstaticServer.close();\n\t\tstaticServer = null;\n\t}\n});\n"
			},
			"tags": ["fixable"],
			"source": null
		},
		{
			"category": "lint/style/useTemplate",
			"severity": "information",
			"description": "Template literals are preferred over string concatenation.",
			"message": [
				{ "elements": ["Emphasis"], "content": "Template" },
				{ "elements": [], "content": " literals are preferred over " },
				{ "elements": ["Emphasis"], "content": "string concatenation." }
			],
			"advices": {
				"advices": [
					{
						"log": [
							"info",
							[
								{ "elements": [], "content": "Unsafe fix: Use a " },
								{ "elements": ["Emphasis"], "content": "template literal" },
								{ "elements": [], "content": "." }
							]
						]
					},
					{
						"diff": {
							"dictionary": "import { contextBridge, ipcRenderer } from \"electron\";\nimport type {\n\tLearningCard,\nfunction logPreloadError(...items: unknown[]) {\n\tprocess.stderr.write(`${items.map(formatPreloadItem).join(\" \") + \"}\\n\");\n}\n\tlogPreloadError(\"[preload] Failed to expose API:\", err);\n}\n",
							"ops": [
								{ "diffOp": { "equal": { "range": [0, 83] } } },
								{ "equalLines": { "line_count": 16 } },
								{ "diffOp": { "equal": { "range": [83, 154] } } },
								{ "diffOp": { "insert": { "range": [154, 157] } } },
								{ "diffOp": { "equal": { "range": [157, 195] } } },
								{ "diffOp": { "delete": { "range": [195, 199] } } },
								{ "diffOp": { "insert": { "range": [199, 200] } } },
								{ "diffOp": { "equal": { "range": [200, 202] } } },
								{ "diffOp": { "delete": { "range": [202, 203] } } },
								{ "diffOp": { "insert": { "range": [154, 155] } } },
								{ "diffOp": { "equal": { "range": [203, 208] } } },
								{ "equalLines": { "line_count": 140 } },
								{ "diffOp": { "equal": { "range": [208, 268] } } }
							]
						}
					}
				]
			},
			"verboseAdvices": { "advices": [] },
			"location": {
				"path": { "file": "src\\preload.ts" },
				"span": [415, 460],
				"sourceCode": "import { contextBridge, ipcRenderer } from \"electron\";\nimport type {\n\tLearningCard,\n\tRawCard,\n\tStatus,\n\tProject,\n\tRawProject,\n\tRawNote,\n} from \"./types\";\n\nfunction formatPreloadItem(item: unknown) {\n\tif (typeof item === \"string\") {\n\t\treturn item;\n\t}\n\tif (item instanceof Error) {\n\t\treturn item.stack ?? item.message;\n\t}\n\treturn String(item);\n}\n\nfunction logPreloadError(...items: unknown[]) {\n\tprocess.stderr.write(items.map(formatPreloadItem).join(\" \") + \"\\n\");\n}\n\nfunction toLearningCard(raw: RawCard): LearningCard {\n\treturn {\n\t\t...raw,\n\t\tcreatedAt: new Date(raw.createdAt),\n\t};\n}\n\ntry {\n\tcontextBridge.exposeInMainWorld(\"api\", {\n\t\tgetCards: async (): Promise<LearningCard[]> => {\n\t\t\tconst raws = (await ipcRenderer.invoke(\"cards:get\")) as RawCard[];\n\t\t\treturn raws.map(toLearningCard);\n\t\t},\n\t\taddCard: async (data: {\n\t\t\ttitle: string;\n\t\t\tprompt: string;\n\t\t\ttopic?: string;\n\t\t}): Promise<LearningCard> => {\n\t\t\tconst raw = (await ipcRenderer.invoke(\"cards:add\", data)) as RawCard;\n\t\t\treturn toLearningCard(raw);\n\t\t},\n\t\tupdateCard: async (payload: {\n\t\t\tid: string;\n\t\t\ttitle?: string;\n\t\t\tprompt?: string;\n\t\t\ttopic?: string;\n\t\t\tproject?: string;\n\t\t}): Promise<LearningCard> => {\n\t\t\tconst raw = (await ipcRenderer.invoke(\n\t\t\t\t\"cards:update\",\n\t\t\t\tpayload,\n\t\t\t)) as RawCard;\n\t\t\treturn toLearningCard(raw);\n\t\t},\n\t\tdeleteCard: async (id: string): Promise<RawCard> => {\n\t\t\treturn (await ipcRenderer.invoke(\"cards:delete\", id)) as RawCard;\n\t\t},\n\t\tgetProjects: async (): Promise<Project[]> => {\n\t\t\tconst list = (await ipcRenderer.invoke(\"projects:list\")) as RawProject[];\n\t\t\treturn list.map(\n\t\t\t\t(p): Project => ({\n\t\t\t\t\t...p,\n\t\t\t\t\tcreatedAt: p.createdAt ? new Date(p.createdAt) : undefined,\n\t\t\t\t}),\n\t\t\t);\n\t\t},\n\t\tcreateProject: async (payload: {\n\t\t\tname: string;\n\t\t\tsystemPrompt?: string;\n\t\t}): Promise<Project> => {\n\t\t\tconst created = (await ipcRenderer.invoke(\n\t\t\t\t\"projects:create\",\n\t\t\t\tpayload,\n\t\t\t)) as RawProject;\n\t\t\treturn {\n\t\t\t\t...created,\n\t\t\t\tcreatedAt: created.createdAt ? new Date(created.createdAt) : undefined,\n\t\t\t};\n\t\t},\n\t\tupdateProject: async (payload: {\n\t\t\tid: string;\n\t\t\tname: string;\n\t\t\tsystemPrompt?: string;\n\t\t}): Promise<Project> => {\n\t\t\tconst updated = (await ipcRenderer.invoke(\n\t\t\t\t\"projects:update\",\n\t\t\t\tpayload,\n\t\t\t)) as RawProject;\n\t\t\treturn {\n\t\t\t\t...updated,\n\t\t\t\tcreatedAt: updated.createdAt ? new Date(updated.createdAt) : undefined,\n\t\t\t};\n\t\t},\n\t\tdeleteProject: async (id: string): Promise<RawProject> => {\n\t\t\tconst removed = (await ipcRenderer.invoke(\n\t\t\t\t\"projects:delete\",\n\t\t\t\tid,\n\t\t\t)) as RawProject;\n\t\t\treturn removed;\n\t\t},\n\t\ttoggleCard: async (id: string, status: Status): Promise<LearningCard> => {\n\t\t\tconst raw = (await ipcRenderer.invoke(\"cards:toggle\", {\n\t\t\t\tid,\n\t\t\t\tstatus,\n\t\t\t})) as RawCard;\n\t\t\treturn toLearningCard(raw);\n\t\t},\n\t\t// Notes\n\t\tgetNotes: async (cardId?: string) => {\n\t\t\tconst list = (await ipcRenderer.invoke(\n\t\t\t\t\"notes:list\",\n\t\t\t\tcardId,\n\t\t\t)) as RawNote[];\n\t\t\treturn list.map((n) => ({\n\t\t\t\t...n,\n\t\t\t\tcreatedAt: new Date(n.createdAt),\n\t\t\t\tupdatedAt: n.updatedAt ? new Date(n.updatedAt) : undefined,\n\t\t\t}));\n\t\t},\n\t\tcreateNote: async (payload: {\n\t\t\tcardId: string;\n\t\t\ttitle: string;\n\t\t\tcontent: string;\n\t\t\ttags?: string[];\n\t\t}) => {\n\t\t\tconst created = (await ipcRenderer.invoke(\n\t\t\t\t\"notes:create\",\n\t\t\t\tpayload,\n\t\t\t)) as RawNote;\n\t\t\treturn {\n\t\t\t\t...created,\n\t\t\t\tcreatedAt: new Date(created.createdAt),\n\t\t\t\tupdatedAt: created.updatedAt ? new Date(created.updatedAt) : undefined,\n\t\t\t};\n\t\t},\n\t\tupdateNote: async (payload: {\n\t\t\tid: string;\n\t\t\ttitle?: string;\n\t\t\tcontent?: string;\n\t\t\ttags?: string[];\n\t\t}) => {\n\t\t\tconst updated = (await ipcRenderer.invoke(\n\t\t\t\t\"notes:update\",\n\t\t\t\tpayload,\n\t\t\t)) as RawNote;\n\t\t\treturn {\n\t\t\t\t...updated,\n\t\t\t\tcreatedAt: new Date(updated.createdAt),\n\t\t\t\tupdatedAt: updated.updatedAt ? new Date(updated.updatedAt) : undefined,\n\t\t\t};\n\t\t},\n\t\tdeleteNote: async (id: string) => {\n\t\t\tconst removed = (await ipcRenderer.invoke(\"notes:delete\", id)) as RawNote;\n\t\t\treturn removed;\n\t\t},\n\t\trunPrompt: async (prompt: string): Promise<void> => {\n\t\t\tawait ipcRenderer.invoke(\"cards:run\", prompt);\n\t\t},\n\t});\n} catch (err) {\n\tlogPreloadError(\"[preload] Failed to expose API:\", err);\n}\n"
			},
			"tags": ["fixable"],
			"source": null
		},
		{
			"category": "lint/complexity/useOptionalChain",
			"severity": "warning",
			"description": "Change to an optional chain.",
			"message": [
				{ "elements": [], "content": "Change to an optional chain." }
			],
			"advices": {
				"advices": [
					{
						"log": [
							"info",
							[
								{
									"elements": [],
									"content": "Unsafe fix: Change to an optional chain."
								}
							]
						]
					},
					{
						"diff": {
							"dictionary": "import type { LearningCard } from \"../types\";\n\n/**\t\t// Combine system prompt with user prompt\n\t\tlet combinedPrompt = userPrompt;\n\t\tif (systemPrompt && systemPrompt.trim?.trim()) {\n\t\t\tcombinedPrompt = `${systemPrompt.trim()}\\n\\n${userPrompt}`;\n\t\t}// Export singleton instance\nexport const cardManager = new CardManager();\n",
							"ops": [
								{ "diffOp": { "equal": { "range": [0, 50] } } },
								{ "equalLines": { "line_count": 216 } },
								{ "diffOp": { "equal": { "range": [50, 135] } } },
								{ "diffOp": { "equal": { "range": [135, 147] } } },
								{ "diffOp": { "delete": { "range": [147, 168] } } },
								{ "diffOp": { "insert": { "range": [168, 174] } } },
								{ "diffOp": { "equal": { "range": [174, 176] } } },
								{ "diffOp": { "equal": { "range": [176, 246] } } },
								{ "equalLines": { "line_count": 54 } },
								{ "diffOp": { "equal": { "range": [246, 321] } } }
							]
						}
					}
				]
			},
			"verboseAdvices": { "advices": [] },
			"location": {
				"path": { "file": "src\\lib\\cardManager.svelte.ts" },
				"span": [4949, 4984],
				"sourceCode": "import type { LearningCard } from \"../types\";\n\n/**\n * Card Manager using Svelte 5 Runes\n * Universal reactive state for managing learning cards\n */\nclass CardManager {\n\t// Reactive state\n\tall = $state<LearningCard[]>([]);\n\tisLoading = $state(false);\n\tisFormOpen = $state(false);\n\n\t// Filter state\n\tfilterStatus = $state<\"all\" | \"active\" | \"done\">(\"all\");\n\tfilterQuery = $state(\"\");\n\tfilterProject = $state(\"all\");\n\n\t// Derived computed values using $derived\n\tget filtered(): LearningCard[] {\n\t\tlet result = this.all.slice();\n\n\t\t// Filter by status\n\t\tif (this.filterStatus !== \"all\") {\n\t\t\tresult = result.filter((c) =>\n\t\t\t\tthis.filterStatus === \"active\"\n\t\t\t\t\t? c.status === \"active\"\n\t\t\t\t\t: c.status === \"done\",\n\t\t\t);\n\t\t}\n\n\t\t// Filter by project\n\t\tif (this.filterProject && this.filterProject !== \"all\") {\n\t\t\tresult = result.filter((c) => (c.project || \"\") === this.filterProject);\n\t\t}\n\n\t\t// Filter by search query\n\t\tif (this.filterQuery && this.filterQuery.trim() !== \"\") {\n\t\t\tconst q = this.filterQuery.toLowerCase();\n\t\t\tresult = result.filter((c) => {\n\t\t\t\treturn (\n\t\t\t\t\t(c.title || \"\").toLowerCase().includes(q) ||\n\t\t\t\t\t(c.prompt || \"\").toLowerCase().includes(q) ||\n\t\t\t\t\t(c.topic || \"\").toLowerCase().includes(q) ||\n\t\t\t\t\t(c.project || \"\").toLowerCase().includes(q)\n\t\t\t\t);\n\t\t\t});\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tget activeCards(): LearningCard[] {\n\t\treturn this.all.filter((c) => c.status === \"active\");\n\t}\n\n\tget completedCards(): LearningCard[] {\n\t\treturn this.all.filter((c) => c.status === \"done\");\n\t}\n\n\tget cardCount(): number {\n\t\treturn this.all.length;\n\t}\n\n\t/**\n\t * Load all cards from Electron IPC\n\t */\n\tasync loadCards() {\n\t\tif (typeof window === \"undefined\" || !(\"api\" in window)) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.isLoading = true;\n\t\ttry {\n\t\t\tconst rawCards = await (\n\t\t\t\twindow as typeof window & { api: typeof window.api }\n\t\t\t).api.getCards();\n\t\t\tconst cards: LearningCard[] = rawCards\n\t\t\t\t.map((c: LearningCard) => ({\n\t\t\t\t\t...c,\n\t\t\t\t\tcreatedAt: new Date(c.createdAt),\n\t\t\t\t}))\n\t\t\t\t.sort(\n\t\t\t\t\t(a: LearningCard, b: LearningCard) =>\n\t\t\t\t\t\tb.createdAt.getTime() - a.createdAt.getTime(),\n\t\t\t\t);\n\n\t\t\tthis.all = cards;\n\t\t} catch (err) {\n\t\t\tconsole.error(\"Failed to load cards:\", err);\n\t\t} finally {\n\t\t\tthis.isLoading = false;\n\t\t}\n\t}\n\n\t/**\n\t * Add a new card\n\t */\n\tasync addCard(data: {\n\t\ttitle: string;\n\t\tprompt: string;\n\t\ttopic?: string;\n\t\tproject?: string;\n\t}) {\n\t\tif (typeof window === \"undefined\" || !(\"api\" in window)) {\n\t\t\treturn;\n\t\t}\n\n\t\ttry {\n\t\t\tconst newCard: LearningCard = await (\n\t\t\t\twindow as typeof window & { api: typeof window.api }\n\t\t\t).api.addCard(data);\n\t\t\tthis.all = [newCard, ...this.all];\n\t\t\treturn newCard;\n\t\t} catch (err) {\n\t\t\tconsole.error(\"Failed to add card:\", err);\n\t\t\tthrow err;\n\t\t}\n\t}\n\n\t/**\n\t * Update an existing card\n\t */\n\tasync updateCard(payload: {\n\t\tid: string;\n\t\ttitle?: string;\n\t\tprompt?: string;\n\t\ttopic?: string;\n\t\tproject?: string;\n\t}) {\n\t\tif (typeof window === \"undefined\" || !(\"api\" in window)) {\n\t\t\treturn;\n\t\t}\n\n\t\ttry {\n\t\t\tconst updated: LearningCard = await (\n\t\t\t\twindow as typeof window & { api: typeof window.api }\n\t\t\t).api.updateCard(payload);\n\n\t\t\tconst index = this.all.findIndex((c) => c.id === payload.id);\n\t\t\tif (index !== -1) {\n\t\t\t\tthis.all[index] = updated;\n\t\t\t}\n\n\t\t\treturn updated;\n\t\t} catch (err) {\n\t\t\tconsole.error(\"Failed to update card:\", err);\n\t\t\tthrow err;\n\t\t}\n\t}\n\n\t/**\n\t * Delete a card\n\t */\n\tasync deleteCard(id: string) {\n\t\tif (typeof window === \"undefined\" || !(\"api\" in window)) {\n\t\t\treturn;\n\t\t}\n\n\t\ttry {\n\t\t\tawait (\n\t\t\t\twindow as typeof window & { api: typeof window.api }\n\t\t\t).api.deleteCard(id);\n\t\t\tthis.all = this.all.filter((c) => c.id !== id);\n\t\t} catch (err) {\n\t\t\tconsole.error(\"Failed to delete card:\", err);\n\t\t\tthrow err;\n\t\t}\n\t}\n\n\t/**\n\t * Update card status\n\t */\n\tasync updateCardStatus(id: string, status: \"active\" | \"done\") {\n\t\tif (typeof window === \"undefined\" || !(\"api\" in window)) {\n\t\t\treturn;\n\t\t}\n\n\t\ttry {\n\t\t\tawait (\n\t\t\t\twindow as typeof window & { api: typeof window.api }\n\t\t\t).api.toggleCard(id, status);\n\t\t\t// Update local state\n\t\t\tconst index = this.all.findIndex((c) => c.id === id);\n\t\t\tif (index !== -1) {\n\t\t\t\tthis.all[index] = { ...this.all[index], status };\n\t\t\t}\n\t\t} catch (err) {\n\t\t\tconsole.error(\"Failed to update card status:\", err);\n\t\t\tthrow err;\n\t\t}\n\t}\n\n\t/**\n\t * Run a card's prompt in ChatGPT\n\t */\n\tasync runPrompt(prompt: string) {\n\t\tif (typeof window === \"undefined\" || !(\"api\" in window)) {\n\t\t\treturn;\n\t\t}\n\n\t\ttry {\n\t\t\tawait (\n\t\t\t\twindow as typeof window & { api: typeof window.api }\n\t\t\t).api.runPrompt(prompt);\n\t\t} catch (err) {\n\t\t\tconsole.error(\"Failed to run prompt:\", err);\n\t\t\tthrow err;\n\t\t}\n\t}\n\n\t/**\n\t * Run a card's prompt with optional system prompt in ChatGPT\n\t * System prompt will be prepended to the user prompt\n\t */\n\tasync runPromptWithSystem(userPrompt: string, systemPrompt?: string) {\n\t\tif (typeof window === \"undefined\" || !(\"api\" in window)) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Combine system prompt with user prompt\n\t\tlet combinedPrompt = userPrompt;\n\t\tif (systemPrompt && systemPrompt.trim()) {\n\t\t\tcombinedPrompt = `${systemPrompt.trim()}\\n\\n${userPrompt}`;\n\t\t}\n\n\t\ttry {\n\t\t\tawait (\n\t\t\t\twindow as typeof window & { api: typeof window.api }\n\t\t\t).api.runPrompt(combinedPrompt);\n\t\t} catch (err) {\n\t\t\tconsole.error(\"Failed to run prompt:\", err);\n\t\t\tthrow err;\n\t\t}\n\t}\n\n\t/**\n\t * Toggle the add form visibility\n\t */\n\ttoggleForm() {\n\t\tthis.isFormOpen = !this.isFormOpen;\n\t}\n\n\t/**\n\t * Open the add form\n\t */\n\topenForm() {\n\t\tthis.isFormOpen = true;\n\t}\n\n\t/**\n\t * Close the add form\n\t */\n\tcloseForm() {\n\t\tthis.isFormOpen = false;\n\t}\n\n\t/**\n\t * Set filter status\n\t */\n\tsetFilterStatus(status: \"all\" | \"active\" | \"done\") {\n\t\tthis.filterStatus = status;\n\t}\n\n\t/**\n\t * Set filter query\n\t */\n\tsetFilterQuery(query: string) {\n\t\tthis.filterQuery = query;\n\t}\n\n\t/**\n\t * Set filter project\n\t */\n\tsetFilterProject(projectId: string) {\n\t\tthis.filterProject = projectId;\n\t}\n}\n\n// Export singleton instance\nexport const cardManager = new CardManager();\n"
			},
			"tags": ["fixable"],
			"source": null
		},
		{
			"category": "lint/style/useConst",
			"severity": "warning",
			"description": "This let declares a variable that is only assigned once.",
			"message": [
				{ "elements": [], "content": "This " },
				{ "elements": ["Emphasis"], "content": "let" },
				{
					"elements": [],
					"content": " declares a variable that is only assigned once."
				}
			],
			"advices": {
				"advices": [
					{
						"log": [
							"info",
							[
								{
									"elements": [],
									"content": "'formElement' is never reassigned."
								}
							]
						]
					},
					{
						"frame": {
							"path": null,
							"span": [2065, 2076],
							"sourceCode": "<script lang=\"ts\">\n/* global HTMLElement setTimeout */\nimport { projectManager } from \"../projectManager.svelte\";\n\ninterface Props {\n\tonSubmit: (data: {\n\t\ttitle: string;\n\t\tprompt: string;\n\t\ttopic?: string;\n\t\tproject?: string;\n\t}) => Promise<void>;\n\tonCancel?: () => void;\n\tinitialProject?: string;\n}\n\nconst { onSubmit, onCancel, initialProject }: Props = $props();\n\n// Local state using Svelte 5 runes\nlet title = $state(\"\");\nlet topic = $state(\"\");\nlet project = $state(\"\");\n$effect(() => {\n\tproject =\n\t\tinitialProject ??\n\t\t(projectManager.selectedProject !== \"all\" &&\n\t\tprojectManager.selectedProject !== \"create\"\n\t\t\t? projectManager.selectedProject\n\t\t\t: \"\");\n});\nlet creatingProject = $state(false);\nlet prompt = $state(\"\");\nlet status = $state(\"\");\nlet isSubmitting = $state(false);\n\n// Derived validation state\nconst titleError = $derived.by(() => {\n\tconst trimmed = title.trim();\n\tif (trimmed.length === 0) return \"\";\n\tif (trimmed.length < 3) return \"Title must be at least 3 characters\";\n\tif (trimmed.length > 100) return \"Title must be less than 100 characters\";\n\treturn \"\";\n});\n\nconst promptError = $derived.by(() => {\n\tconst trimmed = prompt.trim();\n\tif (trimmed.length === 0) return \"\";\n\tif (trimmed.length < 10) return \"Prompt must be at least 10 characters\";\n\tif (trimmed.length > 8000) return \"Prompt must be less than 8000 characters\";\n\treturn \"\";\n});\n\nconst projectError = $derived.by(() => {\n\tif (creatingProject) {\n\t\tconst trimmed = project.trim();\n\t\tif (trimmed.length === 0) return \"Project name is required\";\n\t\tif (trimmed.length < 2) return \"Project name must be at least 2 characters\";\n\t\tif (trimmed.length > 50)\n\t\t\treturn \"Project name must be less than 50 characters\";\n\t\t// Check for duplicate project names\n\t\tif (\n\t\t\tprojectManager.all.some(\n\t\t\t\t(p) => p.name.toLowerCase() === trimmed.toLowerCase(),\n\t\t\t)\n\t\t) {\n\t\t\treturn \"A project with this name already exists\";\n\t\t}\n\t}\n\treturn \"\";\n});\n\nconst isValid = $derived.by(() => {\n\treturn (\n\t\ttitle.trim().length > 0 &&\n\t\tprompt.trim().length > 0 &&\n\t\t!titleError &&\n\t\t!promptError &&\n\t\t!projectError\n\t);\n});\n\nlet formElement: HTMLElement | null = null;\nlet firstFocusableElement: HTMLElement | null = null;\nlet lastFocusableElement: HTMLElement | null = null;\n\n// Focus / accessibility handled by ModalContainer when used as modal; keep simple on-mount focus\n$effect(() => {\n\tconst titleInput = document.getElementById(\n\t\t\"title\",\n\t) as HTMLInputElement | null;\n\tif (titleInput) setTimeout(() => titleInput.focus(), 0);\n});\n\nasync function handleSubmit(e: SubmitEvent) {\n\te.preventDefault();\n\n\tif (!isValid || isSubmitting) return;\n\n\tisSubmitting = true;\n\tstatus = \"\";\n\n\ttry {\n\t\tawait onSubmit({\n\t\t\ttitle: title.trim(),\n\t\t\tprompt: prompt.trim(),\n\t\t\ttopic: topic.trim() || undefined,\n\t\t\tproject: creatingProject\n\t\t\t\t? project.trim() || undefined\n\t\t\t\t: project || undefined,\n\t\t});\n\n\t\t// Success - clear form and close\n\t\tclearForm();\n\t\tonCancel?.();\n\n\t\t// Announce to screen readers\n\t\tannounceToSR(`Card \"${title}\" added successfully`);\n\t} catch (err) {\n\t\tstatus = err instanceof Error ? err.message : \"Failed to add card\";\n\t\tannounceToSR(status);\n\t} finally {\n\t\tisSubmitting = false;\n\t}\n}\n\nfunction handleProjectChange(e: Event) {\n\tconst select = e.target as HTMLSelectElement;\n\tif (select.value === \"__create__\") {\n\t\tcreatingProject = true;\n\t\tproject = \"\";\n\t} else {\n\t\tcreatingProject = false;\n\t\tproject = select.value;\n\t}\n}\n\nfunction clearForm() {\n\ttitle = \"\";\n\ttopic = \"\";\n\tproject = \"\";\n\tcreatingProject = false;\n\tprompt = \"\";\n\tstatus = \"\";\n}\n\nfunction handleCancel() {\n\tclearForm();\n\tonCancel?.();\n}\n\nfunction announceToSR(message: string) {\n\tconst announcer = document.getElementById(\"sr-announcements\");\n\tif (announcer) {\n\t\tannouncer.textContent = message;\n\t}\n}\n</script>\n\n\t<section id=\"add-section\" bind:this={formElement}>\n\t\t<form onsubmit={handleSubmit} aria-labelledby=\"add-heading\">\n\t\t\t<h2>New Card Details</h2>\n\n\t\t\t{#if status}\n\t\t\t\t<div role=\"status\" class=\"form-status\">{status}</div>\n\t\t\t{/if}\n\n\t\t\t<div class=\"field\">\n\t\t\t\t<label for=\"title\">\n\t\t\t\t\tTitle <span class=\"required\">*</span>\n\t\t\t\t</label>\n\t\t\t\t<input\n\t\t\t\t\tid=\"title\"\n\t\t\t\t\tbind:value={title}\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tautocomplete=\"off\"\n\t\t\t\t\trequired\n\t\t\t\t\tdisabled={isSubmitting}\n\t\t\t\t\tclass:error={titleError}\n\t\t\t\t/>\n\t\t\t\t{#if titleError}\n\t\t\t\t\t<span class=\"error-message\">{titleError}</span>\n\t\t\t\t{:else}\n\t\t\t\t\t<span class=\"hint\">Give your learning card a clear, memorable name.</span>\n\t\t\t\t{/if}\n\t\t\t</div>\n\n\t\t\t<div class=\"field\">\n\t\t\t\t<label for=\"topic\">\n\t\t\t\t\tTopic <span class=\"optional\">(optional)</span>\n\t\t\t\t</label>\n\t\t\t\t<input\n\t\t\t\t\tid=\"topic\"\n\t\t\t\t\tbind:value={topic}\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tautocomplete=\"off\"\n\t\t\t\t\tdisabled={isSubmitting}\n\t\t\t\t/>\n\t\t\t\t<span class=\"hint\">e.g., JavaScript, Design Patterns, Math</span>\n\t\t\t</div>\n\n\t\t\t<div class=\"field\">\n\t\t\t\t<label for=\"project-select\">Project <span class=\"optional\">(optional)</span></label>\n\t\t\t\t<select\n\t\t\t\t\tid=\"project-select\"\n\t\t\t\t\tbind:value={project}\n\t\t\t\t\tonchange={handleProjectChange}\n\t\t\t\t\tdisabled={isSubmitting}\n\t\t\t\t\taria-describedby=\"project-hint\"\n\t\t\t\t>\n\t\t\t\t\t<option value=\"\">Select a project</option>\n\t\t\t\t\t{#each projectManager.all as p (p.id)}\n\t\t\t\t\t\t<option value={p.id}>{p.name}</option>\n\t\t\t\t\t{/each}\n\t\t\t\t\t<option value=\"__create__\">+ Create new project...</option>\n\t\t\t\t</select>\n\t\t\t\t<span id=\"project-hint\" class=\"hint\">Assign this card to a project or create a new one.</span>\n\t\t\t</div>\n\n\t\t\t{#if creatingProject}\n\t\t\t\t<div class=\"field\">\n\t\t\t\t\t<label for=\"project\">New project name <span class=\"required\">*</span></label>\n\t\t\t\t\t<input\n\t\t\t\t\t\tid=\"project\"\n\t\t\t\t\t\tbind:value={project}\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tautocomplete=\"off\"\n\t\t\t\t\t\tdisabled={isSubmitting}\n\t\t\t\t\t\tclass:error={projectError}\n\t\t\t\t\t/>\n\t\t\t\t\t{#if projectError}\n\t\t\t\t\t\t<span class=\"error-message\">{projectError}</span>\n\t\t\t\t\t{:else}\n\t\t\t\t\t\t<span class=\"hint\">Give your project a short, unique name.</span>\n\t\t\t\t\t{/if}\n\t\t\t\t</div>\n\t\t\t{/if}\n\n\t\t\t<div class=\"field\">\n\t\t\t\t<label for=\"prompt\">\n\t\t\t\t\tLearning prompt <span class=\"required\">*</span>\n\t\t\t\t</label>\n\t\t\t\t<textarea\n\t\t\t\t\tid=\"prompt\"\n\t\t\t\t\tbind:value={prompt}\n\t\t\t\t\trequired\n\t\t\t\t\tdisabled={isSubmitting}\n\t\t\t\t\tplaceholder=\"e.g. Explain the concept of closures in JavaScript\"\n\t\t\t\t\tclass:error={promptError}\n\t\t\t\t></textarea>\n\t\t\t\t{#if promptError}\n\t\t\t\t\t<span class=\"error-message\">{promptError}</span>\n\t\t\t\t{:else}\n\t\t\t\t\t<span class=\"hint\">What do you want to learn or understand?</span>\n\t\t\t\t{/if}\n\t\t\t</div>\n\n\t\t\t<div class=\"form-actions\">\n\t\t\t\t<button type=\"submit\" class=\"primary\" disabled={!isValid || isSubmitting}>\n\t\t\t\t\t{isSubmitting ? 'Saving...' : 'Save card'}\n\t\t\t\t</button>\n\t\t\t\t<button type=\"button\" class=\"ghost\" onclick={handleCancel} disabled={isSubmitting}>\n\t\t\t\t\tCancel\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</form>\n\t</section>\n"
						}
					},
					{
						"log": [
							"info",
							[
								{ "elements": [], "content": "Safe fix: Use " },
								{ "elements": ["Emphasis"], "content": "const" },
								{ "elements": [], "content": " instead." }
							]
						]
					},
					{
						"diff": {
							"dictionary": "/* global HTMLElement setTimeout */\nimport { projectManager } from \"../projectManager.svelte\";\n\t\t!projectError\n\t);\n});\n\nletconst formElement: HTMLElement | null = null;\nlet firstFocusableElement: HTMLElement | null = null;\nlet lastFocusableElement: HTMLElement | null = null;\t}\n}\n",
							"ops": [
								{ "diffOp": { "equal": { "range": [0, 95] } } },
								{ "equalLines": { "line_count": 72 } },
								{ "diffOp": { "equal": { "range": [95, 118] } } },
								{ "diffOp": { "equal": { "range": [118, 120] } } },
								{ "diffOp": { "delete": { "range": [120, 123] } } },
								{ "diffOp": { "insert": { "range": [123, 128] } } },
								{ "diffOp": { "equal": { "range": [128, 129] } } },
								{ "diffOp": { "equal": { "range": [129, 275] } } },
								{ "equalLines": { "line_count": 70 } },
								{ "diffOp": { "equal": { "range": [275, 280] } } }
							]
						}
					}
				]
			},
			"verboseAdvices": { "advices": [] },
			"location": {
				"path": { "file": "src\\lib\\components\\AddForm.svelte" },
				"span": [2080, 2083],
				"sourceCode": "<script lang=\"ts\">\n/* global HTMLElement setTimeout */\nimport { projectManager } from \"../projectManager.svelte\";\n\ninterface Props {\n\tonSubmit: (data: {\n\t\ttitle: string;\n\t\tprompt: string;\n\t\ttopic?: string;\n\t\tproject?: string;\n\t}) => Promise<void>;\n\tonCancel?: () => void;\n\tinitialProject?: string;\n}\n\nconst { onSubmit, onCancel, initialProject }: Props = $props();\n\n// Local state using Svelte 5 runes\nlet title = $state(\"\");\nlet topic = $state(\"\");\nlet project = $state(\"\");\n$effect(() => {\n\tproject =\n\t\tinitialProject ??\n\t\t(projectManager.selectedProject !== \"all\" &&\n\t\tprojectManager.selectedProject !== \"create\"\n\t\t\t? projectManager.selectedProject\n\t\t\t: \"\");\n});\nlet creatingProject = $state(false);\nlet prompt = $state(\"\");\nlet status = $state(\"\");\nlet isSubmitting = $state(false);\n\n// Derived validation state\nconst titleError = $derived.by(() => {\n\tconst trimmed = title.trim();\n\tif (trimmed.length === 0) return \"\";\n\tif (trimmed.length < 3) return \"Title must be at least 3 characters\";\n\tif (trimmed.length > 100) return \"Title must be less than 100 characters\";\n\treturn \"\";\n});\n\nconst promptError = $derived.by(() => {\n\tconst trimmed = prompt.trim();\n\tif (trimmed.length === 0) return \"\";\n\tif (trimmed.length < 10) return \"Prompt must be at least 10 characters\";\n\tif (trimmed.length > 8000) return \"Prompt must be less than 8000 characters\";\n\treturn \"\";\n});\n\nconst projectError = $derived.by(() => {\n\tif (creatingProject) {\n\t\tconst trimmed = project.trim();\n\t\tif (trimmed.length === 0) return \"Project name is required\";\n\t\tif (trimmed.length < 2) return \"Project name must be at least 2 characters\";\n\t\tif (trimmed.length > 50)\n\t\t\treturn \"Project name must be less than 50 characters\";\n\t\t// Check for duplicate project names\n\t\tif (\n\t\t\tprojectManager.all.some(\n\t\t\t\t(p) => p.name.toLowerCase() === trimmed.toLowerCase(),\n\t\t\t)\n\t\t) {\n\t\t\treturn \"A project with this name already exists\";\n\t\t}\n\t}\n\treturn \"\";\n});\n\nconst isValid = $derived.by(() => {\n\treturn (\n\t\ttitle.trim().length > 0 &&\n\t\tprompt.trim().length > 0 &&\n\t\t!titleError &&\n\t\t!promptError &&\n\t\t!projectError\n\t);\n});\n\nlet formElement: HTMLElement | null = null;\nlet firstFocusableElement: HTMLElement | null = null;\nlet lastFocusableElement: HTMLElement | null = null;\n\n// Focus / accessibility handled by ModalContainer when used as modal; keep simple on-mount focus\n$effect(() => {\n\tconst titleInput = document.getElementById(\n\t\t\"title\",\n\t) as HTMLInputElement | null;\n\tif (titleInput) setTimeout(() => titleInput.focus(), 0);\n});\n\nasync function handleSubmit(e: SubmitEvent) {\n\te.preventDefault();\n\n\tif (!isValid || isSubmitting) return;\n\n\tisSubmitting = true;\n\tstatus = \"\";\n\n\ttry {\n\t\tawait onSubmit({\n\t\t\ttitle: title.trim(),\n\t\t\tprompt: prompt.trim(),\n\t\t\ttopic: topic.trim() || undefined,\n\t\t\tproject: creatingProject\n\t\t\t\t? project.trim() || undefined\n\t\t\t\t: project || undefined,\n\t\t});\n\n\t\t// Success - clear form and close\n\t\tclearForm();\n\t\tonCancel?.();\n\n\t\t// Announce to screen readers\n\t\tannounceToSR(`Card \"${title}\" added successfully`);\n\t} catch (err) {\n\t\tstatus = err instanceof Error ? err.message : \"Failed to add card\";\n\t\tannounceToSR(status);\n\t} finally {\n\t\tisSubmitting = false;\n\t}\n}\n\nfunction handleProjectChange(e: Event) {\n\tconst select = e.target as HTMLSelectElement;\n\tif (select.value === \"__create__\") {\n\t\tcreatingProject = true;\n\t\tproject = \"\";\n\t} else {\n\t\tcreatingProject = false;\n\t\tproject = select.value;\n\t}\n}\n\nfunction clearForm() {\n\ttitle = \"\";\n\ttopic = \"\";\n\tproject = \"\";\n\tcreatingProject = false;\n\tprompt = \"\";\n\tstatus = \"\";\n}\n\nfunction handleCancel() {\n\tclearForm();\n\tonCancel?.();\n}\n\nfunction announceToSR(message: string) {\n\tconst announcer = document.getElementById(\"sr-announcements\");\n\tif (announcer) {\n\t\tannouncer.textContent = message;\n\t}\n}\n</script>\n\n\t<section id=\"add-section\" bind:this={formElement}>\n\t\t<form onsubmit={handleSubmit} aria-labelledby=\"add-heading\">\n\t\t\t<h2>New Card Details</h2>\n\n\t\t\t{#if status}\n\t\t\t\t<div role=\"status\" class=\"form-status\">{status}</div>\n\t\t\t{/if}\n\n\t\t\t<div class=\"field\">\n\t\t\t\t<label for=\"title\">\n\t\t\t\t\tTitle <span class=\"required\">*</span>\n\t\t\t\t</label>\n\t\t\t\t<input\n\t\t\t\t\tid=\"title\"\n\t\t\t\t\tbind:value={title}\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tautocomplete=\"off\"\n\t\t\t\t\trequired\n\t\t\t\t\tdisabled={isSubmitting}\n\t\t\t\t\tclass:error={titleError}\n\t\t\t\t/>\n\t\t\t\t{#if titleError}\n\t\t\t\t\t<span class=\"error-message\">{titleError}</span>\n\t\t\t\t{:else}\n\t\t\t\t\t<span class=\"hint\">Give your learning card a clear, memorable name.</span>\n\t\t\t\t{/if}\n\t\t\t</div>\n\n\t\t\t<div class=\"field\">\n\t\t\t\t<label for=\"topic\">\n\t\t\t\t\tTopic <span class=\"optional\">(optional)</span>\n\t\t\t\t</label>\n\t\t\t\t<input\n\t\t\t\t\tid=\"topic\"\n\t\t\t\t\tbind:value={topic}\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tautocomplete=\"off\"\n\t\t\t\t\tdisabled={isSubmitting}\n\t\t\t\t/>\n\t\t\t\t<span class=\"hint\">e.g., JavaScript, Design Patterns, Math</span>\n\t\t\t</div>\n\n\t\t\t<div class=\"field\">\n\t\t\t\t<label for=\"project-select\">Project <span class=\"optional\">(optional)</span></label>\n\t\t\t\t<select\n\t\t\t\t\tid=\"project-select\"\n\t\t\t\t\tbind:value={project}\n\t\t\t\t\tonchange={handleProjectChange}\n\t\t\t\t\tdisabled={isSubmitting}\n\t\t\t\t\taria-describedby=\"project-hint\"\n\t\t\t\t>\n\t\t\t\t\t<option value=\"\">Select a project</option>\n\t\t\t\t\t{#each projectManager.all as p (p.id)}\n\t\t\t\t\t\t<option value={p.id}>{p.name}</option>\n\t\t\t\t\t{/each}\n\t\t\t\t\t<option value=\"__create__\">+ Create new project...</option>\n\t\t\t\t</select>\n\t\t\t\t<span id=\"project-hint\" class=\"hint\">Assign this card to a project or create a new one.</span>\n\t\t\t</div>\n\n\t\t\t{#if creatingProject}\n\t\t\t\t<div class=\"field\">\n\t\t\t\t\t<label for=\"project\">New project name <span class=\"required\">*</span></label>\n\t\t\t\t\t<input\n\t\t\t\t\t\tid=\"project\"\n\t\t\t\t\t\tbind:value={project}\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tautocomplete=\"off\"\n\t\t\t\t\t\tdisabled={isSubmitting}\n\t\t\t\t\t\tclass:error={projectError}\n\t\t\t\t\t/>\n\t\t\t\t\t{#if projectError}\n\t\t\t\t\t\t<span class=\"error-message\">{projectError}</span>\n\t\t\t\t\t{:else}\n\t\t\t\t\t\t<span class=\"hint\">Give your project a short, unique name.</span>\n\t\t\t\t\t{/if}\n\t\t\t\t</div>\n\t\t\t{/if}\n\n\t\t\t<div class=\"field\">\n\t\t\t\t<label for=\"prompt\">\n\t\t\t\t\tLearning prompt <span class=\"required\">*</span>\n\t\t\t\t</label>\n\t\t\t\t<textarea\n\t\t\t\t\tid=\"prompt\"\n\t\t\t\t\tbind:value={prompt}\n\t\t\t\t\trequired\n\t\t\t\t\tdisabled={isSubmitting}\n\t\t\t\t\tplaceholder=\"e.g. Explain the concept of closures in JavaScript\"\n\t\t\t\t\tclass:error={promptError}\n\t\t\t\t></textarea>\n\t\t\t\t{#if promptError}\n\t\t\t\t\t<span class=\"error-message\">{promptError}</span>\n\t\t\t\t{:else}\n\t\t\t\t\t<span class=\"hint\">What do you want to learn or understand?</span>\n\t\t\t\t{/if}\n\t\t\t</div>\n\n\t\t\t<div class=\"form-actions\">\n\t\t\t\t<button type=\"submit\" class=\"primary\" disabled={!isValid || isSubmitting}>\n\t\t\t\t\t{isSubmitting ? 'Saving...' : 'Save card'}\n\t\t\t\t</button>\n\t\t\t\t<button type=\"button\" class=\"ghost\" onclick={handleCancel} disabled={isSubmitting}>\n\t\t\t\t\tCancel\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</form>\n\t</section>\n"
			},
			"tags": ["fixable"],
			"source": null
		},
		{
			"category": "lint/correctness/noUnusedVariables",
			"severity": "warning",
			"description": "This variable formElement is unused.",
			"message": [
				{ "elements": [], "content": "This variable " },
				{ "elements": ["Emphasis"], "content": "formElement" },
				{ "elements": [], "content": " is unused." }
			],
			"advices": {
				"advices": [
					{
						"log": [
							"info",
							[
								{
									"elements": [],
									"content": "Unused variables are often the result of typos, incomplete refactors, or other sources of bugs."
								}
							]
						]
					},
					{
						"log": [
							"info",
							[
								{
									"elements": [],
									"content": "Unsafe fix: If this is intentional, prepend "
								},
								{ "elements": ["Emphasis"], "content": "formElement" },
								{ "elements": [], "content": " with an underscore." }
							]
						]
					},
					{
						"diff": {
							"dictionary": "/* global HTMLElement setTimeout */\nimport { projectManager } from \"../projectManager.svelte\";\n});\n\nlet formElement_formElement: HTMLElement | null = null;\nlet firstFocusableElement: HTMLElement | null = null;\nlet lastFocusableElement: HTMLElement | null = null;\t}\n}\n",
							"ops": [
								{ "diffOp": { "equal": { "range": [0, 95] } } },
								{ "equalLines": { "line_count": 74 } },
								{ "diffOp": { "equal": { "range": [95, 104] } } },
								{ "diffOp": { "delete": { "range": [104, 115] } } },
								{ "diffOp": { "insert": { "range": [115, 127] } } },
								{ "diffOp": { "equal": { "range": [127, 262] } } },
								{ "equalLines": { "line_count": 70 } },
								{ "diffOp": { "equal": { "range": [262, 267] } } }
							]
						}
					}
				]
			},
			"verboseAdvices": { "advices": [] },
			"location": {
				"path": { "file": "src\\lib\\components\\AddForm.svelte" },
				"span": [2084, 2095],
				"sourceCode": "<script lang=\"ts\">\n/* global HTMLElement setTimeout */\nimport { projectManager } from \"../projectManager.svelte\";\n\ninterface Props {\n\tonSubmit: (data: {\n\t\ttitle: string;\n\t\tprompt: string;\n\t\ttopic?: string;\n\t\tproject?: string;\n\t}) => Promise<void>;\n\tonCancel?: () => void;\n\tinitialProject?: string;\n}\n\nconst { onSubmit, onCancel, initialProject }: Props = $props();\n\n// Local state using Svelte 5 runes\nlet title = $state(\"\");\nlet topic = $state(\"\");\nlet project = $state(\"\");\n$effect(() => {\n\tproject =\n\t\tinitialProject ??\n\t\t(projectManager.selectedProject !== \"all\" &&\n\t\tprojectManager.selectedProject !== \"create\"\n\t\t\t? projectManager.selectedProject\n\t\t\t: \"\");\n});\nlet creatingProject = $state(false);\nlet prompt = $state(\"\");\nlet status = $state(\"\");\nlet isSubmitting = $state(false);\n\n// Derived validation state\nconst titleError = $derived.by(() => {\n\tconst trimmed = title.trim();\n\tif (trimmed.length === 0) return \"\";\n\tif (trimmed.length < 3) return \"Title must be at least 3 characters\";\n\tif (trimmed.length > 100) return \"Title must be less than 100 characters\";\n\treturn \"\";\n});\n\nconst promptError = $derived.by(() => {\n\tconst trimmed = prompt.trim();\n\tif (trimmed.length === 0) return \"\";\n\tif (trimmed.length < 10) return \"Prompt must be at least 10 characters\";\n\tif (trimmed.length > 8000) return \"Prompt must be less than 8000 characters\";\n\treturn \"\";\n});\n\nconst projectError = $derived.by(() => {\n\tif (creatingProject) {\n\t\tconst trimmed = project.trim();\n\t\tif (trimmed.length === 0) return \"Project name is required\";\n\t\tif (trimmed.length < 2) return \"Project name must be at least 2 characters\";\n\t\tif (trimmed.length > 50)\n\t\t\treturn \"Project name must be less than 50 characters\";\n\t\t// Check for duplicate project names\n\t\tif (\n\t\t\tprojectManager.all.some(\n\t\t\t\t(p) => p.name.toLowerCase() === trimmed.toLowerCase(),\n\t\t\t)\n\t\t) {\n\t\t\treturn \"A project with this name already exists\";\n\t\t}\n\t}\n\treturn \"\";\n});\n\nconst isValid = $derived.by(() => {\n\treturn (\n\t\ttitle.trim().length > 0 &&\n\t\tprompt.trim().length > 0 &&\n\t\t!titleError &&\n\t\t!promptError &&\n\t\t!projectError\n\t);\n});\n\nlet formElement: HTMLElement | null = null;\nlet firstFocusableElement: HTMLElement | null = null;\nlet lastFocusableElement: HTMLElement | null = null;\n\n// Focus / accessibility handled by ModalContainer when used as modal; keep simple on-mount focus\n$effect(() => {\n\tconst titleInput = document.getElementById(\n\t\t\"title\",\n\t) as HTMLInputElement | null;\n\tif (titleInput) setTimeout(() => titleInput.focus(), 0);\n});\n\nasync function handleSubmit(e: SubmitEvent) {\n\te.preventDefault();\n\n\tif (!isValid || isSubmitting) return;\n\n\tisSubmitting = true;\n\tstatus = \"\";\n\n\ttry {\n\t\tawait onSubmit({\n\t\t\ttitle: title.trim(),\n\t\t\tprompt: prompt.trim(),\n\t\t\ttopic: topic.trim() || undefined,\n\t\t\tproject: creatingProject\n\t\t\t\t? project.trim() || undefined\n\t\t\t\t: project || undefined,\n\t\t});\n\n\t\t// Success - clear form and close\n\t\tclearForm();\n\t\tonCancel?.();\n\n\t\t// Announce to screen readers\n\t\tannounceToSR(`Card \"${title}\" added successfully`);\n\t} catch (err) {\n\t\tstatus = err instanceof Error ? err.message : \"Failed to add card\";\n\t\tannounceToSR(status);\n\t} finally {\n\t\tisSubmitting = false;\n\t}\n}\n\nfunction handleProjectChange(e: Event) {\n\tconst select = e.target as HTMLSelectElement;\n\tif (select.value === \"__create__\") {\n\t\tcreatingProject = true;\n\t\tproject = \"\";\n\t} else {\n\t\tcreatingProject = false;\n\t\tproject = select.value;\n\t}\n}\n\nfunction clearForm() {\n\ttitle = \"\";\n\ttopic = \"\";\n\tproject = \"\";\n\tcreatingProject = false;\n\tprompt = \"\";\n\tstatus = \"\";\n}\n\nfunction handleCancel() {\n\tclearForm();\n\tonCancel?.();\n}\n\nfunction announceToSR(message: string) {\n\tconst announcer = document.getElementById(\"sr-announcements\");\n\tif (announcer) {\n\t\tannouncer.textContent = message;\n\t}\n}\n</script>\n\n\t<section id=\"add-section\" bind:this={formElement}>\n\t\t<form onsubmit={handleSubmit} aria-labelledby=\"add-heading\">\n\t\t\t<h2>New Card Details</h2>\n\n\t\t\t{#if status}\n\t\t\t\t<div role=\"status\" class=\"form-status\">{status}</div>\n\t\t\t{/if}\n\n\t\t\t<div class=\"field\">\n\t\t\t\t<label for=\"title\">\n\t\t\t\t\tTitle <span class=\"required\">*</span>\n\t\t\t\t</label>\n\t\t\t\t<input\n\t\t\t\t\tid=\"title\"\n\t\t\t\t\tbind:value={title}\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tautocomplete=\"off\"\n\t\t\t\t\trequired\n\t\t\t\t\tdisabled={isSubmitting}\n\t\t\t\t\tclass:error={titleError}\n\t\t\t\t/>\n\t\t\t\t{#if titleError}\n\t\t\t\t\t<span class=\"error-message\">{titleError}</span>\n\t\t\t\t{:else}\n\t\t\t\t\t<span class=\"hint\">Give your learning card a clear, memorable name.</span>\n\t\t\t\t{/if}\n\t\t\t</div>\n\n\t\t\t<div class=\"field\">\n\t\t\t\t<label for=\"topic\">\n\t\t\t\t\tTopic <span class=\"optional\">(optional)</span>\n\t\t\t\t</label>\n\t\t\t\t<input\n\t\t\t\t\tid=\"topic\"\n\t\t\t\t\tbind:value={topic}\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tautocomplete=\"off\"\n\t\t\t\t\tdisabled={isSubmitting}\n\t\t\t\t/>\n\t\t\t\t<span class=\"hint\">e.g., JavaScript, Design Patterns, Math</span>\n\t\t\t</div>\n\n\t\t\t<div class=\"field\">\n\t\t\t\t<label for=\"project-select\">Project <span class=\"optional\">(optional)</span></label>\n\t\t\t\t<select\n\t\t\t\t\tid=\"project-select\"\n\t\t\t\t\tbind:value={project}\n\t\t\t\t\tonchange={handleProjectChange}\n\t\t\t\t\tdisabled={isSubmitting}\n\t\t\t\t\taria-describedby=\"project-hint\"\n\t\t\t\t>\n\t\t\t\t\t<option value=\"\">Select a project</option>\n\t\t\t\t\t{#each projectManager.all as p (p.id)}\n\t\t\t\t\t\t<option value={p.id}>{p.name}</option>\n\t\t\t\t\t{/each}\n\t\t\t\t\t<option value=\"__create__\">+ Create new project...</option>\n\t\t\t\t</select>\n\t\t\t\t<span id=\"project-hint\" class=\"hint\">Assign this card to a project or create a new one.</span>\n\t\t\t</div>\n\n\t\t\t{#if creatingProject}\n\t\t\t\t<div class=\"field\">\n\t\t\t\t\t<label for=\"project\">New project name <span class=\"required\">*</span></label>\n\t\t\t\t\t<input\n\t\t\t\t\t\tid=\"project\"\n\t\t\t\t\t\tbind:value={project}\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tautocomplete=\"off\"\n\t\t\t\t\t\tdisabled={isSubmitting}\n\t\t\t\t\t\tclass:error={projectError}\n\t\t\t\t\t/>\n\t\t\t\t\t{#if projectError}\n\t\t\t\t\t\t<span class=\"error-message\">{projectError}</span>\n\t\t\t\t\t{:else}\n\t\t\t\t\t\t<span class=\"hint\">Give your project a short, unique name.</span>\n\t\t\t\t\t{/if}\n\t\t\t\t</div>\n\t\t\t{/if}\n\n\t\t\t<div class=\"field\">\n\t\t\t\t<label for=\"prompt\">\n\t\t\t\t\tLearning prompt <span class=\"required\">*</span>\n\t\t\t\t</label>\n\t\t\t\t<textarea\n\t\t\t\t\tid=\"prompt\"\n\t\t\t\t\tbind:value={prompt}\n\t\t\t\t\trequired\n\t\t\t\t\tdisabled={isSubmitting}\n\t\t\t\t\tplaceholder=\"e.g. Explain the concept of closures in JavaScript\"\n\t\t\t\t\tclass:error={promptError}\n\t\t\t\t></textarea>\n\t\t\t\t{#if promptError}\n\t\t\t\t\t<span class=\"error-message\">{promptError}</span>\n\t\t\t\t{:else}\n\t\t\t\t\t<span class=\"hint\">What do you want to learn or understand?</span>\n\t\t\t\t{/if}\n\t\t\t</div>\n\n\t\t\t<div class=\"form-actions\">\n\t\t\t\t<button type=\"submit\" class=\"primary\" disabled={!isValid || isSubmitting}>\n\t\t\t\t\t{isSubmitting ? 'Saving...' : 'Save card'}\n\t\t\t\t</button>\n\t\t\t\t<button type=\"button\" class=\"ghost\" onclick={handleCancel} disabled={isSubmitting}>\n\t\t\t\t\tCancel\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</form>\n\t</section>\n"
			},
			"tags": ["fixable"],
			"source": null
		},
		{
			"category": "lint/style/useConst",
			"severity": "warning",
			"description": "This let declares a variable that is only assigned once.",
			"message": [
				{ "elements": [], "content": "This " },
				{ "elements": ["Emphasis"], "content": "let" },
				{
					"elements": [],
					"content": " declares a variable that is only assigned once."
				}
			],
			"advices": {
				"advices": [
					{
						"log": [
							"info",
							[
								{
									"elements": [],
									"content": "'firstFocusableElement' is never reassigned."
								}
							]
						]
					},
					{
						"frame": {
							"path": null,
							"span": [2109, 2130],
							"sourceCode": "<script lang=\"ts\">\n/* global HTMLElement setTimeout */\nimport { projectManager } from \"../projectManager.svelte\";\n\ninterface Props {\n\tonSubmit: (data: {\n\t\ttitle: string;\n\t\tprompt: string;\n\t\ttopic?: string;\n\t\tproject?: string;\n\t}) => Promise<void>;\n\tonCancel?: () => void;\n\tinitialProject?: string;\n}\n\nconst { onSubmit, onCancel, initialProject }: Props = $props();\n\n// Local state using Svelte 5 runes\nlet title = $state(\"\");\nlet topic = $state(\"\");\nlet project = $state(\"\");\n$effect(() => {\n\tproject =\n\t\tinitialProject ??\n\t\t(projectManager.selectedProject !== \"all\" &&\n\t\tprojectManager.selectedProject !== \"create\"\n\t\t\t? projectManager.selectedProject\n\t\t\t: \"\");\n});\nlet creatingProject = $state(false);\nlet prompt = $state(\"\");\nlet status = $state(\"\");\nlet isSubmitting = $state(false);\n\n// Derived validation state\nconst titleError = $derived.by(() => {\n\tconst trimmed = title.trim();\n\tif (trimmed.length === 0) return \"\";\n\tif (trimmed.length < 3) return \"Title must be at least 3 characters\";\n\tif (trimmed.length > 100) return \"Title must be less than 100 characters\";\n\treturn \"\";\n});\n\nconst promptError = $derived.by(() => {\n\tconst trimmed = prompt.trim();\n\tif (trimmed.length === 0) return \"\";\n\tif (trimmed.length < 10) return \"Prompt must be at least 10 characters\";\n\tif (trimmed.length > 8000) return \"Prompt must be less than 8000 characters\";\n\treturn \"\";\n});\n\nconst projectError = $derived.by(() => {\n\tif (creatingProject) {\n\t\tconst trimmed = project.trim();\n\t\tif (trimmed.length === 0) return \"Project name is required\";\n\t\tif (trimmed.length < 2) return \"Project name must be at least 2 characters\";\n\t\tif (trimmed.length > 50)\n\t\t\treturn \"Project name must be less than 50 characters\";\n\t\t// Check for duplicate project names\n\t\tif (\n\t\t\tprojectManager.all.some(\n\t\t\t\t(p) => p.name.toLowerCase() === trimmed.toLowerCase(),\n\t\t\t)\n\t\t) {\n\t\t\treturn \"A project with this name already exists\";\n\t\t}\n\t}\n\treturn \"\";\n});\n\nconst isValid = $derived.by(() => {\n\treturn (\n\t\ttitle.trim().length > 0 &&\n\t\tprompt.trim().length > 0 &&\n\t\t!titleError &&\n\t\t!promptError &&\n\t\t!projectError\n\t);\n});\n\nlet formElement: HTMLElement | null = null;\nlet firstFocusableElement: HTMLElement | null = null;\nlet lastFocusableElement: HTMLElement | null = null;\n\n// Focus / accessibility handled by ModalContainer when used as modal; keep simple on-mount focus\n$effect(() => {\n\tconst titleInput = document.getElementById(\n\t\t\"title\",\n\t) as HTMLInputElement | null;\n\tif (titleInput) setTimeout(() => titleInput.focus(), 0);\n});\n\nasync function handleSubmit(e: SubmitEvent) {\n\te.preventDefault();\n\n\tif (!isValid || isSubmitting) return;\n\n\tisSubmitting = true;\n\tstatus = \"\";\n\n\ttry {\n\t\tawait onSubmit({\n\t\t\ttitle: title.trim(),\n\t\t\tprompt: prompt.trim(),\n\t\t\ttopic: topic.trim() || undefined,\n\t\t\tproject: creatingProject\n\t\t\t\t? project.trim() || undefined\n\t\t\t\t: project || undefined,\n\t\t});\n\n\t\t// Success - clear form and close\n\t\tclearForm();\n\t\tonCancel?.();\n\n\t\t// Announce to screen readers\n\t\tannounceToSR(`Card \"${title}\" added successfully`);\n\t} catch (err) {\n\t\tstatus = err instanceof Error ? err.message : \"Failed to add card\";\n\t\tannounceToSR(status);\n\t} finally {\n\t\tisSubmitting = false;\n\t}\n}\n\nfunction handleProjectChange(e: Event) {\n\tconst select = e.target as HTMLSelectElement;\n\tif (select.value === \"__create__\") {\n\t\tcreatingProject = true;\n\t\tproject = \"\";\n\t} else {\n\t\tcreatingProject = false;\n\t\tproject = select.value;\n\t}\n}\n\nfunction clearForm() {\n\ttitle = \"\";\n\ttopic = \"\";\n\tproject = \"\";\n\tcreatingProject = false;\n\tprompt = \"\";\n\tstatus = \"\";\n}\n\nfunction handleCancel() {\n\tclearForm();\n\tonCancel?.();\n}\n\nfunction announceToSR(message: string) {\n\tconst announcer = document.getElementById(\"sr-announcements\");\n\tif (announcer) {\n\t\tannouncer.textContent = message;\n\t}\n}\n</script>\n\n\t<section id=\"add-section\" bind:this={formElement}>\n\t\t<form onsubmit={handleSubmit} aria-labelledby=\"add-heading\">\n\t\t\t<h2>New Card Details</h2>\n\n\t\t\t{#if status}\n\t\t\t\t<div role=\"status\" class=\"form-status\">{status}</div>\n\t\t\t{/if}\n\n\t\t\t<div class=\"field\">\n\t\t\t\t<label for=\"title\">\n\t\t\t\t\tTitle <span class=\"required\">*</span>\n\t\t\t\t</label>\n\t\t\t\t<input\n\t\t\t\t\tid=\"title\"\n\t\t\t\t\tbind:value={title}\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tautocomplete=\"off\"\n\t\t\t\t\trequired\n\t\t\t\t\tdisabled={isSubmitting}\n\t\t\t\t\tclass:error={titleError}\n\t\t\t\t/>\n\t\t\t\t{#if titleError}\n\t\t\t\t\t<span class=\"error-message\">{titleError}</span>\n\t\t\t\t{:else}\n\t\t\t\t\t<span class=\"hint\">Give your learning card a clear, memorable name.</span>\n\t\t\t\t{/if}\n\t\t\t</div>\n\n\t\t\t<div class=\"field\">\n\t\t\t\t<label for=\"topic\">\n\t\t\t\t\tTopic <span class=\"optional\">(optional)</span>\n\t\t\t\t</label>\n\t\t\t\t<input\n\t\t\t\t\tid=\"topic\"\n\t\t\t\t\tbind:value={topic}\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tautocomplete=\"off\"\n\t\t\t\t\tdisabled={isSubmitting}\n\t\t\t\t/>\n\t\t\t\t<span class=\"hint\">e.g., JavaScript, Design Patterns, Math</span>\n\t\t\t</div>\n\n\t\t\t<div class=\"field\">\n\t\t\t\t<label for=\"project-select\">Project <span class=\"optional\">(optional)</span></label>\n\t\t\t\t<select\n\t\t\t\t\tid=\"project-select\"\n\t\t\t\t\tbind:value={project}\n\t\t\t\t\tonchange={handleProjectChange}\n\t\t\t\t\tdisabled={isSubmitting}\n\t\t\t\t\taria-describedby=\"project-hint\"\n\t\t\t\t>\n\t\t\t\t\t<option value=\"\">Select a project</option>\n\t\t\t\t\t{#each projectManager.all as p (p.id)}\n\t\t\t\t\t\t<option value={p.id}>{p.name}</option>\n\t\t\t\t\t{/each}\n\t\t\t\t\t<option value=\"__create__\">+ Create new project...</option>\n\t\t\t\t</select>\n\t\t\t\t<span id=\"project-hint\" class=\"hint\">Assign this card to a project or create a new one.</span>\n\t\t\t</div>\n\n\t\t\t{#if creatingProject}\n\t\t\t\t<div class=\"field\">\n\t\t\t\t\t<label for=\"project\">New project name <span class=\"required\">*</span></label>\n\t\t\t\t\t<input\n\t\t\t\t\t\tid=\"project\"\n\t\t\t\t\t\tbind:value={project}\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tautocomplete=\"off\"\n\t\t\t\t\t\tdisabled={isSubmitting}\n\t\t\t\t\t\tclass:error={projectError}\n\t\t\t\t\t/>\n\t\t\t\t\t{#if projectError}\n\t\t\t\t\t\t<span class=\"error-message\">{projectError}</span>\n\t\t\t\t\t{:else}\n\t\t\t\t\t\t<span class=\"hint\">Give your project a short, unique name.</span>\n\t\t\t\t\t{/if}\n\t\t\t\t</div>\n\t\t\t{/if}\n\n\t\t\t<div class=\"field\">\n\t\t\t\t<label for=\"prompt\">\n\t\t\t\t\tLearning prompt <span class=\"required\">*</span>\n\t\t\t\t</label>\n\t\t\t\t<textarea\n\t\t\t\t\tid=\"prompt\"\n\t\t\t\t\tbind:value={prompt}\n\t\t\t\t\trequired\n\t\t\t\t\tdisabled={isSubmitting}\n\t\t\t\t\tplaceholder=\"e.g. Explain the concept of closures in JavaScript\"\n\t\t\t\t\tclass:error={promptError}\n\t\t\t\t></textarea>\n\t\t\t\t{#if promptError}\n\t\t\t\t\t<span class=\"error-message\">{promptError}</span>\n\t\t\t\t{:else}\n\t\t\t\t\t<span class=\"hint\">What do you want to learn or understand?</span>\n\t\t\t\t{/if}\n\t\t\t</div>\n\n\t\t\t<div class=\"form-actions\">\n\t\t\t\t<button type=\"submit\" class=\"primary\" disabled={!isValid || isSubmitting}>\n\t\t\t\t\t{isSubmitting ? 'Saving...' : 'Save card'}\n\t\t\t\t</button>\n\t\t\t\t<button type=\"button\" class=\"ghost\" onclick={handleCancel} disabled={isSubmitting}>\n\t\t\t\t\tCancel\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</form>\n\t</section>\n"
						}
					},
					{
						"log": [
							"info",
							[
								{ "elements": [], "content": "Safe fix: Use " },
								{ "elements": ["Emphasis"], "content": "const" },
								{ "elements": [], "content": " instead." }
							]
						]
					},
					{
						"diff": {
							"dictionary": "/* global HTMLElement setTimeout */\nimport { projectManager } from \"../projectManager.svelte\";\n});\n\nlet formElement: HTMLElement | null = null;\nletconst firstFocusableElement: HTMLElement | null = null;\nlet lastFocusableElement: HTMLElement | null = null;\n\t}\n}\n",
							"ops": [
								{ "diffOp": { "equal": { "range": [0, 95] } } },
								{ "equalLines": { "line_count": 74 } },
								{ "diffOp": { "equal": { "range": [95, 143] } } },
								{ "diffOp": { "equal": { "range": [143, 144] } } },
								{ "diffOp": { "delete": { "range": [144, 147] } } },
								{ "diffOp": { "insert": { "range": [147, 152] } } },
								{ "diffOp": { "equal": { "range": [152, 153] } } },
								{ "diffOp": { "equal": { "range": [153, 256] } } },
								{ "equalLines": { "line_count": 69 } },
								{ "diffOp": { "equal": { "range": [256, 261] } } }
							]
						}
					}
				]
			},
			"verboseAdvices": { "advices": [] },
			"location": {
				"path": { "file": "src\\lib\\components\\AddForm.svelte" },
				"span": [2124, 2127],
				"sourceCode": "<script lang=\"ts\">\n/* global HTMLElement setTimeout */\nimport { projectManager } from \"../projectManager.svelte\";\n\ninterface Props {\n\tonSubmit: (data: {\n\t\ttitle: string;\n\t\tprompt: string;\n\t\ttopic?: string;\n\t\tproject?: string;\n\t}) => Promise<void>;\n\tonCancel?: () => void;\n\tinitialProject?: string;\n}\n\nconst { onSubmit, onCancel, initialProject }: Props = $props();\n\n// Local state using Svelte 5 runes\nlet title = $state(\"\");\nlet topic = $state(\"\");\nlet project = $state(\"\");\n$effect(() => {\n\tproject =\n\t\tinitialProject ??\n\t\t(projectManager.selectedProject !== \"all\" &&\n\t\tprojectManager.selectedProject !== \"create\"\n\t\t\t? projectManager.selectedProject\n\t\t\t: \"\");\n});\nlet creatingProject = $state(false);\nlet prompt = $state(\"\");\nlet status = $state(\"\");\nlet isSubmitting = $state(false);\n\n// Derived validation state\nconst titleError = $derived.by(() => {\n\tconst trimmed = title.trim();\n\tif (trimmed.length === 0) return \"\";\n\tif (trimmed.length < 3) return \"Title must be at least 3 characters\";\n\tif (trimmed.length > 100) return \"Title must be less than 100 characters\";\n\treturn \"\";\n});\n\nconst promptError = $derived.by(() => {\n\tconst trimmed = prompt.trim();\n\tif (trimmed.length === 0) return \"\";\n\tif (trimmed.length < 10) return \"Prompt must be at least 10 characters\";\n\tif (trimmed.length > 8000) return \"Prompt must be less than 8000 characters\";\n\treturn \"\";\n});\n\nconst projectError = $derived.by(() => {\n\tif (creatingProject) {\n\t\tconst trimmed = project.trim();\n\t\tif (trimmed.length === 0) return \"Project name is required\";\n\t\tif (trimmed.length < 2) return \"Project name must be at least 2 characters\";\n\t\tif (trimmed.length > 50)\n\t\t\treturn \"Project name must be less than 50 characters\";\n\t\t// Check for duplicate project names\n\t\tif (\n\t\t\tprojectManager.all.some(\n\t\t\t\t(p) => p.name.toLowerCase() === trimmed.toLowerCase(),\n\t\t\t)\n\t\t) {\n\t\t\treturn \"A project with this name already exists\";\n\t\t}\n\t}\n\treturn \"\";\n});\n\nconst isValid = $derived.by(() => {\n\treturn (\n\t\ttitle.trim().length > 0 &&\n\t\tprompt.trim().length > 0 &&\n\t\t!titleError &&\n\t\t!promptError &&\n\t\t!projectError\n\t);\n});\n\nlet formElement: HTMLElement | null = null;\nlet firstFocusableElement: HTMLElement | null = null;\nlet lastFocusableElement: HTMLElement | null = null;\n\n// Focus / accessibility handled by ModalContainer when used as modal; keep simple on-mount focus\n$effect(() => {\n\tconst titleInput = document.getElementById(\n\t\t\"title\",\n\t) as HTMLInputElement | null;\n\tif (titleInput) setTimeout(() => titleInput.focus(), 0);\n});\n\nasync function handleSubmit(e: SubmitEvent) {\n\te.preventDefault();\n\n\tif (!isValid || isSubmitting) return;\n\n\tisSubmitting = true;\n\tstatus = \"\";\n\n\ttry {\n\t\tawait onSubmit({\n\t\t\ttitle: title.trim(),\n\t\t\tprompt: prompt.trim(),\n\t\t\ttopic: topic.trim() || undefined,\n\t\t\tproject: creatingProject\n\t\t\t\t? project.trim() || undefined\n\t\t\t\t: project || undefined,\n\t\t});\n\n\t\t// Success - clear form and close\n\t\tclearForm();\n\t\tonCancel?.();\n\n\t\t// Announce to screen readers\n\t\tannounceToSR(`Card \"${title}\" added successfully`);\n\t} catch (err) {\n\t\tstatus = err instanceof Error ? err.message : \"Failed to add card\";\n\t\tannounceToSR(status);\n\t} finally {\n\t\tisSubmitting = false;\n\t}\n}\n\nfunction handleProjectChange(e: Event) {\n\tconst select = e.target as HTMLSelectElement;\n\tif (select.value === \"__create__\") {\n\t\tcreatingProject = true;\n\t\tproject = \"\";\n\t} else {\n\t\tcreatingProject = false;\n\t\tproject = select.value;\n\t}\n}\n\nfunction clearForm() {\n\ttitle = \"\";\n\ttopic = \"\";\n\tproject = \"\";\n\tcreatingProject = false;\n\tprompt = \"\";\n\tstatus = \"\";\n}\n\nfunction handleCancel() {\n\tclearForm();\n\tonCancel?.();\n}\n\nfunction announceToSR(message: string) {\n\tconst announcer = document.getElementById(\"sr-announcements\");\n\tif (announcer) {\n\t\tannouncer.textContent = message;\n\t}\n}\n</script>\n\n\t<section id=\"add-section\" bind:this={formElement}>\n\t\t<form onsubmit={handleSubmit} aria-labelledby=\"add-heading\">\n\t\t\t<h2>New Card Details</h2>\n\n\t\t\t{#if status}\n\t\t\t\t<div role=\"status\" class=\"form-status\">{status}</div>\n\t\t\t{/if}\n\n\t\t\t<div class=\"field\">\n\t\t\t\t<label for=\"title\">\n\t\t\t\t\tTitle <span class=\"required\">*</span>\n\t\t\t\t</label>\n\t\t\t\t<input\n\t\t\t\t\tid=\"title\"\n\t\t\t\t\tbind:value={title}\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tautocomplete=\"off\"\n\t\t\t\t\trequired\n\t\t\t\t\tdisabled={isSubmitting}\n\t\t\t\t\tclass:error={titleError}\n\t\t\t\t/>\n\t\t\t\t{#if titleError}\n\t\t\t\t\t<span class=\"error-message\">{titleError}</span>\n\t\t\t\t{:else}\n\t\t\t\t\t<span class=\"hint\">Give your learning card a clear, memorable name.</span>\n\t\t\t\t{/if}\n\t\t\t</div>\n\n\t\t\t<div class=\"field\">\n\t\t\t\t<label for=\"topic\">\n\t\t\t\t\tTopic <span class=\"optional\">(optional)</span>\n\t\t\t\t</label>\n\t\t\t\t<input\n\t\t\t\t\tid=\"topic\"\n\t\t\t\t\tbind:value={topic}\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tautocomplete=\"off\"\n\t\t\t\t\tdisabled={isSubmitting}\n\t\t\t\t/>\n\t\t\t\t<span class=\"hint\">e.g., JavaScript, Design Patterns, Math</span>\n\t\t\t</div>\n\n\t\t\t<div class=\"field\">\n\t\t\t\t<label for=\"project-select\">Project <span class=\"optional\">(optional)</span></label>\n\t\t\t\t<select\n\t\t\t\t\tid=\"project-select\"\n\t\t\t\t\tbind:value={project}\n\t\t\t\t\tonchange={handleProjectChange}\n\t\t\t\t\tdisabled={isSubmitting}\n\t\t\t\t\taria-describedby=\"project-hint\"\n\t\t\t\t>\n\t\t\t\t\t<option value=\"\">Select a project</option>\n\t\t\t\t\t{#each projectManager.all as p (p.id)}\n\t\t\t\t\t\t<option value={p.id}>{p.name}</option>\n\t\t\t\t\t{/each}\n\t\t\t\t\t<option value=\"__create__\">+ Create new project...</option>\n\t\t\t\t</select>\n\t\t\t\t<span id=\"project-hint\" class=\"hint\">Assign this card to a project or create a new one.</span>\n\t\t\t</div>\n\n\t\t\t{#if creatingProject}\n\t\t\t\t<div class=\"field\">\n\t\t\t\t\t<label for=\"project\">New project name <span class=\"required\">*</span></label>\n\t\t\t\t\t<input\n\t\t\t\t\t\tid=\"project\"\n\t\t\t\t\t\tbind:value={project}\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tautocomplete=\"off\"\n\t\t\t\t\t\tdisabled={isSubmitting}\n\t\t\t\t\t\tclass:error={projectError}\n\t\t\t\t\t/>\n\t\t\t\t\t{#if projectError}\n\t\t\t\t\t\t<span class=\"error-message\">{projectError}</span>\n\t\t\t\t\t{:else}\n\t\t\t\t\t\t<span class=\"hint\">Give your project a short, unique name.</span>\n\t\t\t\t\t{/if}\n\t\t\t\t</div>\n\t\t\t{/if}\n\n\t\t\t<div class=\"field\">\n\t\t\t\t<label for=\"prompt\">\n\t\t\t\t\tLearning prompt <span class=\"required\">*</span>\n\t\t\t\t</label>\n\t\t\t\t<textarea\n\t\t\t\t\tid=\"prompt\"\n\t\t\t\t\tbind:value={prompt}\n\t\t\t\t\trequired\n\t\t\t\t\tdisabled={isSubmitting}\n\t\t\t\t\tplaceholder=\"e.g. Explain the concept of closures in JavaScript\"\n\t\t\t\t\tclass:error={promptError}\n\t\t\t\t></textarea>\n\t\t\t\t{#if promptError}\n\t\t\t\t\t<span class=\"error-message\">{promptError}</span>\n\t\t\t\t{:else}\n\t\t\t\t\t<span class=\"hint\">What do you want to learn or understand?</span>\n\t\t\t\t{/if}\n\t\t\t</div>\n\n\t\t\t<div class=\"form-actions\">\n\t\t\t\t<button type=\"submit\" class=\"primary\" disabled={!isValid || isSubmitting}>\n\t\t\t\t\t{isSubmitting ? 'Saving...' : 'Save card'}\n\t\t\t\t</button>\n\t\t\t\t<button type=\"button\" class=\"ghost\" onclick={handleCancel} disabled={isSubmitting}>\n\t\t\t\t\tCancel\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</form>\n\t</section>\n"
			},
			"tags": ["fixable"],
			"source": null
		},
		{
			"category": "lint/correctness/noUnusedVariables",
			"severity": "warning",
			"description": "This variable firstFocusableElement is unused.",
			"message": [
				{ "elements": [], "content": "This variable " },
				{ "elements": ["Emphasis"], "content": "firstFocusableElement" },
				{ "elements": [], "content": " is unused." }
			],
			"advices": {
				"advices": [
					{
						"log": [
							"info",
							[
								{
									"elements": [],
									"content": "Unused variables are often the result of typos, incomplete refactors, or other sources of bugs."
								}
							]
						]
					},
					{
						"log": [
							"info",
							[
								{
									"elements": [],
									"content": "Unsafe fix: If this is intentional, prepend "
								},
								{
									"elements": ["Emphasis"],
									"content": "firstFocusableElement"
								},
								{ "elements": [], "content": " with an underscore." }
							]
						]
					},
					{
						"diff": {
							"dictionary": "/* global HTMLElement setTimeout */\nimport { projectManager } from \"../projectManager.svelte\";\n\nlet formElement: HTMLElement | null = null;\nlet firstFocusableElement_firstFocusableElement: HTMLElement | null = null;\nlet lastFocusableElement: HTMLElement | null = null;\n\t}\n}\n",
							"ops": [
								{ "diffOp": { "equal": { "range": [0, 95] } } },
								{ "equalLines": { "line_count": 75 } },
								{ "diffOp": { "equal": { "range": [95, 144] } } },
								{ "diffOp": { "delete": { "range": [144, 165] } } },
								{ "diffOp": { "insert": { "range": [165, 187] } } },
								{ "diffOp": { "equal": { "range": [187, 269] } } },
								{ "equalLines": { "line_count": 69 } },
								{ "diffOp": { "equal": { "range": [269, 274] } } }
							]
						}
					}
				]
			},
			"verboseAdvices": { "advices": [] },
			"location": {
				"path": { "file": "src\\lib\\components\\AddForm.svelte" },
				"span": [2128, 2149],
				"sourceCode": "<script lang=\"ts\">\n/* global HTMLElement setTimeout */\nimport { projectManager } from \"../projectManager.svelte\";\n\ninterface Props {\n\tonSubmit: (data: {\n\t\ttitle: string;\n\t\tprompt: string;\n\t\ttopic?: string;\n\t\tproject?: string;\n\t}) => Promise<void>;\n\tonCancel?: () => void;\n\tinitialProject?: string;\n}\n\nconst { onSubmit, onCancel, initialProject }: Props = $props();\n\n// Local state using Svelte 5 runes\nlet title = $state(\"\");\nlet topic = $state(\"\");\nlet project = $state(\"\");\n$effect(() => {\n\tproject =\n\t\tinitialProject ??\n\t\t(projectManager.selectedProject !== \"all\" &&\n\t\tprojectManager.selectedProject !== \"create\"\n\t\t\t? projectManager.selectedProject\n\t\t\t: \"\");\n});\nlet creatingProject = $state(false);\nlet prompt = $state(\"\");\nlet status = $state(\"\");\nlet isSubmitting = $state(false);\n\n// Derived validation state\nconst titleError = $derived.by(() => {\n\tconst trimmed = title.trim();\n\tif (trimmed.length === 0) return \"\";\n\tif (trimmed.length < 3) return \"Title must be at least 3 characters\";\n\tif (trimmed.length > 100) return \"Title must be less than 100 characters\";\n\treturn \"\";\n});\n\nconst promptError = $derived.by(() => {\n\tconst trimmed = prompt.trim();\n\tif (trimmed.length === 0) return \"\";\n\tif (trimmed.length < 10) return \"Prompt must be at least 10 characters\";\n\tif (trimmed.length > 8000) return \"Prompt must be less than 8000 characters\";\n\treturn \"\";\n});\n\nconst projectError = $derived.by(() => {\n\tif (creatingProject) {\n\t\tconst trimmed = project.trim();\n\t\tif (trimmed.length === 0) return \"Project name is required\";\n\t\tif (trimmed.length < 2) return \"Project name must be at least 2 characters\";\n\t\tif (trimmed.length > 50)\n\t\t\treturn \"Project name must be less than 50 characters\";\n\t\t// Check for duplicate project names\n\t\tif (\n\t\t\tprojectManager.all.some(\n\t\t\t\t(p) => p.name.toLowerCase() === trimmed.toLowerCase(),\n\t\t\t)\n\t\t) {\n\t\t\treturn \"A project with this name already exists\";\n\t\t}\n\t}\n\treturn \"\";\n});\n\nconst isValid = $derived.by(() => {\n\treturn (\n\t\ttitle.trim().length > 0 &&\n\t\tprompt.trim().length > 0 &&\n\t\t!titleError &&\n\t\t!promptError &&\n\t\t!projectError\n\t);\n});\n\nlet formElement: HTMLElement | null = null;\nlet firstFocusableElement: HTMLElement | null = null;\nlet lastFocusableElement: HTMLElement | null = null;\n\n// Focus / accessibility handled by ModalContainer when used as modal; keep simple on-mount focus\n$effect(() => {\n\tconst titleInput = document.getElementById(\n\t\t\"title\",\n\t) as HTMLInputElement | null;\n\tif (titleInput) setTimeout(() => titleInput.focus(), 0);\n});\n\nasync function handleSubmit(e: SubmitEvent) {\n\te.preventDefault();\n\n\tif (!isValid || isSubmitting) return;\n\n\tisSubmitting = true;\n\tstatus = \"\";\n\n\ttry {\n\t\tawait onSubmit({\n\t\t\ttitle: title.trim(),\n\t\t\tprompt: prompt.trim(),\n\t\t\ttopic: topic.trim() || undefined,\n\t\t\tproject: creatingProject\n\t\t\t\t? project.trim() || undefined\n\t\t\t\t: project || undefined,\n\t\t});\n\n\t\t// Success - clear form and close\n\t\tclearForm();\n\t\tonCancel?.();\n\n\t\t// Announce to screen readers\n\t\tannounceToSR(`Card \"${title}\" added successfully`);\n\t} catch (err) {\n\t\tstatus = err instanceof Error ? err.message : \"Failed to add card\";\n\t\tannounceToSR(status);\n\t} finally {\n\t\tisSubmitting = false;\n\t}\n}\n\nfunction handleProjectChange(e: Event) {\n\tconst select = e.target as HTMLSelectElement;\n\tif (select.value === \"__create__\") {\n\t\tcreatingProject = true;\n\t\tproject = \"\";\n\t} else {\n\t\tcreatingProject = false;\n\t\tproject = select.value;\n\t}\n}\n\nfunction clearForm() {\n\ttitle = \"\";\n\ttopic = \"\";\n\tproject = \"\";\n\tcreatingProject = false;\n\tprompt = \"\";\n\tstatus = \"\";\n}\n\nfunction handleCancel() {\n\tclearForm();\n\tonCancel?.();\n}\n\nfunction announceToSR(message: string) {\n\tconst announcer = document.getElementById(\"sr-announcements\");\n\tif (announcer) {\n\t\tannouncer.textContent = message;\n\t}\n}\n</script>\n\n\t<section id=\"add-section\" bind:this={formElement}>\n\t\t<form onsubmit={handleSubmit} aria-labelledby=\"add-heading\">\n\t\t\t<h2>New Card Details</h2>\n\n\t\t\t{#if status}\n\t\t\t\t<div role=\"status\" class=\"form-status\">{status}</div>\n\t\t\t{/if}\n\n\t\t\t<div class=\"field\">\n\t\t\t\t<label for=\"title\">\n\t\t\t\t\tTitle <span class=\"required\">*</span>\n\t\t\t\t</label>\n\t\t\t\t<input\n\t\t\t\t\tid=\"title\"\n\t\t\t\t\tbind:value={title}\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tautocomplete=\"off\"\n\t\t\t\t\trequired\n\t\t\t\t\tdisabled={isSubmitting}\n\t\t\t\t\tclass:error={titleError}\n\t\t\t\t/>\n\t\t\t\t{#if titleError}\n\t\t\t\t\t<span class=\"error-message\">{titleError}</span>\n\t\t\t\t{:else}\n\t\t\t\t\t<span class=\"hint\">Give your learning card a clear, memorable name.</span>\n\t\t\t\t{/if}\n\t\t\t</div>\n\n\t\t\t<div class=\"field\">\n\t\t\t\t<label for=\"topic\">\n\t\t\t\t\tTopic <span class=\"optional\">(optional)</span>\n\t\t\t\t</label>\n\t\t\t\t<input\n\t\t\t\t\tid=\"topic\"\n\t\t\t\t\tbind:value={topic}\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tautocomplete=\"off\"\n\t\t\t\t\tdisabled={isSubmitting}\n\t\t\t\t/>\n\t\t\t\t<span class=\"hint\">e.g., JavaScript, Design Patterns, Math</span>\n\t\t\t</div>\n\n\t\t\t<div class=\"field\">\n\t\t\t\t<label for=\"project-select\">Project <span class=\"optional\">(optional)</span></label>\n\t\t\t\t<select\n\t\t\t\t\tid=\"project-select\"\n\t\t\t\t\tbind:value={project}\n\t\t\t\t\tonchange={handleProjectChange}\n\t\t\t\t\tdisabled={isSubmitting}\n\t\t\t\t\taria-describedby=\"project-hint\"\n\t\t\t\t>\n\t\t\t\t\t<option value=\"\">Select a project</option>\n\t\t\t\t\t{#each projectManager.all as p (p.id)}\n\t\t\t\t\t\t<option value={p.id}>{p.name}</option>\n\t\t\t\t\t{/each}\n\t\t\t\t\t<option value=\"__create__\">+ Create new project...</option>\n\t\t\t\t</select>\n\t\t\t\t<span id=\"project-hint\" class=\"hint\">Assign this card to a project or create a new one.</span>\n\t\t\t</div>\n\n\t\t\t{#if creatingProject}\n\t\t\t\t<div class=\"field\">\n\t\t\t\t\t<label for=\"project\">New project name <span class=\"required\">*</span></label>\n\t\t\t\t\t<input\n\t\t\t\t\t\tid=\"project\"\n\t\t\t\t\t\tbind:value={project}\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tautocomplete=\"off\"\n\t\t\t\t\t\tdisabled={isSubmitting}\n\t\t\t\t\t\tclass:error={projectError}\n\t\t\t\t\t/>\n\t\t\t\t\t{#if projectError}\n\t\t\t\t\t\t<span class=\"error-message\">{projectError}</span>\n\t\t\t\t\t{:else}\n\t\t\t\t\t\t<span class=\"hint\">Give your project a short, unique name.</span>\n\t\t\t\t\t{/if}\n\t\t\t\t</div>\n\t\t\t{/if}\n\n\t\t\t<div class=\"field\">\n\t\t\t\t<label for=\"prompt\">\n\t\t\t\t\tLearning prompt <span class=\"required\">*</span>\n\t\t\t\t</label>\n\t\t\t\t<textarea\n\t\t\t\t\tid=\"prompt\"\n\t\t\t\t\tbind:value={prompt}\n\t\t\t\t\trequired\n\t\t\t\t\tdisabled={isSubmitting}\n\t\t\t\t\tplaceholder=\"e.g. Explain the concept of closures in JavaScript\"\n\t\t\t\t\tclass:error={promptError}\n\t\t\t\t></textarea>\n\t\t\t\t{#if promptError}\n\t\t\t\t\t<span class=\"error-message\">{promptError}</span>\n\t\t\t\t{:else}\n\t\t\t\t\t<span class=\"hint\">What do you want to learn or understand?</span>\n\t\t\t\t{/if}\n\t\t\t</div>\n\n\t\t\t<div class=\"form-actions\">\n\t\t\t\t<button type=\"submit\" class=\"primary\" disabled={!isValid || isSubmitting}>\n\t\t\t\t\t{isSubmitting ? 'Saving...' : 'Save card'}\n\t\t\t\t</button>\n\t\t\t\t<button type=\"button\" class=\"ghost\" onclick={handleCancel} disabled={isSubmitting}>\n\t\t\t\t\tCancel\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</form>\n\t</section>\n"
			},
			"tags": ["fixable"],
			"source": null
		},
		{
			"category": "lint/style/useConst",
			"severity": "warning",
			"description": "This let declares a variable that is only assigned once.",
			"message": [
				{ "elements": [], "content": "This " },
				{ "elements": ["Emphasis"], "content": "let" },
				{
					"elements": [],
					"content": " declares a variable that is only assigned once."
				}
			],
			"advices": {
				"advices": [
					{
						"log": [
							"info",
							[
								{
									"elements": [],
									"content": "'lastFocusableElement' is never reassigned."
								}
							]
						]
					},
					{
						"frame": {
							"path": null,
							"span": [2163, 2183],
							"sourceCode": "<script lang=\"ts\">\n/* global HTMLElement setTimeout */\nimport { projectManager } from \"../projectManager.svelte\";\n\ninterface Props {\n\tonSubmit: (data: {\n\t\ttitle: string;\n\t\tprompt: string;\n\t\ttopic?: string;\n\t\tproject?: string;\n\t}) => Promise<void>;\n\tonCancel?: () => void;\n\tinitialProject?: string;\n}\n\nconst { onSubmit, onCancel, initialProject }: Props = $props();\n\n// Local state using Svelte 5 runes\nlet title = $state(\"\");\nlet topic = $state(\"\");\nlet project = $state(\"\");\n$effect(() => {\n\tproject =\n\t\tinitialProject ??\n\t\t(projectManager.selectedProject !== \"all\" &&\n\t\tprojectManager.selectedProject !== \"create\"\n\t\t\t? projectManager.selectedProject\n\t\t\t: \"\");\n});\nlet creatingProject = $state(false);\nlet prompt = $state(\"\");\nlet status = $state(\"\");\nlet isSubmitting = $state(false);\n\n// Derived validation state\nconst titleError = $derived.by(() => {\n\tconst trimmed = title.trim();\n\tif (trimmed.length === 0) return \"\";\n\tif (trimmed.length < 3) return \"Title must be at least 3 characters\";\n\tif (trimmed.length > 100) return \"Title must be less than 100 characters\";\n\treturn \"\";\n});\n\nconst promptError = $derived.by(() => {\n\tconst trimmed = prompt.trim();\n\tif (trimmed.length === 0) return \"\";\n\tif (trimmed.length < 10) return \"Prompt must be at least 10 characters\";\n\tif (trimmed.length > 8000) return \"Prompt must be less than 8000 characters\";\n\treturn \"\";\n});\n\nconst projectError = $derived.by(() => {\n\tif (creatingProject) {\n\t\tconst trimmed = project.trim();\n\t\tif (trimmed.length === 0) return \"Project name is required\";\n\t\tif (trimmed.length < 2) return \"Project name must be at least 2 characters\";\n\t\tif (trimmed.length > 50)\n\t\t\treturn \"Project name must be less than 50 characters\";\n\t\t// Check for duplicate project names\n\t\tif (\n\t\t\tprojectManager.all.some(\n\t\t\t\t(p) => p.name.toLowerCase() === trimmed.toLowerCase(),\n\t\t\t)\n\t\t) {\n\t\t\treturn \"A project with this name already exists\";\n\t\t}\n\t}\n\treturn \"\";\n});\n\nconst isValid = $derived.by(() => {\n\treturn (\n\t\ttitle.trim().length > 0 &&\n\t\tprompt.trim().length > 0 &&\n\t\t!titleError &&\n\t\t!promptError &&\n\t\t!projectError\n\t);\n});\n\nlet formElement: HTMLElement | null = null;\nlet firstFocusableElement: HTMLElement | null = null;\nlet lastFocusableElement: HTMLElement | null = null;\n\n// Focus / accessibility handled by ModalContainer when used as modal; keep simple on-mount focus\n$effect(() => {\n\tconst titleInput = document.getElementById(\n\t\t\"title\",\n\t) as HTMLInputElement | null;\n\tif (titleInput) setTimeout(() => titleInput.focus(), 0);\n});\n\nasync function handleSubmit(e: SubmitEvent) {\n\te.preventDefault();\n\n\tif (!isValid || isSubmitting) return;\n\n\tisSubmitting = true;\n\tstatus = \"\";\n\n\ttry {\n\t\tawait onSubmit({\n\t\t\ttitle: title.trim(),\n\t\t\tprompt: prompt.trim(),\n\t\t\ttopic: topic.trim() || undefined,\n\t\t\tproject: creatingProject\n\t\t\t\t? project.trim() || undefined\n\t\t\t\t: project || undefined,\n\t\t});\n\n\t\t// Success - clear form and close\n\t\tclearForm();\n\t\tonCancel?.();\n\n\t\t// Announce to screen readers\n\t\tannounceToSR(`Card \"${title}\" added successfully`);\n\t} catch (err) {\n\t\tstatus = err instanceof Error ? err.message : \"Failed to add card\";\n\t\tannounceToSR(status);\n\t} finally {\n\t\tisSubmitting = false;\n\t}\n}\n\nfunction handleProjectChange(e: Event) {\n\tconst select = e.target as HTMLSelectElement;\n\tif (select.value === \"__create__\") {\n\t\tcreatingProject = true;\n\t\tproject = \"\";\n\t} else {\n\t\tcreatingProject = false;\n\t\tproject = select.value;\n\t}\n}\n\nfunction clearForm() {\n\ttitle = \"\";\n\ttopic = \"\";\n\tproject = \"\";\n\tcreatingProject = false;\n\tprompt = \"\";\n\tstatus = \"\";\n}\n\nfunction handleCancel() {\n\tclearForm();\n\tonCancel?.();\n}\n\nfunction announceToSR(message: string) {\n\tconst announcer = document.getElementById(\"sr-announcements\");\n\tif (announcer) {\n\t\tannouncer.textContent = message;\n\t}\n}\n</script>\n\n\t<section id=\"add-section\" bind:this={formElement}>\n\t\t<form onsubmit={handleSubmit} aria-labelledby=\"add-heading\">\n\t\t\t<h2>New Card Details</h2>\n\n\t\t\t{#if status}\n\t\t\t\t<div role=\"status\" class=\"form-status\">{status}</div>\n\t\t\t{/if}\n\n\t\t\t<div class=\"field\">\n\t\t\t\t<label for=\"title\">\n\t\t\t\t\tTitle <span class=\"required\">*</span>\n\t\t\t\t</label>\n\t\t\t\t<input\n\t\t\t\t\tid=\"title\"\n\t\t\t\t\tbind:value={title}\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tautocomplete=\"off\"\n\t\t\t\t\trequired\n\t\t\t\t\tdisabled={isSubmitting}\n\t\t\t\t\tclass:error={titleError}\n\t\t\t\t/>\n\t\t\t\t{#if titleError}\n\t\t\t\t\t<span class=\"error-message\">{titleError}</span>\n\t\t\t\t{:else}\n\t\t\t\t\t<span class=\"hint\">Give your learning card a clear, memorable name.</span>\n\t\t\t\t{/if}\n\t\t\t</div>\n\n\t\t\t<div class=\"field\">\n\t\t\t\t<label for=\"topic\">\n\t\t\t\t\tTopic <span class=\"optional\">(optional)</span>\n\t\t\t\t</label>\n\t\t\t\t<input\n\t\t\t\t\tid=\"topic\"\n\t\t\t\t\tbind:value={topic}\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tautocomplete=\"off\"\n\t\t\t\t\tdisabled={isSubmitting}\n\t\t\t\t/>\n\t\t\t\t<span class=\"hint\">e.g., JavaScript, Design Patterns, Math</span>\n\t\t\t</div>\n\n\t\t\t<div class=\"field\">\n\t\t\t\t<label for=\"project-select\">Project <span class=\"optional\">(optional)</span></label>\n\t\t\t\t<select\n\t\t\t\t\tid=\"project-select\"\n\t\t\t\t\tbind:value={project}\n\t\t\t\t\tonchange={handleProjectChange}\n\t\t\t\t\tdisabled={isSubmitting}\n\t\t\t\t\taria-describedby=\"project-hint\"\n\t\t\t\t>\n\t\t\t\t\t<option value=\"\">Select a project</option>\n\t\t\t\t\t{#each projectManager.all as p (p.id)}\n\t\t\t\t\t\t<option value={p.id}>{p.name}</option>\n\t\t\t\t\t{/each}\n\t\t\t\t\t<option value=\"__create__\">+ Create new project...</option>\n\t\t\t\t</select>\n\t\t\t\t<span id=\"project-hint\" class=\"hint\">Assign this card to a project or create a new one.</span>\n\t\t\t</div>\n\n\t\t\t{#if creatingProject}\n\t\t\t\t<div class=\"field\">\n\t\t\t\t\t<label for=\"project\">New project name <span class=\"required\">*</span></label>\n\t\t\t\t\t<input\n\t\t\t\t\t\tid=\"project\"\n\t\t\t\t\t\tbind:value={project}\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tautocomplete=\"off\"\n\t\t\t\t\t\tdisabled={isSubmitting}\n\t\t\t\t\t\tclass:error={projectError}\n\t\t\t\t\t/>\n\t\t\t\t\t{#if projectError}\n\t\t\t\t\t\t<span class=\"error-message\">{projectError}</span>\n\t\t\t\t\t{:else}\n\t\t\t\t\t\t<span class=\"hint\">Give your project a short, unique name.</span>\n\t\t\t\t\t{/if}\n\t\t\t\t</div>\n\t\t\t{/if}\n\n\t\t\t<div class=\"field\">\n\t\t\t\t<label for=\"prompt\">\n\t\t\t\t\tLearning prompt <span class=\"required\">*</span>\n\t\t\t\t</label>\n\t\t\t\t<textarea\n\t\t\t\t\tid=\"prompt\"\n\t\t\t\t\tbind:value={prompt}\n\t\t\t\t\trequired\n\t\t\t\t\tdisabled={isSubmitting}\n\t\t\t\t\tplaceholder=\"e.g. Explain the concept of closures in JavaScript\"\n\t\t\t\t\tclass:error={promptError}\n\t\t\t\t></textarea>\n\t\t\t\t{#if promptError}\n\t\t\t\t\t<span class=\"error-message\">{promptError}</span>\n\t\t\t\t{:else}\n\t\t\t\t\t<span class=\"hint\">What do you want to learn or understand?</span>\n\t\t\t\t{/if}\n\t\t\t</div>\n\n\t\t\t<div class=\"form-actions\">\n\t\t\t\t<button type=\"submit\" class=\"primary\" disabled={!isValid || isSubmitting}>\n\t\t\t\t\t{isSubmitting ? 'Saving...' : 'Save card'}\n\t\t\t\t</button>\n\t\t\t\t<button type=\"button\" class=\"ghost\" onclick={handleCancel} disabled={isSubmitting}>\n\t\t\t\t\tCancel\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</form>\n\t</section>\n"
						}
					},
					{
						"log": [
							"info",
							[
								{ "elements": [], "content": "Safe fix: Use " },
								{ "elements": ["Emphasis"], "content": "const" },
								{ "elements": [], "content": " instead." }
							]
						]
					},
					{
						"diff": {
							"dictionary": "/* global HTMLElement setTimeout */\nimport { projectManager } from \"../projectManager.svelte\";\n\nlet formElement: HTMLElement | null = null;\nlet firstFocusableElement: HTMLElement | null = null;letconst lastFocusableElement: HTMLElement | null = null;\n\n// Focus / accessibility handled by ModalContainer when used as modal; keep simple on-mount focus\t}\n}\n",
							"ops": [
								{ "diffOp": { "equal": { "range": [0, 95] } } },
								{ "equalLines": { "line_count": 75 } },
								{ "diffOp": { "equal": { "range": [95, 193] } } },
								{ "diffOp": { "equal": { "range": [95, 96] } } },
								{ "diffOp": { "delete": { "range": [193, 196] } } },
								{ "diffOp": { "insert": { "range": [196, 201] } } },
								{ "diffOp": { "equal": { "range": [201, 202] } } },
								{ "diffOp": { "equal": { "range": [202, 349] } } },
								{ "equalLines": { "line_count": 68 } },
								{ "diffOp": { "equal": { "range": [349, 354] } } }
							]
						}
					}
				]
			},
			"verboseAdvices": { "advices": [] },
			"location": {
				"path": { "file": "src\\lib\\components\\AddForm.svelte" },
				"span": [2178, 2181],
				"sourceCode": "<script lang=\"ts\">\n/* global HTMLElement setTimeout */\nimport { projectManager } from \"../projectManager.svelte\";\n\ninterface Props {\n\tonSubmit: (data: {\n\t\ttitle: string;\n\t\tprompt: string;\n\t\ttopic?: string;\n\t\tproject?: string;\n\t}) => Promise<void>;\n\tonCancel?: () => void;\n\tinitialProject?: string;\n}\n\nconst { onSubmit, onCancel, initialProject }: Props = $props();\n\n// Local state using Svelte 5 runes\nlet title = $state(\"\");\nlet topic = $state(\"\");\nlet project = $state(\"\");\n$effect(() => {\n\tproject =\n\t\tinitialProject ??\n\t\t(projectManager.selectedProject !== \"all\" &&\n\t\tprojectManager.selectedProject !== \"create\"\n\t\t\t? projectManager.selectedProject\n\t\t\t: \"\");\n});\nlet creatingProject = $state(false);\nlet prompt = $state(\"\");\nlet status = $state(\"\");\nlet isSubmitting = $state(false);\n\n// Derived validation state\nconst titleError = $derived.by(() => {\n\tconst trimmed = title.trim();\n\tif (trimmed.length === 0) return \"\";\n\tif (trimmed.length < 3) return \"Title must be at least 3 characters\";\n\tif (trimmed.length > 100) return \"Title must be less than 100 characters\";\n\treturn \"\";\n});\n\nconst promptError = $derived.by(() => {\n\tconst trimmed = prompt.trim();\n\tif (trimmed.length === 0) return \"\";\n\tif (trimmed.length < 10) return \"Prompt must be at least 10 characters\";\n\tif (trimmed.length > 8000) return \"Prompt must be less than 8000 characters\";\n\treturn \"\";\n});\n\nconst projectError = $derived.by(() => {\n\tif (creatingProject) {\n\t\tconst trimmed = project.trim();\n\t\tif (trimmed.length === 0) return \"Project name is required\";\n\t\tif (trimmed.length < 2) return \"Project name must be at least 2 characters\";\n\t\tif (trimmed.length > 50)\n\t\t\treturn \"Project name must be less than 50 characters\";\n\t\t// Check for duplicate project names\n\t\tif (\n\t\t\tprojectManager.all.some(\n\t\t\t\t(p) => p.name.toLowerCase() === trimmed.toLowerCase(),\n\t\t\t)\n\t\t) {\n\t\t\treturn \"A project with this name already exists\";\n\t\t}\n\t}\n\treturn \"\";\n});\n\nconst isValid = $derived.by(() => {\n\treturn (\n\t\ttitle.trim().length > 0 &&\n\t\tprompt.trim().length > 0 &&\n\t\t!titleError &&\n\t\t!promptError &&\n\t\t!projectError\n\t);\n});\n\nlet formElement: HTMLElement | null = null;\nlet firstFocusableElement: HTMLElement | null = null;\nlet lastFocusableElement: HTMLElement | null = null;\n\n// Focus / accessibility handled by ModalContainer when used as modal; keep simple on-mount focus\n$effect(() => {\n\tconst titleInput = document.getElementById(\n\t\t\"title\",\n\t) as HTMLInputElement | null;\n\tif (titleInput) setTimeout(() => titleInput.focus(), 0);\n});\n\nasync function handleSubmit(e: SubmitEvent) {\n\te.preventDefault();\n\n\tif (!isValid || isSubmitting) return;\n\n\tisSubmitting = true;\n\tstatus = \"\";\n\n\ttry {\n\t\tawait onSubmit({\n\t\t\ttitle: title.trim(),\n\t\t\tprompt: prompt.trim(),\n\t\t\ttopic: topic.trim() || undefined,\n\t\t\tproject: creatingProject\n\t\t\t\t? project.trim() || undefined\n\t\t\t\t: project || undefined,\n\t\t});\n\n\t\t// Success - clear form and close\n\t\tclearForm();\n\t\tonCancel?.();\n\n\t\t// Announce to screen readers\n\t\tannounceToSR(`Card \"${title}\" added successfully`);\n\t} catch (err) {\n\t\tstatus = err instanceof Error ? err.message : \"Failed to add card\";\n\t\tannounceToSR(status);\n\t} finally {\n\t\tisSubmitting = false;\n\t}\n}\n\nfunction handleProjectChange(e: Event) {\n\tconst select = e.target as HTMLSelectElement;\n\tif (select.value === \"__create__\") {\n\t\tcreatingProject = true;\n\t\tproject = \"\";\n\t} else {\n\t\tcreatingProject = false;\n\t\tproject = select.value;\n\t}\n}\n\nfunction clearForm() {\n\ttitle = \"\";\n\ttopic = \"\";\n\tproject = \"\";\n\tcreatingProject = false;\n\tprompt = \"\";\n\tstatus = \"\";\n}\n\nfunction handleCancel() {\n\tclearForm();\n\tonCancel?.();\n}\n\nfunction announceToSR(message: string) {\n\tconst announcer = document.getElementById(\"sr-announcements\");\n\tif (announcer) {\n\t\tannouncer.textContent = message;\n\t}\n}\n</script>\n\n\t<section id=\"add-section\" bind:this={formElement}>\n\t\t<form onsubmit={handleSubmit} aria-labelledby=\"add-heading\">\n\t\t\t<h2>New Card Details</h2>\n\n\t\t\t{#if status}\n\t\t\t\t<div role=\"status\" class=\"form-status\">{status}</div>\n\t\t\t{/if}\n\n\t\t\t<div class=\"field\">\n\t\t\t\t<label for=\"title\">\n\t\t\t\t\tTitle <span class=\"required\">*</span>\n\t\t\t\t</label>\n\t\t\t\t<input\n\t\t\t\t\tid=\"title\"\n\t\t\t\t\tbind:value={title}\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tautocomplete=\"off\"\n\t\t\t\t\trequired\n\t\t\t\t\tdisabled={isSubmitting}\n\t\t\t\t\tclass:error={titleError}\n\t\t\t\t/>\n\t\t\t\t{#if titleError}\n\t\t\t\t\t<span class=\"error-message\">{titleError}</span>\n\t\t\t\t{:else}\n\t\t\t\t\t<span class=\"hint\">Give your learning card a clear, memorable name.</span>\n\t\t\t\t{/if}\n\t\t\t</div>\n\n\t\t\t<div class=\"field\">\n\t\t\t\t<label for=\"topic\">\n\t\t\t\t\tTopic <span class=\"optional\">(optional)</span>\n\t\t\t\t</label>\n\t\t\t\t<input\n\t\t\t\t\tid=\"topic\"\n\t\t\t\t\tbind:value={topic}\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tautocomplete=\"off\"\n\t\t\t\t\tdisabled={isSubmitting}\n\t\t\t\t/>\n\t\t\t\t<span class=\"hint\">e.g., JavaScript, Design Patterns, Math</span>\n\t\t\t</div>\n\n\t\t\t<div class=\"field\">\n\t\t\t\t<label for=\"project-select\">Project <span class=\"optional\">(optional)</span></label>\n\t\t\t\t<select\n\t\t\t\t\tid=\"project-select\"\n\t\t\t\t\tbind:value={project}\n\t\t\t\t\tonchange={handleProjectChange}\n\t\t\t\t\tdisabled={isSubmitting}\n\t\t\t\t\taria-describedby=\"project-hint\"\n\t\t\t\t>\n\t\t\t\t\t<option value=\"\">Select a project</option>\n\t\t\t\t\t{#each projectManager.all as p (p.id)}\n\t\t\t\t\t\t<option value={p.id}>{p.name}</option>\n\t\t\t\t\t{/each}\n\t\t\t\t\t<option value=\"__create__\">+ Create new project...</option>\n\t\t\t\t</select>\n\t\t\t\t<span id=\"project-hint\" class=\"hint\">Assign this card to a project or create a new one.</span>\n\t\t\t</div>\n\n\t\t\t{#if creatingProject}\n\t\t\t\t<div class=\"field\">\n\t\t\t\t\t<label for=\"project\">New project name <span class=\"required\">*</span></label>\n\t\t\t\t\t<input\n\t\t\t\t\t\tid=\"project\"\n\t\t\t\t\t\tbind:value={project}\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tautocomplete=\"off\"\n\t\t\t\t\t\tdisabled={isSubmitting}\n\t\t\t\t\t\tclass:error={projectError}\n\t\t\t\t\t/>\n\t\t\t\t\t{#if projectError}\n\t\t\t\t\t\t<span class=\"error-message\">{projectError}</span>\n\t\t\t\t\t{:else}\n\t\t\t\t\t\t<span class=\"hint\">Give your project a short, unique name.</span>\n\t\t\t\t\t{/if}\n\t\t\t\t</div>\n\t\t\t{/if}\n\n\t\t\t<div class=\"field\">\n\t\t\t\t<label for=\"prompt\">\n\t\t\t\t\tLearning prompt <span class=\"required\">*</span>\n\t\t\t\t</label>\n\t\t\t\t<textarea\n\t\t\t\t\tid=\"prompt\"\n\t\t\t\t\tbind:value={prompt}\n\t\t\t\t\trequired\n\t\t\t\t\tdisabled={isSubmitting}\n\t\t\t\t\tplaceholder=\"e.g. Explain the concept of closures in JavaScript\"\n\t\t\t\t\tclass:error={promptError}\n\t\t\t\t></textarea>\n\t\t\t\t{#if promptError}\n\t\t\t\t\t<span class=\"error-message\">{promptError}</span>\n\t\t\t\t{:else}\n\t\t\t\t\t<span class=\"hint\">What do you want to learn or understand?</span>\n\t\t\t\t{/if}\n\t\t\t</div>\n\n\t\t\t<div class=\"form-actions\">\n\t\t\t\t<button type=\"submit\" class=\"primary\" disabled={!isValid || isSubmitting}>\n\t\t\t\t\t{isSubmitting ? 'Saving...' : 'Save card'}\n\t\t\t\t</button>\n\t\t\t\t<button type=\"button\" class=\"ghost\" onclick={handleCancel} disabled={isSubmitting}>\n\t\t\t\t\tCancel\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</form>\n\t</section>\n"
			},
			"tags": ["fixable"],
			"source": null
		},
		{
			"category": "lint/correctness/noUnusedVariables",
			"severity": "warning",
			"description": "This variable lastFocusableElement is unused.",
			"message": [
				{ "elements": [], "content": "This variable " },
				{ "elements": ["Emphasis"], "content": "lastFocusableElement" },
				{ "elements": [], "content": " is unused." }
			],
			"advices": {
				"advices": [
					{
						"log": [
							"info",
							[
								{
									"elements": [],
									"content": "Unused variables are often the result of typos, incomplete refactors, or other sources of bugs."
								}
							]
						]
					},
					{
						"log": [
							"info",
							[
								{
									"elements": [],
									"content": "Unsafe fix: If this is intentional, prepend "
								},
								{ "elements": ["Emphasis"], "content": "lastFocusableElement" },
								{ "elements": [], "content": " with an underscore." }
							]
						]
					},
					{
						"diff": {
							"dictionary": "/* global HTMLElement setTimeout */\nimport { projectManager } from \"../projectManager.svelte\";\nlet formElement: HTMLElement | null = null;\nlet firstFocusableElement: HTMLElement | null = null;\nlet lastFocusableElement_lastFocusableElement: HTMLElement | null = null;\n\n// Focus / accessibility handled by ModalContainer when used as modal; keep simple on-mount focus\t}\n}\n",
							"ops": [
								{ "diffOp": { "equal": { "range": [0, 95] } } },
								{ "equalLines": { "line_count": 76 } },
								{ "diffOp": { "equal": { "range": [95, 197] } } },
								{ "diffOp": { "delete": { "range": [197, 217] } } },
								{ "diffOp": { "insert": { "range": [217, 238] } } },
								{ "diffOp": { "equal": { "range": [238, 365] } } },
								{ "equalLines": { "line_count": 68 } },
								{ "diffOp": { "equal": { "range": [365, 370] } } }
							]
						}
					}
				]
			},
			"verboseAdvices": { "advices": [] },
			"location": {
				"path": { "file": "src\\lib\\components\\AddForm.svelte" },
				"span": [2182, 2202],
				"sourceCode": "<script lang=\"ts\">\n/* global HTMLElement setTimeout */\nimport { projectManager } from \"../projectManager.svelte\";\n\ninterface Props {\n\tonSubmit: (data: {\n\t\ttitle: string;\n\t\tprompt: string;\n\t\ttopic?: string;\n\t\tproject?: string;\n\t}) => Promise<void>;\n\tonCancel?: () => void;\n\tinitialProject?: string;\n}\n\nconst { onSubmit, onCancel, initialProject }: Props = $props();\n\n// Local state using Svelte 5 runes\nlet title = $state(\"\");\nlet topic = $state(\"\");\nlet project = $state(\"\");\n$effect(() => {\n\tproject =\n\t\tinitialProject ??\n\t\t(projectManager.selectedProject !== \"all\" &&\n\t\tprojectManager.selectedProject !== \"create\"\n\t\t\t? projectManager.selectedProject\n\t\t\t: \"\");\n});\nlet creatingProject = $state(false);\nlet prompt = $state(\"\");\nlet status = $state(\"\");\nlet isSubmitting = $state(false);\n\n// Derived validation state\nconst titleError = $derived.by(() => {\n\tconst trimmed = title.trim();\n\tif (trimmed.length === 0) return \"\";\n\tif (trimmed.length < 3) return \"Title must be at least 3 characters\";\n\tif (trimmed.length > 100) return \"Title must be less than 100 characters\";\n\treturn \"\";\n});\n\nconst promptError = $derived.by(() => {\n\tconst trimmed = prompt.trim();\n\tif (trimmed.length === 0) return \"\";\n\tif (trimmed.length < 10) return \"Prompt must be at least 10 characters\";\n\tif (trimmed.length > 8000) return \"Prompt must be less than 8000 characters\";\n\treturn \"\";\n});\n\nconst projectError = $derived.by(() => {\n\tif (creatingProject) {\n\t\tconst trimmed = project.trim();\n\t\tif (trimmed.length === 0) return \"Project name is required\";\n\t\tif (trimmed.length < 2) return \"Project name must be at least 2 characters\";\n\t\tif (trimmed.length > 50)\n\t\t\treturn \"Project name must be less than 50 characters\";\n\t\t// Check for duplicate project names\n\t\tif (\n\t\t\tprojectManager.all.some(\n\t\t\t\t(p) => p.name.toLowerCase() === trimmed.toLowerCase(),\n\t\t\t)\n\t\t) {\n\t\t\treturn \"A project with this name already exists\";\n\t\t}\n\t}\n\treturn \"\";\n});\n\nconst isValid = $derived.by(() => {\n\treturn (\n\t\ttitle.trim().length > 0 &&\n\t\tprompt.trim().length > 0 &&\n\t\t!titleError &&\n\t\t!promptError &&\n\t\t!projectError\n\t);\n});\n\nlet formElement: HTMLElement | null = null;\nlet firstFocusableElement: HTMLElement | null = null;\nlet lastFocusableElement: HTMLElement | null = null;\n\n// Focus / accessibility handled by ModalContainer when used as modal; keep simple on-mount focus\n$effect(() => {\n\tconst titleInput = document.getElementById(\n\t\t\"title\",\n\t) as HTMLInputElement | null;\n\tif (titleInput) setTimeout(() => titleInput.focus(), 0);\n});\n\nasync function handleSubmit(e: SubmitEvent) {\n\te.preventDefault();\n\n\tif (!isValid || isSubmitting) return;\n\n\tisSubmitting = true;\n\tstatus = \"\";\n\n\ttry {\n\t\tawait onSubmit({\n\t\t\ttitle: title.trim(),\n\t\t\tprompt: prompt.trim(),\n\t\t\ttopic: topic.trim() || undefined,\n\t\t\tproject: creatingProject\n\t\t\t\t? project.trim() || undefined\n\t\t\t\t: project || undefined,\n\t\t});\n\n\t\t// Success - clear form and close\n\t\tclearForm();\n\t\tonCancel?.();\n\n\t\t// Announce to screen readers\n\t\tannounceToSR(`Card \"${title}\" added successfully`);\n\t} catch (err) {\n\t\tstatus = err instanceof Error ? err.message : \"Failed to add card\";\n\t\tannounceToSR(status);\n\t} finally {\n\t\tisSubmitting = false;\n\t}\n}\n\nfunction handleProjectChange(e: Event) {\n\tconst select = e.target as HTMLSelectElement;\n\tif (select.value === \"__create__\") {\n\t\tcreatingProject = true;\n\t\tproject = \"\";\n\t} else {\n\t\tcreatingProject = false;\n\t\tproject = select.value;\n\t}\n}\n\nfunction clearForm() {\n\ttitle = \"\";\n\ttopic = \"\";\n\tproject = \"\";\n\tcreatingProject = false;\n\tprompt = \"\";\n\tstatus = \"\";\n}\n\nfunction handleCancel() {\n\tclearForm();\n\tonCancel?.();\n}\n\nfunction announceToSR(message: string) {\n\tconst announcer = document.getElementById(\"sr-announcements\");\n\tif (announcer) {\n\t\tannouncer.textContent = message;\n\t}\n}\n</script>\n\n\t<section id=\"add-section\" bind:this={formElement}>\n\t\t<form onsubmit={handleSubmit} aria-labelledby=\"add-heading\">\n\t\t\t<h2>New Card Details</h2>\n\n\t\t\t{#if status}\n\t\t\t\t<div role=\"status\" class=\"form-status\">{status}</div>\n\t\t\t{/if}\n\n\t\t\t<div class=\"field\">\n\t\t\t\t<label for=\"title\">\n\t\t\t\t\tTitle <span class=\"required\">*</span>\n\t\t\t\t</label>\n\t\t\t\t<input\n\t\t\t\t\tid=\"title\"\n\t\t\t\t\tbind:value={title}\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tautocomplete=\"off\"\n\t\t\t\t\trequired\n\t\t\t\t\tdisabled={isSubmitting}\n\t\t\t\t\tclass:error={titleError}\n\t\t\t\t/>\n\t\t\t\t{#if titleError}\n\t\t\t\t\t<span class=\"error-message\">{titleError}</span>\n\t\t\t\t{:else}\n\t\t\t\t\t<span class=\"hint\">Give your learning card a clear, memorable name.</span>\n\t\t\t\t{/if}\n\t\t\t</div>\n\n\t\t\t<div class=\"field\">\n\t\t\t\t<label for=\"topic\">\n\t\t\t\t\tTopic <span class=\"optional\">(optional)</span>\n\t\t\t\t</label>\n\t\t\t\t<input\n\t\t\t\t\tid=\"topic\"\n\t\t\t\t\tbind:value={topic}\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tautocomplete=\"off\"\n\t\t\t\t\tdisabled={isSubmitting}\n\t\t\t\t/>\n\t\t\t\t<span class=\"hint\">e.g., JavaScript, Design Patterns, Math</span>\n\t\t\t</div>\n\n\t\t\t<div class=\"field\">\n\t\t\t\t<label for=\"project-select\">Project <span class=\"optional\">(optional)</span></label>\n\t\t\t\t<select\n\t\t\t\t\tid=\"project-select\"\n\t\t\t\t\tbind:value={project}\n\t\t\t\t\tonchange={handleProjectChange}\n\t\t\t\t\tdisabled={isSubmitting}\n\t\t\t\t\taria-describedby=\"project-hint\"\n\t\t\t\t>\n\t\t\t\t\t<option value=\"\">Select a project</option>\n\t\t\t\t\t{#each projectManager.all as p (p.id)}\n\t\t\t\t\t\t<option value={p.id}>{p.name}</option>\n\t\t\t\t\t{/each}\n\t\t\t\t\t<option value=\"__create__\">+ Create new project...</option>\n\t\t\t\t</select>\n\t\t\t\t<span id=\"project-hint\" class=\"hint\">Assign this card to a project or create a new one.</span>\n\t\t\t</div>\n\n\t\t\t{#if creatingProject}\n\t\t\t\t<div class=\"field\">\n\t\t\t\t\t<label for=\"project\">New project name <span class=\"required\">*</span></label>\n\t\t\t\t\t<input\n\t\t\t\t\t\tid=\"project\"\n\t\t\t\t\t\tbind:value={project}\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tautocomplete=\"off\"\n\t\t\t\t\t\tdisabled={isSubmitting}\n\t\t\t\t\t\tclass:error={projectError}\n\t\t\t\t\t/>\n\t\t\t\t\t{#if projectError}\n\t\t\t\t\t\t<span class=\"error-message\">{projectError}</span>\n\t\t\t\t\t{:else}\n\t\t\t\t\t\t<span class=\"hint\">Give your project a short, unique name.</span>\n\t\t\t\t\t{/if}\n\t\t\t\t</div>\n\t\t\t{/if}\n\n\t\t\t<div class=\"field\">\n\t\t\t\t<label for=\"prompt\">\n\t\t\t\t\tLearning prompt <span class=\"required\">*</span>\n\t\t\t\t</label>\n\t\t\t\t<textarea\n\t\t\t\t\tid=\"prompt\"\n\t\t\t\t\tbind:value={prompt}\n\t\t\t\t\trequired\n\t\t\t\t\tdisabled={isSubmitting}\n\t\t\t\t\tplaceholder=\"e.g. Explain the concept of closures in JavaScript\"\n\t\t\t\t\tclass:error={promptError}\n\t\t\t\t></textarea>\n\t\t\t\t{#if promptError}\n\t\t\t\t\t<span class=\"error-message\">{promptError}</span>\n\t\t\t\t{:else}\n\t\t\t\t\t<span class=\"hint\">What do you want to learn or understand?</span>\n\t\t\t\t{/if}\n\t\t\t</div>\n\n\t\t\t<div class=\"form-actions\">\n\t\t\t\t<button type=\"submit\" class=\"primary\" disabled={!isValid || isSubmitting}>\n\t\t\t\t\t{isSubmitting ? 'Saving...' : 'Save card'}\n\t\t\t\t</button>\n\t\t\t\t<button type=\"button\" class=\"ghost\" onclick={handleCancel} disabled={isSubmitting}>\n\t\t\t\t\tCancel\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</form>\n\t</section>\n"
			},
			"tags": ["fixable"],
			"source": null
		},
		{
			"category": "lint/correctness/noUnusedVariables",
			"severity": "warning",
			"description": "This function handleSubmit is unused.",
			"message": [
				{ "elements": [], "content": "This function " },
				{ "elements": ["Emphasis"], "content": "handleSubmit" },
				{ "elements": [], "content": " is unused." }
			],
			"advices": {
				"advices": [
					{
						"log": [
							"info",
							[
								{
									"elements": [],
									"content": "Unused variables are often the result of typos, incomplete refactors, or other sources of bugs."
								}
							]
						]
					},
					{
						"log": [
							"info",
							[
								{
									"elements": [],
									"content": "Unsafe fix: If this is intentional, prepend "
								},
								{ "elements": ["Emphasis"], "content": "handleSubmit" },
								{ "elements": [], "content": " with an underscore." }
							]
						]
					},
					{
						"diff": {
							"dictionary": "/* global HTMLElement setTimeout */\nimport { projectManager } from \"../projectManager.svelte\";\n});\n\nasync function handleSubmit_handleSubmit(e: SubmitEvent) {\n\te.preventDefault();\n\t}\n}\n",
							"ops": [
								{ "diffOp": { "equal": { "range": [0, 95] } } },
								{ "equalLines": { "line_count": 86 } },
								{ "diffOp": { "equal": { "range": [95, 115] } } },
								{ "diffOp": { "delete": { "range": [115, 127] } } },
								{ "diffOp": { "insert": { "range": [127, 140] } } },
								{ "diffOp": { "equal": { "range": [140, 180] } } },
								{ "equalLines": { "line_count": 58 } },
								{ "diffOp": { "equal": { "range": [180, 185] } } }
							]
						}
					}
				]
			},
			"verboseAdvices": { "advices": [] },
			"location": {
				"path": { "file": "src\\lib\\components\\AddForm.svelte" },
				"span": [2511, 2523],
				"sourceCode": "<script lang=\"ts\">\n/* global HTMLElement setTimeout */\nimport { projectManager } from \"../projectManager.svelte\";\n\ninterface Props {\n\tonSubmit: (data: {\n\t\ttitle: string;\n\t\tprompt: string;\n\t\ttopic?: string;\n\t\tproject?: string;\n\t}) => Promise<void>;\n\tonCancel?: () => void;\n\tinitialProject?: string;\n}\n\nconst { onSubmit, onCancel, initialProject }: Props = $props();\n\n// Local state using Svelte 5 runes\nlet title = $state(\"\");\nlet topic = $state(\"\");\nlet project = $state(\"\");\n$effect(() => {\n\tproject =\n\t\tinitialProject ??\n\t\t(projectManager.selectedProject !== \"all\" &&\n\t\tprojectManager.selectedProject !== \"create\"\n\t\t\t? projectManager.selectedProject\n\t\t\t: \"\");\n});\nlet creatingProject = $state(false);\nlet prompt = $state(\"\");\nlet status = $state(\"\");\nlet isSubmitting = $state(false);\n\n// Derived validation state\nconst titleError = $derived.by(() => {\n\tconst trimmed = title.trim();\n\tif (trimmed.length === 0) return \"\";\n\tif (trimmed.length < 3) return \"Title must be at least 3 characters\";\n\tif (trimmed.length > 100) return \"Title must be less than 100 characters\";\n\treturn \"\";\n});\n\nconst promptError = $derived.by(() => {\n\tconst trimmed = prompt.trim();\n\tif (trimmed.length === 0) return \"\";\n\tif (trimmed.length < 10) return \"Prompt must be at least 10 characters\";\n\tif (trimmed.length > 8000) return \"Prompt must be less than 8000 characters\";\n\treturn \"\";\n});\n\nconst projectError = $derived.by(() => {\n\tif (creatingProject) {\n\t\tconst trimmed = project.trim();\n\t\tif (trimmed.length === 0) return \"Project name is required\";\n\t\tif (trimmed.length < 2) return \"Project name must be at least 2 characters\";\n\t\tif (trimmed.length > 50)\n\t\t\treturn \"Project name must be less than 50 characters\";\n\t\t// Check for duplicate project names\n\t\tif (\n\t\t\tprojectManager.all.some(\n\t\t\t\t(p) => p.name.toLowerCase() === trimmed.toLowerCase(),\n\t\t\t)\n\t\t) {\n\t\t\treturn \"A project with this name already exists\";\n\t\t}\n\t}\n\treturn \"\";\n});\n\nconst isValid = $derived.by(() => {\n\treturn (\n\t\ttitle.trim().length > 0 &&\n\t\tprompt.trim().length > 0 &&\n\t\t!titleError &&\n\t\t!promptError &&\n\t\t!projectError\n\t);\n});\n\nlet formElement: HTMLElement | null = null;\nlet firstFocusableElement: HTMLElement | null = null;\nlet lastFocusableElement: HTMLElement | null = null;\n\n// Focus / accessibility handled by ModalContainer when used as modal; keep simple on-mount focus\n$effect(() => {\n\tconst titleInput = document.getElementById(\n\t\t\"title\",\n\t) as HTMLInputElement | null;\n\tif (titleInput) setTimeout(() => titleInput.focus(), 0);\n});\n\nasync function handleSubmit(e: SubmitEvent) {\n\te.preventDefault();\n\n\tif (!isValid || isSubmitting) return;\n\n\tisSubmitting = true;\n\tstatus = \"\";\n\n\ttry {\n\t\tawait onSubmit({\n\t\t\ttitle: title.trim(),\n\t\t\tprompt: prompt.trim(),\n\t\t\ttopic: topic.trim() || undefined,\n\t\t\tproject: creatingProject\n\t\t\t\t? project.trim() || undefined\n\t\t\t\t: project || undefined,\n\t\t});\n\n\t\t// Success - clear form and close\n\t\tclearForm();\n\t\tonCancel?.();\n\n\t\t// Announce to screen readers\n\t\tannounceToSR(`Card \"${title}\" added successfully`);\n\t} catch (err) {\n\t\tstatus = err instanceof Error ? err.message : \"Failed to add card\";\n\t\tannounceToSR(status);\n\t} finally {\n\t\tisSubmitting = false;\n\t}\n}\n\nfunction handleProjectChange(e: Event) {\n\tconst select = e.target as HTMLSelectElement;\n\tif (select.value === \"__create__\") {\n\t\tcreatingProject = true;\n\t\tproject = \"\";\n\t} else {\n\t\tcreatingProject = false;\n\t\tproject = select.value;\n\t}\n}\n\nfunction clearForm() {\n\ttitle = \"\";\n\ttopic = \"\";\n\tproject = \"\";\n\tcreatingProject = false;\n\tprompt = \"\";\n\tstatus = \"\";\n}\n\nfunction handleCancel() {\n\tclearForm();\n\tonCancel?.();\n}\n\nfunction announceToSR(message: string) {\n\tconst announcer = document.getElementById(\"sr-announcements\");\n\tif (announcer) {\n\t\tannouncer.textContent = message;\n\t}\n}\n</script>\n\n\t<section id=\"add-section\" bind:this={formElement}>\n\t\t<form onsubmit={handleSubmit} aria-labelledby=\"add-heading\">\n\t\t\t<h2>New Card Details</h2>\n\n\t\t\t{#if status}\n\t\t\t\t<div role=\"status\" class=\"form-status\">{status}</div>\n\t\t\t{/if}\n\n\t\t\t<div class=\"field\">\n\t\t\t\t<label for=\"title\">\n\t\t\t\t\tTitle <span class=\"required\">*</span>\n\t\t\t\t</label>\n\t\t\t\t<input\n\t\t\t\t\tid=\"title\"\n\t\t\t\t\tbind:value={title}\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tautocomplete=\"off\"\n\t\t\t\t\trequired\n\t\t\t\t\tdisabled={isSubmitting}\n\t\t\t\t\tclass:error={titleError}\n\t\t\t\t/>\n\t\t\t\t{#if titleError}\n\t\t\t\t\t<span class=\"error-message\">{titleError}</span>\n\t\t\t\t{:else}\n\t\t\t\t\t<span class=\"hint\">Give your learning card a clear, memorable name.</span>\n\t\t\t\t{/if}\n\t\t\t</div>\n\n\t\t\t<div class=\"field\">\n\t\t\t\t<label for=\"topic\">\n\t\t\t\t\tTopic <span class=\"optional\">(optional)</span>\n\t\t\t\t</label>\n\t\t\t\t<input\n\t\t\t\t\tid=\"topic\"\n\t\t\t\t\tbind:value={topic}\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tautocomplete=\"off\"\n\t\t\t\t\tdisabled={isSubmitting}\n\t\t\t\t/>\n\t\t\t\t<span class=\"hint\">e.g., JavaScript, Design Patterns, Math</span>\n\t\t\t</div>\n\n\t\t\t<div class=\"field\">\n\t\t\t\t<label for=\"project-select\">Project <span class=\"optional\">(optional)</span></label>\n\t\t\t\t<select\n\t\t\t\t\tid=\"project-select\"\n\t\t\t\t\tbind:value={project}\n\t\t\t\t\tonchange={handleProjectChange}\n\t\t\t\t\tdisabled={isSubmitting}\n\t\t\t\t\taria-describedby=\"project-hint\"\n\t\t\t\t>\n\t\t\t\t\t<option value=\"\">Select a project</option>\n\t\t\t\t\t{#each projectManager.all as p (p.id)}\n\t\t\t\t\t\t<option value={p.id}>{p.name}</option>\n\t\t\t\t\t{/each}\n\t\t\t\t\t<option value=\"__create__\">+ Create new project...</option>\n\t\t\t\t</select>\n\t\t\t\t<span id=\"project-hint\" class=\"hint\">Assign this card to a project or create a new one.</span>\n\t\t\t</div>\n\n\t\t\t{#if creatingProject}\n\t\t\t\t<div class=\"field\">\n\t\t\t\t\t<label for=\"project\">New project name <span class=\"required\">*</span></label>\n\t\t\t\t\t<input\n\t\t\t\t\t\tid=\"project\"\n\t\t\t\t\t\tbind:value={project}\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tautocomplete=\"off\"\n\t\t\t\t\t\tdisabled={isSubmitting}\n\t\t\t\t\t\tclass:error={projectError}\n\t\t\t\t\t/>\n\t\t\t\t\t{#if projectError}\n\t\t\t\t\t\t<span class=\"error-message\">{projectError}</span>\n\t\t\t\t\t{:else}\n\t\t\t\t\t\t<span class=\"hint\">Give your project a short, unique name.</span>\n\t\t\t\t\t{/if}\n\t\t\t\t</div>\n\t\t\t{/if}\n\n\t\t\t<div class=\"field\">\n\t\t\t\t<label for=\"prompt\">\n\t\t\t\t\tLearning prompt <span class=\"required\">*</span>\n\t\t\t\t</label>\n\t\t\t\t<textarea\n\t\t\t\t\tid=\"prompt\"\n\t\t\t\t\tbind:value={prompt}\n\t\t\t\t\trequired\n\t\t\t\t\tdisabled={isSubmitting}\n\t\t\t\t\tplaceholder=\"e.g. Explain the concept of closures in JavaScript\"\n\t\t\t\t\tclass:error={promptError}\n\t\t\t\t></textarea>\n\t\t\t\t{#if promptError}\n\t\t\t\t\t<span class=\"error-message\">{promptError}</span>\n\t\t\t\t{:else}\n\t\t\t\t\t<span class=\"hint\">What do you want to learn or understand?</span>\n\t\t\t\t{/if}\n\t\t\t</div>\n\n\t\t\t<div class=\"form-actions\">\n\t\t\t\t<button type=\"submit\" class=\"primary\" disabled={!isValid || isSubmitting}>\n\t\t\t\t\t{isSubmitting ? 'Saving...' : 'Save card'}\n\t\t\t\t</button>\n\t\t\t\t<button type=\"button\" class=\"ghost\" onclick={handleCancel} disabled={isSubmitting}>\n\t\t\t\t\tCancel\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</form>\n\t</section>\n"
			},
			"tags": ["fixable"],
			"source": null
		},
		{
			"category": "lint/correctness/noUnusedVariables",
			"severity": "warning",
			"description": "This function handleProjectChange is unused.",
			"message": [
				{ "elements": [], "content": "This function " },
				{ "elements": ["Emphasis"], "content": "handleProjectChange" },
				{ "elements": [], "content": " is unused." }
			],
			"advices": {
				"advices": [
					{
						"log": [
							"info",
							[
								{
									"elements": [],
									"content": "Unused variables are often the result of typos, incomplete refactors, or other sources of bugs."
								}
							]
						]
					},
					{
						"log": [
							"info",
							[
								{
									"elements": [],
									"content": "Unsafe fix: If this is intentional, prepend "
								},
								{ "elements": ["Emphasis"], "content": "handleProjectChange" },
								{ "elements": [], "content": " with an underscore." }
							]
						]
					},
					{
						"diff": {
							"dictionary": "/* global HTMLElement setTimeout */\nimport { projectManager } from \"../projectManager.svelte\";\n}\n\nfunction handleProjectChange_handleProjectChange(e: Event) {\n\tconst select = e.target as HTMLSelectElement;\n\tif (select.value === \"__create__\") {\t}\n}\n",
							"ops": [
								{ "diffOp": { "equal": { "range": [0, 95] } } },
								{ "equalLines": { "line_count": 118 } },
								{ "diffOp": { "equal": { "range": [95, 107] } } },
								{ "diffOp": { "delete": { "range": [107, 126] } } },
								{ "diffOp": { "insert": { "range": [126, 146] } } },
								{ "diffOp": { "equal": { "range": [146, 243] } } },
								{ "equalLines": { "line_count": 26 } },
								{ "diffOp": { "equal": { "range": [243, 248] } } }
							]
						}
					}
				]
			},
			"verboseAdvices": { "advices": [] },
			"location": {
				"path": { "file": "src\\lib\\components\\AddForm.svelte" },
				"span": [3168, 3187],
				"sourceCode": "<script lang=\"ts\">\n/* global HTMLElement setTimeout */\nimport { projectManager } from \"../projectManager.svelte\";\n\ninterface Props {\n\tonSubmit: (data: {\n\t\ttitle: string;\n\t\tprompt: string;\n\t\ttopic?: string;\n\t\tproject?: string;\n\t}) => Promise<void>;\n\tonCancel?: () => void;\n\tinitialProject?: string;\n}\n\nconst { onSubmit, onCancel, initialProject }: Props = $props();\n\n// Local state using Svelte 5 runes\nlet title = $state(\"\");\nlet topic = $state(\"\");\nlet project = $state(\"\");\n$effect(() => {\n\tproject =\n\t\tinitialProject ??\n\t\t(projectManager.selectedProject !== \"all\" &&\n\t\tprojectManager.selectedProject !== \"create\"\n\t\t\t? projectManager.selectedProject\n\t\t\t: \"\");\n});\nlet creatingProject = $state(false);\nlet prompt = $state(\"\");\nlet status = $state(\"\");\nlet isSubmitting = $state(false);\n\n// Derived validation state\nconst titleError = $derived.by(() => {\n\tconst trimmed = title.trim();\n\tif (trimmed.length === 0) return \"\";\n\tif (trimmed.length < 3) return \"Title must be at least 3 characters\";\n\tif (trimmed.length > 100) return \"Title must be less than 100 characters\";\n\treturn \"\";\n});\n\nconst promptError = $derived.by(() => {\n\tconst trimmed = prompt.trim();\n\tif (trimmed.length === 0) return \"\";\n\tif (trimmed.length < 10) return \"Prompt must be at least 10 characters\";\n\tif (trimmed.length > 8000) return \"Prompt must be less than 8000 characters\";\n\treturn \"\";\n});\n\nconst projectError = $derived.by(() => {\n\tif (creatingProject) {\n\t\tconst trimmed = project.trim();\n\t\tif (trimmed.length === 0) return \"Project name is required\";\n\t\tif (trimmed.length < 2) return \"Project name must be at least 2 characters\";\n\t\tif (trimmed.length > 50)\n\t\t\treturn \"Project name must be less than 50 characters\";\n\t\t// Check for duplicate project names\n\t\tif (\n\t\t\tprojectManager.all.some(\n\t\t\t\t(p) => p.name.toLowerCase() === trimmed.toLowerCase(),\n\t\t\t)\n\t\t) {\n\t\t\treturn \"A project with this name already exists\";\n\t\t}\n\t}\n\treturn \"\";\n});\n\nconst isValid = $derived.by(() => {\n\treturn (\n\t\ttitle.trim().length > 0 &&\n\t\tprompt.trim().length > 0 &&\n\t\t!titleError &&\n\t\t!promptError &&\n\t\t!projectError\n\t);\n});\n\nlet formElement: HTMLElement | null = null;\nlet firstFocusableElement: HTMLElement | null = null;\nlet lastFocusableElement: HTMLElement | null = null;\n\n// Focus / accessibility handled by ModalContainer when used as modal; keep simple on-mount focus\n$effect(() => {\n\tconst titleInput = document.getElementById(\n\t\t\"title\",\n\t) as HTMLInputElement | null;\n\tif (titleInput) setTimeout(() => titleInput.focus(), 0);\n});\n\nasync function handleSubmit(e: SubmitEvent) {\n\te.preventDefault();\n\n\tif (!isValid || isSubmitting) return;\n\n\tisSubmitting = true;\n\tstatus = \"\";\n\n\ttry {\n\t\tawait onSubmit({\n\t\t\ttitle: title.trim(),\n\t\t\tprompt: prompt.trim(),\n\t\t\ttopic: topic.trim() || undefined,\n\t\t\tproject: creatingProject\n\t\t\t\t? project.trim() || undefined\n\t\t\t\t: project || undefined,\n\t\t});\n\n\t\t// Success - clear form and close\n\t\tclearForm();\n\t\tonCancel?.();\n\n\t\t// Announce to screen readers\n\t\tannounceToSR(`Card \"${title}\" added successfully`);\n\t} catch (err) {\n\t\tstatus = err instanceof Error ? err.message : \"Failed to add card\";\n\t\tannounceToSR(status);\n\t} finally {\n\t\tisSubmitting = false;\n\t}\n}\n\nfunction handleProjectChange(e: Event) {\n\tconst select = e.target as HTMLSelectElement;\n\tif (select.value === \"__create__\") {\n\t\tcreatingProject = true;\n\t\tproject = \"\";\n\t} else {\n\t\tcreatingProject = false;\n\t\tproject = select.value;\n\t}\n}\n\nfunction clearForm() {\n\ttitle = \"\";\n\ttopic = \"\";\n\tproject = \"\";\n\tcreatingProject = false;\n\tprompt = \"\";\n\tstatus = \"\";\n}\n\nfunction handleCancel() {\n\tclearForm();\n\tonCancel?.();\n}\n\nfunction announceToSR(message: string) {\n\tconst announcer = document.getElementById(\"sr-announcements\");\n\tif (announcer) {\n\t\tannouncer.textContent = message;\n\t}\n}\n</script>\n\n\t<section id=\"add-section\" bind:this={formElement}>\n\t\t<form onsubmit={handleSubmit} aria-labelledby=\"add-heading\">\n\t\t\t<h2>New Card Details</h2>\n\n\t\t\t{#if status}\n\t\t\t\t<div role=\"status\" class=\"form-status\">{status}</div>\n\t\t\t{/if}\n\n\t\t\t<div class=\"field\">\n\t\t\t\t<label for=\"title\">\n\t\t\t\t\tTitle <span class=\"required\">*</span>\n\t\t\t\t</label>\n\t\t\t\t<input\n\t\t\t\t\tid=\"title\"\n\t\t\t\t\tbind:value={title}\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tautocomplete=\"off\"\n\t\t\t\t\trequired\n\t\t\t\t\tdisabled={isSubmitting}\n\t\t\t\t\tclass:error={titleError}\n\t\t\t\t/>\n\t\t\t\t{#if titleError}\n\t\t\t\t\t<span class=\"error-message\">{titleError}</span>\n\t\t\t\t{:else}\n\t\t\t\t\t<span class=\"hint\">Give your learning card a clear, memorable name.</span>\n\t\t\t\t{/if}\n\t\t\t</div>\n\n\t\t\t<div class=\"field\">\n\t\t\t\t<label for=\"topic\">\n\t\t\t\t\tTopic <span class=\"optional\">(optional)</span>\n\t\t\t\t</label>\n\t\t\t\t<input\n\t\t\t\t\tid=\"topic\"\n\t\t\t\t\tbind:value={topic}\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tautocomplete=\"off\"\n\t\t\t\t\tdisabled={isSubmitting}\n\t\t\t\t/>\n\t\t\t\t<span class=\"hint\">e.g., JavaScript, Design Patterns, Math</span>\n\t\t\t</div>\n\n\t\t\t<div class=\"field\">\n\t\t\t\t<label for=\"project-select\">Project <span class=\"optional\">(optional)</span></label>\n\t\t\t\t<select\n\t\t\t\t\tid=\"project-select\"\n\t\t\t\t\tbind:value={project}\n\t\t\t\t\tonchange={handleProjectChange}\n\t\t\t\t\tdisabled={isSubmitting}\n\t\t\t\t\taria-describedby=\"project-hint\"\n\t\t\t\t>\n\t\t\t\t\t<option value=\"\">Select a project</option>\n\t\t\t\t\t{#each projectManager.all as p (p.id)}\n\t\t\t\t\t\t<option value={p.id}>{p.name}</option>\n\t\t\t\t\t{/each}\n\t\t\t\t\t<option value=\"__create__\">+ Create new project...</option>\n\t\t\t\t</select>\n\t\t\t\t<span id=\"project-hint\" class=\"hint\">Assign this card to a project or create a new one.</span>\n\t\t\t</div>\n\n\t\t\t{#if creatingProject}\n\t\t\t\t<div class=\"field\">\n\t\t\t\t\t<label for=\"project\">New project name <span class=\"required\">*</span></label>\n\t\t\t\t\t<input\n\t\t\t\t\t\tid=\"project\"\n\t\t\t\t\t\tbind:value={project}\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tautocomplete=\"off\"\n\t\t\t\t\t\tdisabled={isSubmitting}\n\t\t\t\t\t\tclass:error={projectError}\n\t\t\t\t\t/>\n\t\t\t\t\t{#if projectError}\n\t\t\t\t\t\t<span class=\"error-message\">{projectError}</span>\n\t\t\t\t\t{:else}\n\t\t\t\t\t\t<span class=\"hint\">Give your project a short, unique name.</span>\n\t\t\t\t\t{/if}\n\t\t\t\t</div>\n\t\t\t{/if}\n\n\t\t\t<div class=\"field\">\n\t\t\t\t<label for=\"prompt\">\n\t\t\t\t\tLearning prompt <span class=\"required\">*</span>\n\t\t\t\t</label>\n\t\t\t\t<textarea\n\t\t\t\t\tid=\"prompt\"\n\t\t\t\t\tbind:value={prompt}\n\t\t\t\t\trequired\n\t\t\t\t\tdisabled={isSubmitting}\n\t\t\t\t\tplaceholder=\"e.g. Explain the concept of closures in JavaScript\"\n\t\t\t\t\tclass:error={promptError}\n\t\t\t\t></textarea>\n\t\t\t\t{#if promptError}\n\t\t\t\t\t<span class=\"error-message\">{promptError}</span>\n\t\t\t\t{:else}\n\t\t\t\t\t<span class=\"hint\">What do you want to learn or understand?</span>\n\t\t\t\t{/if}\n\t\t\t</div>\n\n\t\t\t<div class=\"form-actions\">\n\t\t\t\t<button type=\"submit\" class=\"primary\" disabled={!isValid || isSubmitting}>\n\t\t\t\t\t{isSubmitting ? 'Saving...' : 'Save card'}\n\t\t\t\t</button>\n\t\t\t\t<button type=\"button\" class=\"ghost\" onclick={handleCancel} disabled={isSubmitting}>\n\t\t\t\t\tCancel\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</form>\n\t</section>\n"
			},
			"tags": ["fixable"],
			"source": null
		},
		{
			"category": "lint/correctness/noUnusedVariables",
			"severity": "warning",
			"description": "This function handleCancel is unused.",
			"message": [
				{ "elements": [], "content": "This function " },
				{ "elements": ["Emphasis"], "content": "handleCancel" },
				{ "elements": [], "content": " is unused." }
			],
			"advices": {
				"advices": [
					{
						"log": [
							"info",
							[
								{
									"elements": [],
									"content": "Unused variables are often the result of typos, incomplete refactors, or other sources of bugs."
								}
							]
						]
					},
					{
						"log": [
							"info",
							[
								{
									"elements": [],
									"content": "Unsafe fix: If this is intentional, prepend "
								},
								{ "elements": ["Emphasis"], "content": "handleCancel" },
								{ "elements": [], "content": " with an underscore." }
							]
						]
					},
					{
						"diff": {
							"dictionary": "/* global HTMLElement setTimeout */\nimport { projectManager } from \"../projectManager.svelte\";\n}\n\nfunction handleCancel_handleCancel() {\n\tclearForm();\n\tonCancel?.();\t}\n}\n",
							"ops": [
								{ "diffOp": { "equal": { "range": [0, 95] } } },
								{ "equalLines": { "line_count": 138 } },
								{ "diffOp": { "equal": { "range": [95, 107] } } },
								{ "diffOp": { "delete": { "range": [107, 119] } } },
								{ "diffOp": { "insert": { "range": [119, 132] } } },
								{ "diffOp": { "equal": { "range": [132, 165] } } },
								{ "equalLines": { "line_count": 6 } },
								{ "diffOp": { "equal": { "range": [165, 170] } } }
							]
						}
					}
				]
			},
			"verboseAdvices": { "advices": [] },
			"location": {
				"path": { "file": "src\\lib\\components\\AddForm.svelte" },
				"span": [3526, 3538],
				"sourceCode": "<script lang=\"ts\">\n/* global HTMLElement setTimeout */\nimport { projectManager } from \"../projectManager.svelte\";\n\ninterface Props {\n\tonSubmit: (data: {\n\t\ttitle: string;\n\t\tprompt: string;\n\t\ttopic?: string;\n\t\tproject?: string;\n\t}) => Promise<void>;\n\tonCancel?: () => void;\n\tinitialProject?: string;\n}\n\nconst { onSubmit, onCancel, initialProject }: Props = $props();\n\n// Local state using Svelte 5 runes\nlet title = $state(\"\");\nlet topic = $state(\"\");\nlet project = $state(\"\");\n$effect(() => {\n\tproject =\n\t\tinitialProject ??\n\t\t(projectManager.selectedProject !== \"all\" &&\n\t\tprojectManager.selectedProject !== \"create\"\n\t\t\t? projectManager.selectedProject\n\t\t\t: \"\");\n});\nlet creatingProject = $state(false);\nlet prompt = $state(\"\");\nlet status = $state(\"\");\nlet isSubmitting = $state(false);\n\n// Derived validation state\nconst titleError = $derived.by(() => {\n\tconst trimmed = title.trim();\n\tif (trimmed.length === 0) return \"\";\n\tif (trimmed.length < 3) return \"Title must be at least 3 characters\";\n\tif (trimmed.length > 100) return \"Title must be less than 100 characters\";\n\treturn \"\";\n});\n\nconst promptError = $derived.by(() => {\n\tconst trimmed = prompt.trim();\n\tif (trimmed.length === 0) return \"\";\n\tif (trimmed.length < 10) return \"Prompt must be at least 10 characters\";\n\tif (trimmed.length > 8000) return \"Prompt must be less than 8000 characters\";\n\treturn \"\";\n});\n\nconst projectError = $derived.by(() => {\n\tif (creatingProject) {\n\t\tconst trimmed = project.trim();\n\t\tif (trimmed.length === 0) return \"Project name is required\";\n\t\tif (trimmed.length < 2) return \"Project name must be at least 2 characters\";\n\t\tif (trimmed.length > 50)\n\t\t\treturn \"Project name must be less than 50 characters\";\n\t\t// Check for duplicate project names\n\t\tif (\n\t\t\tprojectManager.all.some(\n\t\t\t\t(p) => p.name.toLowerCase() === trimmed.toLowerCase(),\n\t\t\t)\n\t\t) {\n\t\t\treturn \"A project with this name already exists\";\n\t\t}\n\t}\n\treturn \"\";\n});\n\nconst isValid = $derived.by(() => {\n\treturn (\n\t\ttitle.trim().length > 0 &&\n\t\tprompt.trim().length > 0 &&\n\t\t!titleError &&\n\t\t!promptError &&\n\t\t!projectError\n\t);\n});\n\nlet formElement: HTMLElement | null = null;\nlet firstFocusableElement: HTMLElement | null = null;\nlet lastFocusableElement: HTMLElement | null = null;\n\n// Focus / accessibility handled by ModalContainer when used as modal; keep simple on-mount focus\n$effect(() => {\n\tconst titleInput = document.getElementById(\n\t\t\"title\",\n\t) as HTMLInputElement | null;\n\tif (titleInput) setTimeout(() => titleInput.focus(), 0);\n});\n\nasync function handleSubmit(e: SubmitEvent) {\n\te.preventDefault();\n\n\tif (!isValid || isSubmitting) return;\n\n\tisSubmitting = true;\n\tstatus = \"\";\n\n\ttry {\n\t\tawait onSubmit({\n\t\t\ttitle: title.trim(),\n\t\t\tprompt: prompt.trim(),\n\t\t\ttopic: topic.trim() || undefined,\n\t\t\tproject: creatingProject\n\t\t\t\t? project.trim() || undefined\n\t\t\t\t: project || undefined,\n\t\t});\n\n\t\t// Success - clear form and close\n\t\tclearForm();\n\t\tonCancel?.();\n\n\t\t// Announce to screen readers\n\t\tannounceToSR(`Card \"${title}\" added successfully`);\n\t} catch (err) {\n\t\tstatus = err instanceof Error ? err.message : \"Failed to add card\";\n\t\tannounceToSR(status);\n\t} finally {\n\t\tisSubmitting = false;\n\t}\n}\n\nfunction handleProjectChange(e: Event) {\n\tconst select = e.target as HTMLSelectElement;\n\tif (select.value === \"__create__\") {\n\t\tcreatingProject = true;\n\t\tproject = \"\";\n\t} else {\n\t\tcreatingProject = false;\n\t\tproject = select.value;\n\t}\n}\n\nfunction clearForm() {\n\ttitle = \"\";\n\ttopic = \"\";\n\tproject = \"\";\n\tcreatingProject = false;\n\tprompt = \"\";\n\tstatus = \"\";\n}\n\nfunction handleCancel() {\n\tclearForm();\n\tonCancel?.();\n}\n\nfunction announceToSR(message: string) {\n\tconst announcer = document.getElementById(\"sr-announcements\");\n\tif (announcer) {\n\t\tannouncer.textContent = message;\n\t}\n}\n</script>\n\n\t<section id=\"add-section\" bind:this={formElement}>\n\t\t<form onsubmit={handleSubmit} aria-labelledby=\"add-heading\">\n\t\t\t<h2>New Card Details</h2>\n\n\t\t\t{#if status}\n\t\t\t\t<div role=\"status\" class=\"form-status\">{status}</div>\n\t\t\t{/if}\n\n\t\t\t<div class=\"field\">\n\t\t\t\t<label for=\"title\">\n\t\t\t\t\tTitle <span class=\"required\">*</span>\n\t\t\t\t</label>\n\t\t\t\t<input\n\t\t\t\t\tid=\"title\"\n\t\t\t\t\tbind:value={title}\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tautocomplete=\"off\"\n\t\t\t\t\trequired\n\t\t\t\t\tdisabled={isSubmitting}\n\t\t\t\t\tclass:error={titleError}\n\t\t\t\t/>\n\t\t\t\t{#if titleError}\n\t\t\t\t\t<span class=\"error-message\">{titleError}</span>\n\t\t\t\t{:else}\n\t\t\t\t\t<span class=\"hint\">Give your learning card a clear, memorable name.</span>\n\t\t\t\t{/if}\n\t\t\t</div>\n\n\t\t\t<div class=\"field\">\n\t\t\t\t<label for=\"topic\">\n\t\t\t\t\tTopic <span class=\"optional\">(optional)</span>\n\t\t\t\t</label>\n\t\t\t\t<input\n\t\t\t\t\tid=\"topic\"\n\t\t\t\t\tbind:value={topic}\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tautocomplete=\"off\"\n\t\t\t\t\tdisabled={isSubmitting}\n\t\t\t\t/>\n\t\t\t\t<span class=\"hint\">e.g., JavaScript, Design Patterns, Math</span>\n\t\t\t</div>\n\n\t\t\t<div class=\"field\">\n\t\t\t\t<label for=\"project-select\">Project <span class=\"optional\">(optional)</span></label>\n\t\t\t\t<select\n\t\t\t\t\tid=\"project-select\"\n\t\t\t\t\tbind:value={project}\n\t\t\t\t\tonchange={handleProjectChange}\n\t\t\t\t\tdisabled={isSubmitting}\n\t\t\t\t\taria-describedby=\"project-hint\"\n\t\t\t\t>\n\t\t\t\t\t<option value=\"\">Select a project</option>\n\t\t\t\t\t{#each projectManager.all as p (p.id)}\n\t\t\t\t\t\t<option value={p.id}>{p.name}</option>\n\t\t\t\t\t{/each}\n\t\t\t\t\t<option value=\"__create__\">+ Create new project...</option>\n\t\t\t\t</select>\n\t\t\t\t<span id=\"project-hint\" class=\"hint\">Assign this card to a project or create a new one.</span>\n\t\t\t</div>\n\n\t\t\t{#if creatingProject}\n\t\t\t\t<div class=\"field\">\n\t\t\t\t\t<label for=\"project\">New project name <span class=\"required\">*</span></label>\n\t\t\t\t\t<input\n\t\t\t\t\t\tid=\"project\"\n\t\t\t\t\t\tbind:value={project}\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tautocomplete=\"off\"\n\t\t\t\t\t\tdisabled={isSubmitting}\n\t\t\t\t\t\tclass:error={projectError}\n\t\t\t\t\t/>\n\t\t\t\t\t{#if projectError}\n\t\t\t\t\t\t<span class=\"error-message\">{projectError}</span>\n\t\t\t\t\t{:else}\n\t\t\t\t\t\t<span class=\"hint\">Give your project a short, unique name.</span>\n\t\t\t\t\t{/if}\n\t\t\t\t</div>\n\t\t\t{/if}\n\n\t\t\t<div class=\"field\">\n\t\t\t\t<label for=\"prompt\">\n\t\t\t\t\tLearning prompt <span class=\"required\">*</span>\n\t\t\t\t</label>\n\t\t\t\t<textarea\n\t\t\t\t\tid=\"prompt\"\n\t\t\t\t\tbind:value={prompt}\n\t\t\t\t\trequired\n\t\t\t\t\tdisabled={isSubmitting}\n\t\t\t\t\tplaceholder=\"e.g. Explain the concept of closures in JavaScript\"\n\t\t\t\t\tclass:error={promptError}\n\t\t\t\t></textarea>\n\t\t\t\t{#if promptError}\n\t\t\t\t\t<span class=\"error-message\">{promptError}</span>\n\t\t\t\t{:else}\n\t\t\t\t\t<span class=\"hint\">What do you want to learn or understand?</span>\n\t\t\t\t{/if}\n\t\t\t</div>\n\n\t\t\t<div class=\"form-actions\">\n\t\t\t\t<button type=\"submit\" class=\"primary\" disabled={!isValid || isSubmitting}>\n\t\t\t\t\t{isSubmitting ? 'Saving...' : 'Save card'}\n\t\t\t\t</button>\n\t\t\t\t<button type=\"button\" class=\"ghost\" onclick={handleCancel} disabled={isSubmitting}>\n\t\t\t\t\tCancel\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</form>\n\t</section>\n"
			},
			"tags": ["fixable"],
			"source": null
		},
		{
			"category": "lint/correctness/noUnusedImports",
			"severity": "warning",
			"description": "This import is unused.",
			"message": [
				{ "elements": [], "content": "This " },
				{ "elements": ["Emphasis"], "content": "import" },
				{ "elements": [], "content": " is unused." }
			],
			"advices": {
				"advices": [
					{
						"log": [
							"info",
							[
								{
									"elements": [],
									"content": "Unused imports might be the result of an incomplete refactoring."
								}
							]
						]
					},
					{
						"log": [
							"info",
							[
								{
									"elements": [],
									"content": "Unsafe fix: Remove the unused imports."
								}
							]
						]
					},
					{
						"diff": {
							"dictionary": "import type { LearningCard, Note } from \"../../types\";\nimport { projectManager } from \"../projectManager.svelte\";\nimport MoreMenu from \"./MoreMenu.svelte\";\nimport NoteModal from \"./NoteModal.svelte\";\nimport { modalStore } from \"../stores/modalStore\";// local modal state (Svelte 5 rune) - replaced by centralized modalStore\nconst notesOpen = $state(false);\n",
							"ops": [
								{ "diffOp": { "equal": { "range": [0, 113] } } },
								{ "diffOp": { "delete": { "range": [113, 155] } } },
								{ "diffOp": { "equal": { "range": [155, 250] } } },
								{ "equalLines": { "line_count": 38 } },
								{ "diffOp": { "equal": { "range": [250, 357] } } }
							]
						}
					}
				]
			},
			"verboseAdvices": { "advices": [] },
			"location": {
				"path": { "file": "src\\lib\\components\\CardItem.svelte" },
				"span": [144, 152],
				"sourceCode": "<script lang=\"ts\">\r\nimport type { LearningCard, Note } from \"../../types\";\nimport { projectManager } from \"../projectManager.svelte\";\nimport MoreMenu from \"./MoreMenu.svelte\";\nimport NoteModal from \"./NoteModal.svelte\";\nimport { modalStore } from \"../stores/modalStore\";\n\ninterface Props {\n\tcard: LearningCard;\n\tonStart: (card: LearningCard) => void;\n\tonToggle: (id: string, status: \"active\" | \"done\") => void;\n\tonEdit?: (card: LearningCard) => void;\n\tonDelete?: (id: string) => void;\n\tnoteApi?: {\n\t\tgetNotes(cardId: string): Promise<Note[]>;\n\t\tcreateNote(payload: {\n\t\t\tcardId: string;\n\t\t\ttitle: string;\n\t\t\tcontent: string;\n\t\t\ttags: string[];\n\t\t}): Promise<Note>;\n\t\tupdateNote(payload: {\n\t\t\tid: string;\n\t\t\ttitle?: string;\n\t\t\tcontent?: string;\n\t\t\ttags?: string[];\n\t\t}): Promise<Note>;\n\t\tdeleteNote(id: string): Promise<Note>;\n\t};\n}\n\nconst { card, onStart, onToggle, onEdit, onDelete, noteApi }: Props = $props();\n\n// Derived computed values\nconst isDone = $derived(card.status === \"done\");\nconst buttonLabel = $derived(isDone ? \"Mark active\" : \"Mark done\");\nconst statusText = $derived(isDone ? \" Completed\" : \"Active\");\nconst projectName = $derived.by(() => {\n\tif (!card.project) return \"\";\n\treturn (\n\t\tprojectManager.all.find((p) => p.id === card.project)?.name || card.project\n\t);\n});\n\n// local modal state (Svelte 5 rune) - replaced by centralized modalStore\nconst notesOpen = $state(false);\n</script>\r\n\r\n<article class=\"card\" class:done={isDone}>\r\n\t<header>\r\n\t\t<h3>{card.title}</h3>\r\n\t\t{#if card.topic}\r\n\t\t\t<p class=\"topic\">{card.topic}</p>\r\n\t\t{/if}\r\n\t\t{#if card.project}\r\n\t\t\t<p class=\"project\">Project: <strong>{projectName}</strong></p>\r\n\t\t{/if}\r\n\t</header>\r\n\r\n\t<section>\r\n\t\t<div class=\"status\" class:done={isDone}>{statusText}</div>\r\n\t\t<pre class=\"prompt\">{card.prompt}</pre>\r\n\t</section>\r\n\r\n\t<footer class=\"card-actions\">\r\n\t\t<button\r\n\t\t\ttype=\"button\"\r\n\t\t\tclass=\"primary\"\r\n\t\t\tonclick={(e) => { e.stopPropagation(); onStart(card); }}\r\n\t\t\taria-label={`Start chat with prompt for ${card.title}`}\r\n\t\t>\r\n\t\t\tStart in ChatGPT\r\n\t\t</button>\r\n\r\n\t\t<label class=\"check\">\r\n\t\t\t<input\r\n\t\t\t\ttype=\"checkbox\"\r\n\t\t\t\tchecked={isDone}\r\n\t\t\t\tonclick={(e) => { e.stopPropagation(); onToggle(card.id, isDone ? 'active' : 'done'); }}\r\n\t\t\t\taria-label={isDone ? `Mark ${card.title} as active` : `Mark ${card.title} as done`}\r\n\t\t\t/>\r\n\t\t\t<span class=\"check-label\">{isDone ? 'Completed' : 'Mark done'}</span>\r\n\t\t</label>\r\n\r\n\t\t\t<button\r\n\t\t\t\ttype=\"button\"\r\n\t\t\t\tclass=\"secondary open-notes\"\r\n\t\t\t\tonclick={(e) => {\r\n\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\tmodalStore.open(NoteModal, { cardId: card.id, cardTitle: card.title, api: noteApi });\r\n\t\t\t\t}}\r\n\t\t\t\taria-label={`Open notes for ${card.title}`}\r\n\t\t\t>\r\n\t\t\t\tOpen Notes\r\n\t\t\t</button>\r\n\r\n\t\t<MoreMenu ariaLabel={`More actions for ${card.title}`} on:edit={() => onEdit?.(card)} on:delete={() => onDelete?.(card.id)} />\r\n\t</footer>\r\n</article>\r\n\r\n<!-- Modal is now rendered by ModalContainer via modalStore -->\r\n\r\n\r\n<style>\r\n\t.card {\r\n\t\tmargin-bottom: 1rem;\r\n\t}\r\n\r\n\t.check {\r\n\t\tdisplay: inline-flex;\r\n\t\talign-items: center;\r\n\t\tgap: 0.5rem;\r\n\t}\r\n\r\n\t.check input[type='checkbox'] {\r\n\t\twidth: 1.1rem;\r\n\t\theight: 1.1rem;\r\n\t}\r\n\r\n\t.check-label {\r\n\t\tfont-size: 0.9rem;\r\n\t\tcolor: var(--muted, #666);\r\n\t}\r\n\r\n\t.done {\r\n\t\topacity: 0.7;\r\n\t}\r\n\r\n\t/* moved danger styles to MoreMenu where Delete lives */\r\n</style>\r\n"
			},
			"tags": ["fixable"],
			"source": null
		},
		{
			"category": "lint/correctness/noUnusedImports",
			"severity": "warning",
			"description": "This import is unused.",
			"message": [
				{ "elements": [], "content": "This " },
				{ "elements": ["Emphasis"], "content": "import" },
				{ "elements": [], "content": " is unused." }
			],
			"advices": {
				"advices": [
					{
						"log": [
							"info",
							[
								{
									"elements": [],
									"content": "Unused imports might be the result of an incomplete refactoring."
								}
							]
						]
					},
					{
						"log": [
							"info",
							[
								{
									"elements": [],
									"content": "Unsafe fix: Remove the unused imports."
								}
							]
						]
					},
					{
						"diff": {
							"dictionary": "import type { LearningCard, Note } from \"../../types\";\nimport { projectManager } from \"../projectManager.svelte\";\nimport MoreMenu from \"./MoreMenu.svelte\";\nimport NoteModal from \"./NoteModal.svelte\";\nimport { modalStore } from \"../stores/modalStore\";\n// local modal state (Svelte 5 rune) - replaced by centralized modalStore\nconst notesOpen = $state(false);\n",
							"ops": [
								{ "diffOp": { "equal": { "range": [0, 155] } } },
								{ "diffOp": { "delete": { "range": [155, 199] } } },
								{ "diffOp": { "equal": { "range": [199, 251] } } },
								{ "equalLines": { "line_count": 37 } },
								{ "diffOp": { "equal": { "range": [251, 358] } } }
							]
						}
					}
				]
			},
			"verboseAdvices": { "advices": [] },
			"location": {
				"path": { "file": "src\\lib\\components\\CardItem.svelte" },
				"span": [186, 195],
				"sourceCode": "<script lang=\"ts\">\r\nimport type { LearningCard, Note } from \"../../types\";\nimport { projectManager } from \"../projectManager.svelte\";\nimport MoreMenu from \"./MoreMenu.svelte\";\nimport NoteModal from \"./NoteModal.svelte\";\nimport { modalStore } from \"../stores/modalStore\";\n\ninterface Props {\n\tcard: LearningCard;\n\tonStart: (card: LearningCard) => void;\n\tonToggle: (id: string, status: \"active\" | \"done\") => void;\n\tonEdit?: (card: LearningCard) => void;\n\tonDelete?: (id: string) => void;\n\tnoteApi?: {\n\t\tgetNotes(cardId: string): Promise<Note[]>;\n\t\tcreateNote(payload: {\n\t\t\tcardId: string;\n\t\t\ttitle: string;\n\t\t\tcontent: string;\n\t\t\ttags: string[];\n\t\t}): Promise<Note>;\n\t\tupdateNote(payload: {\n\t\t\tid: string;\n\t\t\ttitle?: string;\n\t\t\tcontent?: string;\n\t\t\ttags?: string[];\n\t\t}): Promise<Note>;\n\t\tdeleteNote(id: string): Promise<Note>;\n\t};\n}\n\nconst { card, onStart, onToggle, onEdit, onDelete, noteApi }: Props = $props();\n\n// Derived computed values\nconst isDone = $derived(card.status === \"done\");\nconst buttonLabel = $derived(isDone ? \"Mark active\" : \"Mark done\");\nconst statusText = $derived(isDone ? \" Completed\" : \"Active\");\nconst projectName = $derived.by(() => {\n\tif (!card.project) return \"\";\n\treturn (\n\t\tprojectManager.all.find((p) => p.id === card.project)?.name || card.project\n\t);\n});\n\n// local modal state (Svelte 5 rune) - replaced by centralized modalStore\nconst notesOpen = $state(false);\n</script>\r\n\r\n<article class=\"card\" class:done={isDone}>\r\n\t<header>\r\n\t\t<h3>{card.title}</h3>\r\n\t\t{#if card.topic}\r\n\t\t\t<p class=\"topic\">{card.topic}</p>\r\n\t\t{/if}\r\n\t\t{#if card.project}\r\n\t\t\t<p class=\"project\">Project: <strong>{projectName}</strong></p>\r\n\t\t{/if}\r\n\t</header>\r\n\r\n\t<section>\r\n\t\t<div class=\"status\" class:done={isDone}>{statusText}</div>\r\n\t\t<pre class=\"prompt\">{card.prompt}</pre>\r\n\t</section>\r\n\r\n\t<footer class=\"card-actions\">\r\n\t\t<button\r\n\t\t\ttype=\"button\"\r\n\t\t\tclass=\"primary\"\r\n\t\t\tonclick={(e) => { e.stopPropagation(); onStart(card); }}\r\n\t\t\taria-label={`Start chat with prompt for ${card.title}`}\r\n\t\t>\r\n\t\t\tStart in ChatGPT\r\n\t\t</button>\r\n\r\n\t\t<label class=\"check\">\r\n\t\t\t<input\r\n\t\t\t\ttype=\"checkbox\"\r\n\t\t\t\tchecked={isDone}\r\n\t\t\t\tonclick={(e) => { e.stopPropagation(); onToggle(card.id, isDone ? 'active' : 'done'); }}\r\n\t\t\t\taria-label={isDone ? `Mark ${card.title} as active` : `Mark ${card.title} as done`}\r\n\t\t\t/>\r\n\t\t\t<span class=\"check-label\">{isDone ? 'Completed' : 'Mark done'}</span>\r\n\t\t</label>\r\n\r\n\t\t\t<button\r\n\t\t\t\ttype=\"button\"\r\n\t\t\t\tclass=\"secondary open-notes\"\r\n\t\t\t\tonclick={(e) => {\r\n\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\tmodalStore.open(NoteModal, { cardId: card.id, cardTitle: card.title, api: noteApi });\r\n\t\t\t\t}}\r\n\t\t\t\taria-label={`Open notes for ${card.title}`}\r\n\t\t\t>\r\n\t\t\t\tOpen Notes\r\n\t\t\t</button>\r\n\r\n\t\t<MoreMenu ariaLabel={`More actions for ${card.title}`} on:edit={() => onEdit?.(card)} on:delete={() => onDelete?.(card.id)} />\r\n\t</footer>\r\n</article>\r\n\r\n<!-- Modal is now rendered by ModalContainer via modalStore -->\r\n\r\n\r\n<style>\r\n\t.card {\r\n\t\tmargin-bottom: 1rem;\r\n\t}\r\n\r\n\t.check {\r\n\t\tdisplay: inline-flex;\r\n\t\talign-items: center;\r\n\t\tgap: 0.5rem;\r\n\t}\r\n\r\n\t.check input[type='checkbox'] {\r\n\t\twidth: 1.1rem;\r\n\t\theight: 1.1rem;\r\n\t}\r\n\r\n\t.check-label {\r\n\t\tfont-size: 0.9rem;\r\n\t\tcolor: var(--muted, #666);\r\n\t}\r\n\r\n\t.done {\r\n\t\topacity: 0.7;\r\n\t}\r\n\r\n\t/* moved danger styles to MoreMenu where Delete lives */\r\n</style>\r\n"
			},
			"tags": ["fixable"],
			"source": null
		},
		{
			"category": "lint/correctness/noUnusedImports",
			"severity": "warning",
			"description": "This import is unused.",
			"message": [
				{ "elements": [], "content": "This " },
				{ "elements": ["Emphasis"], "content": "import" },
				{ "elements": [], "content": " is unused." }
			],
			"advices": {
				"advices": [
					{
						"log": [
							"info",
							[
								{
									"elements": [],
									"content": "Unused imports might be the result of an incomplete refactoring."
								}
							]
						]
					},
					{
						"log": [
							"info",
							[
								{
									"elements": [],
									"content": "Unsafe fix: Remove the unused imports."
								}
							]
						]
					},
					{
						"diff": {
							"dictionary": "import type { LearningCard, Note } from \"../../types\";\nimport { projectManager } from \"../projectManager.svelte\";\nimport MoreMenu from \"./MoreMenu.svelte\";\nimport NoteModal from \"./NoteModal.svelte\";\nimport { modalStore } from \"../stores/modalStore\";\n\ninterface Props {// local modal state (Svelte 5 rune) - replaced by centralized modalStore\nconst notesOpen = $state(false);\n",
							"ops": [
								{ "diffOp": { "equal": { "range": [0, 199] } } },
								{ "diffOp": { "delete": { "range": [199, 250] } } },
								{ "diffOp": { "equal": { "range": [250, 269] } } },
								{ "equalLines": { "line_count": 36 } },
								{ "diffOp": { "equal": { "range": [269, 376] } } }
							]
						}
					}
				]
			},
			"verboseAdvices": { "advices": [] },
			"location": {
				"path": { "file": "src\\lib\\components\\CardItem.svelte" },
				"span": [230, 244],
				"sourceCode": "<script lang=\"ts\">\r\nimport type { LearningCard, Note } from \"../../types\";\nimport { projectManager } from \"../projectManager.svelte\";\nimport MoreMenu from \"./MoreMenu.svelte\";\nimport NoteModal from \"./NoteModal.svelte\";\nimport { modalStore } from \"../stores/modalStore\";\n\ninterface Props {\n\tcard: LearningCard;\n\tonStart: (card: LearningCard) => void;\n\tonToggle: (id: string, status: \"active\" | \"done\") => void;\n\tonEdit?: (card: LearningCard) => void;\n\tonDelete?: (id: string) => void;\n\tnoteApi?: {\n\t\tgetNotes(cardId: string): Promise<Note[]>;\n\t\tcreateNote(payload: {\n\t\t\tcardId: string;\n\t\t\ttitle: string;\n\t\t\tcontent: string;\n\t\t\ttags: string[];\n\t\t}): Promise<Note>;\n\t\tupdateNote(payload: {\n\t\t\tid: string;\n\t\t\ttitle?: string;\n\t\t\tcontent?: string;\n\t\t\ttags?: string[];\n\t\t}): Promise<Note>;\n\t\tdeleteNote(id: string): Promise<Note>;\n\t};\n}\n\nconst { card, onStart, onToggle, onEdit, onDelete, noteApi }: Props = $props();\n\n// Derived computed values\nconst isDone = $derived(card.status === \"done\");\nconst buttonLabel = $derived(isDone ? \"Mark active\" : \"Mark done\");\nconst statusText = $derived(isDone ? \" Completed\" : \"Active\");\nconst projectName = $derived.by(() => {\n\tif (!card.project) return \"\";\n\treturn (\n\t\tprojectManager.all.find((p) => p.id === card.project)?.name || card.project\n\t);\n});\n\n// local modal state (Svelte 5 rune) - replaced by centralized modalStore\nconst notesOpen = $state(false);\n</script>\r\n\r\n<article class=\"card\" class:done={isDone}>\r\n\t<header>\r\n\t\t<h3>{card.title}</h3>\r\n\t\t{#if card.topic}\r\n\t\t\t<p class=\"topic\">{card.topic}</p>\r\n\t\t{/if}\r\n\t\t{#if card.project}\r\n\t\t\t<p class=\"project\">Project: <strong>{projectName}</strong></p>\r\n\t\t{/if}\r\n\t</header>\r\n\r\n\t<section>\r\n\t\t<div class=\"status\" class:done={isDone}>{statusText}</div>\r\n\t\t<pre class=\"prompt\">{card.prompt}</pre>\r\n\t</section>\r\n\r\n\t<footer class=\"card-actions\">\r\n\t\t<button\r\n\t\t\ttype=\"button\"\r\n\t\t\tclass=\"primary\"\r\n\t\t\tonclick={(e) => { e.stopPropagation(); onStart(card); }}\r\n\t\t\taria-label={`Start chat with prompt for ${card.title}`}\r\n\t\t>\r\n\t\t\tStart in ChatGPT\r\n\t\t</button>\r\n\r\n\t\t<label class=\"check\">\r\n\t\t\t<input\r\n\t\t\t\ttype=\"checkbox\"\r\n\t\t\t\tchecked={isDone}\r\n\t\t\t\tonclick={(e) => { e.stopPropagation(); onToggle(card.id, isDone ? 'active' : 'done'); }}\r\n\t\t\t\taria-label={isDone ? `Mark ${card.title} as active` : `Mark ${card.title} as done`}\r\n\t\t\t/>\r\n\t\t\t<span class=\"check-label\">{isDone ? 'Completed' : 'Mark done'}</span>\r\n\t\t</label>\r\n\r\n\t\t\t<button\r\n\t\t\t\ttype=\"button\"\r\n\t\t\t\tclass=\"secondary open-notes\"\r\n\t\t\t\tonclick={(e) => {\r\n\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\tmodalStore.open(NoteModal, { cardId: card.id, cardTitle: card.title, api: noteApi });\r\n\t\t\t\t}}\r\n\t\t\t\taria-label={`Open notes for ${card.title}`}\r\n\t\t\t>\r\n\t\t\t\tOpen Notes\r\n\t\t\t</button>\r\n\r\n\t\t<MoreMenu ariaLabel={`More actions for ${card.title}`} on:edit={() => onEdit?.(card)} on:delete={() => onDelete?.(card.id)} />\r\n\t</footer>\r\n</article>\r\n\r\n<!-- Modal is now rendered by ModalContainer via modalStore -->\r\n\r\n\r\n<style>\r\n\t.card {\r\n\t\tmargin-bottom: 1rem;\r\n\t}\r\n\r\n\t.check {\r\n\t\tdisplay: inline-flex;\r\n\t\talign-items: center;\r\n\t\tgap: 0.5rem;\r\n\t}\r\n\r\n\t.check input[type='checkbox'] {\r\n\t\twidth: 1.1rem;\r\n\t\theight: 1.1rem;\r\n\t}\r\n\r\n\t.check-label {\r\n\t\tfont-size: 0.9rem;\r\n\t\tcolor: var(--muted, #666);\r\n\t}\r\n\r\n\t.done {\r\n\t\topacity: 0.7;\r\n\t}\r\n\r\n\t/* moved danger styles to MoreMenu where Delete lives */\r\n</style>\r\n"
			},
			"tags": ["fixable"],
			"source": null
		},
		{
			"category": "lint/correctness/noUnusedVariables",
			"severity": "warning",
			"description": "This variable onStart is unused.",
			"message": [
				{ "elements": [], "content": "This variable " },
				{ "elements": ["Emphasis"], "content": "onStart" },
				{ "elements": [], "content": " is unused." }
			],
			"advices": {
				"advices": [
					{
						"log": [
							"info",
							[
								{
									"elements": [],
									"content": "Unused variables are often the result of typos, incomplete refactors, or other sources of bugs."
								}
							]
						]
					}
				]
			},
			"verboseAdvices": { "advices": [] },
			"location": {
				"path": { "file": "src\\lib\\components\\CardItem.svelte" },
				"span": [849, 856],
				"sourceCode": "<script lang=\"ts\">\r\nimport type { LearningCard, Note } from \"../../types\";\nimport { projectManager } from \"../projectManager.svelte\";\nimport MoreMenu from \"./MoreMenu.svelte\";\nimport NoteModal from \"./NoteModal.svelte\";\nimport { modalStore } from \"../stores/modalStore\";\n\ninterface Props {\n\tcard: LearningCard;\n\tonStart: (card: LearningCard) => void;\n\tonToggle: (id: string, status: \"active\" | \"done\") => void;\n\tonEdit?: (card: LearningCard) => void;\n\tonDelete?: (id: string) => void;\n\tnoteApi?: {\n\t\tgetNotes(cardId: string): Promise<Note[]>;\n\t\tcreateNote(payload: {\n\t\t\tcardId: string;\n\t\t\ttitle: string;\n\t\t\tcontent: string;\n\t\t\ttags: string[];\n\t\t}): Promise<Note>;\n\t\tupdateNote(payload: {\n\t\t\tid: string;\n\t\t\ttitle?: string;\n\t\t\tcontent?: string;\n\t\t\ttags?: string[];\n\t\t}): Promise<Note>;\n\t\tdeleteNote(id: string): Promise<Note>;\n\t};\n}\n\nconst { card, onStart, onToggle, onEdit, onDelete, noteApi }: Props = $props();\n\n// Derived computed values\nconst isDone = $derived(card.status === \"done\");\nconst buttonLabel = $derived(isDone ? \"Mark active\" : \"Mark done\");\nconst statusText = $derived(isDone ? \" Completed\" : \"Active\");\nconst projectName = $derived.by(() => {\n\tif (!card.project) return \"\";\n\treturn (\n\t\tprojectManager.all.find((p) => p.id === card.project)?.name || card.project\n\t);\n});\n\n// local modal state (Svelte 5 rune) - replaced by centralized modalStore\nconst notesOpen = $state(false);\n</script>\r\n\r\n<article class=\"card\" class:done={isDone}>\r\n\t<header>\r\n\t\t<h3>{card.title}</h3>\r\n\t\t{#if card.topic}\r\n\t\t\t<p class=\"topic\">{card.topic}</p>\r\n\t\t{/if}\r\n\t\t{#if card.project}\r\n\t\t\t<p class=\"project\">Project: <strong>{projectName}</strong></p>\r\n\t\t{/if}\r\n\t</header>\r\n\r\n\t<section>\r\n\t\t<div class=\"status\" class:done={isDone}>{statusText}</div>\r\n\t\t<pre class=\"prompt\">{card.prompt}</pre>\r\n\t</section>\r\n\r\n\t<footer class=\"card-actions\">\r\n\t\t<button\r\n\t\t\ttype=\"button\"\r\n\t\t\tclass=\"primary\"\r\n\t\t\tonclick={(e) => { e.stopPropagation(); onStart(card); }}\r\n\t\t\taria-label={`Start chat with prompt for ${card.title}`}\r\n\t\t>\r\n\t\t\tStart in ChatGPT\r\n\t\t</button>\r\n\r\n\t\t<label class=\"check\">\r\n\t\t\t<input\r\n\t\t\t\ttype=\"checkbox\"\r\n\t\t\t\tchecked={isDone}\r\n\t\t\t\tonclick={(e) => { e.stopPropagation(); onToggle(card.id, isDone ? 'active' : 'done'); }}\r\n\t\t\t\taria-label={isDone ? `Mark ${card.title} as active` : `Mark ${card.title} as done`}\r\n\t\t\t/>\r\n\t\t\t<span class=\"check-label\">{isDone ? 'Completed' : 'Mark done'}</span>\r\n\t\t</label>\r\n\r\n\t\t\t<button\r\n\t\t\t\ttype=\"button\"\r\n\t\t\t\tclass=\"secondary open-notes\"\r\n\t\t\t\tonclick={(e) => {\r\n\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\tmodalStore.open(NoteModal, { cardId: card.id, cardTitle: card.title, api: noteApi });\r\n\t\t\t\t}}\r\n\t\t\t\taria-label={`Open notes for ${card.title}`}\r\n\t\t\t>\r\n\t\t\t\tOpen Notes\r\n\t\t\t</button>\r\n\r\n\t\t<MoreMenu ariaLabel={`More actions for ${card.title}`} on:edit={() => onEdit?.(card)} on:delete={() => onDelete?.(card.id)} />\r\n\t</footer>\r\n</article>\r\n\r\n<!-- Modal is now rendered by ModalContainer via modalStore -->\r\n\r\n\r\n<style>\r\n\t.card {\r\n\t\tmargin-bottom: 1rem;\r\n\t}\r\n\r\n\t.check {\r\n\t\tdisplay: inline-flex;\r\n\t\talign-items: center;\r\n\t\tgap: 0.5rem;\r\n\t}\r\n\r\n\t.check input[type='checkbox'] {\r\n\t\twidth: 1.1rem;\r\n\t\theight: 1.1rem;\r\n\t}\r\n\r\n\t.check-label {\r\n\t\tfont-size: 0.9rem;\r\n\t\tcolor: var(--muted, #666);\r\n\t}\r\n\r\n\t.done {\r\n\t\topacity: 0.7;\r\n\t}\r\n\r\n\t/* moved danger styles to MoreMenu where Delete lives */\r\n</style>\r\n"
			},
			"tags": [],
			"source": null
		},
		{
			"category": "lint/correctness/noUnusedVariables",
			"severity": "warning",
			"description": "This variable onToggle is unused.",
			"message": [
				{ "elements": [], "content": "This variable " },
				{ "elements": ["Emphasis"], "content": "onToggle" },
				{ "elements": [], "content": " is unused." }
			],
			"advices": {
				"advices": [
					{
						"log": [
							"info",
							[
								{
									"elements": [],
									"content": "Unused variables are often the result of typos, incomplete refactors, or other sources of bugs."
								}
							]
						]
					}
				]
			},
			"verboseAdvices": { "advices": [] },
			"location": {
				"path": { "file": "src\\lib\\components\\CardItem.svelte" },
				"span": [858, 866],
				"sourceCode": "<script lang=\"ts\">\r\nimport type { LearningCard, Note } from \"../../types\";\nimport { projectManager } from \"../projectManager.svelte\";\nimport MoreMenu from \"./MoreMenu.svelte\";\nimport NoteModal from \"./NoteModal.svelte\";\nimport { modalStore } from \"../stores/modalStore\";\n\ninterface Props {\n\tcard: LearningCard;\n\tonStart: (card: LearningCard) => void;\n\tonToggle: (id: string, status: \"active\" | \"done\") => void;\n\tonEdit?: (card: LearningCard) => void;\n\tonDelete?: (id: string) => void;\n\tnoteApi?: {\n\t\tgetNotes(cardId: string): Promise<Note[]>;\n\t\tcreateNote(payload: {\n\t\t\tcardId: string;\n\t\t\ttitle: string;\n\t\t\tcontent: string;\n\t\t\ttags: string[];\n\t\t}): Promise<Note>;\n\t\tupdateNote(payload: {\n\t\t\tid: string;\n\t\t\ttitle?: string;\n\t\t\tcontent?: string;\n\t\t\ttags?: string[];\n\t\t}): Promise<Note>;\n\t\tdeleteNote(id: string): Promise<Note>;\n\t};\n}\n\nconst { card, onStart, onToggle, onEdit, onDelete, noteApi }: Props = $props();\n\n// Derived computed values\nconst isDone = $derived(card.status === \"done\");\nconst buttonLabel = $derived(isDone ? \"Mark active\" : \"Mark done\");\nconst statusText = $derived(isDone ? \" Completed\" : \"Active\");\nconst projectName = $derived.by(() => {\n\tif (!card.project) return \"\";\n\treturn (\n\t\tprojectManager.all.find((p) => p.id === card.project)?.name || card.project\n\t);\n});\n\n// local modal state (Svelte 5 rune) - replaced by centralized modalStore\nconst notesOpen = $state(false);\n</script>\r\n\r\n<article class=\"card\" class:done={isDone}>\r\n\t<header>\r\n\t\t<h3>{card.title}</h3>\r\n\t\t{#if card.topic}\r\n\t\t\t<p class=\"topic\">{card.topic}</p>\r\n\t\t{/if}\r\n\t\t{#if card.project}\r\n\t\t\t<p class=\"project\">Project: <strong>{projectName}</strong></p>\r\n\t\t{/if}\r\n\t</header>\r\n\r\n\t<section>\r\n\t\t<div class=\"status\" class:done={isDone}>{statusText}</div>\r\n\t\t<pre class=\"prompt\">{card.prompt}</pre>\r\n\t</section>\r\n\r\n\t<footer class=\"card-actions\">\r\n\t\t<button\r\n\t\t\ttype=\"button\"\r\n\t\t\tclass=\"primary\"\r\n\t\t\tonclick={(e) => { e.stopPropagation(); onStart(card); }}\r\n\t\t\taria-label={`Start chat with prompt for ${card.title}`}\r\n\t\t>\r\n\t\t\tStart in ChatGPT\r\n\t\t</button>\r\n\r\n\t\t<label class=\"check\">\r\n\t\t\t<input\r\n\t\t\t\ttype=\"checkbox\"\r\n\t\t\t\tchecked={isDone}\r\n\t\t\t\tonclick={(e) => { e.stopPropagation(); onToggle(card.id, isDone ? 'active' : 'done'); }}\r\n\t\t\t\taria-label={isDone ? `Mark ${card.title} as active` : `Mark ${card.title} as done`}\r\n\t\t\t/>\r\n\t\t\t<span class=\"check-label\">{isDone ? 'Completed' : 'Mark done'}</span>\r\n\t\t</label>\r\n\r\n\t\t\t<button\r\n\t\t\t\ttype=\"button\"\r\n\t\t\t\tclass=\"secondary open-notes\"\r\n\t\t\t\tonclick={(e) => {\r\n\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\tmodalStore.open(NoteModal, { cardId: card.id, cardTitle: card.title, api: noteApi });\r\n\t\t\t\t}}\r\n\t\t\t\taria-label={`Open notes for ${card.title}`}\r\n\t\t\t>\r\n\t\t\t\tOpen Notes\r\n\t\t\t</button>\r\n\r\n\t\t<MoreMenu ariaLabel={`More actions for ${card.title}`} on:edit={() => onEdit?.(card)} on:delete={() => onDelete?.(card.id)} />\r\n\t</footer>\r\n</article>\r\n\r\n<!-- Modal is now rendered by ModalContainer via modalStore -->\r\n\r\n\r\n<style>\r\n\t.card {\r\n\t\tmargin-bottom: 1rem;\r\n\t}\r\n\r\n\t.check {\r\n\t\tdisplay: inline-flex;\r\n\t\talign-items: center;\r\n\t\tgap: 0.5rem;\r\n\t}\r\n\r\n\t.check input[type='checkbox'] {\r\n\t\twidth: 1.1rem;\r\n\t\theight: 1.1rem;\r\n\t}\r\n\r\n\t.check-label {\r\n\t\tfont-size: 0.9rem;\r\n\t\tcolor: var(--muted, #666);\r\n\t}\r\n\r\n\t.done {\r\n\t\topacity: 0.7;\r\n\t}\r\n\r\n\t/* moved danger styles to MoreMenu where Delete lives */\r\n</style>\r\n"
			},
			"tags": [],
			"source": null
		},
		{
			"category": "lint/correctness/noUnusedVariables",
			"severity": "warning",
			"description": "This variable onEdit is unused.",
			"message": [
				{ "elements": [], "content": "This variable " },
				{ "elements": ["Emphasis"], "content": "onEdit" },
				{ "elements": [], "content": " is unused." }
			],
			"advices": {
				"advices": [
					{
						"log": [
							"info",
							[
								{
									"elements": [],
									"content": "Unused variables are often the result of typos, incomplete refactors, or other sources of bugs."
								}
							]
						]
					}
				]
			},
			"verboseAdvices": { "advices": [] },
			"location": {
				"path": { "file": "src\\lib\\components\\CardItem.svelte" },
				"span": [868, 874],
				"sourceCode": "<script lang=\"ts\">\r\nimport type { LearningCard, Note } from \"../../types\";\nimport { projectManager } from \"../projectManager.svelte\";\nimport MoreMenu from \"./MoreMenu.svelte\";\nimport NoteModal from \"./NoteModal.svelte\";\nimport { modalStore } from \"../stores/modalStore\";\n\ninterface Props {\n\tcard: LearningCard;\n\tonStart: (card: LearningCard) => void;\n\tonToggle: (id: string, status: \"active\" | \"done\") => void;\n\tonEdit?: (card: LearningCard) => void;\n\tonDelete?: (id: string) => void;\n\tnoteApi?: {\n\t\tgetNotes(cardId: string): Promise<Note[]>;\n\t\tcreateNote(payload: {\n\t\t\tcardId: string;\n\t\t\ttitle: string;\n\t\t\tcontent: string;\n\t\t\ttags: string[];\n\t\t}): Promise<Note>;\n\t\tupdateNote(payload: {\n\t\t\tid: string;\n\t\t\ttitle?: string;\n\t\t\tcontent?: string;\n\t\t\ttags?: string[];\n\t\t}): Promise<Note>;\n\t\tdeleteNote(id: string): Promise<Note>;\n\t};\n}\n\nconst { card, onStart, onToggle, onEdit, onDelete, noteApi }: Props = $props();\n\n// Derived computed values\nconst isDone = $derived(card.status === \"done\");\nconst buttonLabel = $derived(isDone ? \"Mark active\" : \"Mark done\");\nconst statusText = $derived(isDone ? \" Completed\" : \"Active\");\nconst projectName = $derived.by(() => {\n\tif (!card.project) return \"\";\n\treturn (\n\t\tprojectManager.all.find((p) => p.id === card.project)?.name || card.project\n\t);\n});\n\n// local modal state (Svelte 5 rune) - replaced by centralized modalStore\nconst notesOpen = $state(false);\n</script>\r\n\r\n<article class=\"card\" class:done={isDone}>\r\n\t<header>\r\n\t\t<h3>{card.title}</h3>\r\n\t\t{#if card.topic}\r\n\t\t\t<p class=\"topic\">{card.topic}</p>\r\n\t\t{/if}\r\n\t\t{#if card.project}\r\n\t\t\t<p class=\"project\">Project: <strong>{projectName}</strong></p>\r\n\t\t{/if}\r\n\t</header>\r\n\r\n\t<section>\r\n\t\t<div class=\"status\" class:done={isDone}>{statusText}</div>\r\n\t\t<pre class=\"prompt\">{card.prompt}</pre>\r\n\t</section>\r\n\r\n\t<footer class=\"card-actions\">\r\n\t\t<button\r\n\t\t\ttype=\"button\"\r\n\t\t\tclass=\"primary\"\r\n\t\t\tonclick={(e) => { e.stopPropagation(); onStart(card); }}\r\n\t\t\taria-label={`Start chat with prompt for ${card.title}`}\r\n\t\t>\r\n\t\t\tStart in ChatGPT\r\n\t\t</button>\r\n\r\n\t\t<label class=\"check\">\r\n\t\t\t<input\r\n\t\t\t\ttype=\"checkbox\"\r\n\t\t\t\tchecked={isDone}\r\n\t\t\t\tonclick={(e) => { e.stopPropagation(); onToggle(card.id, isDone ? 'active' : 'done'); }}\r\n\t\t\t\taria-label={isDone ? `Mark ${card.title} as active` : `Mark ${card.title} as done`}\r\n\t\t\t/>\r\n\t\t\t<span class=\"check-label\">{isDone ? 'Completed' : 'Mark done'}</span>\r\n\t\t</label>\r\n\r\n\t\t\t<button\r\n\t\t\t\ttype=\"button\"\r\n\t\t\t\tclass=\"secondary open-notes\"\r\n\t\t\t\tonclick={(e) => {\r\n\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\tmodalStore.open(NoteModal, { cardId: card.id, cardTitle: card.title, api: noteApi });\r\n\t\t\t\t}}\r\n\t\t\t\taria-label={`Open notes for ${card.title}`}\r\n\t\t\t>\r\n\t\t\t\tOpen Notes\r\n\t\t\t</button>\r\n\r\n\t\t<MoreMenu ariaLabel={`More actions for ${card.title}`} on:edit={() => onEdit?.(card)} on:delete={() => onDelete?.(card.id)} />\r\n\t</footer>\r\n</article>\r\n\r\n<!-- Modal is now rendered by ModalContainer via modalStore -->\r\n\r\n\r\n<style>\r\n\t.card {\r\n\t\tmargin-bottom: 1rem;\r\n\t}\r\n\r\n\t.check {\r\n\t\tdisplay: inline-flex;\r\n\t\talign-items: center;\r\n\t\tgap: 0.5rem;\r\n\t}\r\n\r\n\t.check input[type='checkbox'] {\r\n\t\twidth: 1.1rem;\r\n\t\theight: 1.1rem;\r\n\t}\r\n\r\n\t.check-label {\r\n\t\tfont-size: 0.9rem;\r\n\t\tcolor: var(--muted, #666);\r\n\t}\r\n\r\n\t.done {\r\n\t\topacity: 0.7;\r\n\t}\r\n\r\n\t/* moved danger styles to MoreMenu where Delete lives */\r\n</style>\r\n"
			},
			"tags": [],
			"source": null
		},
		{
			"category": "lint/correctness/noUnusedVariables",
			"severity": "warning",
			"description": "This variable onDelete is unused.",
			"message": [
				{ "elements": [], "content": "This variable " },
				{ "elements": ["Emphasis"], "content": "onDelete" },
				{ "elements": [], "content": " is unused." }
			],
			"advices": {
				"advices": [
					{
						"log": [
							"info",
							[
								{
									"elements": [],
									"content": "Unused variables are often the result of typos, incomplete refactors, or other sources of bugs."
								}
							]
						]
					}
				]
			},
			"verboseAdvices": { "advices": [] },
			"location": {
				"path": { "file": "src\\lib\\components\\CardItem.svelte" },
				"span": [876, 884],
				"sourceCode": "<script lang=\"ts\">\r\nimport type { LearningCard, Note } from \"../../types\";\nimport { projectManager } from \"../projectManager.svelte\";\nimport MoreMenu from \"./MoreMenu.svelte\";\nimport NoteModal from \"./NoteModal.svelte\";\nimport { modalStore } from \"../stores/modalStore\";\n\ninterface Props {\n\tcard: LearningCard;\n\tonStart: (card: LearningCard) => void;\n\tonToggle: (id: string, status: \"active\" | \"done\") => void;\n\tonEdit?: (card: LearningCard) => void;\n\tonDelete?: (id: string) => void;\n\tnoteApi?: {\n\t\tgetNotes(cardId: string): Promise<Note[]>;\n\t\tcreateNote(payload: {\n\t\t\tcardId: string;\n\t\t\ttitle: string;\n\t\t\tcontent: string;\n\t\t\ttags: string[];\n\t\t}): Promise<Note>;\n\t\tupdateNote(payload: {\n\t\t\tid: string;\n\t\t\ttitle?: string;\n\t\t\tcontent?: string;\n\t\t\ttags?: string[];\n\t\t}): Promise<Note>;\n\t\tdeleteNote(id: string): Promise<Note>;\n\t};\n}\n\nconst { card, onStart, onToggle, onEdit, onDelete, noteApi }: Props = $props();\n\n// Derived computed values\nconst isDone = $derived(card.status === \"done\");\nconst buttonLabel = $derived(isDone ? \"Mark active\" : \"Mark done\");\nconst statusText = $derived(isDone ? \" Completed\" : \"Active\");\nconst projectName = $derived.by(() => {\n\tif (!card.project) return \"\";\n\treturn (\n\t\tprojectManager.all.find((p) => p.id === card.project)?.name || card.project\n\t);\n});\n\n// local modal state (Svelte 5 rune) - replaced by centralized modalStore\nconst notesOpen = $state(false);\n</script>\r\n\r\n<article class=\"card\" class:done={isDone}>\r\n\t<header>\r\n\t\t<h3>{card.title}</h3>\r\n\t\t{#if card.topic}\r\n\t\t\t<p class=\"topic\">{card.topic}</p>\r\n\t\t{/if}\r\n\t\t{#if card.project}\r\n\t\t\t<p class=\"project\">Project: <strong>{projectName}</strong></p>\r\n\t\t{/if}\r\n\t</header>\r\n\r\n\t<section>\r\n\t\t<div class=\"status\" class:done={isDone}>{statusText}</div>\r\n\t\t<pre class=\"prompt\">{card.prompt}</pre>\r\n\t</section>\r\n\r\n\t<footer class=\"card-actions\">\r\n\t\t<button\r\n\t\t\ttype=\"button\"\r\n\t\t\tclass=\"primary\"\r\n\t\t\tonclick={(e) => { e.stopPropagation(); onStart(card); }}\r\n\t\t\taria-label={`Start chat with prompt for ${card.title}`}\r\n\t\t>\r\n\t\t\tStart in ChatGPT\r\n\t\t</button>\r\n\r\n\t\t<label class=\"check\">\r\n\t\t\t<input\r\n\t\t\t\ttype=\"checkbox\"\r\n\t\t\t\tchecked={isDone}\r\n\t\t\t\tonclick={(e) => { e.stopPropagation(); onToggle(card.id, isDone ? 'active' : 'done'); }}\r\n\t\t\t\taria-label={isDone ? `Mark ${card.title} as active` : `Mark ${card.title} as done`}\r\n\t\t\t/>\r\n\t\t\t<span class=\"check-label\">{isDone ? 'Completed' : 'Mark done'}</span>\r\n\t\t</label>\r\n\r\n\t\t\t<button\r\n\t\t\t\ttype=\"button\"\r\n\t\t\t\tclass=\"secondary open-notes\"\r\n\t\t\t\tonclick={(e) => {\r\n\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\tmodalStore.open(NoteModal, { cardId: card.id, cardTitle: card.title, api: noteApi });\r\n\t\t\t\t}}\r\n\t\t\t\taria-label={`Open notes for ${card.title}`}\r\n\t\t\t>\r\n\t\t\t\tOpen Notes\r\n\t\t\t</button>\r\n\r\n\t\t<MoreMenu ariaLabel={`More actions for ${card.title}`} on:edit={() => onEdit?.(card)} on:delete={() => onDelete?.(card.id)} />\r\n\t</footer>\r\n</article>\r\n\r\n<!-- Modal is now rendered by ModalContainer via modalStore -->\r\n\r\n\r\n<style>\r\n\t.card {\r\n\t\tmargin-bottom: 1rem;\r\n\t}\r\n\r\n\t.check {\r\n\t\tdisplay: inline-flex;\r\n\t\talign-items: center;\r\n\t\tgap: 0.5rem;\r\n\t}\r\n\r\n\t.check input[type='checkbox'] {\r\n\t\twidth: 1.1rem;\r\n\t\theight: 1.1rem;\r\n\t}\r\n\r\n\t.check-label {\r\n\t\tfont-size: 0.9rem;\r\n\t\tcolor: var(--muted, #666);\r\n\t}\r\n\r\n\t.done {\r\n\t\topacity: 0.7;\r\n\t}\r\n\r\n\t/* moved danger styles to MoreMenu where Delete lives */\r\n</style>\r\n"
			},
			"tags": [],
			"source": null
		},
		{
			"category": "lint/correctness/noUnusedVariables",
			"severity": "warning",
			"description": "This variable noteApi is unused.",
			"message": [
				{ "elements": [], "content": "This variable " },
				{ "elements": ["Emphasis"], "content": "noteApi" },
				{ "elements": [], "content": " is unused." }
			],
			"advices": {
				"advices": [
					{
						"log": [
							"info",
							[
								{
									"elements": [],
									"content": "Unused variables are often the result of typos, incomplete refactors, or other sources of bugs."
								}
							]
						]
					}
				]
			},
			"verboseAdvices": { "advices": [] },
			"location": {
				"path": { "file": "src\\lib\\components\\CardItem.svelte" },
				"span": [886, 893],
				"sourceCode": "<script lang=\"ts\">\r\nimport type { LearningCard, Note } from \"../../types\";\nimport { projectManager } from \"../projectManager.svelte\";\nimport MoreMenu from \"./MoreMenu.svelte\";\nimport NoteModal from \"./NoteModal.svelte\";\nimport { modalStore } from \"../stores/modalStore\";\n\ninterface Props {\n\tcard: LearningCard;\n\tonStart: (card: LearningCard) => void;\n\tonToggle: (id: string, status: \"active\" | \"done\") => void;\n\tonEdit?: (card: LearningCard) => void;\n\tonDelete?: (id: string) => void;\n\tnoteApi?: {\n\t\tgetNotes(cardId: string): Promise<Note[]>;\n\t\tcreateNote(payload: {\n\t\t\tcardId: string;\n\t\t\ttitle: string;\n\t\t\tcontent: string;\n\t\t\ttags: string[];\n\t\t}): Promise<Note>;\n\t\tupdateNote(payload: {\n\t\t\tid: string;\n\t\t\ttitle?: string;\n\t\t\tcontent?: string;\n\t\t\ttags?: string[];\n\t\t}): Promise<Note>;\n\t\tdeleteNote(id: string): Promise<Note>;\n\t};\n}\n\nconst { card, onStart, onToggle, onEdit, onDelete, noteApi }: Props = $props();\n\n// Derived computed values\nconst isDone = $derived(card.status === \"done\");\nconst buttonLabel = $derived(isDone ? \"Mark active\" : \"Mark done\");\nconst statusText = $derived(isDone ? \" Completed\" : \"Active\");\nconst projectName = $derived.by(() => {\n\tif (!card.project) return \"\";\n\treturn (\n\t\tprojectManager.all.find((p) => p.id === card.project)?.name || card.project\n\t);\n});\n\n// local modal state (Svelte 5 rune) - replaced by centralized modalStore\nconst notesOpen = $state(false);\n</script>\r\n\r\n<article class=\"card\" class:done={isDone}>\r\n\t<header>\r\n\t\t<h3>{card.title}</h3>\r\n\t\t{#if card.topic}\r\n\t\t\t<p class=\"topic\">{card.topic}</p>\r\n\t\t{/if}\r\n\t\t{#if card.project}\r\n\t\t\t<p class=\"project\">Project: <strong>{projectName}</strong></p>\r\n\t\t{/if}\r\n\t</header>\r\n\r\n\t<section>\r\n\t\t<div class=\"status\" class:done={isDone}>{statusText}</div>\r\n\t\t<pre class=\"prompt\">{card.prompt}</pre>\r\n\t</section>\r\n\r\n\t<footer class=\"card-actions\">\r\n\t\t<button\r\n\t\t\ttype=\"button\"\r\n\t\t\tclass=\"primary\"\r\n\t\t\tonclick={(e) => { e.stopPropagation(); onStart(card); }}\r\n\t\t\taria-label={`Start chat with prompt for ${card.title}`}\r\n\t\t>\r\n\t\t\tStart in ChatGPT\r\n\t\t</button>\r\n\r\n\t\t<label class=\"check\">\r\n\t\t\t<input\r\n\t\t\t\ttype=\"checkbox\"\r\n\t\t\t\tchecked={isDone}\r\n\t\t\t\tonclick={(e) => { e.stopPropagation(); onToggle(card.id, isDone ? 'active' : 'done'); }}\r\n\t\t\t\taria-label={isDone ? `Mark ${card.title} as active` : `Mark ${card.title} as done`}\r\n\t\t\t/>\r\n\t\t\t<span class=\"check-label\">{isDone ? 'Completed' : 'Mark done'}</span>\r\n\t\t</label>\r\n\r\n\t\t\t<button\r\n\t\t\t\ttype=\"button\"\r\n\t\t\t\tclass=\"secondary open-notes\"\r\n\t\t\t\tonclick={(e) => {\r\n\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\tmodalStore.open(NoteModal, { cardId: card.id, cardTitle: card.title, api: noteApi });\r\n\t\t\t\t}}\r\n\t\t\t\taria-label={`Open notes for ${card.title}`}\r\n\t\t\t>\r\n\t\t\t\tOpen Notes\r\n\t\t\t</button>\r\n\r\n\t\t<MoreMenu ariaLabel={`More actions for ${card.title}`} on:edit={() => onEdit?.(card)} on:delete={() => onDelete?.(card.id)} />\r\n\t</footer>\r\n</article>\r\n\r\n<!-- Modal is now rendered by ModalContainer via modalStore -->\r\n\r\n\r\n<style>\r\n\t.card {\r\n\t\tmargin-bottom: 1rem;\r\n\t}\r\n\r\n\t.check {\r\n\t\tdisplay: inline-flex;\r\n\t\talign-items: center;\r\n\t\tgap: 0.5rem;\r\n\t}\r\n\r\n\t.check input[type='checkbox'] {\r\n\t\twidth: 1.1rem;\r\n\t\theight: 1.1rem;\r\n\t}\r\n\r\n\t.check-label {\r\n\t\tfont-size: 0.9rem;\r\n\t\tcolor: var(--muted, #666);\r\n\t}\r\n\r\n\t.done {\r\n\t\topacity: 0.7;\r\n\t}\r\n\r\n\t/* moved danger styles to MoreMenu where Delete lives */\r\n</style>\r\n"
			},
			"tags": [],
			"source": null
		},
		{
			"category": "lint/correctness/noUnusedVariables",
			"severity": "warning",
			"description": "This variable buttonLabel is unused.",
			"message": [
				{ "elements": [], "content": "This variable " },
				{ "elements": ["Emphasis"], "content": "buttonLabel" },
				{ "elements": [], "content": " is unused." }
			],
			"advices": {
				"advices": [
					{
						"log": [
							"info",
							[
								{
									"elements": [],
									"content": "Unused variables are often the result of typos, incomplete refactors, or other sources of bugs."
								}
							]
						]
					},
					{
						"log": [
							"info",
							[
								{
									"elements": [],
									"content": "Unsafe fix: If this is intentional, prepend "
								},
								{ "elements": ["Emphasis"], "content": "buttonLabel" },
								{ "elements": [], "content": " with an underscore." }
							]
						]
					},
					{
						"diff": {
							"dictionary": "import type { LearningCard, Note } from \"../../types\";\nimport { projectManager } from \"../projectManager.svelte\";\nimport MoreMenu from \"./MoreMenu.svelte\";// Derived computed values\nconst isDone = $derived(card.status === \"done\");\nconst buttonLabel_buttonLabel = $derived(isDone ? \"Mark active\" : \"Mark done\");\nconst statusText = $derived(isDone ? \" Completed\" : \"Active\");\nconst projectName = $derived.by(() => {// local modal state (Svelte 5 rune) - replaced by centralized modalStore\nconst notesOpen = $state(false);\n",
							"ops": [
								{ "diffOp": { "equal": { "range": [0, 155] } } },
								{ "equalLines": { "line_count": 29 } },
								{ "diffOp": { "equal": { "range": [155, 237] } } },
								{ "diffOp": { "delete": { "range": [237, 248] } } },
								{ "diffOp": { "insert": { "range": [248, 260] } } },
								{ "diffOp": { "equal": { "range": [260, 261] } } },
								{ "diffOp": { "equal": { "range": [261, 416] } } },
								{ "equalLines": { "line_count": 6 } },
								{ "diffOp": { "equal": { "range": [416, 523] } } }
							]
						}
					}
				]
			},
			"verboseAdvices": { "advices": [] },
			"location": {
				"path": { "file": "src\\lib\\components\\CardItem.svelte" },
				"span": [998, 1009],
				"sourceCode": "<script lang=\"ts\">\r\nimport type { LearningCard, Note } from \"../../types\";\nimport { projectManager } from \"../projectManager.svelte\";\nimport MoreMenu from \"./MoreMenu.svelte\";\nimport NoteModal from \"./NoteModal.svelte\";\nimport { modalStore } from \"../stores/modalStore\";\n\ninterface Props {\n\tcard: LearningCard;\n\tonStart: (card: LearningCard) => void;\n\tonToggle: (id: string, status: \"active\" | \"done\") => void;\n\tonEdit?: (card: LearningCard) => void;\n\tonDelete?: (id: string) => void;\n\tnoteApi?: {\n\t\tgetNotes(cardId: string): Promise<Note[]>;\n\t\tcreateNote(payload: {\n\t\t\tcardId: string;\n\t\t\ttitle: string;\n\t\t\tcontent: string;\n\t\t\ttags: string[];\n\t\t}): Promise<Note>;\n\t\tupdateNote(payload: {\n\t\t\tid: string;\n\t\t\ttitle?: string;\n\t\t\tcontent?: string;\n\t\t\ttags?: string[];\n\t\t}): Promise<Note>;\n\t\tdeleteNote(id: string): Promise<Note>;\n\t};\n}\n\nconst { card, onStart, onToggle, onEdit, onDelete, noteApi }: Props = $props();\n\n// Derived computed values\nconst isDone = $derived(card.status === \"done\");\nconst buttonLabel = $derived(isDone ? \"Mark active\" : \"Mark done\");\nconst statusText = $derived(isDone ? \" Completed\" : \"Active\");\nconst projectName = $derived.by(() => {\n\tif (!card.project) return \"\";\n\treturn (\n\t\tprojectManager.all.find((p) => p.id === card.project)?.name || card.project\n\t);\n});\n\n// local modal state (Svelte 5 rune) - replaced by centralized modalStore\nconst notesOpen = $state(false);\n</script>\r\n\r\n<article class=\"card\" class:done={isDone}>\r\n\t<header>\r\n\t\t<h3>{card.title}</h3>\r\n\t\t{#if card.topic}\r\n\t\t\t<p class=\"topic\">{card.topic}</p>\r\n\t\t{/if}\r\n\t\t{#if card.project}\r\n\t\t\t<p class=\"project\">Project: <strong>{projectName}</strong></p>\r\n\t\t{/if}\r\n\t</header>\r\n\r\n\t<section>\r\n\t\t<div class=\"status\" class:done={isDone}>{statusText}</div>\r\n\t\t<pre class=\"prompt\">{card.prompt}</pre>\r\n\t</section>\r\n\r\n\t<footer class=\"card-actions\">\r\n\t\t<button\r\n\t\t\ttype=\"button\"\r\n\t\t\tclass=\"primary\"\r\n\t\t\tonclick={(e) => { e.stopPropagation(); onStart(card); }}\r\n\t\t\taria-label={`Start chat with prompt for ${card.title}`}\r\n\t\t>\r\n\t\t\tStart in ChatGPT\r\n\t\t</button>\r\n\r\n\t\t<label class=\"check\">\r\n\t\t\t<input\r\n\t\t\t\ttype=\"checkbox\"\r\n\t\t\t\tchecked={isDone}\r\n\t\t\t\tonclick={(e) => { e.stopPropagation(); onToggle(card.id, isDone ? 'active' : 'done'); }}\r\n\t\t\t\taria-label={isDone ? `Mark ${card.title} as active` : `Mark ${card.title} as done`}\r\n\t\t\t/>\r\n\t\t\t<span class=\"check-label\">{isDone ? 'Completed' : 'Mark done'}</span>\r\n\t\t</label>\r\n\r\n\t\t\t<button\r\n\t\t\t\ttype=\"button\"\r\n\t\t\t\tclass=\"secondary open-notes\"\r\n\t\t\t\tonclick={(e) => {\r\n\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\tmodalStore.open(NoteModal, { cardId: card.id, cardTitle: card.title, api: noteApi });\r\n\t\t\t\t}}\r\n\t\t\t\taria-label={`Open notes for ${card.title}`}\r\n\t\t\t>\r\n\t\t\t\tOpen Notes\r\n\t\t\t</button>\r\n\r\n\t\t<MoreMenu ariaLabel={`More actions for ${card.title}`} on:edit={() => onEdit?.(card)} on:delete={() => onDelete?.(card.id)} />\r\n\t</footer>\r\n</article>\r\n\r\n<!-- Modal is now rendered by ModalContainer via modalStore -->\r\n\r\n\r\n<style>\r\n\t.card {\r\n\t\tmargin-bottom: 1rem;\r\n\t}\r\n\r\n\t.check {\r\n\t\tdisplay: inline-flex;\r\n\t\talign-items: center;\r\n\t\tgap: 0.5rem;\r\n\t}\r\n\r\n\t.check input[type='checkbox'] {\r\n\t\twidth: 1.1rem;\r\n\t\theight: 1.1rem;\r\n\t}\r\n\r\n\t.check-label {\r\n\t\tfont-size: 0.9rem;\r\n\t\tcolor: var(--muted, #666);\r\n\t}\r\n\r\n\t.done {\r\n\t\topacity: 0.7;\r\n\t}\r\n\r\n\t/* moved danger styles to MoreMenu where Delete lives */\r\n</style>\r\n"
			},
			"tags": ["fixable"],
			"source": null
		},
		{
			"category": "lint/correctness/noUnusedVariables",
			"severity": "warning",
			"description": "This variable statusText is unused.",
			"message": [
				{ "elements": [], "content": "This variable " },
				{ "elements": ["Emphasis"], "content": "statusText" },
				{ "elements": [], "content": " is unused." }
			],
			"advices": {
				"advices": [
					{
						"log": [
							"info",
							[
								{
									"elements": [],
									"content": "Unused variables are often the result of typos, incomplete refactors, or other sources of bugs."
								}
							]
						]
					},
					{
						"log": [
							"info",
							[
								{
									"elements": [],
									"content": "Unsafe fix: If this is intentional, prepend "
								},
								{ "elements": ["Emphasis"], "content": "statusText" },
								{ "elements": [], "content": " with an underscore." }
							]
						]
					},
					{
						"diff": {
							"dictionary": "import type { LearningCard, Note } from \"../../types\";\nimport { projectManager } from \"../projectManager.svelte\";\nimport MoreMenu from \"./MoreMenu.svelte\";const isDone = $derived(card.status === \"done\");\nconst buttonLabel = $derived(isDone ? \"Mark active\" : \"Mark done\");\nconst statusText_statusText = $derived(isDone ? \" Completed\" : \"Active\");\nconst projectName = $derived.by(() => {\n\tif (!card.project) return \"\";// local modal state (Svelte 5 rune) - replaced by centralized modalStore\nconst notesOpen = $state(false);\n",
							"ops": [
								{ "diffOp": { "equal": { "range": [0, 155] } } },
								{ "equalLines": { "line_count": 30 } },
								{ "diffOp": { "equal": { "range": [155, 278] } } },
								{ "diffOp": { "delete": { "range": [278, 288] } } },
								{ "diffOp": { "insert": { "range": [288, 299] } } },
								{ "diffOp": { "equal": { "range": [299, 300] } } },
								{ "diffOp": { "equal": { "range": [300, 419] } } },
								{ "equalLines": { "line_count": 5 } },
								{ "diffOp": { "equal": { "range": [419, 526] } } }
							]
						}
					}
				]
			},
			"verboseAdvices": { "advices": [] },
			"location": {
				"path": { "file": "src\\lib\\components\\CardItem.svelte" },
				"span": [1066, 1076],
				"sourceCode": "<script lang=\"ts\">\r\nimport type { LearningCard, Note } from \"../../types\";\nimport { projectManager } from \"../projectManager.svelte\";\nimport MoreMenu from \"./MoreMenu.svelte\";\nimport NoteModal from \"./NoteModal.svelte\";\nimport { modalStore } from \"../stores/modalStore\";\n\ninterface Props {\n\tcard: LearningCard;\n\tonStart: (card: LearningCard) => void;\n\tonToggle: (id: string, status: \"active\" | \"done\") => void;\n\tonEdit?: (card: LearningCard) => void;\n\tonDelete?: (id: string) => void;\n\tnoteApi?: {\n\t\tgetNotes(cardId: string): Promise<Note[]>;\n\t\tcreateNote(payload: {\n\t\t\tcardId: string;\n\t\t\ttitle: string;\n\t\t\tcontent: string;\n\t\t\ttags: string[];\n\t\t}): Promise<Note>;\n\t\tupdateNote(payload: {\n\t\t\tid: string;\n\t\t\ttitle?: string;\n\t\t\tcontent?: string;\n\t\t\ttags?: string[];\n\t\t}): Promise<Note>;\n\t\tdeleteNote(id: string): Promise<Note>;\n\t};\n}\n\nconst { card, onStart, onToggle, onEdit, onDelete, noteApi }: Props = $props();\n\n// Derived computed values\nconst isDone = $derived(card.status === \"done\");\nconst buttonLabel = $derived(isDone ? \"Mark active\" : \"Mark done\");\nconst statusText = $derived(isDone ? \" Completed\" : \"Active\");\nconst projectName = $derived.by(() => {\n\tif (!card.project) return \"\";\n\treturn (\n\t\tprojectManager.all.find((p) => p.id === card.project)?.name || card.project\n\t);\n});\n\n// local modal state (Svelte 5 rune) - replaced by centralized modalStore\nconst notesOpen = $state(false);\n</script>\r\n\r\n<article class=\"card\" class:done={isDone}>\r\n\t<header>\r\n\t\t<h3>{card.title}</h3>\r\n\t\t{#if card.topic}\r\n\t\t\t<p class=\"topic\">{card.topic}</p>\r\n\t\t{/if}\r\n\t\t{#if card.project}\r\n\t\t\t<p class=\"project\">Project: <strong>{projectName}</strong></p>\r\n\t\t{/if}\r\n\t</header>\r\n\r\n\t<section>\r\n\t\t<div class=\"status\" class:done={isDone}>{statusText}</div>\r\n\t\t<pre class=\"prompt\">{card.prompt}</pre>\r\n\t</section>\r\n\r\n\t<footer class=\"card-actions\">\r\n\t\t<button\r\n\t\t\ttype=\"button\"\r\n\t\t\tclass=\"primary\"\r\n\t\t\tonclick={(e) => { e.stopPropagation(); onStart(card); }}\r\n\t\t\taria-label={`Start chat with prompt for ${card.title}`}\r\n\t\t>\r\n\t\t\tStart in ChatGPT\r\n\t\t</button>\r\n\r\n\t\t<label class=\"check\">\r\n\t\t\t<input\r\n\t\t\t\ttype=\"checkbox\"\r\n\t\t\t\tchecked={isDone}\r\n\t\t\t\tonclick={(e) => { e.stopPropagation(); onToggle(card.id, isDone ? 'active' : 'done'); }}\r\n\t\t\t\taria-label={isDone ? `Mark ${card.title} as active` : `Mark ${card.title} as done`}\r\n\t\t\t/>\r\n\t\t\t<span class=\"check-label\">{isDone ? 'Completed' : 'Mark done'}</span>\r\n\t\t</label>\r\n\r\n\t\t\t<button\r\n\t\t\t\ttype=\"button\"\r\n\t\t\t\tclass=\"secondary open-notes\"\r\n\t\t\t\tonclick={(e) => {\r\n\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\tmodalStore.open(NoteModal, { cardId: card.id, cardTitle: card.title, api: noteApi });\r\n\t\t\t\t}}\r\n\t\t\t\taria-label={`Open notes for ${card.title}`}\r\n\t\t\t>\r\n\t\t\t\tOpen Notes\r\n\t\t\t</button>\r\n\r\n\t\t<MoreMenu ariaLabel={`More actions for ${card.title}`} on:edit={() => onEdit?.(card)} on:delete={() => onDelete?.(card.id)} />\r\n\t</footer>\r\n</article>\r\n\r\n<!-- Modal is now rendered by ModalContainer via modalStore -->\r\n\r\n\r\n<style>\r\n\t.card {\r\n\t\tmargin-bottom: 1rem;\r\n\t}\r\n\r\n\t.check {\r\n\t\tdisplay: inline-flex;\r\n\t\talign-items: center;\r\n\t\tgap: 0.5rem;\r\n\t}\r\n\r\n\t.check input[type='checkbox'] {\r\n\t\twidth: 1.1rem;\r\n\t\theight: 1.1rem;\r\n\t}\r\n\r\n\t.check-label {\r\n\t\tfont-size: 0.9rem;\r\n\t\tcolor: var(--muted, #666);\r\n\t}\r\n\r\n\t.done {\r\n\t\topacity: 0.7;\r\n\t}\r\n\r\n\t/* moved danger styles to MoreMenu where Delete lives */\r\n</style>\r\n"
			},
			"tags": ["fixable"],
			"source": null
		},
		{
			"category": "lint/correctness/noUnusedVariables",
			"severity": "warning",
			"description": "This variable projectName is unused.",
			"message": [
				{ "elements": [], "content": "This variable " },
				{ "elements": ["Emphasis"], "content": "projectName" },
				{ "elements": [], "content": " is unused." }
			],
			"advices": {
				"advices": [
					{
						"log": [
							"info",
							[
								{
									"elements": [],
									"content": "Unused variables are often the result of typos, incomplete refactors, or other sources of bugs."
								}
							]
						]
					},
					{
						"log": [
							"info",
							[
								{
									"elements": [],
									"content": "Unsafe fix: If this is intentional, prepend "
								},
								{ "elements": ["Emphasis"], "content": "projectName" },
								{ "elements": [], "content": " with an underscore." }
							]
						]
					},
					{
						"diff": {
							"dictionary": "import type { LearningCard, Note } from \"../../types\";\nimport { projectManager } from \"../projectManager.svelte\";\nimport MoreMenu from \"./MoreMenu.svelte\";const buttonLabel = $derived(isDone ? \"Mark active\" : \"Mark done\");\nconst statusText = $derived(isDone ? \" Completed\" : \"Active\");\nconst projectName_projectName = $derived.by(() => {\n\tif (!card.project) return \"\";\n\treturn (// local modal state (Svelte 5 rune) - replaced by centralized modalStore\nconst notesOpen = $state(false);\n",
							"ops": [
								{ "diffOp": { "equal": { "range": [0, 155] } } },
								{ "equalLines": { "line_count": 31 } },
								{ "diffOp": { "equal": { "range": [155, 295] } } },
								{ "diffOp": { "delete": { "range": [295, 306] } } },
								{ "diffOp": { "insert": { "range": [306, 318] } } },
								{ "diffOp": { "equal": { "range": [318, 319] } } },
								{ "diffOp": { "equal": { "range": [319, 381] } } },
								{ "equalLines": { "line_count": 4 } },
								{ "diffOp": { "equal": { "range": [381, 488] } } }
							]
						}
					}
				]
			},
			"verboseAdvices": { "advices": [] },
			"location": {
				"path": { "file": "src\\lib\\components\\CardItem.svelte" },
				"span": [1132, 1143],
				"sourceCode": "<script lang=\"ts\">\r\nimport type { LearningCard, Note } from \"../../types\";\nimport { projectManager } from \"../projectManager.svelte\";\nimport MoreMenu from \"./MoreMenu.svelte\";\nimport NoteModal from \"./NoteModal.svelte\";\nimport { modalStore } from \"../stores/modalStore\";\n\ninterface Props {\n\tcard: LearningCard;\n\tonStart: (card: LearningCard) => void;\n\tonToggle: (id: string, status: \"active\" | \"done\") => void;\n\tonEdit?: (card: LearningCard) => void;\n\tonDelete?: (id: string) => void;\n\tnoteApi?: {\n\t\tgetNotes(cardId: string): Promise<Note[]>;\n\t\tcreateNote(payload: {\n\t\t\tcardId: string;\n\t\t\ttitle: string;\n\t\t\tcontent: string;\n\t\t\ttags: string[];\n\t\t}): Promise<Note>;\n\t\tupdateNote(payload: {\n\t\t\tid: string;\n\t\t\ttitle?: string;\n\t\t\tcontent?: string;\n\t\t\ttags?: string[];\n\t\t}): Promise<Note>;\n\t\tdeleteNote(id: string): Promise<Note>;\n\t};\n}\n\nconst { card, onStart, onToggle, onEdit, onDelete, noteApi }: Props = $props();\n\n// Derived computed values\nconst isDone = $derived(card.status === \"done\");\nconst buttonLabel = $derived(isDone ? \"Mark active\" : \"Mark done\");\nconst statusText = $derived(isDone ? \" Completed\" : \"Active\");\nconst projectName = $derived.by(() => {\n\tif (!card.project) return \"\";\n\treturn (\n\t\tprojectManager.all.find((p) => p.id === card.project)?.name || card.project\n\t);\n});\n\n// local modal state (Svelte 5 rune) - replaced by centralized modalStore\nconst notesOpen = $state(false);\n</script>\r\n\r\n<article class=\"card\" class:done={isDone}>\r\n\t<header>\r\n\t\t<h3>{card.title}</h3>\r\n\t\t{#if card.topic}\r\n\t\t\t<p class=\"topic\">{card.topic}</p>\r\n\t\t{/if}\r\n\t\t{#if card.project}\r\n\t\t\t<p class=\"project\">Project: <strong>{projectName}</strong></p>\r\n\t\t{/if}\r\n\t</header>\r\n\r\n\t<section>\r\n\t\t<div class=\"status\" class:done={isDone}>{statusText}</div>\r\n\t\t<pre class=\"prompt\">{card.prompt}</pre>\r\n\t</section>\r\n\r\n\t<footer class=\"card-actions\">\r\n\t\t<button\r\n\t\t\ttype=\"button\"\r\n\t\t\tclass=\"primary\"\r\n\t\t\tonclick={(e) => { e.stopPropagation(); onStart(card); }}\r\n\t\t\taria-label={`Start chat with prompt for ${card.title}`}\r\n\t\t>\r\n\t\t\tStart in ChatGPT\r\n\t\t</button>\r\n\r\n\t\t<label class=\"check\">\r\n\t\t\t<input\r\n\t\t\t\ttype=\"checkbox\"\r\n\t\t\t\tchecked={isDone}\r\n\t\t\t\tonclick={(e) => { e.stopPropagation(); onToggle(card.id, isDone ? 'active' : 'done'); }}\r\n\t\t\t\taria-label={isDone ? `Mark ${card.title} as active` : `Mark ${card.title} as done`}\r\n\t\t\t/>\r\n\t\t\t<span class=\"check-label\">{isDone ? 'Completed' : 'Mark done'}</span>\r\n\t\t</label>\r\n\r\n\t\t\t<button\r\n\t\t\t\ttype=\"button\"\r\n\t\t\t\tclass=\"secondary open-notes\"\r\n\t\t\t\tonclick={(e) => {\r\n\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\tmodalStore.open(NoteModal, { cardId: card.id, cardTitle: card.title, api: noteApi });\r\n\t\t\t\t}}\r\n\t\t\t\taria-label={`Open notes for ${card.title}`}\r\n\t\t\t>\r\n\t\t\t\tOpen Notes\r\n\t\t\t</button>\r\n\r\n\t\t<MoreMenu ariaLabel={`More actions for ${card.title}`} on:edit={() => onEdit?.(card)} on:delete={() => onDelete?.(card.id)} />\r\n\t</footer>\r\n</article>\r\n\r\n<!-- Modal is now rendered by ModalContainer via modalStore -->\r\n\r\n\r\n<style>\r\n\t.card {\r\n\t\tmargin-bottom: 1rem;\r\n\t}\r\n\r\n\t.check {\r\n\t\tdisplay: inline-flex;\r\n\t\talign-items: center;\r\n\t\tgap: 0.5rem;\r\n\t}\r\n\r\n\t.check input[type='checkbox'] {\r\n\t\twidth: 1.1rem;\r\n\t\theight: 1.1rem;\r\n\t}\r\n\r\n\t.check-label {\r\n\t\tfont-size: 0.9rem;\r\n\t\tcolor: var(--muted, #666);\r\n\t}\r\n\r\n\t.done {\r\n\t\topacity: 0.7;\r\n\t}\r\n\r\n\t/* moved danger styles to MoreMenu where Delete lives */\r\n</style>\r\n"
			},
			"tags": ["fixable"],
			"source": null
		},
		{
			"category": "lint/correctness/noUnusedVariables",
			"severity": "warning",
			"description": "This variable notesOpen is unused.",
			"message": [
				{ "elements": [], "content": "This variable " },
				{ "elements": ["Emphasis"], "content": "notesOpen" },
				{ "elements": [], "content": " is unused." }
			],
			"advices": {
				"advices": [
					{
						"log": [
							"info",
							[
								{
									"elements": [],
									"content": "Unused variables are often the result of typos, incomplete refactors, or other sources of bugs."
								}
							]
						]
					},
					{
						"log": [
							"info",
							[
								{
									"elements": [],
									"content": "Unsafe fix: If this is intentional, prepend "
								},
								{ "elements": ["Emphasis"], "content": "notesOpen" },
								{ "elements": [], "content": " with an underscore." }
							]
						]
					},
					{
						"diff": {
							"dictionary": "import type { LearningCard, Note } from \"../../types\";\nimport { projectManager } from \"../projectManager.svelte\";\nimport MoreMenu from \"./MoreMenu.svelte\";\n// local modal state (Svelte 5 rune) - replaced by centralized modalStore\nconst notesOpen_notesOpen = $state(false);\n",
							"ops": [
								{ "diffOp": { "equal": { "range": [0, 155] } } },
								{ "equalLines": { "line_count": 39 } },
								{ "diffOp": { "equal": { "range": [155, 236] } } },
								{ "diffOp": { "delete": { "range": [236, 245] } } },
								{ "diffOp": { "insert": { "range": [245, 255] } } },
								{ "diffOp": { "equal": { "range": [255, 256] } } },
								{ "diffOp": { "equal": { "range": [256, 273] } } }
							]
						}
					}
				]
			},
			"verboseAdvices": { "advices": [] },
			"location": {
				"path": { "file": "src\\lib\\components\\CardItem.svelte" },
				"span": [1374, 1383],
				"sourceCode": "<script lang=\"ts\">\r\nimport type { LearningCard, Note } from \"../../types\";\nimport { projectManager } from \"../projectManager.svelte\";\nimport MoreMenu from \"./MoreMenu.svelte\";\nimport NoteModal from \"./NoteModal.svelte\";\nimport { modalStore } from \"../stores/modalStore\";\n\ninterface Props {\n\tcard: LearningCard;\n\tonStart: (card: LearningCard) => void;\n\tonToggle: (id: string, status: \"active\" | \"done\") => void;\n\tonEdit?: (card: LearningCard) => void;\n\tonDelete?: (id: string) => void;\n\tnoteApi?: {\n\t\tgetNotes(cardId: string): Promise<Note[]>;\n\t\tcreateNote(payload: {\n\t\t\tcardId: string;\n\t\t\ttitle: string;\n\t\t\tcontent: string;\n\t\t\ttags: string[];\n\t\t}): Promise<Note>;\n\t\tupdateNote(payload: {\n\t\t\tid: string;\n\t\t\ttitle?: string;\n\t\t\tcontent?: string;\n\t\t\ttags?: string[];\n\t\t}): Promise<Note>;\n\t\tdeleteNote(id: string): Promise<Note>;\n\t};\n}\n\nconst { card, onStart, onToggle, onEdit, onDelete, noteApi }: Props = $props();\n\n// Derived computed values\nconst isDone = $derived(card.status === \"done\");\nconst buttonLabel = $derived(isDone ? \"Mark active\" : \"Mark done\");\nconst statusText = $derived(isDone ? \" Completed\" : \"Active\");\nconst projectName = $derived.by(() => {\n\tif (!card.project) return \"\";\n\treturn (\n\t\tprojectManager.all.find((p) => p.id === card.project)?.name || card.project\n\t);\n});\n\n// local modal state (Svelte 5 rune) - replaced by centralized modalStore\nconst notesOpen = $state(false);\n</script>\r\n\r\n<article class=\"card\" class:done={isDone}>\r\n\t<header>\r\n\t\t<h3>{card.title}</h3>\r\n\t\t{#if card.topic}\r\n\t\t\t<p class=\"topic\">{card.topic}</p>\r\n\t\t{/if}\r\n\t\t{#if card.project}\r\n\t\t\t<p class=\"project\">Project: <strong>{projectName}</strong></p>\r\n\t\t{/if}\r\n\t</header>\r\n\r\n\t<section>\r\n\t\t<div class=\"status\" class:done={isDone}>{statusText}</div>\r\n\t\t<pre class=\"prompt\">{card.prompt}</pre>\r\n\t</section>\r\n\r\n\t<footer class=\"card-actions\">\r\n\t\t<button\r\n\t\t\ttype=\"button\"\r\n\t\t\tclass=\"primary\"\r\n\t\t\tonclick={(e) => { e.stopPropagation(); onStart(card); }}\r\n\t\t\taria-label={`Start chat with prompt for ${card.title}`}\r\n\t\t>\r\n\t\t\tStart in ChatGPT\r\n\t\t</button>\r\n\r\n\t\t<label class=\"check\">\r\n\t\t\t<input\r\n\t\t\t\ttype=\"checkbox\"\r\n\t\t\t\tchecked={isDone}\r\n\t\t\t\tonclick={(e) => { e.stopPropagation(); onToggle(card.id, isDone ? 'active' : 'done'); }}\r\n\t\t\t\taria-label={isDone ? `Mark ${card.title} as active` : `Mark ${card.title} as done`}\r\n\t\t\t/>\r\n\t\t\t<span class=\"check-label\">{isDone ? 'Completed' : 'Mark done'}</span>\r\n\t\t</label>\r\n\r\n\t\t\t<button\r\n\t\t\t\ttype=\"button\"\r\n\t\t\t\tclass=\"secondary open-notes\"\r\n\t\t\t\tonclick={(e) => {\r\n\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\tmodalStore.open(NoteModal, { cardId: card.id, cardTitle: card.title, api: noteApi });\r\n\t\t\t\t}}\r\n\t\t\t\taria-label={`Open notes for ${card.title}`}\r\n\t\t\t>\r\n\t\t\t\tOpen Notes\r\n\t\t\t</button>\r\n\r\n\t\t<MoreMenu ariaLabel={`More actions for ${card.title}`} on:edit={() => onEdit?.(card)} on:delete={() => onDelete?.(card.id)} />\r\n\t</footer>\r\n</article>\r\n\r\n<!-- Modal is now rendered by ModalContainer via modalStore -->\r\n\r\n\r\n<style>\r\n\t.card {\r\n\t\tmargin-bottom: 1rem;\r\n\t}\r\n\r\n\t.check {\r\n\t\tdisplay: inline-flex;\r\n\t\talign-items: center;\r\n\t\tgap: 0.5rem;\r\n\t}\r\n\r\n\t.check input[type='checkbox'] {\r\n\t\twidth: 1.1rem;\r\n\t\theight: 1.1rem;\r\n\t}\r\n\r\n\t.check-label {\r\n\t\tfont-size: 0.9rem;\r\n\t\tcolor: var(--muted, #666);\r\n\t}\r\n\r\n\t.done {\r\n\t\topacity: 0.7;\r\n\t}\r\n\r\n\t/* moved danger styles to MoreMenu where Delete lives */\r\n</style>\r\n"
			},
			"tags": ["fixable"],
			"source": null
		},
		{
			"category": "lint/correctness/noUnusedImports",
			"severity": "warning",
			"description": "This import is unused.",
			"message": [
				{ "elements": [], "content": "This " },
				{ "elements": ["Emphasis"], "content": "import" },
				{ "elements": [], "content": " is unused." }
			],
			"advices": {
				"advices": [
					{
						"log": [
							"info",
							[
								{
									"elements": [],
									"content": "Unused imports might be the result of an incomplete refactoring."
								}
							]
						]
					},
					{
						"log": [
							"info",
							[
								{
									"elements": [],
									"content": "Unsafe fix: Remove the unused imports."
								}
							]
						]
					},
					{
						"diff": {
							"dictionary": "import { cardManager } from \"../cardManager.svelte\";\nimport { projectManager } from \"../projectManager.svelte\";\nimport CardItem from \"./CardItem.svelte\";\nimport type { LearningCard } from \"../../types\";\n\tcardManager.setFilterQuery(input.value);\n}\n",
							"ops": [
								{ "diffOp": { "equal": { "range": [0, 111] } } },
								{ "diffOp": { "delete": { "range": [111, 153] } } },
								{ "diffOp": { "equal": { "range": [153, 203] } } },
								{ "equalLines": { "line_count": 62 } },
								{ "diffOp": { "equal": { "range": [203, 247] } } }
							]
						}
					}
				]
			},
			"verboseAdvices": { "advices": [] },
			"location": {
				"path": { "file": "src\\lib\\components\\CardList.svelte" },
				"span": [138, 146],
				"sourceCode": "<script lang=\"ts\">\nimport { cardManager } from \"../cardManager.svelte\";\nimport { projectManager } from \"../projectManager.svelte\";\nimport CardItem from \"./CardItem.svelte\";\nimport type { LearningCard } from \"../../types\";\n\ninterface Props {\n\tonStart: (card: LearningCard) => void;\n\tonToggle: (id: string, status: \"active\" | \"done\") => void;\n\tonEdit?: (card: LearningCard) => void;\n\tonDelete?: (id: string) => void;\n}\n\nconst {\n\tonStart: _onStart,\n\tonToggle: _onToggle,\n\tonEdit: _onEdit,\n\tonDelete: _onDelete,\n}: Props = $props();\n\n// Helper function to group cards by project\nfunction groupByProject(list: LearningCard[]) {\n\tconst map = new Map<string, LearningCard[]>();\n\tfor (const c of list) {\n\t\tconst key = c.project || \"\";\n\t\tif (!map.has(key)) map.set(key, []);\n\t\tmap.get(key)?.push(c);\n\t}\n\tconst groups: {\n\t\tproject: string;\n\t\tcards: LearningCard[];\n\t\theadingId: string;\n\t}[] = [];\n\tfor (const [project, cards] of map.entries()) {\n\t\tgroups.push({\n\t\t\tproject,\n\t\t\tcards,\n\t\t\theadingId: `project-${(project || \"unassigned\").replace(/\\s+/g, \"-\")}`,\n\t\t});\n\t}\n\t// sort by project name when possible\n\tgroups.sort((a, b) => {\n\t\tconst aName = a.project\n\t\t\t? projectManager.all.find((p) => p.id === a.project)?.name || a.project\n\t\t\t: \"Unassigned\";\n\t\tconst bName = b.project\n\t\t\t? projectManager.all.find((p) => p.id === b.project)?.name || b.project\n\t\t\t: \"Unassigned\";\n\t\treturn aName.localeCompare(bName);\n\t});\n\treturn groups;\n}\n\n// Derived computed groups\nconst _groupedCards = $derived.by(() => {\n\tif (cardManager.filterProject === \"all\") {\n\t\treturn groupByProject(cardManager.filtered);\n\t}\n\treturn [];\n});\n\nfunction _handleStatusFilter(e: Event) {\n\tconst select = e.target as HTMLSelectElement;\n\tcardManager.setFilterStatus(select.value as \"all\" | \"active\" | \"done\");\n}\n\nfunction _handleSearchInput(e: Event) {\n\tconst input = e.target as HTMLInputElement;\n\tcardManager.setFilterQuery(input.value);\n}\n</script>\n\n<section>\n\t<h2>Your learning cards</h2>\n\n\t<div class=\"filters\">\n\t\t<label class=\"filter\">\n\t\t\tShow:\n\t\t\t<select onchange={_handleStatusFilter}>\n\t\t\t\t<option value=\"all\">All ({cardManager.all.length})</option>\n\t\t\t\t<option value=\"active\">Active ({cardManager.activeCards.length})</option>\n\t\t\t\t<option value=\"done\">Completed ({cardManager.completedCards.length})</option>\n\t\t\t</select>\n\t\t</label>\n\n\t\t<label class=\"filter search\">\n\t\t\tSearch:\n\t\t\t<input\n\t\t\t\ttype=\"search\"\n\t\t\t\tplaceholder=\"Search title, prompt, topic\"\n\t\t\t\toninput={_handleSearchInput}\n\t\t\t\taria-label=\"Search cards\"\n\t\t\t/>\n\t\t</label>\n\t</div>\n\n\t<div class=\"card-list\">\n\t\t{#if cardManager.filtered.length === 0}\n\t\t\t<p class=\"empty-state\" role=\"status\" aria-live=\"polite\">\n\t\t\t\tNo learning cards match your filters.\n\t\t\t</p>\n\t\t{:else if cardManager.filterProject === 'all'}\n\t\t\t{#each _groupedCards as group (group.headingId)}\n\t\t\t\t<section class=\"project-group\" aria-labelledby={group.headingId}>\n\t\t\t\t\t<h3 id={group.headingId}>\n\t\t\t\t\t\t{group.project\n\t\t\t\t\t\t\t? projectManager.all.find(p => p.id === group.project)?.name || group.project\n\t\t\t\t\t\t\t: 'Unassigned'}\n\t\t\t\t\t</h3>\n\t\t\t\t\t{#each group.cards as card (card.id)}\n\t\t\t\t\t\t<CardItem {card} onStart={_onStart} onToggle={_onToggle} onEdit={_onEdit} onDelete={_onDelete} />\n\t\t\t\t\t{/each}\n\t\t\t\t</section>\n\t\t\t{/each}\n\t\t{:else}\n\t\t\t{#each cardManager.filtered as card (card.id)}\n\t\t\t\t<CardItem {card} onStart={_onStart} onToggle={_onToggle} onEdit={_onEdit} onDelete={_onDelete} />\n\t\t\t{/each}\n\t\t{/if}\n\t</div>\n</section>\n"
			},
			"tags": ["fixable"],
			"source": null
		},
		{
			"category": "lint/style/useConst",
			"severity": "warning",
			"description": "This let declares a variable that is only assigned once.",
			"message": [
				{ "elements": [], "content": "This " },
				{ "elements": ["Emphasis"], "content": "let" },
				{
					"elements": [],
					"content": " declares a variable that is only assigned once."
				}
			],
			"advices": {
				"advices": [
					{
						"log": [
							"info",
							[
								{
									"elements": [],
									"content": "'formElement' is never reassigned."
								}
							]
						]
					},
					{
						"frame": {
							"path": null,
							"span": [2067, 2078],
							"sourceCode": "<script lang=\"ts\">\n/* global HTMLElement setTimeout */\nimport { projectManager } from \"../projectManager.svelte\";\nimport type { LearningCard } from \"../../types\";\n\ninterface Props {\n\tcard: LearningCard;\n\tonSubmit: (data: {\n\t\tid: string;\n\t\ttitle: string;\n\t\tprompt: string;\n\t\ttopic?: string;\n\t\tproject?: string;\n\t}) => Promise<void>;\n\tonCancel: () => void;\n}\n\nconst { card, onSubmit, onCancel }: Props = $props();\n\n// Local state using Svelte 5 runes\nlet title = $state(\"\");\nlet topic = $state(\"\");\nlet project = $state(\"\");\nlet creatingProject = $state(false);\nlet prompt = $state(\"\");\nlet status = $state(\"\");\nlet isSubmitting = $state(false);\n\n$effect(() => {\n\ttitle = card.title;\n\ttopic = card.topic || \"\";\n\tproject = card.project || \"\";\n\tprompt = card.prompt;\n\tcreatingProject = false;\n});\n\n// Derived validation state\nconst titleError = $derived.by(() => {\n\tconst trimmed = title.trim();\n\tif (trimmed.length === 0) return \"Title is required\";\n\tif (trimmed.length < 3) return \"Title must be at least 3 characters\";\n\tif (trimmed.length > 100) return \"Title must be less than 100 characters\";\n\treturn \"\";\n});\n\nconst promptError = $derived.by(() => {\n\tconst trimmed = prompt.trim();\n\tif (trimmed.length === 0) return \"Prompt is required\";\n\tif (trimmed.length < 10) return \"Prompt must be at least 10 characters\";\n\tif (trimmed.length > 8000) return \"Prompt must be less than 8000 characters\";\n\treturn \"\";\n});\n\nconst projectError = $derived.by(() => {\n\tif (creatingProject) {\n\t\tconst trimmed = project.trim();\n\t\tif (trimmed.length === 0) return \"Project name is required\";\n\t\tif (trimmed.length < 2) return \"Project name must be at least 2 characters\";\n\t\tif (trimmed.length > 50)\n\t\t\treturn \"Project name must be less than 50 characters\";\n\t\tif (\n\t\t\tprojectManager.all.some(\n\t\t\t\t(p) => p.name.toLowerCase() === trimmed.toLowerCase(),\n\t\t\t)\n\t\t) {\n\t\t\treturn \"A project with this name already exists\";\n\t\t}\n\t}\n\treturn \"\";\n});\n\nconst isValid = $derived.by(() => {\n\treturn (\n\t\ttitle.trim().length > 0 &&\n\t\tprompt.trim().length > 0 &&\n\t\t!titleError &&\n\t\t!promptError &&\n\t\t!projectError\n\t);\n});\n\nlet formElement: HTMLElement | null = null;\nlet firstFocusableElement: HTMLElement | null = null;\nlet lastFocusableElement: HTMLElement | null = null;\n\n// Focus trap effect\n$effect(() => {\n\t// Set initial focus to title input\n\tconst titleInput = document.getElementById(\"edit-title\") as HTMLInputElement;\n\tif (titleInput) {\n\t\tsetTimeout(() => titleInput.focus(), 0);\n\t}\n\n\t// Get all focusable elements within the form\n\tconst updateFocusableElements = () => {\n\t\tif (!formElement) return;\n\n\t\tconst focusableSelectors =\n\t\t\t'input:not([disabled]), textarea:not([disabled]), button:not([disabled]), select:not([disabled]), [tabindex]:not([tabindex=\"-1\"])';\n\t\tconst focusableElements = formElement.querySelectorAll(focusableSelectors);\n\n\t\tif (focusableElements.length > 0) {\n\t\t\tfirstFocusableElement = focusableElements[0] as HTMLElement;\n\t\t\tlastFocusableElement = focusableElements[\n\t\t\t\tfocusableElements.length - 1\n\t\t\t] as HTMLElement;\n\t\t}\n\t};\n\n\tupdateFocusableElements();\n\n\tconst handleTabKey = (e: KeyboardEvent) => {\n\t\tif (e.key !== \"Tab\") return;\n\n\t\tupdateFocusableElements();\n\n\t\tif (e.shiftKey) {\n\t\t\tif (document.activeElement === firstFocusableElement) {\n\t\t\t\te.preventDefault();\n\t\t\t\tlastFocusableElement?.focus();\n\t\t\t}\n\t\t} else {\n\t\t\tif (document.activeElement === lastFocusableElement) {\n\t\t\t\te.preventDefault();\n\t\t\t\tfirstFocusableElement?.focus();\n\t\t\t}\n\t\t}\n\t};\n\n\tconst handleGlobalKeydown = (e: KeyboardEvent) => {\n\t\tif (e.key === \"Escape\") {\n\t\t\tonCancel();\n\t\t}\n\t};\n\n\tformElement?.addEventListener(\"keydown\", handleTabKey);\n\twindow.addEventListener(\"keydown\", handleGlobalKeydown);\n\n\treturn () => {\n\t\tformElement?.removeEventListener(\"keydown\", handleTabKey);\n\t\twindow.removeEventListener(\"keydown\", handleGlobalKeydown);\n\t};\n});\n\nasync function _handleSubmit(e: SubmitEvent) {\n\te.preventDefault();\n\n\tif (!isValid || isSubmitting) return;\n\n\tisSubmitting = true;\n\tstatus = \"\";\n\n\ttry {\n\t\tawait onSubmit({\n\t\t\tid: card.id,\n\t\t\ttitle: title.trim(),\n\t\t\tprompt: prompt.trim(),\n\t\t\ttopic: topic.trim() || undefined,\n\t\t\tproject: creatingProject\n\t\t\t\t? project.trim() || undefined\n\t\t\t\t: project || undefined,\n\t\t});\n\n\t\tannounceToSR(`Card \"${title}\" updated successfully`);\n\t} catch (err) {\n\t\tstatus = err instanceof Error ? err.message : \"Failed to update card\";\n\t\tannounceToSR(status);\n\t} finally {\n\t\tisSubmitting = false;\n\t}\n}\n\nfunction _handleProjectChange(e: Event) {\n\tconst select = e.target as HTMLSelectElement;\n\tif (select.value === \"__create__\") {\n\t\tcreatingProject = true;\n\t\tproject = \"\";\n\t} else {\n\t\tcreatingProject = false;\n\t\tproject = select.value;\n\t}\n}\n\nfunction announceToSR(message: string) {\n\tconst announcer = document.getElementById(\"sr-announcements\");\n\tif (announcer) {\n\t\tannouncer.textContent = message;\n\t}\n}\n</script>\n\n<section id=\"edit-section\" bind:this={formElement}>\n\t<form onsubmit={_handleSubmit} aria-labelledby=\"edit-heading\">\n\t\t<h2 id=\"edit-heading\">Edit learning item</h2>\n\n\t\t{#if status}\n\t\t\t<div role=\"status\" class=\"form-status\">{status}</div>\n\t\t{/if}\n\n\t\t<div class=\"field\">\n\t\t\t<label for=\"edit-title\">\n\t\t\t\tTitle <span class=\"required\">*</span>\n\t\t\t</label>\n\t\t\t<input\n\t\t\t\tid=\"edit-title\"\n\t\t\t\tbind:value={title}\n\t\t\t\ttype=\"text\"\n\t\t\t\tautocomplete=\"off\"\n\t\t\t\trequired\n\t\t\t\tdisabled={isSubmitting}\n\t\t\t\tclass:error={titleError}\n\t\t\t/>\n\t\t\t{#if titleError}\n\t\t\t\t<span class=\"error-message\">{titleError}</span>\n\t\t\t{:else}\n\t\t\t\t<span class=\"hint\">Choose a short title you'll recognize later.</span>\n\t\t\t{/if}\n\t\t</div>\n\n\t\t<div class=\"field\">\n\t\t\t<label for=\"edit-topic\">\n\t\t\t\tTopic <span class=\"optional\">(optional)</span>\n\t\t\t</label>\n\t\t\t<input\n\t\t\t\tid=\"edit-topic\"\n\t\t\t\tbind:value={topic}\n\t\t\t\ttype=\"text\"\n\t\t\t\tautocomplete=\"off\"\n\t\t\t\tdisabled={isSubmitting}\n\t\t\t/>\n\t\t\t<span class=\"hint\">e.g., JavaScript, Design Patterns, Math</span>\n\t\t</div>\n\n\t\t<div class=\"field\">\n\t\t\t<label for=\"edit-project-select\">Project <span class=\"optional\">(optional)</span></label>\n\t\t\t<select\n\t\t\t\tid=\"edit-project-select\"\n\t\t\t\tbind:value={project}\n\t\t\t\tonchange={_handleProjectChange}\n\t\t\t\tdisabled={isSubmitting}\n\t\t\t\taria-describedby=\"edit-project-hint\"\n\t\t\t>\n\t\t\t\t<option value=\"\">Select a project</option>\n\t\t\t\t{#each projectManager.all as p (p.id)}\n\t\t\t\t\t<option value={p.id}>{p.name}</option>\n\t\t\t\t{/each}\n\t\t\t\t<option value=\"__create__\">+ Create new project...</option>\n\t\t\t</select>\n\t\t\t<span id=\"edit-project-hint\" class=\"hint\">Attach to an existing project or make a new one.</span>\n\t\t</div>\n\n\t\t{#if creatingProject}\n\t\t\t<div class=\"field\">\n\t\t\t\t<label for=\"edit-project\">New project name <span class=\"required\">*</span></label>\n\t\t\t\t<input\n\t\t\t\t\tid=\"edit-project\"\n\t\t\t\t\tbind:value={project}\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tautocomplete=\"off\"\n\t\t\t\t\tdisabled={isSubmitting}\n\t\t\t\t\tclass:error={projectError}\n\t\t\t\t/>\n\t\t\t\t{#if projectError}\n\t\t\t\t\t<span class=\"error-message\">{projectError}</span>\n\t\t\t\t{:else}\n\t\t\t\t\t<span class=\"hint\">Keep it concise and unique.</span>\n\t\t\t\t{/if}\n\t\t\t</div>\n\t\t{/if}\n\n\t\t<div class=\"field\">\n\t\t\t<label for=\"edit-prompt\">\n\t\t\t\tLearning prompt <span class=\"required\">*</span>\n\t\t\t</label>\n\t\t\t<textarea\n\t\t\t\tid=\"edit-prompt\"\n\t\t\t\tbind:value={prompt}\n\t\t\t\trequired\n\t\t\t\tdisabled={isSubmitting}\n\t\t\t\tplaceholder=\"e.g. Explain the concept of closures in JavaScript\"\n\t\t\t\tclass:error={promptError}\n\t\t\t></textarea>\n\t\t\t{#if promptError}\n\t\t\t\t<span class=\"error-message\">{promptError}</span>\n\t\t\t{:else}\n\t\t\t\t<span class=\"hint\">Describe what you want to learn so the AI can help.</span>\n\t\t\t{/if}\n\t\t</div>\n\n\t\t<div class=\"form-actions\">\n\t\t\t<button type=\"submit\" class=\"primary\" disabled={!isValid || isSubmitting}>\n\t\t\t\t{isSubmitting ? 'Saving...' : 'Save changes'}\n\t\t\t</button>\n\t\t\t<button type=\"button\" class=\"ghost\" onclick={onCancel} disabled={isSubmitting}>\n\t\t\t\tCancel\n\t\t\t</button>\n\t\t</div>\n\t</form>\n</section>\n"
						}
					},
					{
						"log": [
							"info",
							[
								{ "elements": [], "content": "Safe fix: Use " },
								{ "elements": ["Emphasis"], "content": "const" },
								{ "elements": [], "content": " instead." }
							]
						]
					},
					{
						"diff": {
							"dictionary": "/* global HTMLElement setTimeout */\nimport { projectManager } from \"../projectManager.svelte\";\nimport type { LearningCard } from \"../../types\";\t\t!projectError\n\t);\n});\n\nletconst formElement: HTMLElement | null = null;\nlet firstFocusableElement: HTMLElement | null = null;\nlet lastFocusableElement: HTMLElement | null = null;\t}\n}\n",
							"ops": [
								{ "diffOp": { "equal": { "range": [0, 143] } } },
								{ "equalLines": { "line_count": 73 } },
								{ "diffOp": { "equal": { "range": [143, 166] } } },
								{ "diffOp": { "equal": { "range": [166, 168] } } },
								{ "diffOp": { "delete": { "range": [168, 171] } } },
								{ "diffOp": { "insert": { "range": [171, 176] } } },
								{ "diffOp": { "equal": { "range": [176, 177] } } },
								{ "diffOp": { "equal": { "range": [177, 323] } } },
								{ "equalLines": { "line_count": 103 } },
								{ "diffOp": { "equal": { "range": [323, 328] } } }
							]
						}
					}
				]
			},
			"verboseAdvices": { "advices": [] },
			"location": {
				"path": { "file": "src\\lib\\components\\EditCardForm.svelte" },
				"span": [2082, 2085],
				"sourceCode": "<script lang=\"ts\">\n/* global HTMLElement setTimeout */\nimport { projectManager } from \"../projectManager.svelte\";\nimport type { LearningCard } from \"../../types\";\n\ninterface Props {\n\tcard: LearningCard;\n\tonSubmit: (data: {\n\t\tid: string;\n\t\ttitle: string;\n\t\tprompt: string;\n\t\ttopic?: string;\n\t\tproject?: string;\n\t}) => Promise<void>;\n\tonCancel: () => void;\n}\n\nconst { card, onSubmit, onCancel }: Props = $props();\n\n// Local state using Svelte 5 runes\nlet title = $state(\"\");\nlet topic = $state(\"\");\nlet project = $state(\"\");\nlet creatingProject = $state(false);\nlet prompt = $state(\"\");\nlet status = $state(\"\");\nlet isSubmitting = $state(false);\n\n$effect(() => {\n\ttitle = card.title;\n\ttopic = card.topic || \"\";\n\tproject = card.project || \"\";\n\tprompt = card.prompt;\n\tcreatingProject = false;\n});\n\n// Derived validation state\nconst titleError = $derived.by(() => {\n\tconst trimmed = title.trim();\n\tif (trimmed.length === 0) return \"Title is required\";\n\tif (trimmed.length < 3) return \"Title must be at least 3 characters\";\n\tif (trimmed.length > 100) return \"Title must be less than 100 characters\";\n\treturn \"\";\n});\n\nconst promptError = $derived.by(() => {\n\tconst trimmed = prompt.trim();\n\tif (trimmed.length === 0) return \"Prompt is required\";\n\tif (trimmed.length < 10) return \"Prompt must be at least 10 characters\";\n\tif (trimmed.length > 8000) return \"Prompt must be less than 8000 characters\";\n\treturn \"\";\n});\n\nconst projectError = $derived.by(() => {\n\tif (creatingProject) {\n\t\tconst trimmed = project.trim();\n\t\tif (trimmed.length === 0) return \"Project name is required\";\n\t\tif (trimmed.length < 2) return \"Project name must be at least 2 characters\";\n\t\tif (trimmed.length > 50)\n\t\t\treturn \"Project name must be less than 50 characters\";\n\t\tif (\n\t\t\tprojectManager.all.some(\n\t\t\t\t(p) => p.name.toLowerCase() === trimmed.toLowerCase(),\n\t\t\t)\n\t\t) {\n\t\t\treturn \"A project with this name already exists\";\n\t\t}\n\t}\n\treturn \"\";\n});\n\nconst isValid = $derived.by(() => {\n\treturn (\n\t\ttitle.trim().length > 0 &&\n\t\tprompt.trim().length > 0 &&\n\t\t!titleError &&\n\t\t!promptError &&\n\t\t!projectError\n\t);\n});\n\nlet formElement: HTMLElement | null = null;\nlet firstFocusableElement: HTMLElement | null = null;\nlet lastFocusableElement: HTMLElement | null = null;\n\n// Focus trap effect\n$effect(() => {\n\t// Set initial focus to title input\n\tconst titleInput = document.getElementById(\"edit-title\") as HTMLInputElement;\n\tif (titleInput) {\n\t\tsetTimeout(() => titleInput.focus(), 0);\n\t}\n\n\t// Get all focusable elements within the form\n\tconst updateFocusableElements = () => {\n\t\tif (!formElement) return;\n\n\t\tconst focusableSelectors =\n\t\t\t'input:not([disabled]), textarea:not([disabled]), button:not([disabled]), select:not([disabled]), [tabindex]:not([tabindex=\"-1\"])';\n\t\tconst focusableElements = formElement.querySelectorAll(focusableSelectors);\n\n\t\tif (focusableElements.length > 0) {\n\t\t\tfirstFocusableElement = focusableElements[0] as HTMLElement;\n\t\t\tlastFocusableElement = focusableElements[\n\t\t\t\tfocusableElements.length - 1\n\t\t\t] as HTMLElement;\n\t\t}\n\t};\n\n\tupdateFocusableElements();\n\n\tconst handleTabKey = (e: KeyboardEvent) => {\n\t\tif (e.key !== \"Tab\") return;\n\n\t\tupdateFocusableElements();\n\n\t\tif (e.shiftKey) {\n\t\t\tif (document.activeElement === firstFocusableElement) {\n\t\t\t\te.preventDefault();\n\t\t\t\tlastFocusableElement?.focus();\n\t\t\t}\n\t\t} else {\n\t\t\tif (document.activeElement === lastFocusableElement) {\n\t\t\t\te.preventDefault();\n\t\t\t\tfirstFocusableElement?.focus();\n\t\t\t}\n\t\t}\n\t};\n\n\tconst handleGlobalKeydown = (e: KeyboardEvent) => {\n\t\tif (e.key === \"Escape\") {\n\t\t\tonCancel();\n\t\t}\n\t};\n\n\tformElement?.addEventListener(\"keydown\", handleTabKey);\n\twindow.addEventListener(\"keydown\", handleGlobalKeydown);\n\n\treturn () => {\n\t\tformElement?.removeEventListener(\"keydown\", handleTabKey);\n\t\twindow.removeEventListener(\"keydown\", handleGlobalKeydown);\n\t};\n});\n\nasync function _handleSubmit(e: SubmitEvent) {\n\te.preventDefault();\n\n\tif (!isValid || isSubmitting) return;\n\n\tisSubmitting = true;\n\tstatus = \"\";\n\n\ttry {\n\t\tawait onSubmit({\n\t\t\tid: card.id,\n\t\t\ttitle: title.trim(),\n\t\t\tprompt: prompt.trim(),\n\t\t\ttopic: topic.trim() || undefined,\n\t\t\tproject: creatingProject\n\t\t\t\t? project.trim() || undefined\n\t\t\t\t: project || undefined,\n\t\t});\n\n\t\tannounceToSR(`Card \"${title}\" updated successfully`);\n\t} catch (err) {\n\t\tstatus = err instanceof Error ? err.message : \"Failed to update card\";\n\t\tannounceToSR(status);\n\t} finally {\n\t\tisSubmitting = false;\n\t}\n}\n\nfunction _handleProjectChange(e: Event) {\n\tconst select = e.target as HTMLSelectElement;\n\tif (select.value === \"__create__\") {\n\t\tcreatingProject = true;\n\t\tproject = \"\";\n\t} else {\n\t\tcreatingProject = false;\n\t\tproject = select.value;\n\t}\n}\n\nfunction announceToSR(message: string) {\n\tconst announcer = document.getElementById(\"sr-announcements\");\n\tif (announcer) {\n\t\tannouncer.textContent = message;\n\t}\n}\n</script>\n\n<section id=\"edit-section\" bind:this={formElement}>\n\t<form onsubmit={_handleSubmit} aria-labelledby=\"edit-heading\">\n\t\t<h2 id=\"edit-heading\">Edit learning item</h2>\n\n\t\t{#if status}\n\t\t\t<div role=\"status\" class=\"form-status\">{status}</div>\n\t\t{/if}\n\n\t\t<div class=\"field\">\n\t\t\t<label for=\"edit-title\">\n\t\t\t\tTitle <span class=\"required\">*</span>\n\t\t\t</label>\n\t\t\t<input\n\t\t\t\tid=\"edit-title\"\n\t\t\t\tbind:value={title}\n\t\t\t\ttype=\"text\"\n\t\t\t\tautocomplete=\"off\"\n\t\t\t\trequired\n\t\t\t\tdisabled={isSubmitting}\n\t\t\t\tclass:error={titleError}\n\t\t\t/>\n\t\t\t{#if titleError}\n\t\t\t\t<span class=\"error-message\">{titleError}</span>\n\t\t\t{:else}\n\t\t\t\t<span class=\"hint\">Choose a short title you'll recognize later.</span>\n\t\t\t{/if}\n\t\t</div>\n\n\t\t<div class=\"field\">\n\t\t\t<label for=\"edit-topic\">\n\t\t\t\tTopic <span class=\"optional\">(optional)</span>\n\t\t\t</label>\n\t\t\t<input\n\t\t\t\tid=\"edit-topic\"\n\t\t\t\tbind:value={topic}\n\t\t\t\ttype=\"text\"\n\t\t\t\tautocomplete=\"off\"\n\t\t\t\tdisabled={isSubmitting}\n\t\t\t/>\n\t\t\t<span class=\"hint\">e.g., JavaScript, Design Patterns, Math</span>\n\t\t</div>\n\n\t\t<div class=\"field\">\n\t\t\t<label for=\"edit-project-select\">Project <span class=\"optional\">(optional)</span></label>\n\t\t\t<select\n\t\t\t\tid=\"edit-project-select\"\n\t\t\t\tbind:value={project}\n\t\t\t\tonchange={_handleProjectChange}\n\t\t\t\tdisabled={isSubmitting}\n\t\t\t\taria-describedby=\"edit-project-hint\"\n\t\t\t>\n\t\t\t\t<option value=\"\">Select a project</option>\n\t\t\t\t{#each projectManager.all as p (p.id)}\n\t\t\t\t\t<option value={p.id}>{p.name}</option>\n\t\t\t\t{/each}\n\t\t\t\t<option value=\"__create__\">+ Create new project...</option>\n\t\t\t</select>\n\t\t\t<span id=\"edit-project-hint\" class=\"hint\">Attach to an existing project or make a new one.</span>\n\t\t</div>\n\n\t\t{#if creatingProject}\n\t\t\t<div class=\"field\">\n\t\t\t\t<label for=\"edit-project\">New project name <span class=\"required\">*</span></label>\n\t\t\t\t<input\n\t\t\t\t\tid=\"edit-project\"\n\t\t\t\t\tbind:value={project}\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tautocomplete=\"off\"\n\t\t\t\t\tdisabled={isSubmitting}\n\t\t\t\t\tclass:error={projectError}\n\t\t\t\t/>\n\t\t\t\t{#if projectError}\n\t\t\t\t\t<span class=\"error-message\">{projectError}</span>\n\t\t\t\t{:else}\n\t\t\t\t\t<span class=\"hint\">Keep it concise and unique.</span>\n\t\t\t\t{/if}\n\t\t\t</div>\n\t\t{/if}\n\n\t\t<div class=\"field\">\n\t\t\t<label for=\"edit-prompt\">\n\t\t\t\tLearning prompt <span class=\"required\">*</span>\n\t\t\t</label>\n\t\t\t<textarea\n\t\t\t\tid=\"edit-prompt\"\n\t\t\t\tbind:value={prompt}\n\t\t\t\trequired\n\t\t\t\tdisabled={isSubmitting}\n\t\t\t\tplaceholder=\"e.g. Explain the concept of closures in JavaScript\"\n\t\t\t\tclass:error={promptError}\n\t\t\t></textarea>\n\t\t\t{#if promptError}\n\t\t\t\t<span class=\"error-message\">{promptError}</span>\n\t\t\t{:else}\n\t\t\t\t<span class=\"hint\">Describe what you want to learn so the AI can help.</span>\n\t\t\t{/if}\n\t\t</div>\n\n\t\t<div class=\"form-actions\">\n\t\t\t<button type=\"submit\" class=\"primary\" disabled={!isValid || isSubmitting}>\n\t\t\t\t{isSubmitting ? 'Saving...' : 'Save changes'}\n\t\t\t</button>\n\t\t\t<button type=\"button\" class=\"ghost\" onclick={onCancel} disabled={isSubmitting}>\n\t\t\t\tCancel\n\t\t\t</button>\n\t\t</div>\n\t</form>\n</section>\n"
			},
			"tags": ["fixable"],
			"source": null
		},
		{
			"category": "lint/style/useConst",
			"severity": "warning",
			"description": "This let declares a variable that is only assigned once.",
			"message": [
				{ "elements": [], "content": "This " },
				{ "elements": ["Emphasis"], "content": "let" },
				{
					"elements": [],
					"content": " declares a variable that is only assigned once."
				}
			],
			"advices": {
				"advices": [
					{
						"log": [
							"info",
							[
								{
									"elements": [],
									"content": "'formElement' is never reassigned."
								}
							]
						]
					},
					{
						"frame": {
							"path": null,
							"span": [1282, 1293],
							"sourceCode": "<script lang=\"ts\">\n/* global HTMLElement setTimeout */\nimport type { Project } from \"../../types\";\n\ninterface Props {\n\tproject: Project;\n\tonSubmit: (data: {\n\t\tid: string;\n\t\tname: string;\n\t\tsystemPrompt?: string;\n\t}) => Promise<void>;\n\tonCancel: () => void;\n}\n\nconst { project, onSubmit, onCancel }: Props = $props();\n\nlet formData = $state({\n\tname: \"\",\n\tsystemPrompt: \"\",\n});\n\nconst fieldErrors = $state({\n\tname: \"\",\n\tsystemPrompt: \"\",\n});\n\nlet submissionError = $state(\"\");\nlet isSubmitting = $state(false);\n\n$effect(() => {\n\tformData = {\n\t\tname: project.name,\n\t\tsystemPrompt: project.systemPrompt || \"\",\n\t};\n});\n\n// Validate on input\n$effect(() => {\n\tconst trimmedName = formData.name.trim();\n\tif (trimmedName.length === 0) {\n\t\tfieldErrors.name = \"Project name is required\";\n\t} else if (trimmedName.length > 50) {\n\t\tfieldErrors.name = \"Project name must be less than 50 characters\";\n\t} else {\n\t\tfieldErrors.name = \"\";\n\t}\n});\n\n$effect(() => {\n\tconst trimmedSystemPrompt = formData.systemPrompt.trim();\n\tif (trimmedSystemPrompt.length > 8000) {\n\t\tfieldErrors.systemPrompt =\n\t\t\t\"System prompt must be less than 8000 characters\";\n\t} else {\n\t\tfieldErrors.systemPrompt = \"\";\n\t}\n});\n\nconst isValid = $derived(\n\t!fieldErrors.name &&\n\t\t!fieldErrors.systemPrompt &&\n\t\tformData.name.trim().length > 0,\n);\n\nlet formElement: HTMLElement | null = null;\n\n$effect(() => {\n\tconst nameInput = document.getElementById(\n\t\t\"edit-project-name\",\n\t) as HTMLInputElement;\n\tif (nameInput) {\n\t\tsetTimeout(() => nameInput.focus(), 0);\n\t}\n\n\tconst handleGlobalKeydown = (e: KeyboardEvent) => {\n\t\tif (e.key === \"Escape\") {\n\t\t\tonCancel();\n\t\t}\n\t};\n\n\twindow.addEventListener(\"keydown\", handleGlobalKeydown);\n\n\treturn () => {\n\t\twindow.removeEventListener(\"keydown\", handleGlobalKeydown);\n\t};\n});\n\nasync function handleSubmit(e: SubmitEvent) {\n\te.preventDefault();\n\n\tif (!isValid || isSubmitting) return;\n\n\tisSubmitting = true;\n\tsubmissionError = \"\";\n\n\ttry {\n\t\tconst trimmedSystemPrompt = formData.systemPrompt.trim();\n\t\tawait onSubmit({\n\t\t\tid: project.id,\n\t\t\tname: formData.name.trim(),\n\t\t\tsystemPrompt: trimmedSystemPrompt || undefined,\n\t\t});\n\n\t\tannounceToSR(`Project \"${formData.name}\" updated successfully`);\n\t} catch (err) {\n\t\tsubmissionError =\n\t\t\terr instanceof Error ? err.message : \"Failed to update project\";\n\t\tannounceToSR(submissionError);\n\t} finally {\n\t\tisSubmitting = false;\n\t}\n}\n\nfunction announceToSR(message: string) {\n\tconst announcer = document.getElementById(\"sr-announcements\");\n\tif (announcer) {\n\t\tannouncer.textContent = message;\n\t}\n}\n</script>\n\n<section id=\"edit-project-section\" bind:this={formElement}>\n\t<form onsubmit={handleSubmit} aria-labelledby=\"edit-project-heading\">\n\t\t<h2 id=\"edit-project-heading\">Edit Project</h2>\n\n\t\t{#if submissionError}\n\t\t\t<div role=\"alert\" class=\"form-status error\">{submissionError}</div>\n\t\t{/if}\n\n\t\t<div class=\"field\">\n\t\t\t<label for=\"edit-project-name\">\n\t\t\t\tProject name <span class=\"required\">*</span>\n\t\t\t</label>\n\t\t\t<input\n\t\t\t\tid=\"edit-project-name\"\n\t\t\t\tbind:value={formData.name}\n\t\t\t\ttype=\"text\"\n\t\t\t\tautocomplete=\"off\"\n\t\t\t\trequired\n\t\t\t\tdisabled={isSubmitting}\n\t\t\t\tclass:error={fieldErrors.name}\n\t\t\t/>\n\t\t\t{#if fieldErrors.name}\n\t\t\t\t<span class=\"error-message\">{fieldErrors.name}</span>\n\t\t\t{:else}\n\t\t\t\t<span class=\"hint\">Pick a clear name so you can find this project fast.</span>\n\t\t\t{/if}\n\t\t</div>\n\n\t\t<div class=\"field\">\n\t\t\t<label for=\"edit-project-system-prompt\">\n\t\t\t\tSystem prompt <span class=\"optional\">(optional)</span>\n\t\t\t</label>\n\t\t\t<textarea\n\t\t\t\tid=\"edit-project-system-prompt\"\n\t\t\t\tbind:value={formData.systemPrompt}\n\t\t\t\tdisabled={isSubmitting}\n\t\t\t\tplaceholder=\"Add context or constraints that should prefix every card prompt for this project.\"\n\t\t\t\tclass:error={fieldErrors.systemPrompt}\n\t\t\t\trows=\"6\"\n\t\t\t></textarea>\n\t\t\t{#if fieldErrors.systemPrompt}\n\t\t\t\t<span class=\"error-message\">{fieldErrors.systemPrompt}</span>\n\t\t\t{:else}\n\t\t\t\t<span class=\"hint\">\n\t\t\t\t\tThis text will auto-prepend to every card prompt in the projectgreat for tone, context, or guardrails. Max 500 characters.\n\t\t\t\t</span>\n\t\t\t{/if}\n\t\t</div>\n\n\t\t<div class=\"form-actions\">\n\t\t\t<button type=\"submit\" class=\"primary\" disabled={!isValid || isSubmitting}>\n\t\t\t\t{isSubmitting ? 'Saving...' : 'Save changes'}\n\t\t\t</button>\n\t\t\t<button type=\"button\" class=\"ghost\" onclick={onCancel} disabled={isSubmitting}>\n\t\t\t\tCancel\n\t\t\t</button>\n\t\t</div>\n\t</form>\n</section>\n"
						}
					},
					{
						"log": [
							"info",
							[
								{ "elements": [], "content": "Safe fix: Use " },
								{ "elements": ["Emphasis"], "content": "const" },
								{ "elements": [], "content": " instead." }
							]
						]
					},
					{
						"diff": {
							"dictionary": "/* global HTMLElement setTimeout */\nimport type { Project } from \"../../types\";\n\t\t!fieldErrors.systemPrompt &&\n\t\tformData.name.trim().length > 0,\n);\n\nletconst formElement: HTMLElement | null = null;\n\n$effect(() => {\t}\n}\n",
							"ops": [
								{ "diffOp": { "equal": { "range": [0, 80] } } },
								{ "equalLines": { "line_count": 56 } },
								{ "diffOp": { "equal": { "range": [80, 148] } } },
								{ "diffOp": { "equal": { "range": [148, 150] } } },
								{ "diffOp": { "delete": { "range": [150, 153] } } },
								{ "diffOp": { "insert": { "range": [153, 158] } } },
								{ "diffOp": { "equal": { "range": [158, 159] } } },
								{ "diffOp": { "equal": { "range": [159, 215] } } },
								{ "equalLines": { "line_count": 50 } },
								{ "diffOp": { "equal": { "range": [215, 220] } } }
							]
						}
					}
				]
			},
			"verboseAdvices": { "advices": [] },
			"location": {
				"path": { "file": "src\\lib\\components\\EditProjectForm.svelte" },
				"span": [1297, 1300],
				"sourceCode": "<script lang=\"ts\">\n/* global HTMLElement setTimeout */\nimport type { Project } from \"../../types\";\n\ninterface Props {\n\tproject: Project;\n\tonSubmit: (data: {\n\t\tid: string;\n\t\tname: string;\n\t\tsystemPrompt?: string;\n\t}) => Promise<void>;\n\tonCancel: () => void;\n}\n\nconst { project, onSubmit, onCancel }: Props = $props();\n\nlet formData = $state({\n\tname: \"\",\n\tsystemPrompt: \"\",\n});\n\nconst fieldErrors = $state({\n\tname: \"\",\n\tsystemPrompt: \"\",\n});\n\nlet submissionError = $state(\"\");\nlet isSubmitting = $state(false);\n\n$effect(() => {\n\tformData = {\n\t\tname: project.name,\n\t\tsystemPrompt: project.systemPrompt || \"\",\n\t};\n});\n\n// Validate on input\n$effect(() => {\n\tconst trimmedName = formData.name.trim();\n\tif (trimmedName.length === 0) {\n\t\tfieldErrors.name = \"Project name is required\";\n\t} else if (trimmedName.length > 50) {\n\t\tfieldErrors.name = \"Project name must be less than 50 characters\";\n\t} else {\n\t\tfieldErrors.name = \"\";\n\t}\n});\n\n$effect(() => {\n\tconst trimmedSystemPrompt = formData.systemPrompt.trim();\n\tif (trimmedSystemPrompt.length > 8000) {\n\t\tfieldErrors.systemPrompt =\n\t\t\t\"System prompt must be less than 8000 characters\";\n\t} else {\n\t\tfieldErrors.systemPrompt = \"\";\n\t}\n});\n\nconst isValid = $derived(\n\t!fieldErrors.name &&\n\t\t!fieldErrors.systemPrompt &&\n\t\tformData.name.trim().length > 0,\n);\n\nlet formElement: HTMLElement | null = null;\n\n$effect(() => {\n\tconst nameInput = document.getElementById(\n\t\t\"edit-project-name\",\n\t) as HTMLInputElement;\n\tif (nameInput) {\n\t\tsetTimeout(() => nameInput.focus(), 0);\n\t}\n\n\tconst handleGlobalKeydown = (e: KeyboardEvent) => {\n\t\tif (e.key === \"Escape\") {\n\t\t\tonCancel();\n\t\t}\n\t};\n\n\twindow.addEventListener(\"keydown\", handleGlobalKeydown);\n\n\treturn () => {\n\t\twindow.removeEventListener(\"keydown\", handleGlobalKeydown);\n\t};\n});\n\nasync function handleSubmit(e: SubmitEvent) {\n\te.preventDefault();\n\n\tif (!isValid || isSubmitting) return;\n\n\tisSubmitting = true;\n\tsubmissionError = \"\";\n\n\ttry {\n\t\tconst trimmedSystemPrompt = formData.systemPrompt.trim();\n\t\tawait onSubmit({\n\t\t\tid: project.id,\n\t\t\tname: formData.name.trim(),\n\t\t\tsystemPrompt: trimmedSystemPrompt || undefined,\n\t\t});\n\n\t\tannounceToSR(`Project \"${formData.name}\" updated successfully`);\n\t} catch (err) {\n\t\tsubmissionError =\n\t\t\terr instanceof Error ? err.message : \"Failed to update project\";\n\t\tannounceToSR(submissionError);\n\t} finally {\n\t\tisSubmitting = false;\n\t}\n}\n\nfunction announceToSR(message: string) {\n\tconst announcer = document.getElementById(\"sr-announcements\");\n\tif (announcer) {\n\t\tannouncer.textContent = message;\n\t}\n}\n</script>\n\n<section id=\"edit-project-section\" bind:this={formElement}>\n\t<form onsubmit={handleSubmit} aria-labelledby=\"edit-project-heading\">\n\t\t<h2 id=\"edit-project-heading\">Edit Project</h2>\n\n\t\t{#if submissionError}\n\t\t\t<div role=\"alert\" class=\"form-status error\">{submissionError}</div>\n\t\t{/if}\n\n\t\t<div class=\"field\">\n\t\t\t<label for=\"edit-project-name\">\n\t\t\t\tProject name <span class=\"required\">*</span>\n\t\t\t</label>\n\t\t\t<input\n\t\t\t\tid=\"edit-project-name\"\n\t\t\t\tbind:value={formData.name}\n\t\t\t\ttype=\"text\"\n\t\t\t\tautocomplete=\"off\"\n\t\t\t\trequired\n\t\t\t\tdisabled={isSubmitting}\n\t\t\t\tclass:error={fieldErrors.name}\n\t\t\t/>\n\t\t\t{#if fieldErrors.name}\n\t\t\t\t<span class=\"error-message\">{fieldErrors.name}</span>\n\t\t\t{:else}\n\t\t\t\t<span class=\"hint\">Pick a clear name so you can find this project fast.</span>\n\t\t\t{/if}\n\t\t</div>\n\n\t\t<div class=\"field\">\n\t\t\t<label for=\"edit-project-system-prompt\">\n\t\t\t\tSystem prompt <span class=\"optional\">(optional)</span>\n\t\t\t</label>\n\t\t\t<textarea\n\t\t\t\tid=\"edit-project-system-prompt\"\n\t\t\t\tbind:value={formData.systemPrompt}\n\t\t\t\tdisabled={isSubmitting}\n\t\t\t\tplaceholder=\"Add context or constraints that should prefix every card prompt for this project.\"\n\t\t\t\tclass:error={fieldErrors.systemPrompt}\n\t\t\t\trows=\"6\"\n\t\t\t></textarea>\n\t\t\t{#if fieldErrors.systemPrompt}\n\t\t\t\t<span class=\"error-message\">{fieldErrors.systemPrompt}</span>\n\t\t\t{:else}\n\t\t\t\t<span class=\"hint\">\n\t\t\t\t\tThis text will auto-prepend to every card prompt in the projectgreat for tone, context, or guardrails. Max 500 characters.\n\t\t\t\t</span>\n\t\t\t{/if}\n\t\t</div>\n\n\t\t<div class=\"form-actions\">\n\t\t\t<button type=\"submit\" class=\"primary\" disabled={!isValid || isSubmitting}>\n\t\t\t\t{isSubmitting ? 'Saving...' : 'Save changes'}\n\t\t\t</button>\n\t\t\t<button type=\"button\" class=\"ghost\" onclick={onCancel} disabled={isSubmitting}>\n\t\t\t\tCancel\n\t\t\t</button>\n\t\t</div>\n\t</form>\n</section>\n"
			},
			"tags": ["fixable"],
			"source": null
		},
		{
			"category": "lint/correctness/noUnusedVariables",
			"severity": "warning",
			"description": "This variable formElement is unused.",
			"message": [
				{ "elements": [], "content": "This variable " },
				{ "elements": ["Emphasis"], "content": "formElement" },
				{ "elements": [], "content": " is unused." }
			],
			"advices": {
				"advices": [
					{
						"log": [
							"info",
							[
								{
									"elements": [],
									"content": "Unused variables are often the result of typos, incomplete refactors, or other sources of bugs."
								}
							]
						]
					},
					{
						"log": [
							"info",
							[
								{
									"elements": [],
									"content": "Unsafe fix: If this is intentional, prepend "
								},
								{ "elements": ["Emphasis"], "content": "formElement" },
								{ "elements": [], "content": " with an underscore." }
							]
						]
					},
					{
						"diff": {
							"dictionary": "/* global HTMLElement setTimeout */\nimport type { Project } from \"../../types\";\n);\n\nlet formElement_formElement: HTMLElement | null = null;\n\n$effect(() => {\t}\n}\n",
							"ops": [
								{ "diffOp": { "equal": { "range": [0, 80] } } },
								{ "equalLines": { "line_count": 58 } },
								{ "diffOp": { "equal": { "range": [80, 88] } } },
								{ "diffOp": { "delete": { "range": [88, 99] } } },
								{ "diffOp": { "insert": { "range": [99, 111] } } },
								{ "diffOp": { "equal": { "range": [111, 156] } } },
								{ "equalLines": { "line_count": 50 } },
								{ "diffOp": { "equal": { "range": [156, 161] } } }
							]
						}
					}
				]
			},
			"verboseAdvices": { "advices": [] },
			"location": {
				"path": { "file": "src\\lib\\components\\EditProjectForm.svelte" },
				"span": [1301, 1312],
				"sourceCode": "<script lang=\"ts\">\n/* global HTMLElement setTimeout */\nimport type { Project } from \"../../types\";\n\ninterface Props {\n\tproject: Project;\n\tonSubmit: (data: {\n\t\tid: string;\n\t\tname: string;\n\t\tsystemPrompt?: string;\n\t}) => Promise<void>;\n\tonCancel: () => void;\n}\n\nconst { project, onSubmit, onCancel }: Props = $props();\n\nlet formData = $state({\n\tname: \"\",\n\tsystemPrompt: \"\",\n});\n\nconst fieldErrors = $state({\n\tname: \"\",\n\tsystemPrompt: \"\",\n});\n\nlet submissionError = $state(\"\");\nlet isSubmitting = $state(false);\n\n$effect(() => {\n\tformData = {\n\t\tname: project.name,\n\t\tsystemPrompt: project.systemPrompt || \"\",\n\t};\n});\n\n// Validate on input\n$effect(() => {\n\tconst trimmedName = formData.name.trim();\n\tif (trimmedName.length === 0) {\n\t\tfieldErrors.name = \"Project name is required\";\n\t} else if (trimmedName.length > 50) {\n\t\tfieldErrors.name = \"Project name must be less than 50 characters\";\n\t} else {\n\t\tfieldErrors.name = \"\";\n\t}\n});\n\n$effect(() => {\n\tconst trimmedSystemPrompt = formData.systemPrompt.trim();\n\tif (trimmedSystemPrompt.length > 8000) {\n\t\tfieldErrors.systemPrompt =\n\t\t\t\"System prompt must be less than 8000 characters\";\n\t} else {\n\t\tfieldErrors.systemPrompt = \"\";\n\t}\n});\n\nconst isValid = $derived(\n\t!fieldErrors.name &&\n\t\t!fieldErrors.systemPrompt &&\n\t\tformData.name.trim().length > 0,\n);\n\nlet formElement: HTMLElement | null = null;\n\n$effect(() => {\n\tconst nameInput = document.getElementById(\n\t\t\"edit-project-name\",\n\t) as HTMLInputElement;\n\tif (nameInput) {\n\t\tsetTimeout(() => nameInput.focus(), 0);\n\t}\n\n\tconst handleGlobalKeydown = (e: KeyboardEvent) => {\n\t\tif (e.key === \"Escape\") {\n\t\t\tonCancel();\n\t\t}\n\t};\n\n\twindow.addEventListener(\"keydown\", handleGlobalKeydown);\n\n\treturn () => {\n\t\twindow.removeEventListener(\"keydown\", handleGlobalKeydown);\n\t};\n});\n\nasync function handleSubmit(e: SubmitEvent) {\n\te.preventDefault();\n\n\tif (!isValid || isSubmitting) return;\n\n\tisSubmitting = true;\n\tsubmissionError = \"\";\n\n\ttry {\n\t\tconst trimmedSystemPrompt = formData.systemPrompt.trim();\n\t\tawait onSubmit({\n\t\t\tid: project.id,\n\t\t\tname: formData.name.trim(),\n\t\t\tsystemPrompt: trimmedSystemPrompt || undefined,\n\t\t});\n\n\t\tannounceToSR(`Project \"${formData.name}\" updated successfully`);\n\t} catch (err) {\n\t\tsubmissionError =\n\t\t\terr instanceof Error ? err.message : \"Failed to update project\";\n\t\tannounceToSR(submissionError);\n\t} finally {\n\t\tisSubmitting = false;\n\t}\n}\n\nfunction announceToSR(message: string) {\n\tconst announcer = document.getElementById(\"sr-announcements\");\n\tif (announcer) {\n\t\tannouncer.textContent = message;\n\t}\n}\n</script>\n\n<section id=\"edit-project-section\" bind:this={formElement}>\n\t<form onsubmit={handleSubmit} aria-labelledby=\"edit-project-heading\">\n\t\t<h2 id=\"edit-project-heading\">Edit Project</h2>\n\n\t\t{#if submissionError}\n\t\t\t<div role=\"alert\" class=\"form-status error\">{submissionError}</div>\n\t\t{/if}\n\n\t\t<div class=\"field\">\n\t\t\t<label for=\"edit-project-name\">\n\t\t\t\tProject name <span class=\"required\">*</span>\n\t\t\t</label>\n\t\t\t<input\n\t\t\t\tid=\"edit-project-name\"\n\t\t\t\tbind:value={formData.name}\n\t\t\t\ttype=\"text\"\n\t\t\t\tautocomplete=\"off\"\n\t\t\t\trequired\n\t\t\t\tdisabled={isSubmitting}\n\t\t\t\tclass:error={fieldErrors.name}\n\t\t\t/>\n\t\t\t{#if fieldErrors.name}\n\t\t\t\t<span class=\"error-message\">{fieldErrors.name}</span>\n\t\t\t{:else}\n\t\t\t\t<span class=\"hint\">Pick a clear name so you can find this project fast.</span>\n\t\t\t{/if}\n\t\t</div>\n\n\t\t<div class=\"field\">\n\t\t\t<label for=\"edit-project-system-prompt\">\n\t\t\t\tSystem prompt <span class=\"optional\">(optional)</span>\n\t\t\t</label>\n\t\t\t<textarea\n\t\t\t\tid=\"edit-project-system-prompt\"\n\t\t\t\tbind:value={formData.systemPrompt}\n\t\t\t\tdisabled={isSubmitting}\n\t\t\t\tplaceholder=\"Add context or constraints that should prefix every card prompt for this project.\"\n\t\t\t\tclass:error={fieldErrors.systemPrompt}\n\t\t\t\trows=\"6\"\n\t\t\t></textarea>\n\t\t\t{#if fieldErrors.systemPrompt}\n\t\t\t\t<span class=\"error-message\">{fieldErrors.systemPrompt}</span>\n\t\t\t{:else}\n\t\t\t\t<span class=\"hint\">\n\t\t\t\t\tThis text will auto-prepend to every card prompt in the projectgreat for tone, context, or guardrails. Max 500 characters.\n\t\t\t\t</span>\n\t\t\t{/if}\n\t\t</div>\n\n\t\t<div class=\"form-actions\">\n\t\t\t<button type=\"submit\" class=\"primary\" disabled={!isValid || isSubmitting}>\n\t\t\t\t{isSubmitting ? 'Saving...' : 'Save changes'}\n\t\t\t</button>\n\t\t\t<button type=\"button\" class=\"ghost\" onclick={onCancel} disabled={isSubmitting}>\n\t\t\t\tCancel\n\t\t\t</button>\n\t\t</div>\n\t</form>\n</section>\n"
			},
			"tags": ["fixable"],
			"source": null
		},
		{
			"category": "lint/correctness/noUnusedVariables",
			"severity": "warning",
			"description": "This function handleSubmit is unused.",
			"message": [
				{ "elements": [], "content": "This function " },
				{ "elements": ["Emphasis"], "content": "handleSubmit" },
				{ "elements": [], "content": " is unused." }
			],
			"advices": {
				"advices": [
					{
						"log": [
							"info",
							[
								{
									"elements": [],
									"content": "Unused variables are often the result of typos, incomplete refactors, or other sources of bugs."
								}
							]
						]
					},
					{
						"log": [
							"info",
							[
								{
									"elements": [],
									"content": "Unsafe fix: If this is intentional, prepend "
								},
								{ "elements": ["Emphasis"], "content": "handleSubmit" },
								{ "elements": [], "content": " with an underscore." }
							]
						]
					},
					{
						"diff": {
							"dictionary": "/* global HTMLElement setTimeout */\nimport type { Project } from \"../../types\";\n});\n\nasync function handleSubmit_handleSubmit(e: SubmitEvent) {\n\te.preventDefault();\n\t}\n}\n",
							"ops": [
								{ "diffOp": { "equal": { "range": [0, 80] } } },
								{ "equalLines": { "line_count": 81 } },
								{ "diffOp": { "equal": { "range": [80, 100] } } },
								{ "diffOp": { "delete": { "range": [100, 112] } } },
								{ "diffOp": { "insert": { "range": [112, 125] } } },
								{ "diffOp": { "equal": { "range": [125, 165] } } },
								{ "equalLines": { "line_count": 27 } },
								{ "diffOp": { "equal": { "range": [165, 170] } } }
							]
						}
					}
				]
			},
			"verboseAdvices": { "advices": [] },
			"location": {
				"path": { "file": "src\\lib\\components\\EditProjectForm.svelte" },
				"span": [1779, 1791],
				"sourceCode": "<script lang=\"ts\">\n/* global HTMLElement setTimeout */\nimport type { Project } from \"../../types\";\n\ninterface Props {\n\tproject: Project;\n\tonSubmit: (data: {\n\t\tid: string;\n\t\tname: string;\n\t\tsystemPrompt?: string;\n\t}) => Promise<void>;\n\tonCancel: () => void;\n}\n\nconst { project, onSubmit, onCancel }: Props = $props();\n\nlet formData = $state({\n\tname: \"\",\n\tsystemPrompt: \"\",\n});\n\nconst fieldErrors = $state({\n\tname: \"\",\n\tsystemPrompt: \"\",\n});\n\nlet submissionError = $state(\"\");\nlet isSubmitting = $state(false);\n\n$effect(() => {\n\tformData = {\n\t\tname: project.name,\n\t\tsystemPrompt: project.systemPrompt || \"\",\n\t};\n});\n\n// Validate on input\n$effect(() => {\n\tconst trimmedName = formData.name.trim();\n\tif (trimmedName.length === 0) {\n\t\tfieldErrors.name = \"Project name is required\";\n\t} else if (trimmedName.length > 50) {\n\t\tfieldErrors.name = \"Project name must be less than 50 characters\";\n\t} else {\n\t\tfieldErrors.name = \"\";\n\t}\n});\n\n$effect(() => {\n\tconst trimmedSystemPrompt = formData.systemPrompt.trim();\n\tif (trimmedSystemPrompt.length > 8000) {\n\t\tfieldErrors.systemPrompt =\n\t\t\t\"System prompt must be less than 8000 characters\";\n\t} else {\n\t\tfieldErrors.systemPrompt = \"\";\n\t}\n});\n\nconst isValid = $derived(\n\t!fieldErrors.name &&\n\t\t!fieldErrors.systemPrompt &&\n\t\tformData.name.trim().length > 0,\n);\n\nlet formElement: HTMLElement | null = null;\n\n$effect(() => {\n\tconst nameInput = document.getElementById(\n\t\t\"edit-project-name\",\n\t) as HTMLInputElement;\n\tif (nameInput) {\n\t\tsetTimeout(() => nameInput.focus(), 0);\n\t}\n\n\tconst handleGlobalKeydown = (e: KeyboardEvent) => {\n\t\tif (e.key === \"Escape\") {\n\t\t\tonCancel();\n\t\t}\n\t};\n\n\twindow.addEventListener(\"keydown\", handleGlobalKeydown);\n\n\treturn () => {\n\t\twindow.removeEventListener(\"keydown\", handleGlobalKeydown);\n\t};\n});\n\nasync function handleSubmit(e: SubmitEvent) {\n\te.preventDefault();\n\n\tif (!isValid || isSubmitting) return;\n\n\tisSubmitting = true;\n\tsubmissionError = \"\";\n\n\ttry {\n\t\tconst trimmedSystemPrompt = formData.systemPrompt.trim();\n\t\tawait onSubmit({\n\t\t\tid: project.id,\n\t\t\tname: formData.name.trim(),\n\t\t\tsystemPrompt: trimmedSystemPrompt || undefined,\n\t\t});\n\n\t\tannounceToSR(`Project \"${formData.name}\" updated successfully`);\n\t} catch (err) {\n\t\tsubmissionError =\n\t\t\terr instanceof Error ? err.message : \"Failed to update project\";\n\t\tannounceToSR(submissionError);\n\t} finally {\n\t\tisSubmitting = false;\n\t}\n}\n\nfunction announceToSR(message: string) {\n\tconst announcer = document.getElementById(\"sr-announcements\");\n\tif (announcer) {\n\t\tannouncer.textContent = message;\n\t}\n}\n</script>\n\n<section id=\"edit-project-section\" bind:this={formElement}>\n\t<form onsubmit={handleSubmit} aria-labelledby=\"edit-project-heading\">\n\t\t<h2 id=\"edit-project-heading\">Edit Project</h2>\n\n\t\t{#if submissionError}\n\t\t\t<div role=\"alert\" class=\"form-status error\">{submissionError}</div>\n\t\t{/if}\n\n\t\t<div class=\"field\">\n\t\t\t<label for=\"edit-project-name\">\n\t\t\t\tProject name <span class=\"required\">*</span>\n\t\t\t</label>\n\t\t\t<input\n\t\t\t\tid=\"edit-project-name\"\n\t\t\t\tbind:value={formData.name}\n\t\t\t\ttype=\"text\"\n\t\t\t\tautocomplete=\"off\"\n\t\t\t\trequired\n\t\t\t\tdisabled={isSubmitting}\n\t\t\t\tclass:error={fieldErrors.name}\n\t\t\t/>\n\t\t\t{#if fieldErrors.name}\n\t\t\t\t<span class=\"error-message\">{fieldErrors.name}</span>\n\t\t\t{:else}\n\t\t\t\t<span class=\"hint\">Pick a clear name so you can find this project fast.</span>\n\t\t\t{/if}\n\t\t</div>\n\n\t\t<div class=\"field\">\n\t\t\t<label for=\"edit-project-system-prompt\">\n\t\t\t\tSystem prompt <span class=\"optional\">(optional)</span>\n\t\t\t</label>\n\t\t\t<textarea\n\t\t\t\tid=\"edit-project-system-prompt\"\n\t\t\t\tbind:value={formData.systemPrompt}\n\t\t\t\tdisabled={isSubmitting}\n\t\t\t\tplaceholder=\"Add context or constraints that should prefix every card prompt for this project.\"\n\t\t\t\tclass:error={fieldErrors.systemPrompt}\n\t\t\t\trows=\"6\"\n\t\t\t></textarea>\n\t\t\t{#if fieldErrors.systemPrompt}\n\t\t\t\t<span class=\"error-message\">{fieldErrors.systemPrompt}</span>\n\t\t\t{:else}\n\t\t\t\t<span class=\"hint\">\n\t\t\t\t\tThis text will auto-prepend to every card prompt in the projectgreat for tone, context, or guardrails. Max 500 characters.\n\t\t\t\t</span>\n\t\t\t{/if}\n\t\t</div>\n\n\t\t<div class=\"form-actions\">\n\t\t\t<button type=\"submit\" class=\"primary\" disabled={!isValid || isSubmitting}>\n\t\t\t\t{isSubmitting ? 'Saving...' : 'Save changes'}\n\t\t\t</button>\n\t\t\t<button type=\"button\" class=\"ghost\" onclick={onCancel} disabled={isSubmitting}>\n\t\t\t\tCancel\n\t\t\t</button>\n\t\t</div>\n\t</form>\n</section>\n"
			},
			"tags": ["fixable"],
			"source": null
		},
		{
			"category": "lint/style/useConst",
			"severity": "warning",
			"description": "This let declares a variable that is only assigned once.",
			"message": [
				{ "elements": [], "content": "This " },
				{ "elements": ["Emphasis"], "content": "let" },
				{
					"elements": [],
					"content": " declares a variable that is only assigned once."
				}
			],
			"advices": {
				"advices": [
					{
						"log": [
							"info",
							[
								{
									"elements": [],
									"content": "'containerRef' is never reassigned."
								}
							]
						]
					},
					{
						"frame": {
							"path": null,
							"span": [121, 133],
							"sourceCode": "<script lang=\"ts\">\nimport { onMount } from \"svelte\";\nimport { modalStore } from \"../stores/modalStore\";\nimport { tick } from \"svelte\";\n\nlet containerRef: HTMLElement | null = $state(null);\nlet focusableElements: HTMLElement[] = $state([] as HTMLElement[]);\n\n// read the raw stack and the derived current item\nconst _stack = modalStore; // store has subscribe (stack)\n\nconst _current = modalStore.current;\nconst _lastOpener = modalStore.lastOpener;\n\n// focus trap: when modal stack has any item, focus first actionable element in the top view\n$effect(() => {\n\tif ($_stack.length > 0) {\n\t\ttick().then(() => {\n\t\t\tconst root = containerRef;\n\t\t\tif (!root) return;\n\t\t\tconst selector =\n\t\t\t\t'a[href], button:not([disabled]):not([aria-hidden=\"true\"]), textarea:not([disabled]), input:not([disabled]), select:not([disabled]), [tabindex]:not([tabindex=\"-1\"])';\n\t\t\tfocusableElements = Array.from(\n\t\t\t\troot.querySelectorAll(selector),\n\t\t\t) as HTMLElement[];\n\t\t\t// focus first focusable inside the visible (top) pane\n\t\t\tconst top = root.querySelector(\".modal-pane.top\");\n\t\t\tif (top) {\n\t\t\t\tconst first = top.querySelector<HTMLElement>(selector);\n\t\t\t\tif (first) {\n\t\t\t\t\tfirst.focus();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (focusableElements.length > 0) {\n\t\t\t\tfocusableElements[0].focus();\n\t\t\t} else {\n\t\t\t\troot.focus();\n\t\t\t}\n\t\t});\n\t}\n});\n\n// when the stack becomes empty, return focus to the last opener element if available\n$effect(() => {\n\tif ($_stack.length === 0) {\n\t\tconst opener = $_lastOpener;\n\t\tif (opener && typeof opener.focus === \"function\") {\n\t\t\ttick().then(() => {\n\t\t\t\ttry {\n\t\t\t\t\topener.focus();\n\t\t\t\t} catch (_e) {\n\t\t\t\t\t// ignore\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n});\n\nfunction _handleKeydown(e: KeyboardEvent) {\n\tif (e.key === \"Escape\") {\n\t\tmodalStore.close();\n\t\treturn;\n\t}\n\n\tif (e.key === \"Tab\") {\n\t\t// trap focus inside the modal\n\t\tconst elems = focusableElements;\n\t\tif (!containerRef) return;\n\t\tif (elems.length === 0) {\n\t\t\te.preventDefault();\n\t\t\treturn;\n\t\t}\n\n\t\tconst active = document.activeElement as HTMLElement;\n\t\tlet idx = elems.indexOf(active);\n\t\tif (e.shiftKey) {\n\t\t\tidx = idx <= 0 ? elems.length - 1 : idx - 1;\n\t\t} else {\n\t\t\tidx = idx === -1 || idx >= elems.length - 1 ? 0 : idx + 1;\n\t\t}\n\t\telems[idx].focus();\n\t\te.preventDefault();\n\t}\n}\n\nonMount(() => {\n\t// nothing else; keydown is handled on the container\n});\n</script>\n\n{#if $_stack.length > 0}\n  <button\n    type=\"button\"\n    class=\"modal-backdrop\"\n    onclick={() => modalStore.close()}\n    aria-hidden=\"true\"\n  ></button>\n  <div\n    class=\"modal-root\"\n    tabindex=\"-1\"\n    bind:this={containerRef}\n    onkeydown={_handleKeydown}\n    role=\"dialog\"\n    aria-modal=\"true\"\n  >\n    {#each $_stack as item, idx}\n      <div class=\"modal-pane {idx === $_stack.length - 1 ? 'top' : 'hidden'}\" aria-hidden={idx === $_stack.length - 1 ? 'false' : 'true'}>\n        {#if item.component}\n          <item.component {...(item.props || {})} on:close={() => modalStore.close()} on:back={() => modalStore.pop()} />\n        {/if}\n      </div>\n    {/each}\n  </div>\n{/if}\n\n<style>\n  .modal-backdrop {\n    position: fixed;\n    inset: 0;\n    background: rgba(0,0,0,0.4);\n    z-index: 60;\n  }\n\n  .modal-root {\n    position: fixed;\n    inset: 0;\n    display:flex;\n    align-items:center;\n    justify-content:center;\n    z-index: 61;\n    outline: none;\n  }\n  .modal-pane.hidden { display: none; }\n  .modal-pane.top { display: block; }\n</style>\n"
						}
					},
					{
						"log": [
							"info",
							[
								{ "elements": [], "content": "Safe fix: Use " },
								{ "elements": ["Emphasis"], "content": "const" },
								{ "elements": [], "content": " instead." }
							]
						]
					},
					{
						"diff": {
							"dictionary": "import { onMount } from \"svelte\";\nimport { modalStore } from \"../stores/modalStore\";\nimport { tick } from \"svelte\";\n\nletconst containerRef: HTMLElement | null = $state(null);\nlet focusableElements: HTMLElement[] = $state([] as HTMLElement[]);\n\t// nothing else; keydown is handled on the container\n});\n",
							"ops": [
								{ "diffOp": { "equal": { "range": [0, 115] } } },
								{ "diffOp": { "equal": { "range": [115, 117] } } },
								{ "diffOp": { "delete": { "range": [117, 120] } } },
								{ "diffOp": { "insert": { "range": [120, 125] } } },
								{ "diffOp": { "equal": { "range": [125, 126] } } },
								{ "diffOp": { "equal": { "range": [126, 243] } } },
								{ "equalLines": { "line_count": 79 } },
								{ "diffOp": { "equal": { "range": [243, 301] } } }
							]
						}
					}
				]
			},
			"verboseAdvices": { "advices": [] },
			"location": {
				"path": { "file": "src\\lib\\components\\ModalContainer.svelte" },
				"span": [136, 139],
				"sourceCode": "<script lang=\"ts\">\nimport { onMount } from \"svelte\";\nimport { modalStore } from \"../stores/modalStore\";\nimport { tick } from \"svelte\";\n\nlet containerRef: HTMLElement | null = $state(null);\nlet focusableElements: HTMLElement[] = $state([] as HTMLElement[]);\n\n// read the raw stack and the derived current item\nconst _stack = modalStore; // store has subscribe (stack)\n\nconst _current = modalStore.current;\nconst _lastOpener = modalStore.lastOpener;\n\n// focus trap: when modal stack has any item, focus first actionable element in the top view\n$effect(() => {\n\tif ($_stack.length > 0) {\n\t\ttick().then(() => {\n\t\t\tconst root = containerRef;\n\t\t\tif (!root) return;\n\t\t\tconst selector =\n\t\t\t\t'a[href], button:not([disabled]):not([aria-hidden=\"true\"]), textarea:not([disabled]), input:not([disabled]), select:not([disabled]), [tabindex]:not([tabindex=\"-1\"])';\n\t\t\tfocusableElements = Array.from(\n\t\t\t\troot.querySelectorAll(selector),\n\t\t\t) as HTMLElement[];\n\t\t\t// focus first focusable inside the visible (top) pane\n\t\t\tconst top = root.querySelector(\".modal-pane.top\");\n\t\t\tif (top) {\n\t\t\t\tconst first = top.querySelector<HTMLElement>(selector);\n\t\t\t\tif (first) {\n\t\t\t\t\tfirst.focus();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (focusableElements.length > 0) {\n\t\t\t\tfocusableElements[0].focus();\n\t\t\t} else {\n\t\t\t\troot.focus();\n\t\t\t}\n\t\t});\n\t}\n});\n\n// when the stack becomes empty, return focus to the last opener element if available\n$effect(() => {\n\tif ($_stack.length === 0) {\n\t\tconst opener = $_lastOpener;\n\t\tif (opener && typeof opener.focus === \"function\") {\n\t\t\ttick().then(() => {\n\t\t\t\ttry {\n\t\t\t\t\topener.focus();\n\t\t\t\t} catch (_e) {\n\t\t\t\t\t// ignore\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n});\n\nfunction _handleKeydown(e: KeyboardEvent) {\n\tif (e.key === \"Escape\") {\n\t\tmodalStore.close();\n\t\treturn;\n\t}\n\n\tif (e.key === \"Tab\") {\n\t\t// trap focus inside the modal\n\t\tconst elems = focusableElements;\n\t\tif (!containerRef) return;\n\t\tif (elems.length === 0) {\n\t\t\te.preventDefault();\n\t\t\treturn;\n\t\t}\n\n\t\tconst active = document.activeElement as HTMLElement;\n\t\tlet idx = elems.indexOf(active);\n\t\tif (e.shiftKey) {\n\t\t\tidx = idx <= 0 ? elems.length - 1 : idx - 1;\n\t\t} else {\n\t\t\tidx = idx === -1 || idx >= elems.length - 1 ? 0 : idx + 1;\n\t\t}\n\t\telems[idx].focus();\n\t\te.preventDefault();\n\t}\n}\n\nonMount(() => {\n\t// nothing else; keydown is handled on the container\n});\n</script>\n\n{#if $_stack.length > 0}\n  <button\n    type=\"button\"\n    class=\"modal-backdrop\"\n    onclick={() => modalStore.close()}\n    aria-hidden=\"true\"\n  ></button>\n  <div\n    class=\"modal-root\"\n    tabindex=\"-1\"\n    bind:this={containerRef}\n    onkeydown={_handleKeydown}\n    role=\"dialog\"\n    aria-modal=\"true\"\n  >\n    {#each $_stack as item, idx}\n      <div class=\"modal-pane {idx === $_stack.length - 1 ? 'top' : 'hidden'}\" aria-hidden={idx === $_stack.length - 1 ? 'false' : 'true'}>\n        {#if item.component}\n          <item.component {...(item.props || {})} on:close={() => modalStore.close()} on:back={() => modalStore.pop()} />\n        {/if}\n      </div>\n    {/each}\n  </div>\n{/if}\n\n<style>\n  .modal-backdrop {\n    position: fixed;\n    inset: 0;\n    background: rgba(0,0,0,0.4);\n    z-index: 60;\n  }\n\n  .modal-root {\n    position: fixed;\n    inset: 0;\n    display:flex;\n    align-items:center;\n    justify-content:center;\n    z-index: 61;\n    outline: none;\n  }\n  .modal-pane.hidden { display: none; }\n  .modal-pane.top { display: block; }\n</style>\n"
			},
			"tags": ["fixable"],
			"source": null
		},
		{
			"category": "lint/style/useConst",
			"severity": "warning",
			"description": "This let declares a variable that is only assigned once.",
			"message": [
				{ "elements": [], "content": "This " },
				{ "elements": ["Emphasis"], "content": "let" },
				{
					"elements": [],
					"content": " declares a variable that is only assigned once."
				}
			],
			"advices": {
				"advices": [
					{
						"log": [
							"info",
							[
								{
									"elements": [],
									"content": "'detailsEl' is never reassigned."
								}
							]
						]
					},
					{
						"frame": {
							"path": null,
							"span": [153, 162],
							"sourceCode": "<script lang=\"ts\">\r\nimport { createEventDispatcher } from \"svelte\";\n\nconst dispatch = createEventDispatcher();\n\nconst { ariaLabel }: { ariaLabel?: string } = $props();\n\nlet detailsEl: HTMLDetailsElement | null = null;\nlet menuEl: HTMLDivElement | null = null;\n\nfunction _handleEdit() {\n\tdispatch(\"edit\");\n\tif (detailsEl) detailsEl.open = false;\n}\n\nfunction _handleDelete() {\n\tdispatch(\"delete\");\n\tif (detailsEl) detailsEl.open = false;\n}\n\n// when the disclosure opens, focus first actionable item\n$effect(() => {\n\tif (detailsEl?.open) {\n\t\trequestAnimationFrame(() => {\n\t\t\tconst first = menuEl?.querySelector<HTMLElement>(\"button\");\n\t\t\tfirst?.focus();\n\t\t});\n\t}\n});\n</script>\r\n\r\n<details class=\"more-menu\" bind:this={detailsEl}>\r\n  <summary\r\n    class=\"more-trigger\"\r\n    aria-label={ariaLabel}\r\n    \r\n    onkeydown={(e) => {\r\n      if (e.key === 'Enter' || e.key === ' ') {\r\n        e.preventDefault();\r\n        if (detailsEl) detailsEl.open = !detailsEl.open;\r\n      }\r\n    }}\r\n  >\r\n    <span aria-hidden=\"true\"></span>\r\n  </summary>\r\n\r\n    <div class=\"menu\" bind:this={menuEl} role=\"menu\">\r\n    <button type=\"button\" role=\"menuitem\" onclick={_handleEdit}>Edit</button>\r\n    <button type=\"button\" role=\"menuitem\" class=\"danger\" onclick={_handleDelete}>Delete</button>\r\n  </div>\r\n</details>\r\n\r\n<style>\r\n  .more-menu { position: relative; display: inline-block; }\r\n  .more-trigger {\r\n    background: transparent;\r\n    border: none;\r\n    padding: 0.25rem 0.5rem;\r\n    cursor: pointer;\r\n    font-size: 1.1rem;\r\n  }\r\n  .menu {\r\n    position: absolute;\r\n    right: 0;\r\n    top: calc(100% + 0.25rem);\r\n    background: var(--surface, #fff);\r\n    border: 1px solid rgba(0,0,0,0.08);\r\n    box-shadow: 0 6px 18px rgba(0,0,0,0.08);\r\n    border-radius: 6px;\r\n    padding: 0.25rem;\r\n    z-index: 20;\r\n    min-width: 9rem;\r\n    display: flex;\r\n    flex-direction: column;\r\n  }\r\n  .menu button {\r\n    text-align: left;\r\n    background: transparent;\r\n    border: none;\r\n    padding: 0.5rem 0.75rem;\r\n    cursor: pointer;\r\n    width: 100%;\r\n  }\r\n  .menu button:hover { background: rgba(0,0,0,0.03); }\r\n  .menu button:focus {\r\n    outline: 3px solid rgba(59,130,246,0.25);\r\n    outline-offset: 2px;\r\n    border-radius: 4px;\r\n  }\r\n  .menu .danger { color: #b91c1c; }\r\n  .menu .danger:hover { background: rgba(249, 250, 251, 1); color: #991b1b; }\r\n</style>\r\n"
						}
					},
					{
						"log": [
							"info",
							[
								{ "elements": [], "content": "Safe fix: Use " },
								{ "elements": ["Emphasis"], "content": "const" },
								{ "elements": [], "content": " instead." }
							]
						]
					},
					{
						"diff": {
							"dictionary": "import { createEventDispatcher } from \"svelte\";\n\nconst dispatch = createEventDispatcher();\n\nconst { ariaLabel }: { ariaLabel?: string } = $props();\n\nletconst detailsEl: HTMLDetailsElement | null = null;\nlet menuEl: HTMLDivElement | null = null;\n\t}\n});\n",
							"ops": [
								{ "diffOp": { "equal": { "range": [0, 147] } } },
								{ "diffOp": { "equal": { "range": [147, 149] } } },
								{ "diffOp": { "delete": { "range": [149, 152] } } },
								{ "diffOp": { "insert": { "range": [152, 157] } } },
								{ "diffOp": { "equal": { "range": [157, 158] } } },
								{ "diffOp": { "equal": { "range": [158, 245] } } },
								{ "equalLines": { "line_count": 17 } },
								{ "diffOp": { "equal": { "range": [245, 252] } } }
							]
						}
					}
				]
			},
			"verboseAdvices": { "advices": [] },
			"location": {
				"path": { "file": "src\\lib\\components\\MoreMenu.svelte" },
				"span": [169, 172],
				"sourceCode": "<script lang=\"ts\">\r\nimport { createEventDispatcher } from \"svelte\";\n\nconst dispatch = createEventDispatcher();\n\nconst { ariaLabel }: { ariaLabel?: string } = $props();\n\nlet detailsEl: HTMLDetailsElement | null = null;\nlet menuEl: HTMLDivElement | null = null;\n\nfunction _handleEdit() {\n\tdispatch(\"edit\");\n\tif (detailsEl) detailsEl.open = false;\n}\n\nfunction _handleDelete() {\n\tdispatch(\"delete\");\n\tif (detailsEl) detailsEl.open = false;\n}\n\n// when the disclosure opens, focus first actionable item\n$effect(() => {\n\tif (detailsEl?.open) {\n\t\trequestAnimationFrame(() => {\n\t\t\tconst first = menuEl?.querySelector<HTMLElement>(\"button\");\n\t\t\tfirst?.focus();\n\t\t});\n\t}\n});\n</script>\r\n\r\n<details class=\"more-menu\" bind:this={detailsEl}>\r\n  <summary\r\n    class=\"more-trigger\"\r\n    aria-label={ariaLabel}\r\n    \r\n    onkeydown={(e) => {\r\n      if (e.key === 'Enter' || e.key === ' ') {\r\n        e.preventDefault();\r\n        if (detailsEl) detailsEl.open = !detailsEl.open;\r\n      }\r\n    }}\r\n  >\r\n    <span aria-hidden=\"true\"></span>\r\n  </summary>\r\n\r\n    <div class=\"menu\" bind:this={menuEl} role=\"menu\">\r\n    <button type=\"button\" role=\"menuitem\" onclick={_handleEdit}>Edit</button>\r\n    <button type=\"button\" role=\"menuitem\" class=\"danger\" onclick={_handleDelete}>Delete</button>\r\n  </div>\r\n</details>\r\n\r\n<style>\r\n  .more-menu { position: relative; display: inline-block; }\r\n  .more-trigger {\r\n    background: transparent;\r\n    border: none;\r\n    padding: 0.25rem 0.5rem;\r\n    cursor: pointer;\r\n    font-size: 1.1rem;\r\n  }\r\n  .menu {\r\n    position: absolute;\r\n    right: 0;\r\n    top: calc(100% + 0.25rem);\r\n    background: var(--surface, #fff);\r\n    border: 1px solid rgba(0,0,0,0.08);\r\n    box-shadow: 0 6px 18px rgba(0,0,0,0.08);\r\n    border-radius: 6px;\r\n    padding: 0.25rem;\r\n    z-index: 20;\r\n    min-width: 9rem;\r\n    display: flex;\r\n    flex-direction: column;\r\n  }\r\n  .menu button {\r\n    text-align: left;\r\n    background: transparent;\r\n    border: none;\r\n    padding: 0.5rem 0.75rem;\r\n    cursor: pointer;\r\n    width: 100%;\r\n  }\r\n  .menu button:hover { background: rgba(0,0,0,0.03); }\r\n  .menu button:focus {\r\n    outline: 3px solid rgba(59,130,246,0.25);\r\n    outline-offset: 2px;\r\n    border-radius: 4px;\r\n  }\r\n  .menu .danger { color: #b91c1c; }\r\n  .menu .danger:hover { background: rgba(249, 250, 251, 1); color: #991b1b; }\r\n</style>\r\n"
			},
			"tags": ["fixable"],
			"source": null
		},
		{
			"category": "lint/style/useConst",
			"severity": "warning",
			"description": "This let declares a variable that is only assigned once.",
			"message": [
				{ "elements": [], "content": "This " },
				{ "elements": ["Emphasis"], "content": "let" },
				{
					"elements": [],
					"content": " declares a variable that is only assigned once."
				}
			],
			"advices": {
				"advices": [
					{
						"log": [
							"info",
							[{ "elements": [], "content": "'menuEl' is never reassigned." }]
						]
					},
					{
						"frame": {
							"path": null,
							"span": [202, 208],
							"sourceCode": "<script lang=\"ts\">\r\nimport { createEventDispatcher } from \"svelte\";\n\nconst dispatch = createEventDispatcher();\n\nconst { ariaLabel }: { ariaLabel?: string } = $props();\n\nlet detailsEl: HTMLDetailsElement | null = null;\nlet menuEl: HTMLDivElement | null = null;\n\nfunction _handleEdit() {\n\tdispatch(\"edit\");\n\tif (detailsEl) detailsEl.open = false;\n}\n\nfunction _handleDelete() {\n\tdispatch(\"delete\");\n\tif (detailsEl) detailsEl.open = false;\n}\n\n// when the disclosure opens, focus first actionable item\n$effect(() => {\n\tif (detailsEl?.open) {\n\t\trequestAnimationFrame(() => {\n\t\t\tconst first = menuEl?.querySelector<HTMLElement>(\"button\");\n\t\t\tfirst?.focus();\n\t\t});\n\t}\n});\n</script>\r\n\r\n<details class=\"more-menu\" bind:this={detailsEl}>\r\n  <summary\r\n    class=\"more-trigger\"\r\n    aria-label={ariaLabel}\r\n    \r\n    onkeydown={(e) => {\r\n      if (e.key === 'Enter' || e.key === ' ') {\r\n        e.preventDefault();\r\n        if (detailsEl) detailsEl.open = !detailsEl.open;\r\n      }\r\n    }}\r\n  >\r\n    <span aria-hidden=\"true\"></span>\r\n  </summary>\r\n\r\n    <div class=\"menu\" bind:this={menuEl} role=\"menu\">\r\n    <button type=\"button\" role=\"menuitem\" onclick={_handleEdit}>Edit</button>\r\n    <button type=\"button\" role=\"menuitem\" class=\"danger\" onclick={_handleDelete}>Delete</button>\r\n  </div>\r\n</details>\r\n\r\n<style>\r\n  .more-menu { position: relative; display: inline-block; }\r\n  .more-trigger {\r\n    background: transparent;\r\n    border: none;\r\n    padding: 0.25rem 0.5rem;\r\n    cursor: pointer;\r\n    font-size: 1.1rem;\r\n  }\r\n  .menu {\r\n    position: absolute;\r\n    right: 0;\r\n    top: calc(100% + 0.25rem);\r\n    background: var(--surface, #fff);\r\n    border: 1px solid rgba(0,0,0,0.08);\r\n    box-shadow: 0 6px 18px rgba(0,0,0,0.08);\r\n    border-radius: 6px;\r\n    padding: 0.25rem;\r\n    z-index: 20;\r\n    min-width: 9rem;\r\n    display: flex;\r\n    flex-direction: column;\r\n  }\r\n  .menu button {\r\n    text-align: left;\r\n    background: transparent;\r\n    border: none;\r\n    padding: 0.5rem 0.75rem;\r\n    cursor: pointer;\r\n    width: 100%;\r\n  }\r\n  .menu button:hover { background: rgba(0,0,0,0.03); }\r\n  .menu button:focus {\r\n    outline: 3px solid rgba(59,130,246,0.25);\r\n    outline-offset: 2px;\r\n    border-radius: 4px;\r\n  }\r\n  .menu .danger { color: #b91c1c; }\r\n  .menu .danger:hover { background: rgba(249, 250, 251, 1); color: #991b1b; }\r\n</style>\r\n"
						}
					},
					{
						"log": [
							"info",
							[
								{ "elements": [], "content": "Safe fix: Use " },
								{ "elements": ["Emphasis"], "content": "const" },
								{ "elements": [], "content": " instead." }
							]
						]
					},
					{
						"diff": {
							"dictionary": "import { createEventDispatcher } from \"svelte\";\n\nconst dispatch = createEventDispatcher();const { ariaLabel }: { ariaLabel?: string } = $props();\n\nlet detailsEl: HTMLDetailsElement | null = null;\nlet menuEl: HTMLDivElement | null = null;\n\nfunction _handleEdit() {\t}\n});\n",
							"ops": [
								{ "diffOp": { "equal": { "range": [0, 90] } } },
								{ "equalLines": { "line_count": 1 } },
								{ "diffOp": { "equal": { "range": [90, 195] } } },
								{ "diffOp": { "equal": { "range": [195, 196] } } },
								{ "diffOp": { "delete": { "range": [196, 199] } } },
								{ "diffOp": { "insert": { "range": [90, 95] } } },
								{ "diffOp": { "equal": { "range": [199, 200] } } },
								{ "diffOp": { "equal": { "range": [200, 263] } } },
								{ "equalLines": { "line_count": 16 } },
								{ "diffOp": { "equal": { "range": [263, 270] } } }
							]
						}
					}
				]
			},
			"verboseAdvices": { "advices": [] },
			"location": {
				"path": { "file": "src\\lib\\components\\MoreMenu.svelte" },
				"span": [218, 221],
				"sourceCode": "<script lang=\"ts\">\r\nimport { createEventDispatcher } from \"svelte\";\n\nconst dispatch = createEventDispatcher();\n\nconst { ariaLabel }: { ariaLabel?: string } = $props();\n\nlet detailsEl: HTMLDetailsElement | null = null;\nlet menuEl: HTMLDivElement | null = null;\n\nfunction _handleEdit() {\n\tdispatch(\"edit\");\n\tif (detailsEl) detailsEl.open = false;\n}\n\nfunction _handleDelete() {\n\tdispatch(\"delete\");\n\tif (detailsEl) detailsEl.open = false;\n}\n\n// when the disclosure opens, focus first actionable item\n$effect(() => {\n\tif (detailsEl?.open) {\n\t\trequestAnimationFrame(() => {\n\t\t\tconst first = menuEl?.querySelector<HTMLElement>(\"button\");\n\t\t\tfirst?.focus();\n\t\t});\n\t}\n});\n</script>\r\n\r\n<details class=\"more-menu\" bind:this={detailsEl}>\r\n  <summary\r\n    class=\"more-trigger\"\r\n    aria-label={ariaLabel}\r\n    \r\n    onkeydown={(e) => {\r\n      if (e.key === 'Enter' || e.key === ' ') {\r\n        e.preventDefault();\r\n        if (detailsEl) detailsEl.open = !detailsEl.open;\r\n      }\r\n    }}\r\n  >\r\n    <span aria-hidden=\"true\"></span>\r\n  </summary>\r\n\r\n    <div class=\"menu\" bind:this={menuEl} role=\"menu\">\r\n    <button type=\"button\" role=\"menuitem\" onclick={_handleEdit}>Edit</button>\r\n    <button type=\"button\" role=\"menuitem\" class=\"danger\" onclick={_handleDelete}>Delete</button>\r\n  </div>\r\n</details>\r\n\r\n<style>\r\n  .more-menu { position: relative; display: inline-block; }\r\n  .more-trigger {\r\n    background: transparent;\r\n    border: none;\r\n    padding: 0.25rem 0.5rem;\r\n    cursor: pointer;\r\n    font-size: 1.1rem;\r\n  }\r\n  .menu {\r\n    position: absolute;\r\n    right: 0;\r\n    top: calc(100% + 0.25rem);\r\n    background: var(--surface, #fff);\r\n    border: 1px solid rgba(0,0,0,0.08);\r\n    box-shadow: 0 6px 18px rgba(0,0,0,0.08);\r\n    border-radius: 6px;\r\n    padding: 0.25rem;\r\n    z-index: 20;\r\n    min-width: 9rem;\r\n    display: flex;\r\n    flex-direction: column;\r\n  }\r\n  .menu button {\r\n    text-align: left;\r\n    background: transparent;\r\n    border: none;\r\n    padding: 0.5rem 0.75rem;\r\n    cursor: pointer;\r\n    width: 100%;\r\n  }\r\n  .menu button:hover { background: rgba(0,0,0,0.03); }\r\n  .menu button:focus {\r\n    outline: 3px solid rgba(59,130,246,0.25);\r\n    outline-offset: 2px;\r\n    border-radius: 4px;\r\n  }\r\n  .menu .danger { color: #b91c1c; }\r\n  .menu .danger:hover { background: rgba(249, 250, 251, 1); color: #991b1b; }\r\n</style>\r\n"
			},
			"tags": ["fixable"],
			"source": null
		},
		{
			"category": "lint/correctness/noUnusedVariables",
			"severity": "warning",
			"description": "This variable ariaLabel is unused.",
			"message": [
				{ "elements": [], "content": "This variable " },
				{ "elements": ["Emphasis"], "content": "ariaLabel" },
				{ "elements": [], "content": " is unused." }
			],
			"advices": {
				"advices": [
					{
						"log": [
							"info",
							[
								{
									"elements": [],
									"content": "Unused variables are often the result of typos, incomplete refactors, or other sources of bugs."
								}
							]
						]
					}
				]
			},
			"verboseAdvices": { "advices": [] },
			"location": {
				"path": { "file": "src\\lib\\components\\MoreMenu.svelte" },
				"span": [120, 129],
				"sourceCode": "<script lang=\"ts\">\r\nimport { createEventDispatcher } from \"svelte\";\n\nconst dispatch = createEventDispatcher();\n\nconst { ariaLabel }: { ariaLabel?: string } = $props();\n\nlet detailsEl: HTMLDetailsElement | null = null;\nlet menuEl: HTMLDivElement | null = null;\n\nfunction _handleEdit() {\n\tdispatch(\"edit\");\n\tif (detailsEl) detailsEl.open = false;\n}\n\nfunction _handleDelete() {\n\tdispatch(\"delete\");\n\tif (detailsEl) detailsEl.open = false;\n}\n\n// when the disclosure opens, focus first actionable item\n$effect(() => {\n\tif (detailsEl?.open) {\n\t\trequestAnimationFrame(() => {\n\t\t\tconst first = menuEl?.querySelector<HTMLElement>(\"button\");\n\t\t\tfirst?.focus();\n\t\t});\n\t}\n});\n</script>\r\n\r\n<details class=\"more-menu\" bind:this={detailsEl}>\r\n  <summary\r\n    class=\"more-trigger\"\r\n    aria-label={ariaLabel}\r\n    \r\n    onkeydown={(e) => {\r\n      if (e.key === 'Enter' || e.key === ' ') {\r\n        e.preventDefault();\r\n        if (detailsEl) detailsEl.open = !detailsEl.open;\r\n      }\r\n    }}\r\n  >\r\n    <span aria-hidden=\"true\"></span>\r\n  </summary>\r\n\r\n    <div class=\"menu\" bind:this={menuEl} role=\"menu\">\r\n    <button type=\"button\" role=\"menuitem\" onclick={_handleEdit}>Edit</button>\r\n    <button type=\"button\" role=\"menuitem\" class=\"danger\" onclick={_handleDelete}>Delete</button>\r\n  </div>\r\n</details>\r\n\r\n<style>\r\n  .more-menu { position: relative; display: inline-block; }\r\n  .more-trigger {\r\n    background: transparent;\r\n    border: none;\r\n    padding: 0.25rem 0.5rem;\r\n    cursor: pointer;\r\n    font-size: 1.1rem;\r\n  }\r\n  .menu {\r\n    position: absolute;\r\n    right: 0;\r\n    top: calc(100% + 0.25rem);\r\n    background: var(--surface, #fff);\r\n    border: 1px solid rgba(0,0,0,0.08);\r\n    box-shadow: 0 6px 18px rgba(0,0,0,0.08);\r\n    border-radius: 6px;\r\n    padding: 0.25rem;\r\n    z-index: 20;\r\n    min-width: 9rem;\r\n    display: flex;\r\n    flex-direction: column;\r\n  }\r\n  .menu button {\r\n    text-align: left;\r\n    background: transparent;\r\n    border: none;\r\n    padding: 0.5rem 0.75rem;\r\n    cursor: pointer;\r\n    width: 100%;\r\n  }\r\n  .menu button:hover { background: rgba(0,0,0,0.03); }\r\n  .menu button:focus {\r\n    outline: 3px solid rgba(59,130,246,0.25);\r\n    outline-offset: 2px;\r\n    border-radius: 4px;\r\n  }\r\n  .menu .danger { color: #b91c1c; }\r\n  .menu .danger:hover { background: rgba(249, 250, 251, 1); color: #991b1b; }\r\n</style>\r\n"
			},
			"tags": [],
			"source": null
		},
		{
			"category": "lint/style/useConst",
			"severity": "warning",
			"description": "This let declares a variable that is only assigned once.",
			"message": [
				{ "elements": [], "content": "This " },
				{ "elements": ["Emphasis"], "content": "let" },
				{
					"elements": [],
					"content": " declares a variable that is only assigned once."
				}
			],
			"advices": {
				"advices": [
					{
						"log": [
							"info",
							[
								{
									"elements": [],
									"content": "'_firstInput' is never reassigned."
								}
							]
						]
					},
					{
						"frame": {
							"path": null,
							"span": [630, 641],
							"sourceCode": "<script lang=\"ts\">\nimport type { Note } from \"../../types\";\nimport { modalStore } from \"../stores/modalStore\";\n\nexport const note: Note | null = null; // null => create new\nexport const cardId: string | null = null;\ntype NoteApi = {\n\tgetNotes(cardId: string): Promise<Note[]>;\n\tcreateNote(payload: {\n\t\tcardId: string;\n\t\ttitle: string;\n\t\tcontent: string;\n\t\ttags: string[];\n\t}): Promise<Note>;\n\tupdateNote(payload: {\n\t\tid: string;\n\t\ttitle?: string;\n\t\tcontent?: string;\n\t\ttags?: string[];\n\t}): Promise<Note>;\n\tdeleteNote(id: string): Promise<Note>;\n};\n\nexport const api: NoteApi | null = null;\n\nlet title = \"\";\nlet content = \"\";\nlet tagsText = \"\";\nlet _firstInput: HTMLInputElement | null = null;\n\n$: {\n\t// populate from note\n\ttitle = note?.title || \"\";\n\tcontent = note?.content || \"\";\n\ttagsText = (note?.tags || []).join(\", \");\n}\n\nfunction resolveApi(): NoteApi | null {\n\tif (api) return api;\n\tif (\n\t\ttypeof window !== \"undefined\" &&\n\t\t(window as unknown as { api?: NoteApi }).api\n\t)\n\t\treturn (window as unknown as { api?: NoteApi }).api;\n\treturn null;\n}\n\nasync function _doSave() {\n\tconst tags = tagsText\n\t\t.split(\",\")\n\t\t.map((t) => t.trim())\n\t\t.filter(Boolean);\n\n\tconst resolved = resolveApi();\n\tif (!resolved) return;\n\n\tif (note?.id) {\n\t\tconst updated = await resolved.updateNote({\n\t\t\tid: note.id,\n\t\t\ttitle,\n\t\t\tcontent,\n\t\t\ttags,\n\t\t});\n\t\t// notify list with updated id\n\t\twindow.dispatchEvent(\n\t\t\tnew CustomEvent(\"notes:changed\", {\n\t\t\t\tdetail: { cardId, noteId: updated.id },\n\t\t\t}),\n\t\t);\n\t} else {\n\t\tconst created = await resolved.createNote({\n\t\t\tcardId: cardId ?? (undefined as unknown as string),\n\t\t\ttitle,\n\t\t\tcontent,\n\t\t\ttags,\n\t\t});\n\t\t// notify list and include created note id so the list can focus it\n\t\twindow.dispatchEvent(\n\t\t\tnew CustomEvent(\"notes:changed\", {\n\t\t\t\tdetail: { cardId, noteId: created.id },\n\t\t\t}),\n\t\t);\n\t}\n\n\t// close editor\n\tmodalStore.pop();\n}\n\nfunction cancel() {\n\tmodalStore.pop();\n}\n\nfunction _onKey(e: KeyboardEvent) {\n\tif (e.key === \"Escape\") {\n\t\te.stopPropagation();\n\t\tcancel();\n\t}\n}\n</script>\n\n  <div class=\"modal-backdrop\" role=\"dialog\" aria-modal=\"true\" tabindex=\"-1\" onkeydown={_onKey}>\n    <div class=\"modal\" role=\"document\">\n      <header>\n        <h2>{note ? 'Edit Note' : 'New Note'}</h2>\n      </header>\n\n      <div class=\"body\">\n        <label>\n          Title\n          <input bind:this={_firstInput} bind:value={title} />\n        </label>\n\n        <label>\n          Content\n          <textarea bind:value={content} rows={8}></textarea>\n        </label>\n\n        <label>\n          Tags (comma separated)\n          <input bind:value={tagsText} />\n        </label>\n      </div>\n\n      <footer>\n        <button type=\"button\" class=\"secondary\" onclick={cancel}>Cancel</button>\n        <button type=\"button\" class=\"primary\" onclick={_doSave}>Save</button>\n      </footer>\n    </div>\n  </div>\n\n<style>\n  .modal-backdrop {\n    position: fixed;\n    inset: 0;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    background: rgba(0,0,0,0.4);\n    z-index: 60;\n  }\n  .modal {\n    background: var(--surface, #fff);\n    border-radius: 8px;\n    padding: 1rem;\n    width: min(720px, 96%);\n    max-height: 90vh;\n    overflow: auto;\n    box-shadow: 0 10px 30px rgba(0,0,0,0.2);\n  }\n  .modal header h2 { margin: 0 0 0.5rem 0; }\n  .body label { display: block; margin-bottom: 0.75rem; }\n  input, textarea { width: 100%; padding: 0.5rem; border: 1px solid rgba(0,0,0,0.08); border-radius: 6px; }\n  footer { display:flex; gap:0.5rem; justify-content: flex-end; margin-top: 0.75rem; }\n  .primary { background: #2563eb; color: white; border: none; padding: 0.5rem 0.75rem; border-radius: 6px; }\n  .secondary { background: transparent; border: 1px solid rgba(0,0,0,0.08); padding: 0.5rem 0.75rem; border-radius: 6px; }\n</style>\n"
						}
					},
					{
						"log": [
							"info",
							[
								{ "elements": [], "content": "Safe fix: Use " },
								{ "elements": ["Emphasis"], "content": "const" },
								{ "elements": [], "content": " instead." }
							]
						]
					},
					{
						"diff": {
							"dictionary": "import type { Note } from \"../../types\";\nimport { modalStore } from \"../stores/modalStore\";\nlet title = \"\";\nlet content = \"\";\nlet tagsText = \"\";\nconst _firstInput: HTMLInputElement | null = null;\n\n$: {\t}\n}\n",
							"ops": [
								{ "diffOp": { "equal": { "range": [0, 92] } } },
								{ "equalLines": { "line_count": 21 } },
								{ "diffOp": { "equal": { "range": [92, 144] } } },
								{ "diffOp": { "equal": { "range": [144, 145] } } },
								{ "diffOp": { "delete": { "range": [92, 95] } } },
								{ "diffOp": { "insert": { "range": [145, 150] } } },
								{ "diffOp": { "equal": { "range": [150, 151] } } },
								{ "diffOp": { "equal": { "range": [151, 201] } } },
								{ "equalLines": { "line_count": 65 } },
								{ "diffOp": { "equal": { "range": [201, 206] } } }
							]
						}
					}
				]
			},
			"verboseAdvices": { "advices": [] },
			"location": {
				"path": { "file": "src\\lib\\components\\NoteEditorModal.svelte" },
				"span": [645, 648],
				"sourceCode": "<script lang=\"ts\">\nimport type { Note } from \"../../types\";\nimport { modalStore } from \"../stores/modalStore\";\n\nexport const note: Note | null = null; // null => create new\nexport const cardId: string | null = null;\ntype NoteApi = {\n\tgetNotes(cardId: string): Promise<Note[]>;\n\tcreateNote(payload: {\n\t\tcardId: string;\n\t\ttitle: string;\n\t\tcontent: string;\n\t\ttags: string[];\n\t}): Promise<Note>;\n\tupdateNote(payload: {\n\t\tid: string;\n\t\ttitle?: string;\n\t\tcontent?: string;\n\t\ttags?: string[];\n\t}): Promise<Note>;\n\tdeleteNote(id: string): Promise<Note>;\n};\n\nexport const api: NoteApi | null = null;\n\nlet title = \"\";\nlet content = \"\";\nlet tagsText = \"\";\nlet _firstInput: HTMLInputElement | null = null;\n\n$: {\n\t// populate from note\n\ttitle = note?.title || \"\";\n\tcontent = note?.content || \"\";\n\ttagsText = (note?.tags || []).join(\", \");\n}\n\nfunction resolveApi(): NoteApi | null {\n\tif (api) return api;\n\tif (\n\t\ttypeof window !== \"undefined\" &&\n\t\t(window as unknown as { api?: NoteApi }).api\n\t)\n\t\treturn (window as unknown as { api?: NoteApi }).api;\n\treturn null;\n}\n\nasync function _doSave() {\n\tconst tags = tagsText\n\t\t.split(\",\")\n\t\t.map((t) => t.trim())\n\t\t.filter(Boolean);\n\n\tconst resolved = resolveApi();\n\tif (!resolved) return;\n\n\tif (note?.id) {\n\t\tconst updated = await resolved.updateNote({\n\t\t\tid: note.id,\n\t\t\ttitle,\n\t\t\tcontent,\n\t\t\ttags,\n\t\t});\n\t\t// notify list with updated id\n\t\twindow.dispatchEvent(\n\t\t\tnew CustomEvent(\"notes:changed\", {\n\t\t\t\tdetail: { cardId, noteId: updated.id },\n\t\t\t}),\n\t\t);\n\t} else {\n\t\tconst created = await resolved.createNote({\n\t\t\tcardId: cardId ?? (undefined as unknown as string),\n\t\t\ttitle,\n\t\t\tcontent,\n\t\t\ttags,\n\t\t});\n\t\t// notify list and include created note id so the list can focus it\n\t\twindow.dispatchEvent(\n\t\t\tnew CustomEvent(\"notes:changed\", {\n\t\t\t\tdetail: { cardId, noteId: created.id },\n\t\t\t}),\n\t\t);\n\t}\n\n\t// close editor\n\tmodalStore.pop();\n}\n\nfunction cancel() {\n\tmodalStore.pop();\n}\n\nfunction _onKey(e: KeyboardEvent) {\n\tif (e.key === \"Escape\") {\n\t\te.stopPropagation();\n\t\tcancel();\n\t}\n}\n</script>\n\n  <div class=\"modal-backdrop\" role=\"dialog\" aria-modal=\"true\" tabindex=\"-1\" onkeydown={_onKey}>\n    <div class=\"modal\" role=\"document\">\n      <header>\n        <h2>{note ? 'Edit Note' : 'New Note'}</h2>\n      </header>\n\n      <div class=\"body\">\n        <label>\n          Title\n          <input bind:this={_firstInput} bind:value={title} />\n        </label>\n\n        <label>\n          Content\n          <textarea bind:value={content} rows={8}></textarea>\n        </label>\n\n        <label>\n          Tags (comma separated)\n          <input bind:value={tagsText} />\n        </label>\n      </div>\n\n      <footer>\n        <button type=\"button\" class=\"secondary\" onclick={cancel}>Cancel</button>\n        <button type=\"button\" class=\"primary\" onclick={_doSave}>Save</button>\n      </footer>\n    </div>\n  </div>\n\n<style>\n  .modal-backdrop {\n    position: fixed;\n    inset: 0;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    background: rgba(0,0,0,0.4);\n    z-index: 60;\n  }\n  .modal {\n    background: var(--surface, #fff);\n    border-radius: 8px;\n    padding: 1rem;\n    width: min(720px, 96%);\n    max-height: 90vh;\n    overflow: auto;\n    box-shadow: 0 10px 30px rgba(0,0,0,0.2);\n  }\n  .modal header h2 { margin: 0 0 0.5rem 0; }\n  .body label { display: block; margin-bottom: 0.75rem; }\n  input, textarea { width: 100%; padding: 0.5rem; border: 1px solid rgba(0,0,0,0.08); border-radius: 6px; }\n  footer { display:flex; gap:0.5rem; justify-content: flex-end; margin-top: 0.75rem; }\n  .primary { background: #2563eb; color: white; border: none; padding: 0.5rem 0.75rem; border-radius: 6px; }\n  .secondary { background: transparent; border: 1px solid rgba(0,0,0,0.08); padding: 0.5rem 0.75rem; border-radius: 6px; }\n</style>\n"
			},
			"tags": ["fixable"],
			"source": null
		},
		{
			"category": "lint/correctness/noUnusedVariables",
			"severity": "warning",
			"description": "This variable cardTitle is unused.",
			"message": [
				{ "elements": [], "content": "This variable " },
				{ "elements": ["Emphasis"], "content": "cardTitle" },
				{ "elements": [], "content": " is unused." }
			],
			"advices": {
				"advices": [
					{
						"log": [
							"info",
							[
								{
									"elements": [],
									"content": "Unused variables are often the result of typos, incomplete refactors, or other sources of bugs."
								}
							]
						]
					}
				]
			},
			"verboseAdvices": { "advices": [] },
			"location": {
				"path": { "file": "src\\lib\\components\\NoteModal.svelte" },
				"span": [836, 845],
				"sourceCode": "<script lang=\"ts\">\n/* global setTimeout */\nimport NoteEditorModal from \"./NoteEditorModal.svelte\";\nimport NoteContent from \"./NoteContent.svelte\";\nimport NoteView from \"./NoteView.svelte\";\nimport MoreMenu from \"./MoreMenu.svelte\";\nimport { modalStore } from \"../stores/modalStore\";\nimport type { Note } from \"../../types\";\nimport { createEventDispatcher } from \"svelte\";\n\ninterface Props {\n\tcardId: string;\n\tcardTitle?: string;\n\tapi?: {\n\t\tgetNotes(cardId: string): Promise<Note[]>;\n\t\tcreateNote(payload: {\n\t\t\tcardId: string;\n\t\t\ttitle: string;\n\t\t\tcontent: string;\n\t\t\ttags: string[];\n\t\t}): Promise<Note>;\n\t\tupdateNote(payload: {\n\t\t\tid: string;\n\t\t\ttitle?: string;\n\t\t\tcontent?: string;\n\t\t\ttags?: string[];\n\t\t}): Promise<Note>;\n\t\tdeleteNote(id: string): Promise<Note>;\n\t} | null;\n\tconfirmFn?: (message: string) => boolean;\n}\nconst { cardId, cardTitle, api, confirmFn }: Props = $props();\nconst dispatch = createEventDispatcher();\n\nlet notes: Note[] = $state([] as Note[]);\nlet editing: Note | null = $state(null);\nlet dialogRef: HTMLElement | null = $state(null);\nlet lastCreatedNoteId: string | null = $state(null);\n\nfunction resolveApi() {\n\tif (api) return api;\n\tif (\n\t\ttypeof window !== \"undefined\" &&\n\t\t(window as unknown as { api?: Props[\"api\"] }).api\n\t)\n\t\treturn (window as unknown as { api?: Props[\"api\"] }).api;\n\treturn null;\n}\n\nasync function load() {\n\tif (!cardId) return;\n\tconst resolved = resolveApi();\n\tif (!resolved) return;\n\tnotes = await resolved.getNotes(cardId);\n}\n\nimport { onMount } from \"svelte\";\n\nonMount(() => {\n\tload();\n\tsetTimeout(() => dialogRef?.focus(), 0);\n});\n\nfunction openNew() {\n\tconst resolved = resolveApi();\n\t// push the editor onto the modal stack so the list remains mounted underneath\n\tmodalStore.push(NoteEditorModal, { cardId, note: null, api: resolved });\n}\n\nfunction editNote(n: Note) {\n\tconst resolved = resolveApi();\n\tmodalStore.push(NoteEditorModal, { cardId, note: n, api: resolved });\n}\n\nfunction openView(n: Note) {\n\tconst resolved = resolveApi();\n\tmodalStore.push(NoteView, { cardId, note: n, api: resolved });\n}\n\n// NoteEditor will perform saves itself and dispatch a global event when notes change.\n\nasync function handleDelete(id: string) {\n\tconst resolvedConfirm =\n\t\tconfirmFn ??\n\t\t(typeof window !== \"undefined\" ? window.confirm.bind(window) : () => true);\n\tif (!resolvedConfirm(\"Delete this note?\")) return;\n\tconst resolved = resolveApi();\n\tif (!resolved) return;\n\tawait resolved.deleteNote(id);\n\tawait load();\n}\n\nfunction close() {\n\tdispatch(\"close\");\n}\n\n// listen for global note-change events so the list refreshes when the editor creates/updates\nfunction onNotesChanged(e: Event) {\n\tconst detail = (e as CustomEvent).detail as { cardId?: string } | undefined;\n\tif (!detail || detail.cardId !== cardId) return;\n\t// remember created note id so we can focus after reload\n\tlastCreatedNoteId = detail.noteId || null;\n\tload().then(() => {\n\t\tif (lastCreatedNoteId) {\n\t\t\t// focus the newly created note element if present\n\t\t\tconst el = document.getElementById(\n\t\t\t\t`note-${lastCreatedNoteId}`,\n\t\t\t) as HTMLElement | null;\n\t\t\tif (el && typeof el.focus === \"function\") {\n\t\t\t\tsetTimeout(() => el.focus(), 0);\n\t\t\t}\n\t\t\tlastCreatedNoteId = null;\n\t\t}\n\t});\n}\n\nimport { onDestroy } from \"svelte\";\nonMount(() => {\n\tload();\n\tsetTimeout(() => dialogRef?.focus(), 0);\n\twindow.addEventListener(\"notes:changed\", onNotesChanged as EventListener);\n});\nonDestroy(() =>\n\twindow.removeEventListener(\"notes:changed\", onNotesChanged as EventListener),\n);\n</script>\n\n  <div class=\"notes-modal-backdrop\" role=\"dialog\" aria-modal=\"true\" tabindex=\"-1\" bind:this={dialogRef}>\n    <div class=\"notes-modal\">\n      <header>\n        <h3>Notes for {cardTitle || 'Card'}</h3>\n        <button\n          type=\"button\"\n          class=\"close\"\n          onclick={close}\n          aria-label={\"Close notes for \" + (cardTitle || 'card')}\n          title={\"Close notes\"}\n        >\n          \n        </button>\n      </header>\n\n      <div class=\"notes-list\">\n        {#if notes.length === 0}\n          <div class=\"empty\">No notes yet. Click \"New Note\" to add one.</div>\n        {:else}\n          <ul class=\"notes\" role=\"list\">\n            {#each notes as n}\n              <li>\n                <div class=\"note-item\">\n                    <button id={\"note-\" + n.id} type=\"button\" class=\"note-open\" onclick={() => openView(n)} aria-label={`Open note ${n.title || 'untitled'}`}>\n                    <h4>{n.title || '(untitled)'}</h4>\n                    <div class=\"meta\">{n.tags?.map(t => `#${t}`).join(' ')}</div>\n                    <!-- render markdown content safely -->\n                    <div class=\"content\"><NoteContent markdown={n.content} /></div>\n                  </button>\n                  <div class=\"actions\">\n                    <MoreMenu ariaLabel={`More actions for note ${n.title || 'untitled'}`} on:edit={() => editNote(n)} on:delete={() => handleDelete(n.id)} />\n                  </div>\n                </div>\n              </li>\n            {/each}\n          </ul>\n        {/if}\n      </div>\n\n      <footer>\n        <button type=\"button\" class=\"primary\" onclick={openNew}>New Note</button>\n      </footer>\n    </div>\n  </div>\n\n  <!-- NoteEditorModal instances are pushed onto the modal stack so they're rendered by ModalContainer -->\n\n<style>\n  .notes-modal-backdrop { position: fixed; inset: 0; background: rgba(0,0,0,0.4); display:flex; align-items:center; justify-content:center; z-index:60; }\n  .notes-modal { width: min(860px, 96%); max-height: 90vh; overflow:auto; background: var(--surface,#fff); border-radius:8px; padding:1rem; }\n  header { display:flex; justify-content:space-between; align-items:center; }\n  .notes-list { margin-top: 0.75rem; }\n  .note-item { border:1px solid rgba(0,0,0,0.05); padding:0.5rem; border-radius:6px; margin-bottom:0.5rem; }\n  .note-item .meta { color: var(--muted,#666); font-size:0.85rem; }\n  .note-item .content { white-space:pre-wrap; margin:0.5rem 0; }\n  .actions { display:flex; gap:0.5rem; }\n  .primary { background:#2563eb; color:#fff; border:none; padding:0.5rem 0.75rem; border-radius:6px }\n  .close { background:transparent; border:none; font-size:1.1rem }\n</style>\n"
			},
			"tags": [],
			"source": null
		},
		{
			"category": "lint/correctness/noUnusedVariables",
			"severity": "warning",
			"description": "This variable notes is unused.",
			"message": [
				{ "elements": [], "content": "This variable " },
				{ "elements": ["Emphasis"], "content": "notes" },
				{ "elements": [], "content": " is unused." }
			],
			"advices": {
				"advices": [
					{
						"log": [
							"info",
							[
								{
									"elements": [],
									"content": "Unused variables are often the result of typos, incomplete refactors, or other sources of bugs."
								}
							]
						]
					},
					{
						"log": [
							"info",
							[
								{
									"elements": [],
									"content": "Unsafe fix: If this is intentional, prepend "
								},
								{ "elements": ["Emphasis"], "content": "notes" },
								{ "elements": [], "content": " with an underscore." }
							]
						]
					},
					{
						"diff": {
							"dictionary": "/* global setTimeout */\nimport NoteEditorModal from \"./NoteEditorModal.svelte\";\nimport NoteContent from \"./NoteContent.svelte\";const dispatch = createEventDispatcher();\n\nlet notes_notes: Note[] = $state([] as Note[]);\nlet editing: Note | null = $state(null);\nlet dialogRef: HTMLElement | null = $state(null);\tif (!cardId) return;\n\tconst resolved = resolveApi();\n\tif (!resolved) return;\n\t = await resolved.getNotes(cardId);\n}\n\twindow.removeEventListener(\"notes:changed\", onNotesChanged as EventListener),\n);\n",
							"ops": [
								{ "diffOp": { "equal": { "range": [0, 127] } } },
								{ "equalLines": { "line_count": 28 } },
								{ "diffOp": { "equal": { "range": [127, 174] } } },
								{ "diffOp": { "delete": { "range": [174, 179] } } },
								{ "diffOp": { "insert": { "range": [179, 185] } } },
								{ "diffOp": { "equal": { "range": [185, 308] } } },
								{ "equalLines": { "line_count": 13 } },
								{ "diffOp": { "equal": { "range": [308, 385] } } },
								{ "diffOp": { "equal": { "range": [385, 387] } } },
								{ "diffOp": { "delete": { "range": [174, 179] } } },
								{ "diffOp": { "insert": { "range": [179, 185] } } },
								{ "diffOp": { "equal": { "range": [387, 388] } } },
								{ "diffOp": { "equal": { "range": [388, 425] } } },
								{ "equalLines": { "line_count": 67 } },
								{ "diffOp": { "equal": { "range": [425, 507] } } }
							]
						}
					}
				]
			},
			"verboseAdvices": { "advices": [] },
			"location": {
				"path": { "file": "src\\lib\\components\\NoteModal.svelte" },
				"span": [930, 935],
				"sourceCode": "<script lang=\"ts\">\n/* global setTimeout */\nimport NoteEditorModal from \"./NoteEditorModal.svelte\";\nimport NoteContent from \"./NoteContent.svelte\";\nimport NoteView from \"./NoteView.svelte\";\nimport MoreMenu from \"./MoreMenu.svelte\";\nimport { modalStore } from \"../stores/modalStore\";\nimport type { Note } from \"../../types\";\nimport { createEventDispatcher } from \"svelte\";\n\ninterface Props {\n\tcardId: string;\n\tcardTitle?: string;\n\tapi?: {\n\t\tgetNotes(cardId: string): Promise<Note[]>;\n\t\tcreateNote(payload: {\n\t\t\tcardId: string;\n\t\t\ttitle: string;\n\t\t\tcontent: string;\n\t\t\ttags: string[];\n\t\t}): Promise<Note>;\n\t\tupdateNote(payload: {\n\t\t\tid: string;\n\t\t\ttitle?: string;\n\t\t\tcontent?: string;\n\t\t\ttags?: string[];\n\t\t}): Promise<Note>;\n\t\tdeleteNote(id: string): Promise<Note>;\n\t} | null;\n\tconfirmFn?: (message: string) => boolean;\n}\nconst { cardId, cardTitle, api, confirmFn }: Props = $props();\nconst dispatch = createEventDispatcher();\n\nlet notes: Note[] = $state([] as Note[]);\nlet editing: Note | null = $state(null);\nlet dialogRef: HTMLElement | null = $state(null);\nlet lastCreatedNoteId: string | null = $state(null);\n\nfunction resolveApi() {\n\tif (api) return api;\n\tif (\n\t\ttypeof window !== \"undefined\" &&\n\t\t(window as unknown as { api?: Props[\"api\"] }).api\n\t)\n\t\treturn (window as unknown as { api?: Props[\"api\"] }).api;\n\treturn null;\n}\n\nasync function load() {\n\tif (!cardId) return;\n\tconst resolved = resolveApi();\n\tif (!resolved) return;\n\tnotes = await resolved.getNotes(cardId);\n}\n\nimport { onMount } from \"svelte\";\n\nonMount(() => {\n\tload();\n\tsetTimeout(() => dialogRef?.focus(), 0);\n});\n\nfunction openNew() {\n\tconst resolved = resolveApi();\n\t// push the editor onto the modal stack so the list remains mounted underneath\n\tmodalStore.push(NoteEditorModal, { cardId, note: null, api: resolved });\n}\n\nfunction editNote(n: Note) {\n\tconst resolved = resolveApi();\n\tmodalStore.push(NoteEditorModal, { cardId, note: n, api: resolved });\n}\n\nfunction openView(n: Note) {\n\tconst resolved = resolveApi();\n\tmodalStore.push(NoteView, { cardId, note: n, api: resolved });\n}\n\n// NoteEditor will perform saves itself and dispatch a global event when notes change.\n\nasync function handleDelete(id: string) {\n\tconst resolvedConfirm =\n\t\tconfirmFn ??\n\t\t(typeof window !== \"undefined\" ? window.confirm.bind(window) : () => true);\n\tif (!resolvedConfirm(\"Delete this note?\")) return;\n\tconst resolved = resolveApi();\n\tif (!resolved) return;\n\tawait resolved.deleteNote(id);\n\tawait load();\n}\n\nfunction close() {\n\tdispatch(\"close\");\n}\n\n// listen for global note-change events so the list refreshes when the editor creates/updates\nfunction onNotesChanged(e: Event) {\n\tconst detail = (e as CustomEvent).detail as { cardId?: string } | undefined;\n\tif (!detail || detail.cardId !== cardId) return;\n\t// remember created note id so we can focus after reload\n\tlastCreatedNoteId = detail.noteId || null;\n\tload().then(() => {\n\t\tif (lastCreatedNoteId) {\n\t\t\t// focus the newly created note element if present\n\t\t\tconst el = document.getElementById(\n\t\t\t\t`note-${lastCreatedNoteId}`,\n\t\t\t) as HTMLElement | null;\n\t\t\tif (el && typeof el.focus === \"function\") {\n\t\t\t\tsetTimeout(() => el.focus(), 0);\n\t\t\t}\n\t\t\tlastCreatedNoteId = null;\n\t\t}\n\t});\n}\n\nimport { onDestroy } from \"svelte\";\nonMount(() => {\n\tload();\n\tsetTimeout(() => dialogRef?.focus(), 0);\n\twindow.addEventListener(\"notes:changed\", onNotesChanged as EventListener);\n});\nonDestroy(() =>\n\twindow.removeEventListener(\"notes:changed\", onNotesChanged as EventListener),\n);\n</script>\n\n  <div class=\"notes-modal-backdrop\" role=\"dialog\" aria-modal=\"true\" tabindex=\"-1\" bind:this={dialogRef}>\n    <div class=\"notes-modal\">\n      <header>\n        <h3>Notes for {cardTitle || 'Card'}</h3>\n        <button\n          type=\"button\"\n          class=\"close\"\n          onclick={close}\n          aria-label={\"Close notes for \" + (cardTitle || 'card')}\n          title={\"Close notes\"}\n        >\n          \n        </button>\n      </header>\n\n      <div class=\"notes-list\">\n        {#if notes.length === 0}\n          <div class=\"empty\">No notes yet. Click \"New Note\" to add one.</div>\n        {:else}\n          <ul class=\"notes\" role=\"list\">\n            {#each notes as n}\n              <li>\n                <div class=\"note-item\">\n                    <button id={\"note-\" + n.id} type=\"button\" class=\"note-open\" onclick={() => openView(n)} aria-label={`Open note ${n.title || 'untitled'}`}>\n                    <h4>{n.title || '(untitled)'}</h4>\n                    <div class=\"meta\">{n.tags?.map(t => `#${t}`).join(' ')}</div>\n                    <!-- render markdown content safely -->\n                    <div class=\"content\"><NoteContent markdown={n.content} /></div>\n                  </button>\n                  <div class=\"actions\">\n                    <MoreMenu ariaLabel={`More actions for note ${n.title || 'untitled'}`} on:edit={() => editNote(n)} on:delete={() => handleDelete(n.id)} />\n                  </div>\n                </div>\n              </li>\n            {/each}\n          </ul>\n        {/if}\n      </div>\n\n      <footer>\n        <button type=\"button\" class=\"primary\" onclick={openNew}>New Note</button>\n      </footer>\n    </div>\n  </div>\n\n  <!-- NoteEditorModal instances are pushed onto the modal stack so they're rendered by ModalContainer -->\n\n<style>\n  .notes-modal-backdrop { position: fixed; inset: 0; background: rgba(0,0,0,0.4); display:flex; align-items:center; justify-content:center; z-index:60; }\n  .notes-modal { width: min(860px, 96%); max-height: 90vh; overflow:auto; background: var(--surface,#fff); border-radius:8px; padding:1rem; }\n  header { display:flex; justify-content:space-between; align-items:center; }\n  .notes-list { margin-top: 0.75rem; }\n  .note-item { border:1px solid rgba(0,0,0,0.05); padding:0.5rem; border-radius:6px; margin-bottom:0.5rem; }\n  .note-item .meta { color: var(--muted,#666); font-size:0.85rem; }\n  .note-item .content { white-space:pre-wrap; margin:0.5rem 0; }\n  .actions { display:flex; gap:0.5rem; }\n  .primary { background:#2563eb; color:#fff; border:none; padding:0.5rem 0.75rem; border-radius:6px }\n  .close { background:transparent; border:none; font-size:1.1rem }\n</style>\n"
			},
			"tags": ["fixable"],
			"source": null
		},
		{
			"category": "lint/style/useConst",
			"severity": "warning",
			"description": "This let declares a variable that is only assigned once.",
			"message": [
				{ "elements": [], "content": "This " },
				{ "elements": ["Emphasis"], "content": "let" },
				{
					"elements": [],
					"content": " declares a variable that is only assigned once."
				}
			],
			"advices": {
				"advices": [
					{
						"log": [
							"info",
							[{ "elements": [], "content": "'editing' is never reassigned." }]
						]
					},
					{
						"frame": {
							"path": null,
							"span": [953, 960],
							"sourceCode": "<script lang=\"ts\">\n/* global setTimeout */\nimport NoteEditorModal from \"./NoteEditorModal.svelte\";\nimport NoteContent from \"./NoteContent.svelte\";\nimport NoteView from \"./NoteView.svelte\";\nimport MoreMenu from \"./MoreMenu.svelte\";\nimport { modalStore } from \"../stores/modalStore\";\nimport type { Note } from \"../../types\";\nimport { createEventDispatcher } from \"svelte\";\n\ninterface Props {\n\tcardId: string;\n\tcardTitle?: string;\n\tapi?: {\n\t\tgetNotes(cardId: string): Promise<Note[]>;\n\t\tcreateNote(payload: {\n\t\t\tcardId: string;\n\t\t\ttitle: string;\n\t\t\tcontent: string;\n\t\t\ttags: string[];\n\t\t}): Promise<Note>;\n\t\tupdateNote(payload: {\n\t\t\tid: string;\n\t\t\ttitle?: string;\n\t\t\tcontent?: string;\n\t\t\ttags?: string[];\n\t\t}): Promise<Note>;\n\t\tdeleteNote(id: string): Promise<Note>;\n\t} | null;\n\tconfirmFn?: (message: string) => boolean;\n}\nconst { cardId, cardTitle, api, confirmFn }: Props = $props();\nconst dispatch = createEventDispatcher();\n\nlet notes: Note[] = $state([] as Note[]);\nlet editing: Note | null = $state(null);\nlet dialogRef: HTMLElement | null = $state(null);\nlet lastCreatedNoteId: string | null = $state(null);\n\nfunction resolveApi() {\n\tif (api) return api;\n\tif (\n\t\ttypeof window !== \"undefined\" &&\n\t\t(window as unknown as { api?: Props[\"api\"] }).api\n\t)\n\t\treturn (window as unknown as { api?: Props[\"api\"] }).api;\n\treturn null;\n}\n\nasync function load() {\n\tif (!cardId) return;\n\tconst resolved = resolveApi();\n\tif (!resolved) return;\n\tnotes = await resolved.getNotes(cardId);\n}\n\nimport { onMount } from \"svelte\";\n\nonMount(() => {\n\tload();\n\tsetTimeout(() => dialogRef?.focus(), 0);\n});\n\nfunction openNew() {\n\tconst resolved = resolveApi();\n\t// push the editor onto the modal stack so the list remains mounted underneath\n\tmodalStore.push(NoteEditorModal, { cardId, note: null, api: resolved });\n}\n\nfunction editNote(n: Note) {\n\tconst resolved = resolveApi();\n\tmodalStore.push(NoteEditorModal, { cardId, note: n, api: resolved });\n}\n\nfunction openView(n: Note) {\n\tconst resolved = resolveApi();\n\tmodalStore.push(NoteView, { cardId, note: n, api: resolved });\n}\n\n// NoteEditor will perform saves itself and dispatch a global event when notes change.\n\nasync function handleDelete(id: string) {\n\tconst resolvedConfirm =\n\t\tconfirmFn ??\n\t\t(typeof window !== \"undefined\" ? window.confirm.bind(window) : () => true);\n\tif (!resolvedConfirm(\"Delete this note?\")) return;\n\tconst resolved = resolveApi();\n\tif (!resolved) return;\n\tawait resolved.deleteNote(id);\n\tawait load();\n}\n\nfunction close() {\n\tdispatch(\"close\");\n}\n\n// listen for global note-change events so the list refreshes when the editor creates/updates\nfunction onNotesChanged(e: Event) {\n\tconst detail = (e as CustomEvent).detail as { cardId?: string } | undefined;\n\tif (!detail || detail.cardId !== cardId) return;\n\t// remember created note id so we can focus after reload\n\tlastCreatedNoteId = detail.noteId || null;\n\tload().then(() => {\n\t\tif (lastCreatedNoteId) {\n\t\t\t// focus the newly created note element if present\n\t\t\tconst el = document.getElementById(\n\t\t\t\t`note-${lastCreatedNoteId}`,\n\t\t\t) as HTMLElement | null;\n\t\t\tif (el && typeof el.focus === \"function\") {\n\t\t\t\tsetTimeout(() => el.focus(), 0);\n\t\t\t}\n\t\t\tlastCreatedNoteId = null;\n\t\t}\n\t});\n}\n\nimport { onDestroy } from \"svelte\";\nonMount(() => {\n\tload();\n\tsetTimeout(() => dialogRef?.focus(), 0);\n\twindow.addEventListener(\"notes:changed\", onNotesChanged as EventListener);\n});\nonDestroy(() =>\n\twindow.removeEventListener(\"notes:changed\", onNotesChanged as EventListener),\n);\n</script>\n\n  <div class=\"notes-modal-backdrop\" role=\"dialog\" aria-modal=\"true\" tabindex=\"-1\" bind:this={dialogRef}>\n    <div class=\"notes-modal\">\n      <header>\n        <h3>Notes for {cardTitle || 'Card'}</h3>\n        <button\n          type=\"button\"\n          class=\"close\"\n          onclick={close}\n          aria-label={\"Close notes for \" + (cardTitle || 'card')}\n          title={\"Close notes\"}\n        >\n          \n        </button>\n      </header>\n\n      <div class=\"notes-list\">\n        {#if notes.length === 0}\n          <div class=\"empty\">No notes yet. Click \"New Note\" to add one.</div>\n        {:else}\n          <ul class=\"notes\" role=\"list\">\n            {#each notes as n}\n              <li>\n                <div class=\"note-item\">\n                    <button id={\"note-\" + n.id} type=\"button\" class=\"note-open\" onclick={() => openView(n)} aria-label={`Open note ${n.title || 'untitled'}`}>\n                    <h4>{n.title || '(untitled)'}</h4>\n                    <div class=\"meta\">{n.tags?.map(t => `#${t}`).join(' ')}</div>\n                    <!-- render markdown content safely -->\n                    <div class=\"content\"><NoteContent markdown={n.content} /></div>\n                  </button>\n                  <div class=\"actions\">\n                    <MoreMenu ariaLabel={`More actions for note ${n.title || 'untitled'}`} on:edit={() => editNote(n)} on:delete={() => handleDelete(n.id)} />\n                  </div>\n                </div>\n              </li>\n            {/each}\n          </ul>\n        {/if}\n      </div>\n\n      <footer>\n        <button type=\"button\" class=\"primary\" onclick={openNew}>New Note</button>\n      </footer>\n    </div>\n  </div>\n\n  <!-- NoteEditorModal instances are pushed onto the modal stack so they're rendered by ModalContainer -->\n\n<style>\n  .notes-modal-backdrop { position: fixed; inset: 0; background: rgba(0,0,0,0.4); display:flex; align-items:center; justify-content:center; z-index:60; }\n  .notes-modal { width: min(860px, 96%); max-height: 90vh; overflow:auto; background: var(--surface,#fff); border-radius:8px; padding:1rem; }\n  header { display:flex; justify-content:space-between; align-items:center; }\n  .notes-list { margin-top: 0.75rem; }\n  .note-item { border:1px solid rgba(0,0,0,0.05); padding:0.5rem; border-radius:6px; margin-bottom:0.5rem; }\n  .note-item .meta { color: var(--muted,#666); font-size:0.85rem; }\n  .note-item .content { white-space:pre-wrap; margin:0.5rem 0; }\n  .actions { display:flex; gap:0.5rem; }\n  .primary { background:#2563eb; color:#fff; border:none; padding:0.5rem 0.75rem; border-radius:6px }\n  .close { background:transparent; border:none; font-size:1.1rem }\n</style>\n"
						}
					},
					{
						"log": [
							"info",
							[
								{ "elements": [], "content": "Safe fix: Use " },
								{ "elements": ["Emphasis"], "content": "const" },
								{ "elements": [], "content": " instead." }
							]
						]
					},
					{
						"diff": {
							"dictionary": "/* global setTimeout */\nimport NoteEditorModal from \"./NoteEditorModal.svelte\";\nimport NoteContent from \"./NoteContent.svelte\";const dispatch = createEventDispatcher();\n\nlet notes: Note[] = $state([] as Note[]);\nlet editing: Note | null = $state(null);\nlet dialogRef: HTMLElement | null = $state(null);\nlet lastCreatedNoteId: string | null = $state(null);\twindow.removeEventListener(\"notes:changed\", onNotesChanged as EventListener),\n);\n",
							"ops": [
								{ "diffOp": { "equal": { "range": [0, 127] } } },
								{ "equalLines": { "line_count": 28 } },
								{ "diffOp": { "equal": { "range": [127, 211] } } },
								{ "diffOp": { "equal": { "range": [211, 212] } } },
								{ "diffOp": { "delete": { "range": [212, 215] } } },
								{ "diffOp": { "insert": { "range": [127, 132] } } },
								{ "diffOp": { "equal": { "range": [215, 216] } } },
								{ "diffOp": { "equal": { "range": [216, 355] } } },
								{ "equalLines": { "line_count": 85 } },
								{ "diffOp": { "equal": { "range": [355, 437] } } }
							]
						}
					}
				]
			},
			"verboseAdvices": { "advices": [] },
			"location": {
				"path": { "file": "src\\lib\\components\\NoteModal.svelte" },
				"span": [968, 971],
				"sourceCode": "<script lang=\"ts\">\n/* global setTimeout */\nimport NoteEditorModal from \"./NoteEditorModal.svelte\";\nimport NoteContent from \"./NoteContent.svelte\";\nimport NoteView from \"./NoteView.svelte\";\nimport MoreMenu from \"./MoreMenu.svelte\";\nimport { modalStore } from \"../stores/modalStore\";\nimport type { Note } from \"../../types\";\nimport { createEventDispatcher } from \"svelte\";\n\ninterface Props {\n\tcardId: string;\n\tcardTitle?: string;\n\tapi?: {\n\t\tgetNotes(cardId: string): Promise<Note[]>;\n\t\tcreateNote(payload: {\n\t\t\tcardId: string;\n\t\t\ttitle: string;\n\t\t\tcontent: string;\n\t\t\ttags: string[];\n\t\t}): Promise<Note>;\n\t\tupdateNote(payload: {\n\t\t\tid: string;\n\t\t\ttitle?: string;\n\t\t\tcontent?: string;\n\t\t\ttags?: string[];\n\t\t}): Promise<Note>;\n\t\tdeleteNote(id: string): Promise<Note>;\n\t} | null;\n\tconfirmFn?: (message: string) => boolean;\n}\nconst { cardId, cardTitle, api, confirmFn }: Props = $props();\nconst dispatch = createEventDispatcher();\n\nlet notes: Note[] = $state([] as Note[]);\nlet editing: Note | null = $state(null);\nlet dialogRef: HTMLElement | null = $state(null);\nlet lastCreatedNoteId: string | null = $state(null);\n\nfunction resolveApi() {\n\tif (api) return api;\n\tif (\n\t\ttypeof window !== \"undefined\" &&\n\t\t(window as unknown as { api?: Props[\"api\"] }).api\n\t)\n\t\treturn (window as unknown as { api?: Props[\"api\"] }).api;\n\treturn null;\n}\n\nasync function load() {\n\tif (!cardId) return;\n\tconst resolved = resolveApi();\n\tif (!resolved) return;\n\tnotes = await resolved.getNotes(cardId);\n}\n\nimport { onMount } from \"svelte\";\n\nonMount(() => {\n\tload();\n\tsetTimeout(() => dialogRef?.focus(), 0);\n});\n\nfunction openNew() {\n\tconst resolved = resolveApi();\n\t// push the editor onto the modal stack so the list remains mounted underneath\n\tmodalStore.push(NoteEditorModal, { cardId, note: null, api: resolved });\n}\n\nfunction editNote(n: Note) {\n\tconst resolved = resolveApi();\n\tmodalStore.push(NoteEditorModal, { cardId, note: n, api: resolved });\n}\n\nfunction openView(n: Note) {\n\tconst resolved = resolveApi();\n\tmodalStore.push(NoteView, { cardId, note: n, api: resolved });\n}\n\n// NoteEditor will perform saves itself and dispatch a global event when notes change.\n\nasync function handleDelete(id: string) {\n\tconst resolvedConfirm =\n\t\tconfirmFn ??\n\t\t(typeof window !== \"undefined\" ? window.confirm.bind(window) : () => true);\n\tif (!resolvedConfirm(\"Delete this note?\")) return;\n\tconst resolved = resolveApi();\n\tif (!resolved) return;\n\tawait resolved.deleteNote(id);\n\tawait load();\n}\n\nfunction close() {\n\tdispatch(\"close\");\n}\n\n// listen for global note-change events so the list refreshes when the editor creates/updates\nfunction onNotesChanged(e: Event) {\n\tconst detail = (e as CustomEvent).detail as { cardId?: string } | undefined;\n\tif (!detail || detail.cardId !== cardId) return;\n\t// remember created note id so we can focus after reload\n\tlastCreatedNoteId = detail.noteId || null;\n\tload().then(() => {\n\t\tif (lastCreatedNoteId) {\n\t\t\t// focus the newly created note element if present\n\t\t\tconst el = document.getElementById(\n\t\t\t\t`note-${lastCreatedNoteId}`,\n\t\t\t) as HTMLElement | null;\n\t\t\tif (el && typeof el.focus === \"function\") {\n\t\t\t\tsetTimeout(() => el.focus(), 0);\n\t\t\t}\n\t\t\tlastCreatedNoteId = null;\n\t\t}\n\t});\n}\n\nimport { onDestroy } from \"svelte\";\nonMount(() => {\n\tload();\n\tsetTimeout(() => dialogRef?.focus(), 0);\n\twindow.addEventListener(\"notes:changed\", onNotesChanged as EventListener);\n});\nonDestroy(() =>\n\twindow.removeEventListener(\"notes:changed\", onNotesChanged as EventListener),\n);\n</script>\n\n  <div class=\"notes-modal-backdrop\" role=\"dialog\" aria-modal=\"true\" tabindex=\"-1\" bind:this={dialogRef}>\n    <div class=\"notes-modal\">\n      <header>\n        <h3>Notes for {cardTitle || 'Card'}</h3>\n        <button\n          type=\"button\"\n          class=\"close\"\n          onclick={close}\n          aria-label={\"Close notes for \" + (cardTitle || 'card')}\n          title={\"Close notes\"}\n        >\n          \n        </button>\n      </header>\n\n      <div class=\"notes-list\">\n        {#if notes.length === 0}\n          <div class=\"empty\">No notes yet. Click \"New Note\" to add one.</div>\n        {:else}\n          <ul class=\"notes\" role=\"list\">\n            {#each notes as n}\n              <li>\n                <div class=\"note-item\">\n                    <button id={\"note-\" + n.id} type=\"button\" class=\"note-open\" onclick={() => openView(n)} aria-label={`Open note ${n.title || 'untitled'}`}>\n                    <h4>{n.title || '(untitled)'}</h4>\n                    <div class=\"meta\">{n.tags?.map(t => `#${t}`).join(' ')}</div>\n                    <!-- render markdown content safely -->\n                    <div class=\"content\"><NoteContent markdown={n.content} /></div>\n                  </button>\n                  <div class=\"actions\">\n                    <MoreMenu ariaLabel={`More actions for note ${n.title || 'untitled'}`} on:edit={() => editNote(n)} on:delete={() => handleDelete(n.id)} />\n                  </div>\n                </div>\n              </li>\n            {/each}\n          </ul>\n        {/if}\n      </div>\n\n      <footer>\n        <button type=\"button\" class=\"primary\" onclick={openNew}>New Note</button>\n      </footer>\n    </div>\n  </div>\n\n  <!-- NoteEditorModal instances are pushed onto the modal stack so they're rendered by ModalContainer -->\n\n<style>\n  .notes-modal-backdrop { position: fixed; inset: 0; background: rgba(0,0,0,0.4); display:flex; align-items:center; justify-content:center; z-index:60; }\n  .notes-modal { width: min(860px, 96%); max-height: 90vh; overflow:auto; background: var(--surface,#fff); border-radius:8px; padding:1rem; }\n  header { display:flex; justify-content:space-between; align-items:center; }\n  .notes-list { margin-top: 0.75rem; }\n  .note-item { border:1px solid rgba(0,0,0,0.05); padding:0.5rem; border-radius:6px; margin-bottom:0.5rem; }\n  .note-item .meta { color: var(--muted,#666); font-size:0.85rem; }\n  .note-item .content { white-space:pre-wrap; margin:0.5rem 0; }\n  .actions { display:flex; gap:0.5rem; }\n  .primary { background:#2563eb; color:#fff; border:none; padding:0.5rem 0.75rem; border-radius:6px }\n  .close { background:transparent; border:none; font-size:1.1rem }\n</style>\n"
			},
			"tags": ["fixable"],
			"source": null
		},
		{
			"category": "lint/correctness/noUnusedVariables",
			"severity": "warning",
			"description": "This variable editing is unused.",
			"message": [
				{ "elements": [], "content": "This variable " },
				{ "elements": ["Emphasis"], "content": "editing" },
				{ "elements": [], "content": " is unused." }
			],
			"advices": {
				"advices": [
					{
						"log": [
							"info",
							[
								{
									"elements": [],
									"content": "Unused variables are often the result of typos, incomplete refactors, or other sources of bugs."
								}
							]
						]
					},
					{
						"log": [
							"info",
							[
								{
									"elements": [],
									"content": "Unsafe fix: If this is intentional, prepend "
								},
								{ "elements": ["Emphasis"], "content": "editing" },
								{ "elements": [], "content": " with an underscore." }
							]
						]
					},
					{
						"diff": {
							"dictionary": "/* global setTimeout */\nimport NoteEditorModal from \"./NoteEditorModal.svelte\";\nimport NoteContent from \"./NoteContent.svelte\";\nlet notes: Note[] = $state([] as Note[]);\nlet editing_editing: Note | null = $state(null);\nlet dialogRef: HTMLElement | null = $state(null);\nlet lastCreatedNoteId: string | null = $state(null);\twindow.removeEventListener(\"notes:changed\", onNotesChanged as EventListener),\n);\n",
							"ops": [
								{ "diffOp": { "equal": { "range": [0, 127] } } },
								{ "equalLines": { "line_count": 29 } },
								{ "diffOp": { "equal": { "range": [127, 174] } } },
								{ "diffOp": { "delete": { "range": [174, 181] } } },
								{ "diffOp": { "insert": { "range": [181, 189] } } },
								{ "diffOp": { "equal": { "range": [189, 321] } } },
								{ "equalLines": { "line_count": 85 } },
								{ "diffOp": { "equal": { "range": [321, 403] } } }
							]
						}
					}
				]
			},
			"verboseAdvices": { "advices": [] },
			"location": {
				"path": { "file": "src\\lib\\components\\NoteModal.svelte" },
				"span": [972, 979],
				"sourceCode": "<script lang=\"ts\">\n/* global setTimeout */\nimport NoteEditorModal from \"./NoteEditorModal.svelte\";\nimport NoteContent from \"./NoteContent.svelte\";\nimport NoteView from \"./NoteView.svelte\";\nimport MoreMenu from \"./MoreMenu.svelte\";\nimport { modalStore } from \"../stores/modalStore\";\nimport type { Note } from \"../../types\";\nimport { createEventDispatcher } from \"svelte\";\n\ninterface Props {\n\tcardId: string;\n\tcardTitle?: string;\n\tapi?: {\n\t\tgetNotes(cardId: string): Promise<Note[]>;\n\t\tcreateNote(payload: {\n\t\t\tcardId: string;\n\t\t\ttitle: string;\n\t\t\tcontent: string;\n\t\t\ttags: string[];\n\t\t}): Promise<Note>;\n\t\tupdateNote(payload: {\n\t\t\tid: string;\n\t\t\ttitle?: string;\n\t\t\tcontent?: string;\n\t\t\ttags?: string[];\n\t\t}): Promise<Note>;\n\t\tdeleteNote(id: string): Promise<Note>;\n\t} | null;\n\tconfirmFn?: (message: string) => boolean;\n}\nconst { cardId, cardTitle, api, confirmFn }: Props = $props();\nconst dispatch = createEventDispatcher();\n\nlet notes: Note[] = $state([] as Note[]);\nlet editing: Note | null = $state(null);\nlet dialogRef: HTMLElement | null = $state(null);\nlet lastCreatedNoteId: string | null = $state(null);\n\nfunction resolveApi() {\n\tif (api) return api;\n\tif (\n\t\ttypeof window !== \"undefined\" &&\n\t\t(window as unknown as { api?: Props[\"api\"] }).api\n\t)\n\t\treturn (window as unknown as { api?: Props[\"api\"] }).api;\n\treturn null;\n}\n\nasync function load() {\n\tif (!cardId) return;\n\tconst resolved = resolveApi();\n\tif (!resolved) return;\n\tnotes = await resolved.getNotes(cardId);\n}\n\nimport { onMount } from \"svelte\";\n\nonMount(() => {\n\tload();\n\tsetTimeout(() => dialogRef?.focus(), 0);\n});\n\nfunction openNew() {\n\tconst resolved = resolveApi();\n\t// push the editor onto the modal stack so the list remains mounted underneath\n\tmodalStore.push(NoteEditorModal, { cardId, note: null, api: resolved });\n}\n\nfunction editNote(n: Note) {\n\tconst resolved = resolveApi();\n\tmodalStore.push(NoteEditorModal, { cardId, note: n, api: resolved });\n}\n\nfunction openView(n: Note) {\n\tconst resolved = resolveApi();\n\tmodalStore.push(NoteView, { cardId, note: n, api: resolved });\n}\n\n// NoteEditor will perform saves itself and dispatch a global event when notes change.\n\nasync function handleDelete(id: string) {\n\tconst resolvedConfirm =\n\t\tconfirmFn ??\n\t\t(typeof window !== \"undefined\" ? window.confirm.bind(window) : () => true);\n\tif (!resolvedConfirm(\"Delete this note?\")) return;\n\tconst resolved = resolveApi();\n\tif (!resolved) return;\n\tawait resolved.deleteNote(id);\n\tawait load();\n}\n\nfunction close() {\n\tdispatch(\"close\");\n}\n\n// listen for global note-change events so the list refreshes when the editor creates/updates\nfunction onNotesChanged(e: Event) {\n\tconst detail = (e as CustomEvent).detail as { cardId?: string } | undefined;\n\tif (!detail || detail.cardId !== cardId) return;\n\t// remember created note id so we can focus after reload\n\tlastCreatedNoteId = detail.noteId || null;\n\tload().then(() => {\n\t\tif (lastCreatedNoteId) {\n\t\t\t// focus the newly created note element if present\n\t\t\tconst el = document.getElementById(\n\t\t\t\t`note-${lastCreatedNoteId}`,\n\t\t\t) as HTMLElement | null;\n\t\t\tif (el && typeof el.focus === \"function\") {\n\t\t\t\tsetTimeout(() => el.focus(), 0);\n\t\t\t}\n\t\t\tlastCreatedNoteId = null;\n\t\t}\n\t});\n}\n\nimport { onDestroy } from \"svelte\";\nonMount(() => {\n\tload();\n\tsetTimeout(() => dialogRef?.focus(), 0);\n\twindow.addEventListener(\"notes:changed\", onNotesChanged as EventListener);\n});\nonDestroy(() =>\n\twindow.removeEventListener(\"notes:changed\", onNotesChanged as EventListener),\n);\n</script>\n\n  <div class=\"notes-modal-backdrop\" role=\"dialog\" aria-modal=\"true\" tabindex=\"-1\" bind:this={dialogRef}>\n    <div class=\"notes-modal\">\n      <header>\n        <h3>Notes for {cardTitle || 'Card'}</h3>\n        <button\n          type=\"button\"\n          class=\"close\"\n          onclick={close}\n          aria-label={\"Close notes for \" + (cardTitle || 'card')}\n          title={\"Close notes\"}\n        >\n          \n        </button>\n      </header>\n\n      <div class=\"notes-list\">\n        {#if notes.length === 0}\n          <div class=\"empty\">No notes yet. Click \"New Note\" to add one.</div>\n        {:else}\n          <ul class=\"notes\" role=\"list\">\n            {#each notes as n}\n              <li>\n                <div class=\"note-item\">\n                    <button id={\"note-\" + n.id} type=\"button\" class=\"note-open\" onclick={() => openView(n)} aria-label={`Open note ${n.title || 'untitled'}`}>\n                    <h4>{n.title || '(untitled)'}</h4>\n                    <div class=\"meta\">{n.tags?.map(t => `#${t}`).join(' ')}</div>\n                    <!-- render markdown content safely -->\n                    <div class=\"content\"><NoteContent markdown={n.content} /></div>\n                  </button>\n                  <div class=\"actions\">\n                    <MoreMenu ariaLabel={`More actions for note ${n.title || 'untitled'}`} on:edit={() => editNote(n)} on:delete={() => handleDelete(n.id)} />\n                  </div>\n                </div>\n              </li>\n            {/each}\n          </ul>\n        {/if}\n      </div>\n\n      <footer>\n        <button type=\"button\" class=\"primary\" onclick={openNew}>New Note</button>\n      </footer>\n    </div>\n  </div>\n\n  <!-- NoteEditorModal instances are pushed onto the modal stack so they're rendered by ModalContainer -->\n\n<style>\n  .notes-modal-backdrop { position: fixed; inset: 0; background: rgba(0,0,0,0.4); display:flex; align-items:center; justify-content:center; z-index:60; }\n  .notes-modal { width: min(860px, 96%); max-height: 90vh; overflow:auto; background: var(--surface,#fff); border-radius:8px; padding:1rem; }\n  header { display:flex; justify-content:space-between; align-items:center; }\n  .notes-list { margin-top: 0.75rem; }\n  .note-item { border:1px solid rgba(0,0,0,0.05); padding:0.5rem; border-radius:6px; margin-bottom:0.5rem; }\n  .note-item .meta { color: var(--muted,#666); font-size:0.85rem; }\n  .note-item .content { white-space:pre-wrap; margin:0.5rem 0; }\n  .actions { display:flex; gap:0.5rem; }\n  .primary { background:#2563eb; color:#fff; border:none; padding:0.5rem 0.75rem; border-radius:6px }\n  .close { background:transparent; border:none; font-size:1.1rem }\n</style>\n"
			},
			"tags": ["fixable"],
			"source": null
		},
		{
			"category": "lint/style/useConst",
			"severity": "warning",
			"description": "This let declares a variable that is only assigned once.",
			"message": [
				{ "elements": [], "content": "This " },
				{ "elements": ["Emphasis"], "content": "let" },
				{
					"elements": [],
					"content": " declares a variable that is only assigned once."
				}
			],
			"advices": {
				"advices": [
					{
						"log": [
							"info",
							[
								{
									"elements": [],
									"content": "'dialogRef' is never reassigned."
								}
							]
						]
					},
					{
						"frame": {
							"path": null,
							"span": [994, 1003],
							"sourceCode": "<script lang=\"ts\">\n/* global setTimeout */\nimport NoteEditorModal from \"./NoteEditorModal.svelte\";\nimport NoteContent from \"./NoteContent.svelte\";\nimport NoteView from \"./NoteView.svelte\";\nimport MoreMenu from \"./MoreMenu.svelte\";\nimport { modalStore } from \"../stores/modalStore\";\nimport type { Note } from \"../../types\";\nimport { createEventDispatcher } from \"svelte\";\n\ninterface Props {\n\tcardId: string;\n\tcardTitle?: string;\n\tapi?: {\n\t\tgetNotes(cardId: string): Promise<Note[]>;\n\t\tcreateNote(payload: {\n\t\t\tcardId: string;\n\t\t\ttitle: string;\n\t\t\tcontent: string;\n\t\t\ttags: string[];\n\t\t}): Promise<Note>;\n\t\tupdateNote(payload: {\n\t\t\tid: string;\n\t\t\ttitle?: string;\n\t\t\tcontent?: string;\n\t\t\ttags?: string[];\n\t\t}): Promise<Note>;\n\t\tdeleteNote(id: string): Promise<Note>;\n\t} | null;\n\tconfirmFn?: (message: string) => boolean;\n}\nconst { cardId, cardTitle, api, confirmFn }: Props = $props();\nconst dispatch = createEventDispatcher();\n\nlet notes: Note[] = $state([] as Note[]);\nlet editing: Note | null = $state(null);\nlet dialogRef: HTMLElement | null = $state(null);\nlet lastCreatedNoteId: string | null = $state(null);\n\nfunction resolveApi() {\n\tif (api) return api;\n\tif (\n\t\ttypeof window !== \"undefined\" &&\n\t\t(window as unknown as { api?: Props[\"api\"] }).api\n\t)\n\t\treturn (window as unknown as { api?: Props[\"api\"] }).api;\n\treturn null;\n}\n\nasync function load() {\n\tif (!cardId) return;\n\tconst resolved = resolveApi();\n\tif (!resolved) return;\n\tnotes = await resolved.getNotes(cardId);\n}\n\nimport { onMount } from \"svelte\";\n\nonMount(() => {\n\tload();\n\tsetTimeout(() => dialogRef?.focus(), 0);\n});\n\nfunction openNew() {\n\tconst resolved = resolveApi();\n\t// push the editor onto the modal stack so the list remains mounted underneath\n\tmodalStore.push(NoteEditorModal, { cardId, note: null, api: resolved });\n}\n\nfunction editNote(n: Note) {\n\tconst resolved = resolveApi();\n\tmodalStore.push(NoteEditorModal, { cardId, note: n, api: resolved });\n}\n\nfunction openView(n: Note) {\n\tconst resolved = resolveApi();\n\tmodalStore.push(NoteView, { cardId, note: n, api: resolved });\n}\n\n// NoteEditor will perform saves itself and dispatch a global event when notes change.\n\nasync function handleDelete(id: string) {\n\tconst resolvedConfirm =\n\t\tconfirmFn ??\n\t\t(typeof window !== \"undefined\" ? window.confirm.bind(window) : () => true);\n\tif (!resolvedConfirm(\"Delete this note?\")) return;\n\tconst resolved = resolveApi();\n\tif (!resolved) return;\n\tawait resolved.deleteNote(id);\n\tawait load();\n}\n\nfunction close() {\n\tdispatch(\"close\");\n}\n\n// listen for global note-change events so the list refreshes when the editor creates/updates\nfunction onNotesChanged(e: Event) {\n\tconst detail = (e as CustomEvent).detail as { cardId?: string } | undefined;\n\tif (!detail || detail.cardId !== cardId) return;\n\t// remember created note id so we can focus after reload\n\tlastCreatedNoteId = detail.noteId || null;\n\tload().then(() => {\n\t\tif (lastCreatedNoteId) {\n\t\t\t// focus the newly created note element if present\n\t\t\tconst el = document.getElementById(\n\t\t\t\t`note-${lastCreatedNoteId}`,\n\t\t\t) as HTMLElement | null;\n\t\t\tif (el && typeof el.focus === \"function\") {\n\t\t\t\tsetTimeout(() => el.focus(), 0);\n\t\t\t}\n\t\t\tlastCreatedNoteId = null;\n\t\t}\n\t});\n}\n\nimport { onDestroy } from \"svelte\";\nonMount(() => {\n\tload();\n\tsetTimeout(() => dialogRef?.focus(), 0);\n\twindow.addEventListener(\"notes:changed\", onNotesChanged as EventListener);\n});\nonDestroy(() =>\n\twindow.removeEventListener(\"notes:changed\", onNotesChanged as EventListener),\n);\n</script>\n\n  <div class=\"notes-modal-backdrop\" role=\"dialog\" aria-modal=\"true\" tabindex=\"-1\" bind:this={dialogRef}>\n    <div class=\"notes-modal\">\n      <header>\n        <h3>Notes for {cardTitle || 'Card'}</h3>\n        <button\n          type=\"button\"\n          class=\"close\"\n          onclick={close}\n          aria-label={\"Close notes for \" + (cardTitle || 'card')}\n          title={\"Close notes\"}\n        >\n          \n        </button>\n      </header>\n\n      <div class=\"notes-list\">\n        {#if notes.length === 0}\n          <div class=\"empty\">No notes yet. Click \"New Note\" to add one.</div>\n        {:else}\n          <ul class=\"notes\" role=\"list\">\n            {#each notes as n}\n              <li>\n                <div class=\"note-item\">\n                    <button id={\"note-\" + n.id} type=\"button\" class=\"note-open\" onclick={() => openView(n)} aria-label={`Open note ${n.title || 'untitled'}`}>\n                    <h4>{n.title || '(untitled)'}</h4>\n                    <div class=\"meta\">{n.tags?.map(t => `#${t}`).join(' ')}</div>\n                    <!-- render markdown content safely -->\n                    <div class=\"content\"><NoteContent markdown={n.content} /></div>\n                  </button>\n                  <div class=\"actions\">\n                    <MoreMenu ariaLabel={`More actions for note ${n.title || 'untitled'}`} on:edit={() => editNote(n)} on:delete={() => handleDelete(n.id)} />\n                  </div>\n                </div>\n              </li>\n            {/each}\n          </ul>\n        {/if}\n      </div>\n\n      <footer>\n        <button type=\"button\" class=\"primary\" onclick={openNew}>New Note</button>\n      </footer>\n    </div>\n  </div>\n\n  <!-- NoteEditorModal instances are pushed onto the modal stack so they're rendered by ModalContainer -->\n\n<style>\n  .notes-modal-backdrop { position: fixed; inset: 0; background: rgba(0,0,0,0.4); display:flex; align-items:center; justify-content:center; z-index:60; }\n  .notes-modal { width: min(860px, 96%); max-height: 90vh; overflow:auto; background: var(--surface,#fff); border-radius:8px; padding:1rem; }\n  header { display:flex; justify-content:space-between; align-items:center; }\n  .notes-list { margin-top: 0.75rem; }\n  .note-item { border:1px solid rgba(0,0,0,0.05); padding:0.5rem; border-radius:6px; margin-bottom:0.5rem; }\n  .note-item .meta { color: var(--muted,#666); font-size:0.85rem; }\n  .note-item .content { white-space:pre-wrap; margin:0.5rem 0; }\n  .actions { display:flex; gap:0.5rem; }\n  .primary { background:#2563eb; color:#fff; border:none; padding:0.5rem 0.75rem; border-radius:6px }\n  .close { background:transparent; border:none; font-size:1.1rem }\n</style>\n"
						}
					},
					{
						"log": [
							"info",
							[
								{ "elements": [], "content": "Safe fix: Use " },
								{ "elements": ["Emphasis"], "content": "const" },
								{ "elements": [], "content": " instead." }
							]
						]
					},
					{
						"diff": {
							"dictionary": "/* global setTimeout */\nimport NoteEditorModal from \"./NoteEditorModal.svelte\";\nimport NoteContent from \"./NoteContent.svelte\";\nlet notes: Note[] = $state([] as Note[]);\nlet editing: Note | null = $state(null);letconst dialogRef: HTMLElement | null = $state(null);\nlet lastCreatedNoteId: string | null = $state(null);\n\twindow.removeEventListener(\"notes:changed\", onNotesChanged as EventListener),\n);\n",
							"ops": [
								{ "diffOp": { "equal": { "range": [0, 127] } } },
								{ "equalLines": { "line_count": 29 } },
								{ "diffOp": { "equal": { "range": [127, 210] } } },
								{ "diffOp": { "equal": { "range": [127, 128] } } },
								{ "diffOp": { "delete": { "range": [210, 213] } } },
								{ "diffOp": { "insert": { "range": [213, 218] } } },
								{ "diffOp": { "equal": { "range": [218, 219] } } },
								{ "diffOp": { "equal": { "range": [219, 318] } } },
								{ "equalLines": { "line_count": 84 } },
								{ "diffOp": { "equal": { "range": [318, 400] } } }
							]
						}
					}
				]
			},
			"verboseAdvices": { "advices": [] },
			"location": {
				"path": { "file": "src\\lib\\components\\NoteModal.svelte" },
				"span": [1009, 1012],
				"sourceCode": "<script lang=\"ts\">\n/* global setTimeout */\nimport NoteEditorModal from \"./NoteEditorModal.svelte\";\nimport NoteContent from \"./NoteContent.svelte\";\nimport NoteView from \"./NoteView.svelte\";\nimport MoreMenu from \"./MoreMenu.svelte\";\nimport { modalStore } from \"../stores/modalStore\";\nimport type { Note } from \"../../types\";\nimport { createEventDispatcher } from \"svelte\";\n\ninterface Props {\n\tcardId: string;\n\tcardTitle?: string;\n\tapi?: {\n\t\tgetNotes(cardId: string): Promise<Note[]>;\n\t\tcreateNote(payload: {\n\t\t\tcardId: string;\n\t\t\ttitle: string;\n\t\t\tcontent: string;\n\t\t\ttags: string[];\n\t\t}): Promise<Note>;\n\t\tupdateNote(payload: {\n\t\t\tid: string;\n\t\t\ttitle?: string;\n\t\t\tcontent?: string;\n\t\t\ttags?: string[];\n\t\t}): Promise<Note>;\n\t\tdeleteNote(id: string): Promise<Note>;\n\t} | null;\n\tconfirmFn?: (message: string) => boolean;\n}\nconst { cardId, cardTitle, api, confirmFn }: Props = $props();\nconst dispatch = createEventDispatcher();\n\nlet notes: Note[] = $state([] as Note[]);\nlet editing: Note | null = $state(null);\nlet dialogRef: HTMLElement | null = $state(null);\nlet lastCreatedNoteId: string | null = $state(null);\n\nfunction resolveApi() {\n\tif (api) return api;\n\tif (\n\t\ttypeof window !== \"undefined\" &&\n\t\t(window as unknown as { api?: Props[\"api\"] }).api\n\t)\n\t\treturn (window as unknown as { api?: Props[\"api\"] }).api;\n\treturn null;\n}\n\nasync function load() {\n\tif (!cardId) return;\n\tconst resolved = resolveApi();\n\tif (!resolved) return;\n\tnotes = await resolved.getNotes(cardId);\n}\n\nimport { onMount } from \"svelte\";\n\nonMount(() => {\n\tload();\n\tsetTimeout(() => dialogRef?.focus(), 0);\n});\n\nfunction openNew() {\n\tconst resolved = resolveApi();\n\t// push the editor onto the modal stack so the list remains mounted underneath\n\tmodalStore.push(NoteEditorModal, { cardId, note: null, api: resolved });\n}\n\nfunction editNote(n: Note) {\n\tconst resolved = resolveApi();\n\tmodalStore.push(NoteEditorModal, { cardId, note: n, api: resolved });\n}\n\nfunction openView(n: Note) {\n\tconst resolved = resolveApi();\n\tmodalStore.push(NoteView, { cardId, note: n, api: resolved });\n}\n\n// NoteEditor will perform saves itself and dispatch a global event when notes change.\n\nasync function handleDelete(id: string) {\n\tconst resolvedConfirm =\n\t\tconfirmFn ??\n\t\t(typeof window !== \"undefined\" ? window.confirm.bind(window) : () => true);\n\tif (!resolvedConfirm(\"Delete this note?\")) return;\n\tconst resolved = resolveApi();\n\tif (!resolved) return;\n\tawait resolved.deleteNote(id);\n\tawait load();\n}\n\nfunction close() {\n\tdispatch(\"close\");\n}\n\n// listen for global note-change events so the list refreshes when the editor creates/updates\nfunction onNotesChanged(e: Event) {\n\tconst detail = (e as CustomEvent).detail as { cardId?: string } | undefined;\n\tif (!detail || detail.cardId !== cardId) return;\n\t// remember created note id so we can focus after reload\n\tlastCreatedNoteId = detail.noteId || null;\n\tload().then(() => {\n\t\tif (lastCreatedNoteId) {\n\t\t\t// focus the newly created note element if present\n\t\t\tconst el = document.getElementById(\n\t\t\t\t`note-${lastCreatedNoteId}`,\n\t\t\t) as HTMLElement | null;\n\t\t\tif (el && typeof el.focus === \"function\") {\n\t\t\t\tsetTimeout(() => el.focus(), 0);\n\t\t\t}\n\t\t\tlastCreatedNoteId = null;\n\t\t}\n\t});\n}\n\nimport { onDestroy } from \"svelte\";\nonMount(() => {\n\tload();\n\tsetTimeout(() => dialogRef?.focus(), 0);\n\twindow.addEventListener(\"notes:changed\", onNotesChanged as EventListener);\n});\nonDestroy(() =>\n\twindow.removeEventListener(\"notes:changed\", onNotesChanged as EventListener),\n);\n</script>\n\n  <div class=\"notes-modal-backdrop\" role=\"dialog\" aria-modal=\"true\" tabindex=\"-1\" bind:this={dialogRef}>\n    <div class=\"notes-modal\">\n      <header>\n        <h3>Notes for {cardTitle || 'Card'}</h3>\n        <button\n          type=\"button\"\n          class=\"close\"\n          onclick={close}\n          aria-label={\"Close notes for \" + (cardTitle || 'card')}\n          title={\"Close notes\"}\n        >\n          \n        </button>\n      </header>\n\n      <div class=\"notes-list\">\n        {#if notes.length === 0}\n          <div class=\"empty\">No notes yet. Click \"New Note\" to add one.</div>\n        {:else}\n          <ul class=\"notes\" role=\"list\">\n            {#each notes as n}\n              <li>\n                <div class=\"note-item\">\n                    <button id={\"note-\" + n.id} type=\"button\" class=\"note-open\" onclick={() => openView(n)} aria-label={`Open note ${n.title || 'untitled'}`}>\n                    <h4>{n.title || '(untitled)'}</h4>\n                    <div class=\"meta\">{n.tags?.map(t => `#${t}`).join(' ')}</div>\n                    <!-- render markdown content safely -->\n                    <div class=\"content\"><NoteContent markdown={n.content} /></div>\n                  </button>\n                  <div class=\"actions\">\n                    <MoreMenu ariaLabel={`More actions for note ${n.title || 'untitled'}`} on:edit={() => editNote(n)} on:delete={() => handleDelete(n.id)} />\n                  </div>\n                </div>\n              </li>\n            {/each}\n          </ul>\n        {/if}\n      </div>\n\n      <footer>\n        <button type=\"button\" class=\"primary\" onclick={openNew}>New Note</button>\n      </footer>\n    </div>\n  </div>\n\n  <!-- NoteEditorModal instances are pushed onto the modal stack so they're rendered by ModalContainer -->\n\n<style>\n  .notes-modal-backdrop { position: fixed; inset: 0; background: rgba(0,0,0,0.4); display:flex; align-items:center; justify-content:center; z-index:60; }\n  .notes-modal { width: min(860px, 96%); max-height: 90vh; overflow:auto; background: var(--surface,#fff); border-radius:8px; padding:1rem; }\n  header { display:flex; justify-content:space-between; align-items:center; }\n  .notes-list { margin-top: 0.75rem; }\n  .note-item { border:1px solid rgba(0,0,0,0.05); padding:0.5rem; border-radius:6px; margin-bottom:0.5rem; }\n  .note-item .meta { color: var(--muted,#666); font-size:0.85rem; }\n  .note-item .content { white-space:pre-wrap; margin:0.5rem 0; }\n  .actions { display:flex; gap:0.5rem; }\n  .primary { background:#2563eb; color:#fff; border:none; padding:0.5rem 0.75rem; border-radius:6px }\n  .close { background:transparent; border:none; font-size:1.1rem }\n</style>\n"
			},
			"tags": ["fixable"],
			"source": null
		},
		{
			"category": "lint/correctness/noUnusedVariables",
			"severity": "warning",
			"description": "This function openNew is unused.",
			"message": [
				{ "elements": [], "content": "This function " },
				{ "elements": ["Emphasis"], "content": "openNew" },
				{ "elements": [], "content": " is unused." }
			],
			"advices": {
				"advices": [
					{
						"log": [
							"info",
							[
								{
									"elements": [],
									"content": "Unused variables are often the result of typos, incomplete refactors, or other sources of bugs."
								}
							]
						]
					},
					{
						"log": [
							"info",
							[
								{
									"elements": [],
									"content": "Unsafe fix: If this is intentional, prepend "
								},
								{ "elements": ["Emphasis"], "content": "openNew" },
								{ "elements": [], "content": " with an underscore." }
							]
						]
					},
					{
						"diff": {
							"dictionary": "/* global setTimeout */\nimport NoteEditorModal from \"./NoteEditorModal.svelte\";\nimport NoteContent from \"./NoteContent.svelte\";});\n\nfunction openNew_openNew() {\n\tconst resolved = resolveApi();\n\t// push the editor onto the modal stack so the list remains mounted underneath\twindow.removeEventListener(\"notes:changed\", onNotesChanged as EventListener),\n);\n",
							"ops": [
								{ "diffOp": { "equal": { "range": [0, 127] } } },
								{ "equalLines": { "line_count": 57 } },
								{ "diffOp": { "equal": { "range": [127, 141] } } },
								{ "diffOp": { "delete": { "range": [141, 148] } } },
								{ "diffOp": { "insert": { "range": [148, 156] } } },
								{ "diffOp": { "equal": { "range": [156, 272] } } },
								{ "equalLines": { "line_count": 57 } },
								{ "diffOp": { "equal": { "range": [272, 354] } } }
							]
						}
					}
				]
			},
			"verboseAdvices": { "advices": [] },
			"location": {
				"path": { "file": "src\\lib\\components\\NoteModal.svelte" },
				"span": [1595, 1602],
				"sourceCode": "<script lang=\"ts\">\n/* global setTimeout */\nimport NoteEditorModal from \"./NoteEditorModal.svelte\";\nimport NoteContent from \"./NoteContent.svelte\";\nimport NoteView from \"./NoteView.svelte\";\nimport MoreMenu from \"./MoreMenu.svelte\";\nimport { modalStore } from \"../stores/modalStore\";\nimport type { Note } from \"../../types\";\nimport { createEventDispatcher } from \"svelte\";\n\ninterface Props {\n\tcardId: string;\n\tcardTitle?: string;\n\tapi?: {\n\t\tgetNotes(cardId: string): Promise<Note[]>;\n\t\tcreateNote(payload: {\n\t\t\tcardId: string;\n\t\t\ttitle: string;\n\t\t\tcontent: string;\n\t\t\ttags: string[];\n\t\t}): Promise<Note>;\n\t\tupdateNote(payload: {\n\t\t\tid: string;\n\t\t\ttitle?: string;\n\t\t\tcontent?: string;\n\t\t\ttags?: string[];\n\t\t}): Promise<Note>;\n\t\tdeleteNote(id: string): Promise<Note>;\n\t} | null;\n\tconfirmFn?: (message: string) => boolean;\n}\nconst { cardId, cardTitle, api, confirmFn }: Props = $props();\nconst dispatch = createEventDispatcher();\n\nlet notes: Note[] = $state([] as Note[]);\nlet editing: Note | null = $state(null);\nlet dialogRef: HTMLElement | null = $state(null);\nlet lastCreatedNoteId: string | null = $state(null);\n\nfunction resolveApi() {\n\tif (api) return api;\n\tif (\n\t\ttypeof window !== \"undefined\" &&\n\t\t(window as unknown as { api?: Props[\"api\"] }).api\n\t)\n\t\treturn (window as unknown as { api?: Props[\"api\"] }).api;\n\treturn null;\n}\n\nasync function load() {\n\tif (!cardId) return;\n\tconst resolved = resolveApi();\n\tif (!resolved) return;\n\tnotes = await resolved.getNotes(cardId);\n}\n\nimport { onMount } from \"svelte\";\n\nonMount(() => {\n\tload();\n\tsetTimeout(() => dialogRef?.focus(), 0);\n});\n\nfunction openNew() {\n\tconst resolved = resolveApi();\n\t// push the editor onto the modal stack so the list remains mounted underneath\n\tmodalStore.push(NoteEditorModal, { cardId, note: null, api: resolved });\n}\n\nfunction editNote(n: Note) {\n\tconst resolved = resolveApi();\n\tmodalStore.push(NoteEditorModal, { cardId, note: n, api: resolved });\n}\n\nfunction openView(n: Note) {\n\tconst resolved = resolveApi();\n\tmodalStore.push(NoteView, { cardId, note: n, api: resolved });\n}\n\n// NoteEditor will perform saves itself and dispatch a global event when notes change.\n\nasync function handleDelete(id: string) {\n\tconst resolvedConfirm =\n\t\tconfirmFn ??\n\t\t(typeof window !== \"undefined\" ? window.confirm.bind(window) : () => true);\n\tif (!resolvedConfirm(\"Delete this note?\")) return;\n\tconst resolved = resolveApi();\n\tif (!resolved) return;\n\tawait resolved.deleteNote(id);\n\tawait load();\n}\n\nfunction close() {\n\tdispatch(\"close\");\n}\n\n// listen for global note-change events so the list refreshes when the editor creates/updates\nfunction onNotesChanged(e: Event) {\n\tconst detail = (e as CustomEvent).detail as { cardId?: string } | undefined;\n\tif (!detail || detail.cardId !== cardId) return;\n\t// remember created note id so we can focus after reload\n\tlastCreatedNoteId = detail.noteId || null;\n\tload().then(() => {\n\t\tif (lastCreatedNoteId) {\n\t\t\t// focus the newly created note element if present\n\t\t\tconst el = document.getElementById(\n\t\t\t\t`note-${lastCreatedNoteId}`,\n\t\t\t) as HTMLElement | null;\n\t\t\tif (el && typeof el.focus === \"function\") {\n\t\t\t\tsetTimeout(() => el.focus(), 0);\n\t\t\t}\n\t\t\tlastCreatedNoteId = null;\n\t\t}\n\t});\n}\n\nimport { onDestroy } from \"svelte\";\nonMount(() => {\n\tload();\n\tsetTimeout(() => dialogRef?.focus(), 0);\n\twindow.addEventListener(\"notes:changed\", onNotesChanged as EventListener);\n});\nonDestroy(() =>\n\twindow.removeEventListener(\"notes:changed\", onNotesChanged as EventListener),\n);\n</script>\n\n  <div class=\"notes-modal-backdrop\" role=\"dialog\" aria-modal=\"true\" tabindex=\"-1\" bind:this={dialogRef}>\n    <div class=\"notes-modal\">\n      <header>\n        <h3>Notes for {cardTitle || 'Card'}</h3>\n        <button\n          type=\"button\"\n          class=\"close\"\n          onclick={close}\n          aria-label={\"Close notes for \" + (cardTitle || 'card')}\n          title={\"Close notes\"}\n        >\n          \n        </button>\n      </header>\n\n      <div class=\"notes-list\">\n        {#if notes.length === 0}\n          <div class=\"empty\">No notes yet. Click \"New Note\" to add one.</div>\n        {:else}\n          <ul class=\"notes\" role=\"list\">\n            {#each notes as n}\n              <li>\n                <div class=\"note-item\">\n                    <button id={\"note-\" + n.id} type=\"button\" class=\"note-open\" onclick={() => openView(n)} aria-label={`Open note ${n.title || 'untitled'}`}>\n                    <h4>{n.title || '(untitled)'}</h4>\n                    <div class=\"meta\">{n.tags?.map(t => `#${t}`).join(' ')}</div>\n                    <!-- render markdown content safely -->\n                    <div class=\"content\"><NoteContent markdown={n.content} /></div>\n                  </button>\n                  <div class=\"actions\">\n                    <MoreMenu ariaLabel={`More actions for note ${n.title || 'untitled'}`} on:edit={() => editNote(n)} on:delete={() => handleDelete(n.id)} />\n                  </div>\n                </div>\n              </li>\n            {/each}\n          </ul>\n        {/if}\n      </div>\n\n      <footer>\n        <button type=\"button\" class=\"primary\" onclick={openNew}>New Note</button>\n      </footer>\n    </div>\n  </div>\n\n  <!-- NoteEditorModal instances are pushed onto the modal stack so they're rendered by ModalContainer -->\n\n<style>\n  .notes-modal-backdrop { position: fixed; inset: 0; background: rgba(0,0,0,0.4); display:flex; align-items:center; justify-content:center; z-index:60; }\n  .notes-modal { width: min(860px, 96%); max-height: 90vh; overflow:auto; background: var(--surface,#fff); border-radius:8px; padding:1rem; }\n  header { display:flex; justify-content:space-between; align-items:center; }\n  .notes-list { margin-top: 0.75rem; }\n  .note-item { border:1px solid rgba(0,0,0,0.05); padding:0.5rem; border-radius:6px; margin-bottom:0.5rem; }\n  .note-item .meta { color: var(--muted,#666); font-size:0.85rem; }\n  .note-item .content { white-space:pre-wrap; margin:0.5rem 0; }\n  .actions { display:flex; gap:0.5rem; }\n  .primary { background:#2563eb; color:#fff; border:none; padding:0.5rem 0.75rem; border-radius:6px }\n  .close { background:transparent; border:none; font-size:1.1rem }\n</style>\n"
			},
			"tags": ["fixable"],
			"source": null
		},
		{
			"category": "lint/correctness/noUnusedVariables",
			"severity": "warning",
			"description": "This function editNote is unused.",
			"message": [
				{ "elements": [], "content": "This function " },
				{ "elements": ["Emphasis"], "content": "editNote" },
				{ "elements": [], "content": " is unused." }
			],
			"advices": {
				"advices": [
					{
						"log": [
							"info",
							[
								{
									"elements": [],
									"content": "Unused variables are often the result of typos, incomplete refactors, or other sources of bugs."
								}
							]
						]
					},
					{
						"log": [
							"info",
							[
								{
									"elements": [],
									"content": "Unsafe fix: If this is intentional, prepend "
								},
								{ "elements": ["Emphasis"], "content": "editNote" },
								{ "elements": [], "content": " with an underscore." }
							]
						]
					},
					{
						"diff": {
							"dictionary": "/* global setTimeout */\nimport NoteEditorModal from \"./NoteEditorModal.svelte\";\nimport NoteContent from \"./NoteContent.svelte\";}\n\nfunction editNote_editNote(n: Note) {\n\tconst resolved = resolveApi();\n\tmodalStore.push(NoteEditorModal, { cardId, note: n, api: resolved });\twindow.removeEventListener(\"notes:changed\", onNotesChanged as EventListener),\n);\n",
							"ops": [
								{ "diffOp": { "equal": { "range": [0, 127] } } },
								{ "equalLines": { "line_count": 63 } },
								{ "diffOp": { "equal": { "range": [127, 139] } } },
								{ "diffOp": { "delete": { "range": [139, 147] } } },
								{ "diffOp": { "insert": { "range": [147, 156] } } },
								{ "diffOp": { "equal": { "range": [156, 270] } } },
								{ "equalLines": { "line_count": 51 } },
								{ "diffOp": { "equal": { "range": [270, 352] } } }
							]
						}
					}
				]
			},
			"verboseAdvices": { "advices": [] },
			"location": {
				"path": { "file": "src\\lib\\components\\NoteModal.svelte" },
				"span": [1805, 1813],
				"sourceCode": "<script lang=\"ts\">\n/* global setTimeout */\nimport NoteEditorModal from \"./NoteEditorModal.svelte\";\nimport NoteContent from \"./NoteContent.svelte\";\nimport NoteView from \"./NoteView.svelte\";\nimport MoreMenu from \"./MoreMenu.svelte\";\nimport { modalStore } from \"../stores/modalStore\";\nimport type { Note } from \"../../types\";\nimport { createEventDispatcher } from \"svelte\";\n\ninterface Props {\n\tcardId: string;\n\tcardTitle?: string;\n\tapi?: {\n\t\tgetNotes(cardId: string): Promise<Note[]>;\n\t\tcreateNote(payload: {\n\t\t\tcardId: string;\n\t\t\ttitle: string;\n\t\t\tcontent: string;\n\t\t\ttags: string[];\n\t\t}): Promise<Note>;\n\t\tupdateNote(payload: {\n\t\t\tid: string;\n\t\t\ttitle?: string;\n\t\t\tcontent?: string;\n\t\t\ttags?: string[];\n\t\t}): Promise<Note>;\n\t\tdeleteNote(id: string): Promise<Note>;\n\t} | null;\n\tconfirmFn?: (message: string) => boolean;\n}\nconst { cardId, cardTitle, api, confirmFn }: Props = $props();\nconst dispatch = createEventDispatcher();\n\nlet notes: Note[] = $state([] as Note[]);\nlet editing: Note | null = $state(null);\nlet dialogRef: HTMLElement | null = $state(null);\nlet lastCreatedNoteId: string | null = $state(null);\n\nfunction resolveApi() {\n\tif (api) return api;\n\tif (\n\t\ttypeof window !== \"undefined\" &&\n\t\t(window as unknown as { api?: Props[\"api\"] }).api\n\t)\n\t\treturn (window as unknown as { api?: Props[\"api\"] }).api;\n\treturn null;\n}\n\nasync function load() {\n\tif (!cardId) return;\n\tconst resolved = resolveApi();\n\tif (!resolved) return;\n\tnotes = await resolved.getNotes(cardId);\n}\n\nimport { onMount } from \"svelte\";\n\nonMount(() => {\n\tload();\n\tsetTimeout(() => dialogRef?.focus(), 0);\n});\n\nfunction openNew() {\n\tconst resolved = resolveApi();\n\t// push the editor onto the modal stack so the list remains mounted underneath\n\tmodalStore.push(NoteEditorModal, { cardId, note: null, api: resolved });\n}\n\nfunction editNote(n: Note) {\n\tconst resolved = resolveApi();\n\tmodalStore.push(NoteEditorModal, { cardId, note: n, api: resolved });\n}\n\nfunction openView(n: Note) {\n\tconst resolved = resolveApi();\n\tmodalStore.push(NoteView, { cardId, note: n, api: resolved });\n}\n\n// NoteEditor will perform saves itself and dispatch a global event when notes change.\n\nasync function handleDelete(id: string) {\n\tconst resolvedConfirm =\n\t\tconfirmFn ??\n\t\t(typeof window !== \"undefined\" ? window.confirm.bind(window) : () => true);\n\tif (!resolvedConfirm(\"Delete this note?\")) return;\n\tconst resolved = resolveApi();\n\tif (!resolved) return;\n\tawait resolved.deleteNote(id);\n\tawait load();\n}\n\nfunction close() {\n\tdispatch(\"close\");\n}\n\n// listen for global note-change events so the list refreshes when the editor creates/updates\nfunction onNotesChanged(e: Event) {\n\tconst detail = (e as CustomEvent).detail as { cardId?: string } | undefined;\n\tif (!detail || detail.cardId !== cardId) return;\n\t// remember created note id so we can focus after reload\n\tlastCreatedNoteId = detail.noteId || null;\n\tload().then(() => {\n\t\tif (lastCreatedNoteId) {\n\t\t\t// focus the newly created note element if present\n\t\t\tconst el = document.getElementById(\n\t\t\t\t`note-${lastCreatedNoteId}`,\n\t\t\t) as HTMLElement | null;\n\t\t\tif (el && typeof el.focus === \"function\") {\n\t\t\t\tsetTimeout(() => el.focus(), 0);\n\t\t\t}\n\t\t\tlastCreatedNoteId = null;\n\t\t}\n\t});\n}\n\nimport { onDestroy } from \"svelte\";\nonMount(() => {\n\tload();\n\tsetTimeout(() => dialogRef?.focus(), 0);\n\twindow.addEventListener(\"notes:changed\", onNotesChanged as EventListener);\n});\nonDestroy(() =>\n\twindow.removeEventListener(\"notes:changed\", onNotesChanged as EventListener),\n);\n</script>\n\n  <div class=\"notes-modal-backdrop\" role=\"dialog\" aria-modal=\"true\" tabindex=\"-1\" bind:this={dialogRef}>\n    <div class=\"notes-modal\">\n      <header>\n        <h3>Notes for {cardTitle || 'Card'}</h3>\n        <button\n          type=\"button\"\n          class=\"close\"\n          onclick={close}\n          aria-label={\"Close notes for \" + (cardTitle || 'card')}\n          title={\"Close notes\"}\n        >\n          \n        </button>\n      </header>\n\n      <div class=\"notes-list\">\n        {#if notes.length === 0}\n          <div class=\"empty\">No notes yet. Click \"New Note\" to add one.</div>\n        {:else}\n          <ul class=\"notes\" role=\"list\">\n            {#each notes as n}\n              <li>\n                <div class=\"note-item\">\n                    <button id={\"note-\" + n.id} type=\"button\" class=\"note-open\" onclick={() => openView(n)} aria-label={`Open note ${n.title || 'untitled'}`}>\n                    <h4>{n.title || '(untitled)'}</h4>\n                    <div class=\"meta\">{n.tags?.map(t => `#${t}`).join(' ')}</div>\n                    <!-- render markdown content safely -->\n                    <div class=\"content\"><NoteContent markdown={n.content} /></div>\n                  </button>\n                  <div class=\"actions\">\n                    <MoreMenu ariaLabel={`More actions for note ${n.title || 'untitled'}`} on:edit={() => editNote(n)} on:delete={() => handleDelete(n.id)} />\n                  </div>\n                </div>\n              </li>\n            {/each}\n          </ul>\n        {/if}\n      </div>\n\n      <footer>\n        <button type=\"button\" class=\"primary\" onclick={openNew}>New Note</button>\n      </footer>\n    </div>\n  </div>\n\n  <!-- NoteEditorModal instances are pushed onto the modal stack so they're rendered by ModalContainer -->\n\n<style>\n  .notes-modal-backdrop { position: fixed; inset: 0; background: rgba(0,0,0,0.4); display:flex; align-items:center; justify-content:center; z-index:60; }\n  .notes-modal { width: min(860px, 96%); max-height: 90vh; overflow:auto; background: var(--surface,#fff); border-radius:8px; padding:1rem; }\n  header { display:flex; justify-content:space-between; align-items:center; }\n  .notes-list { margin-top: 0.75rem; }\n  .note-item { border:1px solid rgba(0,0,0,0.05); padding:0.5rem; border-radius:6px; margin-bottom:0.5rem; }\n  .note-item .meta { color: var(--muted,#666); font-size:0.85rem; }\n  .note-item .content { white-space:pre-wrap; margin:0.5rem 0; }\n  .actions { display:flex; gap:0.5rem; }\n  .primary { background:#2563eb; color:#fff; border:none; padding:0.5rem 0.75rem; border-radius:6px }\n  .close { background:transparent; border:none; font-size:1.1rem }\n</style>\n"
			},
			"tags": ["fixable"],
			"source": null
		},
		{
			"category": "lint/correctness/noUnusedVariables",
			"severity": "warning",
			"description": "This function openView is unused.",
			"message": [
				{ "elements": [], "content": "This function " },
				{ "elements": ["Emphasis"], "content": "openView" },
				{ "elements": [], "content": " is unused." }
			],
			"advices": {
				"advices": [
					{
						"log": [
							"info",
							[
								{
									"elements": [],
									"content": "Unused variables are often the result of typos, incomplete refactors, or other sources of bugs."
								}
							]
						]
					},
					{
						"log": [
							"info",
							[
								{
									"elements": [],
									"content": "Unsafe fix: If this is intentional, prepend "
								},
								{ "elements": ["Emphasis"], "content": "openView" },
								{ "elements": [], "content": " with an underscore." }
							]
						]
					},
					{
						"diff": {
							"dictionary": "/* global setTimeout */\nimport NoteEditorModal from \"./NoteEditorModal.svelte\";\nimport NoteContent from \"./NoteContent.svelte\";}\n\nfunction openView_openView(n: Note) {\n\tconst resolved = resolveApi();\n\tmodalStore.push(NoteView, { cardId, note: n, api: resolved });\twindow.removeEventListener(\"notes:changed\", onNotesChanged as EventListener),\n);\n",
							"ops": [
								{ "diffOp": { "equal": { "range": [0, 127] } } },
								{ "equalLines": { "line_count": 68 } },
								{ "diffOp": { "equal": { "range": [127, 139] } } },
								{ "diffOp": { "delete": { "range": [139, 147] } } },
								{ "diffOp": { "insert": { "range": [147, 156] } } },
								{ "diffOp": { "equal": { "range": [156, 263] } } },
								{ "equalLines": { "line_count": 46 } },
								{ "diffOp": { "equal": { "range": [263, 345] } } }
							]
						}
					}
				]
			},
			"verboseAdvices": { "advices": [] },
			"location": {
				"path": { "file": "src\\lib\\components\\NoteModal.svelte" },
				"span": [1940, 1948],
				"sourceCode": "<script lang=\"ts\">\n/* global setTimeout */\nimport NoteEditorModal from \"./NoteEditorModal.svelte\";\nimport NoteContent from \"./NoteContent.svelte\";\nimport NoteView from \"./NoteView.svelte\";\nimport MoreMenu from \"./MoreMenu.svelte\";\nimport { modalStore } from \"../stores/modalStore\";\nimport type { Note } from \"../../types\";\nimport { createEventDispatcher } from \"svelte\";\n\ninterface Props {\n\tcardId: string;\n\tcardTitle?: string;\n\tapi?: {\n\t\tgetNotes(cardId: string): Promise<Note[]>;\n\t\tcreateNote(payload: {\n\t\t\tcardId: string;\n\t\t\ttitle: string;\n\t\t\tcontent: string;\n\t\t\ttags: string[];\n\t\t}): Promise<Note>;\n\t\tupdateNote(payload: {\n\t\t\tid: string;\n\t\t\ttitle?: string;\n\t\t\tcontent?: string;\n\t\t\ttags?: string[];\n\t\t}): Promise<Note>;\n\t\tdeleteNote(id: string): Promise<Note>;\n\t} | null;\n\tconfirmFn?: (message: string) => boolean;\n}\nconst { cardId, cardTitle, api, confirmFn }: Props = $props();\nconst dispatch = createEventDispatcher();\n\nlet notes: Note[] = $state([] as Note[]);\nlet editing: Note | null = $state(null);\nlet dialogRef: HTMLElement | null = $state(null);\nlet lastCreatedNoteId: string | null = $state(null);\n\nfunction resolveApi() {\n\tif (api) return api;\n\tif (\n\t\ttypeof window !== \"undefined\" &&\n\t\t(window as unknown as { api?: Props[\"api\"] }).api\n\t)\n\t\treturn (window as unknown as { api?: Props[\"api\"] }).api;\n\treturn null;\n}\n\nasync function load() {\n\tif (!cardId) return;\n\tconst resolved = resolveApi();\n\tif (!resolved) return;\n\tnotes = await resolved.getNotes(cardId);\n}\n\nimport { onMount } from \"svelte\";\n\nonMount(() => {\n\tload();\n\tsetTimeout(() => dialogRef?.focus(), 0);\n});\n\nfunction openNew() {\n\tconst resolved = resolveApi();\n\t// push the editor onto the modal stack so the list remains mounted underneath\n\tmodalStore.push(NoteEditorModal, { cardId, note: null, api: resolved });\n}\n\nfunction editNote(n: Note) {\n\tconst resolved = resolveApi();\n\tmodalStore.push(NoteEditorModal, { cardId, note: n, api: resolved });\n}\n\nfunction openView(n: Note) {\n\tconst resolved = resolveApi();\n\tmodalStore.push(NoteView, { cardId, note: n, api: resolved });\n}\n\n// NoteEditor will perform saves itself and dispatch a global event when notes change.\n\nasync function handleDelete(id: string) {\n\tconst resolvedConfirm =\n\t\tconfirmFn ??\n\t\t(typeof window !== \"undefined\" ? window.confirm.bind(window) : () => true);\n\tif (!resolvedConfirm(\"Delete this note?\")) return;\n\tconst resolved = resolveApi();\n\tif (!resolved) return;\n\tawait resolved.deleteNote(id);\n\tawait load();\n}\n\nfunction close() {\n\tdispatch(\"close\");\n}\n\n// listen for global note-change events so the list refreshes when the editor creates/updates\nfunction onNotesChanged(e: Event) {\n\tconst detail = (e as CustomEvent).detail as { cardId?: string } | undefined;\n\tif (!detail || detail.cardId !== cardId) return;\n\t// remember created note id so we can focus after reload\n\tlastCreatedNoteId = detail.noteId || null;\n\tload().then(() => {\n\t\tif (lastCreatedNoteId) {\n\t\t\t// focus the newly created note element if present\n\t\t\tconst el = document.getElementById(\n\t\t\t\t`note-${lastCreatedNoteId}`,\n\t\t\t) as HTMLElement | null;\n\t\t\tif (el && typeof el.focus === \"function\") {\n\t\t\t\tsetTimeout(() => el.focus(), 0);\n\t\t\t}\n\t\t\tlastCreatedNoteId = null;\n\t\t}\n\t});\n}\n\nimport { onDestroy } from \"svelte\";\nonMount(() => {\n\tload();\n\tsetTimeout(() => dialogRef?.focus(), 0);\n\twindow.addEventListener(\"notes:changed\", onNotesChanged as EventListener);\n});\nonDestroy(() =>\n\twindow.removeEventListener(\"notes:changed\", onNotesChanged as EventListener),\n);\n</script>\n\n  <div class=\"notes-modal-backdrop\" role=\"dialog\" aria-modal=\"true\" tabindex=\"-1\" bind:this={dialogRef}>\n    <div class=\"notes-modal\">\n      <header>\n        <h3>Notes for {cardTitle || 'Card'}</h3>\n        <button\n          type=\"button\"\n          class=\"close\"\n          onclick={close}\n          aria-label={\"Close notes for \" + (cardTitle || 'card')}\n          title={\"Close notes\"}\n        >\n          \n        </button>\n      </header>\n\n      <div class=\"notes-list\">\n        {#if notes.length === 0}\n          <div class=\"empty\">No notes yet. Click \"New Note\" to add one.</div>\n        {:else}\n          <ul class=\"notes\" role=\"list\">\n            {#each notes as n}\n              <li>\n                <div class=\"note-item\">\n                    <button id={\"note-\" + n.id} type=\"button\" class=\"note-open\" onclick={() => openView(n)} aria-label={`Open note ${n.title || 'untitled'}`}>\n                    <h4>{n.title || '(untitled)'}</h4>\n                    <div class=\"meta\">{n.tags?.map(t => `#${t}`).join(' ')}</div>\n                    <!-- render markdown content safely -->\n                    <div class=\"content\"><NoteContent markdown={n.content} /></div>\n                  </button>\n                  <div class=\"actions\">\n                    <MoreMenu ariaLabel={`More actions for note ${n.title || 'untitled'}`} on:edit={() => editNote(n)} on:delete={() => handleDelete(n.id)} />\n                  </div>\n                </div>\n              </li>\n            {/each}\n          </ul>\n        {/if}\n      </div>\n\n      <footer>\n        <button type=\"button\" class=\"primary\" onclick={openNew}>New Note</button>\n      </footer>\n    </div>\n  </div>\n\n  <!-- NoteEditorModal instances are pushed onto the modal stack so they're rendered by ModalContainer -->\n\n<style>\n  .notes-modal-backdrop { position: fixed; inset: 0; background: rgba(0,0,0,0.4); display:flex; align-items:center; justify-content:center; z-index:60; }\n  .notes-modal { width: min(860px, 96%); max-height: 90vh; overflow:auto; background: var(--surface,#fff); border-radius:8px; padding:1rem; }\n  header { display:flex; justify-content:space-between; align-items:center; }\n  .notes-list { margin-top: 0.75rem; }\n  .note-item { border:1px solid rgba(0,0,0,0.05); padding:0.5rem; border-radius:6px; margin-bottom:0.5rem; }\n  .note-item .meta { color: var(--muted,#666); font-size:0.85rem; }\n  .note-item .content { white-space:pre-wrap; margin:0.5rem 0; }\n  .actions { display:flex; gap:0.5rem; }\n  .primary { background:#2563eb; color:#fff; border:none; padding:0.5rem 0.75rem; border-radius:6px }\n  .close { background:transparent; border:none; font-size:1.1rem }\n</style>\n"
			},
			"tags": ["fixable"],
			"source": null
		},
		{
			"category": "lint/correctness/noUnusedVariables",
			"severity": "warning",
			"description": "This function handleDelete is unused.",
			"message": [
				{ "elements": [], "content": "This function " },
				{ "elements": ["Emphasis"], "content": "handleDelete" },
				{ "elements": [], "content": " is unused." }
			],
			"advices": {
				"advices": [
					{
						"log": [
							"info",
							[
								{
									"elements": [],
									"content": "Unused variables are often the result of typos, incomplete refactors, or other sources of bugs."
								}
							]
						]
					},
					{
						"log": [
							"info",
							[
								{
									"elements": [],
									"content": "Unsafe fix: If this is intentional, prepend "
								},
								{ "elements": ["Emphasis"], "content": "handleDelete" },
								{ "elements": [], "content": " with an underscore." }
							]
						]
					},
					{
						"diff": {
							"dictionary": "/* global setTimeout */\nimport NoteEditorModal from \"./NoteEditorModal.svelte\";\nimport NoteContent from \"./NoteContent.svelte\";// NoteEditor will perform saves itself and dispatch a global event when notes change.\n\nasync function handleDelete_handleDelete(id: string) {\n\tconst resolvedConfirm =\n\t\tconfirmFn ??\twindow.removeEventListener(\"notes:changed\", onNotesChanged as EventListener),\n);\n",
							"ops": [
								{ "diffOp": { "equal": { "range": [0, 127] } } },
								{ "equalLines": { "line_count": 75 } },
								{ "diffOp": { "equal": { "range": [127, 230] } } },
								{ "diffOp": { "delete": { "range": [230, 242] } } },
								{ "diffOp": { "insert": { "range": [242, 255] } } },
								{ "diffOp": { "equal": { "range": [255, 309] } } },
								{ "equalLines": { "line_count": 39 } },
								{ "diffOp": { "equal": { "range": [309, 391] } } }
							]
						}
					}
				]
			},
			"verboseAdvices": { "advices": [] },
			"location": {
				"path": { "file": "src\\lib\\components\\NoteModal.svelte" },
				"span": [2162, 2174],
				"sourceCode": "<script lang=\"ts\">\n/* global setTimeout */\nimport NoteEditorModal from \"./NoteEditorModal.svelte\";\nimport NoteContent from \"./NoteContent.svelte\";\nimport NoteView from \"./NoteView.svelte\";\nimport MoreMenu from \"./MoreMenu.svelte\";\nimport { modalStore } from \"../stores/modalStore\";\nimport type { Note } from \"../../types\";\nimport { createEventDispatcher } from \"svelte\";\n\ninterface Props {\n\tcardId: string;\n\tcardTitle?: string;\n\tapi?: {\n\t\tgetNotes(cardId: string): Promise<Note[]>;\n\t\tcreateNote(payload: {\n\t\t\tcardId: string;\n\t\t\ttitle: string;\n\t\t\tcontent: string;\n\t\t\ttags: string[];\n\t\t}): Promise<Note>;\n\t\tupdateNote(payload: {\n\t\t\tid: string;\n\t\t\ttitle?: string;\n\t\t\tcontent?: string;\n\t\t\ttags?: string[];\n\t\t}): Promise<Note>;\n\t\tdeleteNote(id: string): Promise<Note>;\n\t} | null;\n\tconfirmFn?: (message: string) => boolean;\n}\nconst { cardId, cardTitle, api, confirmFn }: Props = $props();\nconst dispatch = createEventDispatcher();\n\nlet notes: Note[] = $state([] as Note[]);\nlet editing: Note | null = $state(null);\nlet dialogRef: HTMLElement | null = $state(null);\nlet lastCreatedNoteId: string | null = $state(null);\n\nfunction resolveApi() {\n\tif (api) return api;\n\tif (\n\t\ttypeof window !== \"undefined\" &&\n\t\t(window as unknown as { api?: Props[\"api\"] }).api\n\t)\n\t\treturn (window as unknown as { api?: Props[\"api\"] }).api;\n\treturn null;\n}\n\nasync function load() {\n\tif (!cardId) return;\n\tconst resolved = resolveApi();\n\tif (!resolved) return;\n\tnotes = await resolved.getNotes(cardId);\n}\n\nimport { onMount } from \"svelte\";\n\nonMount(() => {\n\tload();\n\tsetTimeout(() => dialogRef?.focus(), 0);\n});\n\nfunction openNew() {\n\tconst resolved = resolveApi();\n\t// push the editor onto the modal stack so the list remains mounted underneath\n\tmodalStore.push(NoteEditorModal, { cardId, note: null, api: resolved });\n}\n\nfunction editNote(n: Note) {\n\tconst resolved = resolveApi();\n\tmodalStore.push(NoteEditorModal, { cardId, note: n, api: resolved });\n}\n\nfunction openView(n: Note) {\n\tconst resolved = resolveApi();\n\tmodalStore.push(NoteView, { cardId, note: n, api: resolved });\n}\n\n// NoteEditor will perform saves itself and dispatch a global event when notes change.\n\nasync function handleDelete(id: string) {\n\tconst resolvedConfirm =\n\t\tconfirmFn ??\n\t\t(typeof window !== \"undefined\" ? window.confirm.bind(window) : () => true);\n\tif (!resolvedConfirm(\"Delete this note?\")) return;\n\tconst resolved = resolveApi();\n\tif (!resolved) return;\n\tawait resolved.deleteNote(id);\n\tawait load();\n}\n\nfunction close() {\n\tdispatch(\"close\");\n}\n\n// listen for global note-change events so the list refreshes when the editor creates/updates\nfunction onNotesChanged(e: Event) {\n\tconst detail = (e as CustomEvent).detail as { cardId?: string } | undefined;\n\tif (!detail || detail.cardId !== cardId) return;\n\t// remember created note id so we can focus after reload\n\tlastCreatedNoteId = detail.noteId || null;\n\tload().then(() => {\n\t\tif (lastCreatedNoteId) {\n\t\t\t// focus the newly created note element if present\n\t\t\tconst el = document.getElementById(\n\t\t\t\t`note-${lastCreatedNoteId}`,\n\t\t\t) as HTMLElement | null;\n\t\t\tif (el && typeof el.focus === \"function\") {\n\t\t\t\tsetTimeout(() => el.focus(), 0);\n\t\t\t}\n\t\t\tlastCreatedNoteId = null;\n\t\t}\n\t});\n}\n\nimport { onDestroy } from \"svelte\";\nonMount(() => {\n\tload();\n\tsetTimeout(() => dialogRef?.focus(), 0);\n\twindow.addEventListener(\"notes:changed\", onNotesChanged as EventListener);\n});\nonDestroy(() =>\n\twindow.removeEventListener(\"notes:changed\", onNotesChanged as EventListener),\n);\n</script>\n\n  <div class=\"notes-modal-backdrop\" role=\"dialog\" aria-modal=\"true\" tabindex=\"-1\" bind:this={dialogRef}>\n    <div class=\"notes-modal\">\n      <header>\n        <h3>Notes for {cardTitle || 'Card'}</h3>\n        <button\n          type=\"button\"\n          class=\"close\"\n          onclick={close}\n          aria-label={\"Close notes for \" + (cardTitle || 'card')}\n          title={\"Close notes\"}\n        >\n          \n        </button>\n      </header>\n\n      <div class=\"notes-list\">\n        {#if notes.length === 0}\n          <div class=\"empty\">No notes yet. Click \"New Note\" to add one.</div>\n        {:else}\n          <ul class=\"notes\" role=\"list\">\n            {#each notes as n}\n              <li>\n                <div class=\"note-item\">\n                    <button id={\"note-\" + n.id} type=\"button\" class=\"note-open\" onclick={() => openView(n)} aria-label={`Open note ${n.title || 'untitled'}`}>\n                    <h4>{n.title || '(untitled)'}</h4>\n                    <div class=\"meta\">{n.tags?.map(t => `#${t}`).join(' ')}</div>\n                    <!-- render markdown content safely -->\n                    <div class=\"content\"><NoteContent markdown={n.content} /></div>\n                  </button>\n                  <div class=\"actions\">\n                    <MoreMenu ariaLabel={`More actions for note ${n.title || 'untitled'}`} on:edit={() => editNote(n)} on:delete={() => handleDelete(n.id)} />\n                  </div>\n                </div>\n              </li>\n            {/each}\n          </ul>\n        {/if}\n      </div>\n\n      <footer>\n        <button type=\"button\" class=\"primary\" onclick={openNew}>New Note</button>\n      </footer>\n    </div>\n  </div>\n\n  <!-- NoteEditorModal instances are pushed onto the modal stack so they're rendered by ModalContainer -->\n\n<style>\n  .notes-modal-backdrop { position: fixed; inset: 0; background: rgba(0,0,0,0.4); display:flex; align-items:center; justify-content:center; z-index:60; }\n  .notes-modal { width: min(860px, 96%); max-height: 90vh; overflow:auto; background: var(--surface,#fff); border-radius:8px; padding:1rem; }\n  header { display:flex; justify-content:space-between; align-items:center; }\n  .notes-list { margin-top: 0.75rem; }\n  .note-item { border:1px solid rgba(0,0,0,0.05); padding:0.5rem; border-radius:6px; margin-bottom:0.5rem; }\n  .note-item .meta { color: var(--muted,#666); font-size:0.85rem; }\n  .note-item .content { white-space:pre-wrap; margin:0.5rem 0; }\n  .actions { display:flex; gap:0.5rem; }\n  .primary { background:#2563eb; color:#fff; border:none; padding:0.5rem 0.75rem; border-radius:6px }\n  .close { background:transparent; border:none; font-size:1.1rem }\n</style>\n"
			},
			"tags": ["fixable"],
			"source": null
		},
		{
			"category": "lint/correctness/noUnusedVariables",
			"severity": "warning",
			"description": "This function close is unused.",
			"message": [
				{ "elements": [], "content": "This function " },
				{ "elements": ["Emphasis"], "content": "close" },
				{ "elements": [], "content": " is unused." }
			],
			"advices": {
				"advices": [
					{
						"log": [
							"info",
							[
								{
									"elements": [],
									"content": "Unused variables are often the result of typos, incomplete refactors, or other sources of bugs."
								}
							]
						]
					},
					{
						"log": [
							"info",
							[
								{
									"elements": [],
									"content": "Unsafe fix: If this is intentional, prepend "
								},
								{ "elements": ["Emphasis"], "content": "close" },
								{ "elements": [], "content": " with an underscore." }
							]
						]
					},
					{
						"diff": {
							"dictionary": "/* global setTimeout */\nimport NoteEditorModal from \"./NoteEditorModal.svelte\";\nimport NoteContent from \"./NoteContent.svelte\";}\n\nfunction close_close() {\n\tdispatch(\"close\");\n}\twindow.removeEventListener(\"notes:changed\", onNotesChanged as EventListener),\n);\n",
							"ops": [
								{ "diffOp": { "equal": { "range": [0, 127] } } },
								{ "equalLines": { "line_count": 86 } },
								{ "diffOp": { "equal": { "range": [127, 139] } } },
								{ "diffOp": { "delete": { "range": [139, 144] } } },
								{ "diffOp": { "insert": { "range": [144, 150] } } },
								{ "diffOp": { "equal": { "range": [150, 176] } } },
								{ "equalLines": { "line_count": 28 } },
								{ "diffOp": { "equal": { "range": [176, 258] } } }
							]
						}
					}
				]
			},
			"verboseAdvices": { "advices": [] },
			"location": {
				"path": { "file": "src\\lib\\components\\NoteModal.svelte" },
				"span": [2474, 2479],
				"sourceCode": "<script lang=\"ts\">\n/* global setTimeout */\nimport NoteEditorModal from \"./NoteEditorModal.svelte\";\nimport NoteContent from \"./NoteContent.svelte\";\nimport NoteView from \"./NoteView.svelte\";\nimport MoreMenu from \"./MoreMenu.svelte\";\nimport { modalStore } from \"../stores/modalStore\";\nimport type { Note } from \"../../types\";\nimport { createEventDispatcher } from \"svelte\";\n\ninterface Props {\n\tcardId: string;\n\tcardTitle?: string;\n\tapi?: {\n\t\tgetNotes(cardId: string): Promise<Note[]>;\n\t\tcreateNote(payload: {\n\t\t\tcardId: string;\n\t\t\ttitle: string;\n\t\t\tcontent: string;\n\t\t\ttags: string[];\n\t\t}): Promise<Note>;\n\t\tupdateNote(payload: {\n\t\t\tid: string;\n\t\t\ttitle?: string;\n\t\t\tcontent?: string;\n\t\t\ttags?: string[];\n\t\t}): Promise<Note>;\n\t\tdeleteNote(id: string): Promise<Note>;\n\t} | null;\n\tconfirmFn?: (message: string) => boolean;\n}\nconst { cardId, cardTitle, api, confirmFn }: Props = $props();\nconst dispatch = createEventDispatcher();\n\nlet notes: Note[] = $state([] as Note[]);\nlet editing: Note | null = $state(null);\nlet dialogRef: HTMLElement | null = $state(null);\nlet lastCreatedNoteId: string | null = $state(null);\n\nfunction resolveApi() {\n\tif (api) return api;\n\tif (\n\t\ttypeof window !== \"undefined\" &&\n\t\t(window as unknown as { api?: Props[\"api\"] }).api\n\t)\n\t\treturn (window as unknown as { api?: Props[\"api\"] }).api;\n\treturn null;\n}\n\nasync function load() {\n\tif (!cardId) return;\n\tconst resolved = resolveApi();\n\tif (!resolved) return;\n\tnotes = await resolved.getNotes(cardId);\n}\n\nimport { onMount } from \"svelte\";\n\nonMount(() => {\n\tload();\n\tsetTimeout(() => dialogRef?.focus(), 0);\n});\n\nfunction openNew() {\n\tconst resolved = resolveApi();\n\t// push the editor onto the modal stack so the list remains mounted underneath\n\tmodalStore.push(NoteEditorModal, { cardId, note: null, api: resolved });\n}\n\nfunction editNote(n: Note) {\n\tconst resolved = resolveApi();\n\tmodalStore.push(NoteEditorModal, { cardId, note: n, api: resolved });\n}\n\nfunction openView(n: Note) {\n\tconst resolved = resolveApi();\n\tmodalStore.push(NoteView, { cardId, note: n, api: resolved });\n}\n\n// NoteEditor will perform saves itself and dispatch a global event when notes change.\n\nasync function handleDelete(id: string) {\n\tconst resolvedConfirm =\n\t\tconfirmFn ??\n\t\t(typeof window !== \"undefined\" ? window.confirm.bind(window) : () => true);\n\tif (!resolvedConfirm(\"Delete this note?\")) return;\n\tconst resolved = resolveApi();\n\tif (!resolved) return;\n\tawait resolved.deleteNote(id);\n\tawait load();\n}\n\nfunction close() {\n\tdispatch(\"close\");\n}\n\n// listen for global note-change events so the list refreshes when the editor creates/updates\nfunction onNotesChanged(e: Event) {\n\tconst detail = (e as CustomEvent).detail as { cardId?: string } | undefined;\n\tif (!detail || detail.cardId !== cardId) return;\n\t// remember created note id so we can focus after reload\n\tlastCreatedNoteId = detail.noteId || null;\n\tload().then(() => {\n\t\tif (lastCreatedNoteId) {\n\t\t\t// focus the newly created note element if present\n\t\t\tconst el = document.getElementById(\n\t\t\t\t`note-${lastCreatedNoteId}`,\n\t\t\t) as HTMLElement | null;\n\t\t\tif (el && typeof el.focus === \"function\") {\n\t\t\t\tsetTimeout(() => el.focus(), 0);\n\t\t\t}\n\t\t\tlastCreatedNoteId = null;\n\t\t}\n\t});\n}\n\nimport { onDestroy } from \"svelte\";\nonMount(() => {\n\tload();\n\tsetTimeout(() => dialogRef?.focus(), 0);\n\twindow.addEventListener(\"notes:changed\", onNotesChanged as EventListener);\n});\nonDestroy(() =>\n\twindow.removeEventListener(\"notes:changed\", onNotesChanged as EventListener),\n);\n</script>\n\n  <div class=\"notes-modal-backdrop\" role=\"dialog\" aria-modal=\"true\" tabindex=\"-1\" bind:this={dialogRef}>\n    <div class=\"notes-modal\">\n      <header>\n        <h3>Notes for {cardTitle || 'Card'}</h3>\n        <button\n          type=\"button\"\n          class=\"close\"\n          onclick={close}\n          aria-label={\"Close notes for \" + (cardTitle || 'card')}\n          title={\"Close notes\"}\n        >\n          \n        </button>\n      </header>\n\n      <div class=\"notes-list\">\n        {#if notes.length === 0}\n          <div class=\"empty\">No notes yet. Click \"New Note\" to add one.</div>\n        {:else}\n          <ul class=\"notes\" role=\"list\">\n            {#each notes as n}\n              <li>\n                <div class=\"note-item\">\n                    <button id={\"note-\" + n.id} type=\"button\" class=\"note-open\" onclick={() => openView(n)} aria-label={`Open note ${n.title || 'untitled'}`}>\n                    <h4>{n.title || '(untitled)'}</h4>\n                    <div class=\"meta\">{n.tags?.map(t => `#${t}`).join(' ')}</div>\n                    <!-- render markdown content safely -->\n                    <div class=\"content\"><NoteContent markdown={n.content} /></div>\n                  </button>\n                  <div class=\"actions\">\n                    <MoreMenu ariaLabel={`More actions for note ${n.title || 'untitled'}`} on:edit={() => editNote(n)} on:delete={() => handleDelete(n.id)} />\n                  </div>\n                </div>\n              </li>\n            {/each}\n          </ul>\n        {/if}\n      </div>\n\n      <footer>\n        <button type=\"button\" class=\"primary\" onclick={openNew}>New Note</button>\n      </footer>\n    </div>\n  </div>\n\n  <!-- NoteEditorModal instances are pushed onto the modal stack so they're rendered by ModalContainer -->\n\n<style>\n  .notes-modal-backdrop { position: fixed; inset: 0; background: rgba(0,0,0,0.4); display:flex; align-items:center; justify-content:center; z-index:60; }\n  .notes-modal { width: min(860px, 96%); max-height: 90vh; overflow:auto; background: var(--surface,#fff); border-radius:8px; padding:1rem; }\n  header { display:flex; justify-content:space-between; align-items:center; }\n  .notes-list { margin-top: 0.75rem; }\n  .note-item { border:1px solid rgba(0,0,0,0.05); padding:0.5rem; border-radius:6px; margin-bottom:0.5rem; }\n  .note-item .meta { color: var(--muted,#666); font-size:0.85rem; }\n  .note-item .content { white-space:pre-wrap; margin:0.5rem 0; }\n  .actions { display:flex; gap:0.5rem; }\n  .primary { background:#2563eb; color:#fff; border:none; padding:0.5rem 0.75rem; border-radius:6px }\n  .close { background:transparent; border:none; font-size:1.1rem }\n</style>\n"
			},
			"tags": ["fixable"],
			"source": null
		},
		{
			"category": "lint/correctness/noUnusedImports",
			"severity": "warning",
			"description": "This import is unused.",
			"message": [
				{ "elements": [], "content": "This " },
				{ "elements": ["Emphasis"], "content": "import" },
				{ "elements": [], "content": " is unused." }
			],
			"advices": {
				"advices": [
					{
						"log": [
							"info",
							[
								{
									"elements": [],
									"content": "Unused imports might be the result of an incomplete refactoring."
								}
							]
						]
					},
					{
						"log": [
							"info",
							[
								{
									"elements": [],
									"content": "Unsafe fix: Remove the unused imports."
								}
							]
						]
					},
					{
						"diff": {
							"dictionary": "/* global setTimeout */\nimport NoteEditorModal from \"./NoteEditorModal.svelte\";\nimport NoteContent from \"./NoteContent.svelte\";\nimport NoteView from \"./NoteView.svelte\";\nimport MoreMenu from \"./MoreMenu.svelte\";\twindow.removeEventListener(\"notes:changed\", onNotesChanged as EventListener),\n);\n",
							"ops": [
								{ "diffOp": { "equal": { "range": [0, 79] } } },
								{ "diffOp": { "delete": { "range": [79, 127] } } },
								{ "diffOp": { "equal": { "range": [127, 211] } } },
								{ "equalLines": { "line_count": 117 } },
								{ "diffOp": { "equal": { "range": [211, 293] } } }
							]
						}
					}
				]
			},
			"verboseAdvices": { "advices": [] },
			"location": {
				"path": { "file": "src\\lib\\components\\NoteModal.svelte" },
				"span": [106, 117],
				"sourceCode": "<script lang=\"ts\">\n/* global setTimeout */\nimport NoteEditorModal from \"./NoteEditorModal.svelte\";\nimport NoteContent from \"./NoteContent.svelte\";\nimport NoteView from \"./NoteView.svelte\";\nimport MoreMenu from \"./MoreMenu.svelte\";\nimport { modalStore } from \"../stores/modalStore\";\nimport type { Note } from \"../../types\";\nimport { createEventDispatcher } from \"svelte\";\n\ninterface Props {\n\tcardId: string;\n\tcardTitle?: string;\n\tapi?: {\n\t\tgetNotes(cardId: string): Promise<Note[]>;\n\t\tcreateNote(payload: {\n\t\t\tcardId: string;\n\t\t\ttitle: string;\n\t\t\tcontent: string;\n\t\t\ttags: string[];\n\t\t}): Promise<Note>;\n\t\tupdateNote(payload: {\n\t\t\tid: string;\n\t\t\ttitle?: string;\n\t\t\tcontent?: string;\n\t\t\ttags?: string[];\n\t\t}): Promise<Note>;\n\t\tdeleteNote(id: string): Promise<Note>;\n\t} | null;\n\tconfirmFn?: (message: string) => boolean;\n}\nconst { cardId, cardTitle, api, confirmFn }: Props = $props();\nconst dispatch = createEventDispatcher();\n\nlet notes: Note[] = $state([] as Note[]);\nlet editing: Note | null = $state(null);\nlet dialogRef: HTMLElement | null = $state(null);\nlet lastCreatedNoteId: string | null = $state(null);\n\nfunction resolveApi() {\n\tif (api) return api;\n\tif (\n\t\ttypeof window !== \"undefined\" &&\n\t\t(window as unknown as { api?: Props[\"api\"] }).api\n\t)\n\t\treturn (window as unknown as { api?: Props[\"api\"] }).api;\n\treturn null;\n}\n\nasync function load() {\n\tif (!cardId) return;\n\tconst resolved = resolveApi();\n\tif (!resolved) return;\n\tnotes = await resolved.getNotes(cardId);\n}\n\nimport { onMount } from \"svelte\";\n\nonMount(() => {\n\tload();\n\tsetTimeout(() => dialogRef?.focus(), 0);\n});\n\nfunction openNew() {\n\tconst resolved = resolveApi();\n\t// push the editor onto the modal stack so the list remains mounted underneath\n\tmodalStore.push(NoteEditorModal, { cardId, note: null, api: resolved });\n}\n\nfunction editNote(n: Note) {\n\tconst resolved = resolveApi();\n\tmodalStore.push(NoteEditorModal, { cardId, note: n, api: resolved });\n}\n\nfunction openView(n: Note) {\n\tconst resolved = resolveApi();\n\tmodalStore.push(NoteView, { cardId, note: n, api: resolved });\n}\n\n// NoteEditor will perform saves itself and dispatch a global event when notes change.\n\nasync function handleDelete(id: string) {\n\tconst resolvedConfirm =\n\t\tconfirmFn ??\n\t\t(typeof window !== \"undefined\" ? window.confirm.bind(window) : () => true);\n\tif (!resolvedConfirm(\"Delete this note?\")) return;\n\tconst resolved = resolveApi();\n\tif (!resolved) return;\n\tawait resolved.deleteNote(id);\n\tawait load();\n}\n\nfunction close() {\n\tdispatch(\"close\");\n}\n\n// listen for global note-change events so the list refreshes when the editor creates/updates\nfunction onNotesChanged(e: Event) {\n\tconst detail = (e as CustomEvent).detail as { cardId?: string } | undefined;\n\tif (!detail || detail.cardId !== cardId) return;\n\t// remember created note id so we can focus after reload\n\tlastCreatedNoteId = detail.noteId || null;\n\tload().then(() => {\n\t\tif (lastCreatedNoteId) {\n\t\t\t// focus the newly created note element if present\n\t\t\tconst el = document.getElementById(\n\t\t\t\t`note-${lastCreatedNoteId}`,\n\t\t\t) as HTMLElement | null;\n\t\t\tif (el && typeof el.focus === \"function\") {\n\t\t\t\tsetTimeout(() => el.focus(), 0);\n\t\t\t}\n\t\t\tlastCreatedNoteId = null;\n\t\t}\n\t});\n}\n\nimport { onDestroy } from \"svelte\";\nonMount(() => {\n\tload();\n\tsetTimeout(() => dialogRef?.focus(), 0);\n\twindow.addEventListener(\"notes:changed\", onNotesChanged as EventListener);\n});\nonDestroy(() =>\n\twindow.removeEventListener(\"notes:changed\", onNotesChanged as EventListener),\n);\n</script>\n\n  <div class=\"notes-modal-backdrop\" role=\"dialog\" aria-modal=\"true\" tabindex=\"-1\" bind:this={dialogRef}>\n    <div class=\"notes-modal\">\n      <header>\n        <h3>Notes for {cardTitle || 'Card'}</h3>\n        <button\n          type=\"button\"\n          class=\"close\"\n          onclick={close}\n          aria-label={\"Close notes for \" + (cardTitle || 'card')}\n          title={\"Close notes\"}\n        >\n          \n        </button>\n      </header>\n\n      <div class=\"notes-list\">\n        {#if notes.length === 0}\n          <div class=\"empty\">No notes yet. Click \"New Note\" to add one.</div>\n        {:else}\n          <ul class=\"notes\" role=\"list\">\n            {#each notes as n}\n              <li>\n                <div class=\"note-item\">\n                    <button id={\"note-\" + n.id} type=\"button\" class=\"note-open\" onclick={() => openView(n)} aria-label={`Open note ${n.title || 'untitled'}`}>\n                    <h4>{n.title || '(untitled)'}</h4>\n                    <div class=\"meta\">{n.tags?.map(t => `#${t}`).join(' ')}</div>\n                    <!-- render markdown content safely -->\n                    <div class=\"content\"><NoteContent markdown={n.content} /></div>\n                  </button>\n                  <div class=\"actions\">\n                    <MoreMenu ariaLabel={`More actions for note ${n.title || 'untitled'}`} on:edit={() => editNote(n)} on:delete={() => handleDelete(n.id)} />\n                  </div>\n                </div>\n              </li>\n            {/each}\n          </ul>\n        {/if}\n      </div>\n\n      <footer>\n        <button type=\"button\" class=\"primary\" onclick={openNew}>New Note</button>\n      </footer>\n    </div>\n  </div>\n\n  <!-- NoteEditorModal instances are pushed onto the modal stack so they're rendered by ModalContainer -->\n\n<style>\n  .notes-modal-backdrop { position: fixed; inset: 0; background: rgba(0,0,0,0.4); display:flex; align-items:center; justify-content:center; z-index:60; }\n  .notes-modal { width: min(860px, 96%); max-height: 90vh; overflow:auto; background: var(--surface,#fff); border-radius:8px; padding:1rem; }\n  header { display:flex; justify-content:space-between; align-items:center; }\n  .notes-list { margin-top: 0.75rem; }\n  .note-item { border:1px solid rgba(0,0,0,0.05); padding:0.5rem; border-radius:6px; margin-bottom:0.5rem; }\n  .note-item .meta { color: var(--muted,#666); font-size:0.85rem; }\n  .note-item .content { white-space:pre-wrap; margin:0.5rem 0; }\n  .actions { display:flex; gap:0.5rem; }\n  .primary { background:#2563eb; color:#fff; border:none; padding:0.5rem 0.75rem; border-radius:6px }\n  .close { background:transparent; border:none; font-size:1.1rem }\n</style>\n"
			},
			"tags": ["fixable"],
			"source": null
		},
		{
			"category": "lint/correctness/noUnusedImports",
			"severity": "warning",
			"description": "This import is unused.",
			"message": [
				{ "elements": [], "content": "This " },
				{ "elements": ["Emphasis"], "content": "import" },
				{ "elements": [], "content": " is unused." }
			],
			"advices": {
				"advices": [
					{
						"log": [
							"info",
							[
								{
									"elements": [],
									"content": "Unused imports might be the result of an incomplete refactoring."
								}
							]
						]
					},
					{
						"log": [
							"info",
							[
								{
									"elements": [],
									"content": "Unsafe fix: Remove the unused imports."
								}
							]
						]
					},
					{
						"diff": {
							"dictionary": "/* global setTimeout */\nimport NoteEditorModal from \"./NoteEditorModal.svelte\";\nimport NoteContent from \"./NoteContent.svelte\";\nimport NoteView from \"./NoteView.svelte\";\nimport MoreMenu from \"./MoreMenu.svelte\";\nimport { modalStore } from \"../stores/modalStore\";\nimport type { Note } from \"../../types\";\twindow.removeEventListener(\"notes:changed\", onNotesChanged as EventListener),\n);\n",
							"ops": [
								{ "diffOp": { "equal": { "range": [0, 169] } } },
								{ "diffOp": { "delete": { "range": [169, 211] } } },
								{ "diffOp": { "equal": { "range": [211, 303] } } },
								{ "equalLines": { "line_count": 115 } },
								{ "diffOp": { "equal": { "range": [303, 385] } } }
							]
						}
					}
				]
			},
			"verboseAdvices": { "advices": [] },
			"location": {
				"path": { "file": "src\\lib\\components\\NoteModal.svelte" },
				"span": [196, 204],
				"sourceCode": "<script lang=\"ts\">\n/* global setTimeout */\nimport NoteEditorModal from \"./NoteEditorModal.svelte\";\nimport NoteContent from \"./NoteContent.svelte\";\nimport NoteView from \"./NoteView.svelte\";\nimport MoreMenu from \"./MoreMenu.svelte\";\nimport { modalStore } from \"../stores/modalStore\";\nimport type { Note } from \"../../types\";\nimport { createEventDispatcher } from \"svelte\";\n\ninterface Props {\n\tcardId: string;\n\tcardTitle?: string;\n\tapi?: {\n\t\tgetNotes(cardId: string): Promise<Note[]>;\n\t\tcreateNote(payload: {\n\t\t\tcardId: string;\n\t\t\ttitle: string;\n\t\t\tcontent: string;\n\t\t\ttags: string[];\n\t\t}): Promise<Note>;\n\t\tupdateNote(payload: {\n\t\t\tid: string;\n\t\t\ttitle?: string;\n\t\t\tcontent?: string;\n\t\t\ttags?: string[];\n\t\t}): Promise<Note>;\n\t\tdeleteNote(id: string): Promise<Note>;\n\t} | null;\n\tconfirmFn?: (message: string) => boolean;\n}\nconst { cardId, cardTitle, api, confirmFn }: Props = $props();\nconst dispatch = createEventDispatcher();\n\nlet notes: Note[] = $state([] as Note[]);\nlet editing: Note | null = $state(null);\nlet dialogRef: HTMLElement | null = $state(null);\nlet lastCreatedNoteId: string | null = $state(null);\n\nfunction resolveApi() {\n\tif (api) return api;\n\tif (\n\t\ttypeof window !== \"undefined\" &&\n\t\t(window as unknown as { api?: Props[\"api\"] }).api\n\t)\n\t\treturn (window as unknown as { api?: Props[\"api\"] }).api;\n\treturn null;\n}\n\nasync function load() {\n\tif (!cardId) return;\n\tconst resolved = resolveApi();\n\tif (!resolved) return;\n\tnotes = await resolved.getNotes(cardId);\n}\n\nimport { onMount } from \"svelte\";\n\nonMount(() => {\n\tload();\n\tsetTimeout(() => dialogRef?.focus(), 0);\n});\n\nfunction openNew() {\n\tconst resolved = resolveApi();\n\t// push the editor onto the modal stack so the list remains mounted underneath\n\tmodalStore.push(NoteEditorModal, { cardId, note: null, api: resolved });\n}\n\nfunction editNote(n: Note) {\n\tconst resolved = resolveApi();\n\tmodalStore.push(NoteEditorModal, { cardId, note: n, api: resolved });\n}\n\nfunction openView(n: Note) {\n\tconst resolved = resolveApi();\n\tmodalStore.push(NoteView, { cardId, note: n, api: resolved });\n}\n\n// NoteEditor will perform saves itself and dispatch a global event when notes change.\n\nasync function handleDelete(id: string) {\n\tconst resolvedConfirm =\n\t\tconfirmFn ??\n\t\t(typeof window !== \"undefined\" ? window.confirm.bind(window) : () => true);\n\tif (!resolvedConfirm(\"Delete this note?\")) return;\n\tconst resolved = resolveApi();\n\tif (!resolved) return;\n\tawait resolved.deleteNote(id);\n\tawait load();\n}\n\nfunction close() {\n\tdispatch(\"close\");\n}\n\n// listen for global note-change events so the list refreshes when the editor creates/updates\nfunction onNotesChanged(e: Event) {\n\tconst detail = (e as CustomEvent).detail as { cardId?: string } | undefined;\n\tif (!detail || detail.cardId !== cardId) return;\n\t// remember created note id so we can focus after reload\n\tlastCreatedNoteId = detail.noteId || null;\n\tload().then(() => {\n\t\tif (lastCreatedNoteId) {\n\t\t\t// focus the newly created note element if present\n\t\t\tconst el = document.getElementById(\n\t\t\t\t`note-${lastCreatedNoteId}`,\n\t\t\t) as HTMLElement | null;\n\t\t\tif (el && typeof el.focus === \"function\") {\n\t\t\t\tsetTimeout(() => el.focus(), 0);\n\t\t\t}\n\t\t\tlastCreatedNoteId = null;\n\t\t}\n\t});\n}\n\nimport { onDestroy } from \"svelte\";\nonMount(() => {\n\tload();\n\tsetTimeout(() => dialogRef?.focus(), 0);\n\twindow.addEventListener(\"notes:changed\", onNotesChanged as EventListener);\n});\nonDestroy(() =>\n\twindow.removeEventListener(\"notes:changed\", onNotesChanged as EventListener),\n);\n</script>\n\n  <div class=\"notes-modal-backdrop\" role=\"dialog\" aria-modal=\"true\" tabindex=\"-1\" bind:this={dialogRef}>\n    <div class=\"notes-modal\">\n      <header>\n        <h3>Notes for {cardTitle || 'Card'}</h3>\n        <button\n          type=\"button\"\n          class=\"close\"\n          onclick={close}\n          aria-label={\"Close notes for \" + (cardTitle || 'card')}\n          title={\"Close notes\"}\n        >\n          \n        </button>\n      </header>\n\n      <div class=\"notes-list\">\n        {#if notes.length === 0}\n          <div class=\"empty\">No notes yet. Click \"New Note\" to add one.</div>\n        {:else}\n          <ul class=\"notes\" role=\"list\">\n            {#each notes as n}\n              <li>\n                <div class=\"note-item\">\n                    <button id={\"note-\" + n.id} type=\"button\" class=\"note-open\" onclick={() => openView(n)} aria-label={`Open note ${n.title || 'untitled'}`}>\n                    <h4>{n.title || '(untitled)'}</h4>\n                    <div class=\"meta\">{n.tags?.map(t => `#${t}`).join(' ')}</div>\n                    <!-- render markdown content safely -->\n                    <div class=\"content\"><NoteContent markdown={n.content} /></div>\n                  </button>\n                  <div class=\"actions\">\n                    <MoreMenu ariaLabel={`More actions for note ${n.title || 'untitled'}`} on:edit={() => editNote(n)} on:delete={() => handleDelete(n.id)} />\n                  </div>\n                </div>\n              </li>\n            {/each}\n          </ul>\n        {/if}\n      </div>\n\n      <footer>\n        <button type=\"button\" class=\"primary\" onclick={openNew}>New Note</button>\n      </footer>\n    </div>\n  </div>\n\n  <!-- NoteEditorModal instances are pushed onto the modal stack so they're rendered by ModalContainer -->\n\n<style>\n  .notes-modal-backdrop { position: fixed; inset: 0; background: rgba(0,0,0,0.4); display:flex; align-items:center; justify-content:center; z-index:60; }\n  .notes-modal { width: min(860px, 96%); max-height: 90vh; overflow:auto; background: var(--surface,#fff); border-radius:8px; padding:1rem; }\n  header { display:flex; justify-content:space-between; align-items:center; }\n  .notes-list { margin-top: 0.75rem; }\n  .note-item { border:1px solid rgba(0,0,0,0.05); padding:0.5rem; border-radius:6px; margin-bottom:0.5rem; }\n  .note-item .meta { color: var(--muted,#666); font-size:0.85rem; }\n  .note-item .content { white-space:pre-wrap; margin:0.5rem 0; }\n  .actions { display:flex; gap:0.5rem; }\n  .primary { background:#2563eb; color:#fff; border:none; padding:0.5rem 0.75rem; border-radius:6px }\n  .close { background:transparent; border:none; font-size:1.1rem }\n</style>\n"
			},
			"tags": ["fixable"],
			"source": null
		},
		{
			"category": "lint/correctness/noUnusedVariables",
			"severity": "warning",
			"description": "This function edit is unused.",
			"message": [
				{ "elements": [], "content": "This function " },
				{ "elements": ["Emphasis"], "content": "edit" },
				{ "elements": [], "content": " is unused." }
			],
			"advices": {
				"advices": [
					{
						"log": [
							"info",
							[
								{
									"elements": [],
									"content": "Unused variables are often the result of typos, incomplete refactors, or other sources of bugs."
								}
							]
						]
					},
					{
						"log": [
							"info",
							[
								{
									"elements": [],
									"content": "Unsafe fix: If this is intentional, prepend "
								},
								{ "elements": ["Emphasis"], "content": "edit" },
								{ "elements": [], "content": " with an underscore." }
							]
						]
					},
					{
						"diff": {
							"dictionary": "import type { Note } from \"../../types\";\nimport NoteContent from \"./NoteContent.svelte\";\nimport NoteEditorModal from \"./NoteEditorModal.svelte\";}\n\nfunction edit_edit() {\n\tconst resolved = resolveApi();\n\tmodalStore.push(NoteEditorModal, { cardId, note, api: resolved });\tmodalStore.pop();\n}\n",
							"ops": [
								{ "diffOp": { "equal": { "range": [0, 144] } } },
								{ "equalLines": { "line_count": 21 } },
								{ "diffOp": { "equal": { "range": [144, 156] } } },
								{ "diffOp": { "delete": { "range": [156, 160] } } },
								{ "diffOp": { "insert": { "range": [160, 165] } } },
								{ "diffOp": { "equal": { "range": [165, 269] } } },
								{ "equalLines": { "line_count": 10 } },
								{ "diffOp": { "equal": { "range": [269, 290] } } }
							]
						}
					}
				]
			},
			"verboseAdvices": { "advices": [] },
			"location": {
				"path": { "file": "src\\lib\\components\\NoteView.svelte" },
				"span": [720, 724],
				"sourceCode": "<script lang=\"ts\">\nimport type { Note } from \"../../types\";\nimport NoteContent from \"./NoteContent.svelte\";\nimport NoteEditorModal from \"./NoteEditorModal.svelte\";\nimport MoreMenu from \"./MoreMenu.svelte\";\nimport { modalStore } from \"../stores/modalStore\";\n\ntype NoteApi = { deleteNote: (id: string) => Promise<void> };\n\nexport const note: Note | null = null;\nexport const cardId: string | null = null;\nexport const api: NoteApi | null = null;\n\nfunction resolveApi(): NoteApi | null {\n\tif (api) return api;\n\tif (\n\t\ttypeof window !== \"undefined\" &&\n\t\t(window as unknown as { api?: NoteApi }).api\n\t)\n\t\treturn (window as unknown as { api?: NoteApi }).api;\n\treturn null;\n}\n\nfunction close() {\n\tmodalStore.pop();\n}\n\nfunction edit() {\n\tconst resolved = resolveApi();\n\tmodalStore.push(NoteEditorModal, { cardId, note, api: resolved });\n}\n\nasync function remove() {\n\tconst resolved = resolveApi();\n\tif (!resolved) return;\n\tif (!confirm(\"Delete this note?\")) return;\n\tawait resolved.deleteNote(note.id);\n\twindow.dispatchEvent(\n\t\tnew CustomEvent(\"notes:changed\", { detail: { cardId } }),\n\t);\n\tmodalStore.pop();\n}\n</script>\n\n<div class=\"note-view-backdrop\" role=\"dialog\" aria-modal=\"true\" tabindex=\"-1\">\n  <div class=\"note-view\" role=\"document\">\n    <header>\n      <h2>{note?.title || 'Note'}</h2>\n      <button type=\"button\" class=\"close\" onclick={close} aria-label=\"Close\"></button>\n    </header>\n\n    <div class=\"meta\">{note?.tags?.map((t:string) => `#${t}`).join(' ')}</div>\n\n    <article class=\"body\">\n      <NoteContent markdown={note?.content || ''} />\n    </article>\n\n    <footer>\n      <MoreMenu ariaLabel={`More actions for note ${note?.title || 'note'}`} on:edit={edit} on:delete={remove} />\n    </footer>\n  </div>\n</div>\n\n<style>\n  .note-view-backdrop { position: fixed; inset:0; display:flex; align-items:center; justify-content:center; background: rgba(0,0,0,0.4); z-index: 70; }\n  .note-view { width: min(860px, 96%); max-height: 90vh; overflow:auto; background: var(--surface,#fff); border-radius:8px; padding:1rem; }\n  header { display:flex; justify-content:space-between; align-items:center; }\n  .meta { color: var(--muted,#666); font-size:0.9rem; margin-bottom:0.5rem }\n  .body { margin-top: 0.5rem }\n  footer { display:flex; gap:0.5rem; justify-content:flex-end; margin-top:0.75rem }\n  .close { background:transparent; border:none }\n</style>\n"
			},
			"tags": ["fixable"],
			"source": null
		},
		{
			"category": "lint/correctness/noUnusedImports",
			"severity": "warning",
			"description": "This import is unused.",
			"message": [
				{ "elements": [], "content": "This " },
				{ "elements": ["Emphasis"], "content": "import" },
				{ "elements": [], "content": " is unused." }
			],
			"advices": {
				"advices": [
					{
						"log": [
							"info",
							[
								{
									"elements": [],
									"content": "Unused imports might be the result of an incomplete refactoring."
								}
							]
						]
					},
					{
						"log": [
							"info",
							[
								{
									"elements": [],
									"content": "Unsafe fix: Remove the unused imports."
								}
							]
						]
					},
					{
						"diff": {
							"dictionary": "import type { Note } from \"../../types\";\nimport NoteContent from \"./NoteContent.svelte\";\nimport NoteEditorModal from \"./NoteEditorModal.svelte\";\nimport MoreMenu from \"./MoreMenu.svelte\";\nimport { modalStore } from \"../stores/modalStore\";\n\tmodalStore.pop();\n}\n",
							"ops": [
								{ "diffOp": { "equal": { "range": [0, 144] } } },
								{ "diffOp": { "delete": { "range": [144, 186] } } },
								{ "diffOp": { "equal": { "range": [186, 238] } } },
								{ "equalLines": { "line_count": 33 } },
								{ "diffOp": { "equal": { "range": [238, 259] } } }
							]
						}
					}
				]
			},
			"verboseAdvices": { "advices": [] },
			"location": {
				"path": { "file": "src\\lib\\components\\NoteView.svelte" },
				"span": [171, 179],
				"sourceCode": "<script lang=\"ts\">\nimport type { Note } from \"../../types\";\nimport NoteContent from \"./NoteContent.svelte\";\nimport NoteEditorModal from \"./NoteEditorModal.svelte\";\nimport MoreMenu from \"./MoreMenu.svelte\";\nimport { modalStore } from \"../stores/modalStore\";\n\ntype NoteApi = { deleteNote: (id: string) => Promise<void> };\n\nexport const note: Note | null = null;\nexport const cardId: string | null = null;\nexport const api: NoteApi | null = null;\n\nfunction resolveApi(): NoteApi | null {\n\tif (api) return api;\n\tif (\n\t\ttypeof window !== \"undefined\" &&\n\t\t(window as unknown as { api?: NoteApi }).api\n\t)\n\t\treturn (window as unknown as { api?: NoteApi }).api;\n\treturn null;\n}\n\nfunction close() {\n\tmodalStore.pop();\n}\n\nfunction edit() {\n\tconst resolved = resolveApi();\n\tmodalStore.push(NoteEditorModal, { cardId, note, api: resolved });\n}\n\nasync function remove() {\n\tconst resolved = resolveApi();\n\tif (!resolved) return;\n\tif (!confirm(\"Delete this note?\")) return;\n\tawait resolved.deleteNote(note.id);\n\twindow.dispatchEvent(\n\t\tnew CustomEvent(\"notes:changed\", { detail: { cardId } }),\n\t);\n\tmodalStore.pop();\n}\n</script>\n\n<div class=\"note-view-backdrop\" role=\"dialog\" aria-modal=\"true\" tabindex=\"-1\">\n  <div class=\"note-view\" role=\"document\">\n    <header>\n      <h2>{note?.title || 'Note'}</h2>\n      <button type=\"button\" class=\"close\" onclick={close} aria-label=\"Close\"></button>\n    </header>\n\n    <div class=\"meta\">{note?.tags?.map((t:string) => `#${t}`).join(' ')}</div>\n\n    <article class=\"body\">\n      <NoteContent markdown={note?.content || ''} />\n    </article>\n\n    <footer>\n      <MoreMenu ariaLabel={`More actions for note ${note?.title || 'note'}`} on:edit={edit} on:delete={remove} />\n    </footer>\n  </div>\n</div>\n\n<style>\n  .note-view-backdrop { position: fixed; inset:0; display:flex; align-items:center; justify-content:center; background: rgba(0,0,0,0.4); z-index: 70; }\n  .note-view { width: min(860px, 96%); max-height: 90vh; overflow:auto; background: var(--surface,#fff); border-radius:8px; padding:1rem; }\n  header { display:flex; justify-content:space-between; align-items:center; }\n  .meta { color: var(--muted,#666); font-size:0.9rem; margin-bottom:0.5rem }\n  .body { margin-top: 0.5rem }\n  footer { display:flex; gap:0.5rem; justify-content:flex-end; margin-top:0.75rem }\n  .close { background:transparent; border:none }\n</style>\n"
			},
			"tags": ["fixable"],
			"source": null
		},
		{
			"category": "lint/correctness/noUnusedVariables",
			"severity": "warning",
			"description": "This function close is unused.",
			"message": [
				{ "elements": [], "content": "This function " },
				{ "elements": ["Emphasis"], "content": "close" },
				{ "elements": [], "content": " is unused." }
			],
			"advices": {
				"advices": [
					{
						"log": [
							"info",
							[
								{
									"elements": [],
									"content": "Unused variables are often the result of typos, incomplete refactors, or other sources of bugs."
								}
							]
						]
					},
					{
						"log": [
							"info",
							[
								{
									"elements": [],
									"content": "Unsafe fix: If this is intentional, prepend "
								},
								{ "elements": ["Emphasis"], "content": "close" },
								{ "elements": [], "content": " with an underscore." }
							]
						]
					},
					{
						"diff": {
							"dictionary": "import type { Note } from \"../../types\";\nimport NoteContent from \"./NoteContent.svelte\";\nimport NoteEditorModal from \"./NoteEditorModal.svelte\";}\n\nfunction close_close() {\n\tmodalStore.pop();\n}\tmodalStore.pop();\n}\n",
							"ops": [
								{ "diffOp": { "equal": { "range": [0, 144] } } },
								{ "equalLines": { "line_count": 17 } },
								{ "diffOp": { "equal": { "range": [144, 156] } } },
								{ "diffOp": { "delete": { "range": [156, 161] } } },
								{ "diffOp": { "insert": { "range": [161, 167] } } },
								{ "diffOp": { "equal": { "range": [167, 192] } } },
								{ "equalLines": { "line_count": 14 } },
								{ "diffOp": { "equal": { "range": [192, 213] } } }
							]
						}
					}
				]
			},
			"verboseAdvices": { "advices": [] },
			"location": {
				"path": { "file": "src\\lib\\components\\NoteView.svelte" },
				"span": [679, 684],
				"sourceCode": "<script lang=\"ts\">\nimport type { Note } from \"../../types\";\nimport NoteContent from \"./NoteContent.svelte\";\nimport NoteEditorModal from \"./NoteEditorModal.svelte\";\nimport MoreMenu from \"./MoreMenu.svelte\";\nimport { modalStore } from \"../stores/modalStore\";\n\ntype NoteApi = { deleteNote: (id: string) => Promise<void> };\n\nexport const note: Note | null = null;\nexport const cardId: string | null = null;\nexport const api: NoteApi | null = null;\n\nfunction resolveApi(): NoteApi | null {\n\tif (api) return api;\n\tif (\n\t\ttypeof window !== \"undefined\" &&\n\t\t(window as unknown as { api?: NoteApi }).api\n\t)\n\t\treturn (window as unknown as { api?: NoteApi }).api;\n\treturn null;\n}\n\nfunction close() {\n\tmodalStore.pop();\n}\n\nfunction edit() {\n\tconst resolved = resolveApi();\n\tmodalStore.push(NoteEditorModal, { cardId, note, api: resolved });\n}\n\nasync function remove() {\n\tconst resolved = resolveApi();\n\tif (!resolved) return;\n\tif (!confirm(\"Delete this note?\")) return;\n\tawait resolved.deleteNote(note.id);\n\twindow.dispatchEvent(\n\t\tnew CustomEvent(\"notes:changed\", { detail: { cardId } }),\n\t);\n\tmodalStore.pop();\n}\n</script>\n\n<div class=\"note-view-backdrop\" role=\"dialog\" aria-modal=\"true\" tabindex=\"-1\">\n  <div class=\"note-view\" role=\"document\">\n    <header>\n      <h2>{note?.title || 'Note'}</h2>\n      <button type=\"button\" class=\"close\" onclick={close} aria-label=\"Close\"></button>\n    </header>\n\n    <div class=\"meta\">{note?.tags?.map((t:string) => `#${t}`).join(' ')}</div>\n\n    <article class=\"body\">\n      <NoteContent markdown={note?.content || ''} />\n    </article>\n\n    <footer>\n      <MoreMenu ariaLabel={`More actions for note ${note?.title || 'note'}`} on:edit={edit} on:delete={remove} />\n    </footer>\n  </div>\n</div>\n\n<style>\n  .note-view-backdrop { position: fixed; inset:0; display:flex; align-items:center; justify-content:center; background: rgba(0,0,0,0.4); z-index: 70; }\n  .note-view { width: min(860px, 96%); max-height: 90vh; overflow:auto; background: var(--surface,#fff); border-radius:8px; padding:1rem; }\n  header { display:flex; justify-content:space-between; align-items:center; }\n  .meta { color: var(--muted,#666); font-size:0.9rem; margin-bottom:0.5rem }\n  .body { margin-top: 0.5rem }\n  footer { display:flex; gap:0.5rem; justify-content:flex-end; margin-top:0.75rem }\n  .close { background:transparent; border:none }\n</style>\n"
			},
			"tags": ["fixable"],
			"source": null
		},
		{
			"category": "lint/correctness/noUnusedImports",
			"severity": "warning",
			"description": "This import is unused.",
			"message": [
				{ "elements": [], "content": "This " },
				{ "elements": ["Emphasis"], "content": "import" },
				{ "elements": [], "content": " is unused." }
			],
			"advices": {
				"advices": [
					{
						"log": [
							"info",
							[
								{
									"elements": [],
									"content": "Unused imports might be the result of an incomplete refactoring."
								}
							]
						]
					},
					{
						"log": [
							"info",
							[
								{
									"elements": [],
									"content": "Unsafe fix: Remove the unused imports."
								}
							]
						]
					},
					{
						"diff": {
							"dictionary": "import type { Note } from \"../../types\";\nimport NoteContent from \"./NoteContent.svelte\";\nimport NoteEditorModal from \"./NoteEditorModal.svelte\";\nimport MoreMenu from \"./MoreMenu.svelte\";\tmodalStore.pop();\n}\n",
							"ops": [
								{ "diffOp": { "equal": { "range": [0, 40] } } },
								{ "diffOp": { "delete": { "range": [40, 88] } } },
								{ "diffOp": { "equal": { "range": [88, 186] } } },
								{ "equalLines": { "line_count": 35 } },
								{ "diffOp": { "equal": { "range": [186, 207] } } }
							]
						}
					}
				]
			},
			"verboseAdvices": { "advices": [] },
			"location": {
				"path": { "file": "src\\lib\\components\\NoteView.svelte" },
				"span": [67, 78],
				"sourceCode": "<script lang=\"ts\">\nimport type { Note } from \"../../types\";\nimport NoteContent from \"./NoteContent.svelte\";\nimport NoteEditorModal from \"./NoteEditorModal.svelte\";\nimport MoreMenu from \"./MoreMenu.svelte\";\nimport { modalStore } from \"../stores/modalStore\";\n\ntype NoteApi = { deleteNote: (id: string) => Promise<void> };\n\nexport const note: Note | null = null;\nexport const cardId: string | null = null;\nexport const api: NoteApi | null = null;\n\nfunction resolveApi(): NoteApi | null {\n\tif (api) return api;\n\tif (\n\t\ttypeof window !== \"undefined\" &&\n\t\t(window as unknown as { api?: NoteApi }).api\n\t)\n\t\treturn (window as unknown as { api?: NoteApi }).api;\n\treturn null;\n}\n\nfunction close() {\n\tmodalStore.pop();\n}\n\nfunction edit() {\n\tconst resolved = resolveApi();\n\tmodalStore.push(NoteEditorModal, { cardId, note, api: resolved });\n}\n\nasync function remove() {\n\tconst resolved = resolveApi();\n\tif (!resolved) return;\n\tif (!confirm(\"Delete this note?\")) return;\n\tawait resolved.deleteNote(note.id);\n\twindow.dispatchEvent(\n\t\tnew CustomEvent(\"notes:changed\", { detail: { cardId } }),\n\t);\n\tmodalStore.pop();\n}\n</script>\n\n<div class=\"note-view-backdrop\" role=\"dialog\" aria-modal=\"true\" tabindex=\"-1\">\n  <div class=\"note-view\" role=\"document\">\n    <header>\n      <h2>{note?.title || 'Note'}</h2>\n      <button type=\"button\" class=\"close\" onclick={close} aria-label=\"Close\"></button>\n    </header>\n\n    <div class=\"meta\">{note?.tags?.map((t:string) => `#${t}`).join(' ')}</div>\n\n    <article class=\"body\">\n      <NoteContent markdown={note?.content || ''} />\n    </article>\n\n    <footer>\n      <MoreMenu ariaLabel={`More actions for note ${note?.title || 'note'}`} on:edit={edit} on:delete={remove} />\n    </footer>\n  </div>\n</div>\n\n<style>\n  .note-view-backdrop { position: fixed; inset:0; display:flex; align-items:center; justify-content:center; background: rgba(0,0,0,0.4); z-index: 70; }\n  .note-view { width: min(860px, 96%); max-height: 90vh; overflow:auto; background: var(--surface,#fff); border-radius:8px; padding:1rem; }\n  header { display:flex; justify-content:space-between; align-items:center; }\n  .meta { color: var(--muted,#666); font-size:0.9rem; margin-bottom:0.5rem }\n  .body { margin-top: 0.5rem }\n  footer { display:flex; gap:0.5rem; justify-content:flex-end; margin-top:0.75rem }\n  .close { background:transparent; border:none }\n</style>\n"
			},
			"tags": ["fixable"],
			"source": null
		},
		{
			"category": "lint/correctness/noUnusedVariables",
			"severity": "warning",
			"description": "This function remove is unused.",
			"message": [
				{ "elements": [], "content": "This function " },
				{ "elements": ["Emphasis"], "content": "remove" },
				{ "elements": [], "content": " is unused." }
			],
			"advices": {
				"advices": [
					{
						"log": [
							"info",
							[
								{
									"elements": [],
									"content": "Unused variables are often the result of typos, incomplete refactors, or other sources of bugs."
								}
							]
						]
					},
					{
						"log": [
							"info",
							[
								{
									"elements": [],
									"content": "Unsafe fix: If this is intentional, prepend "
								},
								{ "elements": ["Emphasis"], "content": "remove" },
								{ "elements": [], "content": " with an underscore." }
							]
						]
					},
					{
						"diff": {
							"dictionary": "import type { Note } from \"../../types\";\nimport NoteContent from \"./NoteContent.svelte\";\nimport NoteEditorModal from \"./NoteEditorModal.svelte\";}\n\nasync function remove_remove() {\n\tconst resolved = resolveApi();\n\tif (!resolved) return;\tmodalStore.pop();\n}\n",
							"ops": [
								{ "diffOp": { "equal": { "range": [0, 144] } } },
								{ "equalLines": { "line_count": 26 } },
								{ "diffOp": { "equal": { "range": [144, 162] } } },
								{ "diffOp": { "delete": { "range": [162, 168] } } },
								{ "diffOp": { "insert": { "range": [168, 175] } } },
								{ "diffOp": { "equal": { "range": [175, 235] } } },
								{ "equalLines": { "line_count": 5 } },
								{ "diffOp": { "equal": { "range": [235, 256] } } }
							]
						}
					}
				]
			},
			"verboseAdvices": { "advices": [] },
			"location": {
				"path": { "file": "src\\lib\\components\\NoteView.svelte" },
				"span": [847, 853],
				"sourceCode": "<script lang=\"ts\">\nimport type { Note } from \"../../types\";\nimport NoteContent from \"./NoteContent.svelte\";\nimport NoteEditorModal from \"./NoteEditorModal.svelte\";\nimport MoreMenu from \"./MoreMenu.svelte\";\nimport { modalStore } from \"../stores/modalStore\";\n\ntype NoteApi = { deleteNote: (id: string) => Promise<void> };\n\nexport const note: Note | null = null;\nexport const cardId: string | null = null;\nexport const api: NoteApi | null = null;\n\nfunction resolveApi(): NoteApi | null {\n\tif (api) return api;\n\tif (\n\t\ttypeof window !== \"undefined\" &&\n\t\t(window as unknown as { api?: NoteApi }).api\n\t)\n\t\treturn (window as unknown as { api?: NoteApi }).api;\n\treturn null;\n}\n\nfunction close() {\n\tmodalStore.pop();\n}\n\nfunction edit() {\n\tconst resolved = resolveApi();\n\tmodalStore.push(NoteEditorModal, { cardId, note, api: resolved });\n}\n\nasync function remove() {\n\tconst resolved = resolveApi();\n\tif (!resolved) return;\n\tif (!confirm(\"Delete this note?\")) return;\n\tawait resolved.deleteNote(note.id);\n\twindow.dispatchEvent(\n\t\tnew CustomEvent(\"notes:changed\", { detail: { cardId } }),\n\t);\n\tmodalStore.pop();\n}\n</script>\n\n<div class=\"note-view-backdrop\" role=\"dialog\" aria-modal=\"true\" tabindex=\"-1\">\n  <div class=\"note-view\" role=\"document\">\n    <header>\n      <h2>{note?.title || 'Note'}</h2>\n      <button type=\"button\" class=\"close\" onclick={close} aria-label=\"Close\"></button>\n    </header>\n\n    <div class=\"meta\">{note?.tags?.map((t:string) => `#${t}`).join(' ')}</div>\n\n    <article class=\"body\">\n      <NoteContent markdown={note?.content || ''} />\n    </article>\n\n    <footer>\n      <MoreMenu ariaLabel={`More actions for note ${note?.title || 'note'}`} on:edit={edit} on:delete={remove} />\n    </footer>\n  </div>\n</div>\n\n<style>\n  .note-view-backdrop { position: fixed; inset:0; display:flex; align-items:center; justify-content:center; background: rgba(0,0,0,0.4); z-index: 70; }\n  .note-view { width: min(860px, 96%); max-height: 90vh; overflow:auto; background: var(--surface,#fff); border-radius:8px; padding:1rem; }\n  header { display:flex; justify-content:space-between; align-items:center; }\n  .meta { color: var(--muted,#666); font-size:0.9rem; margin-bottom:0.5rem }\n  .body { margin-top: 0.5rem }\n  footer { display:flex; gap:0.5rem; justify-content:flex-end; margin-top:0.75rem }\n  .close { background:transparent; border:none }\n</style>\n"
			},
			"tags": ["fixable"],
			"source": null
		},
		{
			"category": "lint/correctness/noUnusedVariables",
			"severity": "warning",
			"description": "This function cancel is unused.",
			"message": [
				{ "elements": [], "content": "This function " },
				{ "elements": ["Emphasis"], "content": "cancel" },
				{ "elements": [], "content": " is unused." }
			],
			"advices": {
				"advices": [
					{
						"log": [
							"info",
							[
								{
									"elements": [],
									"content": "Unused variables are often the result of typos, incomplete refactors, or other sources of bugs."
								}
							]
						]
					},
					{
						"log": [
							"info",
							[
								{
									"elements": [],
									"content": "Unsafe fix: If this is intentional, prepend "
								},
								{ "elements": ["Emphasis"], "content": "cancel" },
								{ "elements": [], "content": " with an underscore." }
							]
						]
					},
					{
						"diff": {
							"dictionary": "import { projectManager } from \"../projectManager.svelte\";\n\ninterface Props {}\n\nfunction cancel_cancel() {\n\tformData = { name: \"\", systemPrompt: \"\" };\n\tfieldErrors = {};\tprojectManager.selectProject(\"all\");\n}\n",
							"ops": [
								{ "diffOp": { "equal": { "range": [0, 77] } } },
								{ "equalLines": { "line_count": 66 } },
								{ "diffOp": { "equal": { "range": [77, 89] } } },
								{ "diffOp": { "delete": { "range": [89, 95] } } },
								{ "diffOp": { "insert": { "range": [95, 102] } } },
								{ "diffOp": { "equal": { "range": [102, 169] } } },
								{ "equalLines": { "line_count": 1 } },
								{ "diffOp": { "equal": { "range": [169, 209] } } }
							]
						}
					}
				]
			},
			"verboseAdvices": { "advices": [] },
			"location": {
				"path": { "file": "src\\lib\\components\\ProjectCreate.svelte" },
				"span": [1959, 1965],
				"sourceCode": "<script lang=\"ts\">\r\nimport { projectManager } from \"../projectManager.svelte\";\n\ninterface Props {\n\toncreated?: (detail: { project: string }) => void;\n}\n\ntype FormValues = { name: string; systemPrompt: string };\n\nconst { oncreated }: Props = $props();\n\n// Form state using Svelte 5 runes\nlet formData: FormValues = $state({ name: \"\", systemPrompt: \"\" });\nlet submissionError: string | null = $state(null);\nlet _isSubmitting = $state(false);\nlet fieldErrors = $state<{ name?: string; systemPrompt?: string }>({});\n\n// Derived computed values for accessibility\nconst _descriptionIds = $derived(\n\tfieldErrors.name ? \"name-error project-hint\" : \"project-hint\",\n);\n\n// Validation function\nfunction validateForm(values: FormValues): {\n\tname?: string;\n\tsystemPrompt?: string;\n} {\n\tconst errors: { name?: string; systemPrompt?: string } = {};\n\tif (!values.name || values.name.trim() === \"\") {\n\t\terrors.name = \"Project name is required\";\n\t}\n\tif (values.systemPrompt && values.systemPrompt.length > 8000) {\n\t\terrors.systemPrompt = \"System prompt must be less than 8000 characters\";\n\t}\n\treturn errors;\n}\n\n// Handle form submission\nasync function handleSubmit(e: SubmitEvent) {\n\te.preventDefault();\n\n\tfieldErrors = validateForm(formData);\n\tif (Object.keys(fieldErrors).length > 0) return;\n\n\tsubmissionError = null;\n\t_isSubmitting = true;\n\n\ttry {\n\t\tconst trimmedName = formData.name.trim();\n\t\tconst trimmedSystemPrompt = formData.systemPrompt.trim() || undefined;\n\t\tconst created = await projectManager.createProject(\n\t\t\ttrimmedName,\n\t\t\ttrimmedSystemPrompt,\n\t\t);\n\n\t\t// Reset form\n\t\tformData = { name: \"\", systemPrompt: \"\" };\n\t\tfieldErrors = {};\n\n\t\t// Emit event via callback\n\t\toncreated?.({ project: created.id });\n\t} catch (error) {\n\t\tconsole.error(\"Failed to create project\", error);\n\t\tsubmissionError =\n\t\t\terror instanceof Error\n\t\t\t\t? error.message\n\t\t\t\t: \"Unable to create project right now. Try again in a moment.\";\n\t} finally {\n\t\t_isSubmitting = false;\n\t}\n}\n\nfunction cancel() {\n\tformData = { name: \"\", systemPrompt: \"\" };\n\tfieldErrors = {};\n\tsubmissionError = null;\n\tprojectManager.selectProject(\"all\");\n}\n</script>\r\n\r\n<section class=\"project-create\">\r\n  <h2>Create project</h2>\r\n  <form onsubmit={handleSubmit} aria-describedby={_descriptionIds} class=\"project-form\">\r\n    <label for=\"proj-name\">Project name</label>\r\n    <input\r\n      id=\"proj-name\"\r\n      bind:value={formData.name}\r\n      type=\"text\"\r\n      placeholder=\"e.g. JavaScript\"\r\n      aria-invalid={fieldErrors.name ? 'true' : 'false'}\r\n      class:error={fieldErrors.name}\r\n      disabled={_isSubmitting}\r\n    />\r\n    {#if fieldErrors.name}\r\n      <p id=\"name-error\" class=\"field-error\" role=\"alert\">\r\n        {fieldErrors.name}\r\n      </p>\r\n    {/if}\r\n    <p class=\"hint\" id=\"project-hint\">The project name appears in the sidebar list.</p>\r\n    \r\n    <label for=\"proj-system-prompt\">System prompt <span class=\"optional\">(optional)</span></label>\r\n    <textarea\r\n      id=\"proj-system-prompt\"\r\n      bind:value={formData.systemPrompt}\r\n      placeholder=\"e.g. You are an expert JavaScript developer. Always provide code examples and explain best practices.\"\r\n      aria-invalid={fieldErrors.systemPrompt ? 'true' : 'false'}\r\n      class:error={fieldErrors.systemPrompt}\r\n      disabled={_isSubmitting}\r\n      rows=\"4\"\r\n    ></textarea>\r\n    {#if fieldErrors.systemPrompt}\r\n      <p id=\"system-prompt-error\" class=\"field-error\" role=\"alert\">\r\n        {fieldErrors.systemPrompt}\r\n      </p>\r\n    {/if}\r\n    <p class=\"hint\" id=\"system-prompt-hint\">This prompt will be prepended to all learning cards in this project when sent to ChatGPT.</p>\r\n    \r\n    {#if submissionError}\r\n      <p class=\"submission-error\" role=\"alert\">{submissionError}</p>\r\n    {/if}\r\n    <div class=\"actions\">\r\n      <button type=\"submit\" class=\"primary\" disabled={_isSubmitting}>\r\n        {_isSubmitting ? 'Creating...' : 'Create project'}\r\n      </button>\r\n      <button type=\"button\" class=\"ghost\" onclick={cancel} disabled={_isSubmitting}>\r\n        Cancel\r\n      </button>\r\n    </div>\r\n  </form>\r\n</section>\r\n\r\n<style>\r\n  .project-create {\r\n    padding: 1.5rem;\r\n    max-width: 520px;\r\n    background: var(--surface, #ffffff);\r\n    border-radius: 14px;\r\n    box-shadow: 0 18px 42px rgba(15, 23, 42, 0.08);\r\n  }\r\n\r\n  h2 {\r\n    margin: 0 0 1rem;\r\n    font-size: 1.35rem;\r\n    letter-spacing: 0.02em;\r\n  }\r\n\r\n  .project-form {\r\n    display: flex;\r\n    flex-direction: column;\r\n    gap: 0.25rem;\r\n  }\r\n\r\n  label {\r\n    font-weight: 600;\r\n    font-size: 0.95rem;\r\n  }\r\n\r\n  input {\r\n    padding: 0.75rem 0.85rem;\r\n    border-radius: 10px;\r\n    border: 1px solid #d0d7de;\r\n    font-size: 1rem;\r\n    font-family: inherit;\r\n  }\r\n\r\n  input.error {\r\n    border-color: #d10c2a;\r\n    box-shadow: inset 0 0 0 1px rgba(209, 12, 42, 0.2);\r\n  }\r\n\r\n  .hint {\r\n    margin: 0;\r\n    font-size: 0.85rem;\r\n    color: #5f6c7b;\r\n  }\r\n\r\n  .field-error,\r\n  .submission-error {\r\n    margin: 0;\r\n    font-size: 0.85rem;\r\n    color: #d10c2a;\r\n  }\r\n\r\n  .actions {\r\n    margin-top: 1.25rem;\r\n    display: flex;\r\n    gap: 0.75rem;\r\n  }\r\n\r\n  button {\r\n    border: none;\r\n    border-radius: 8px;\r\n    padding: 0.65rem 1.2rem;\r\n    font-weight: 600;\r\n    cursor: pointer;\r\n    transition: transform 0.2s ease, box-shadow 0.2s ease;\r\n  }\r\n\r\n  button:disabled {\r\n    opacity: 0.65;\r\n    cursor: not-allowed;\r\n  }\r\n\r\n  button.primary {\r\n    background: #1f7ae0;\r\n    color: #fff;\r\n    box-shadow: 0 10px 20px rgba(31, 122, 224, 0.25);\r\n  }\r\n\r\n  button.primary:not(:disabled):active {\r\n    transform: translateY(1px);\r\n  }\r\n\r\n  button.ghost {\r\n    background: transparent;\r\n    border: 1px solid #1f7ae0;\r\n    color: #1f7ae0;\r\n  }\r\n\r\n  button.ghost:not(:disabled):hover {\r\n    background: rgba(31, 122, 224, 0.08);\r\n  }\r\n\r\n  @media (max-width: 600px) {\r\n    .project-create {\r\n      padding: 1.25rem;\r\n    }\r\n\r\n    .actions {\r\n      flex-direction: column;\r\n    }\r\n\r\n    button {\r\n      width: 100%;\r\n    }\r\n  }\r\n</style>\r\n"
			},
			"tags": ["fixable"],
			"source": null
		},
		{
			"category": "lint/correctness/noUnusedVariables",
			"severity": "warning",
			"description": "This variable submissionError is unused.",
			"message": [
				{ "elements": [], "content": "This variable " },
				{ "elements": ["Emphasis"], "content": "submissionError" },
				{ "elements": [], "content": " is unused." }
			],
			"advices": {
				"advices": [
					{
						"log": [
							"info",
							[
								{
									"elements": [],
									"content": "Unused variables are often the result of typos, incomplete refactors, or other sources of bugs."
								}
							]
						]
					},
					{
						"log": [
							"info",
							[
								{
									"elements": [],
									"content": "Unsafe fix: If this is intentional, prepend "
								},
								{ "elements": ["Emphasis"], "content": "submissionError" },
								{ "elements": [], "content": " with an underscore." }
							]
						]
					},
					{
						"diff": {
							"dictionary": "import { projectManager } from \"../projectManager.svelte\";\n\ninterface Props {// Form state using Svelte 5 runes\nlet formData: FormValues = $state({ name: \"\", systemPrompt: \"\" });\nlet submissionError_submissionError: string | null = $state(null);\nlet _isSubmitting = $state(false);\nlet fieldErrors = $state<{ name?: string; systemPrompt?: string }>({});\n\tfieldErrors = validateForm(formData);\n\tif (Object.keys(fieldErrors).length > 0) return;\n\n\t = null;\n\t_isSubmitting = true;\n\t\toncreated?.({ project: created.id });\n\t} catch (error) {\n\t\tconsole.error(\"Failed to create project\", error);\n\t\t=\n\t\t\terror instanceof Error\n\t\t\t\t? error.messagefunction cancel() {\n\tformData = { name: \"\", systemPrompt: \"\" };\n\tfieldErrors = {};= null;\n\tprojectManager.selectProject(\"all\");\n}\n",
							"ops": [
								{ "diffOp": { "equal": { "range": [0, 77] } } },
								{ "equalLines": { "line_count": 7 } },
								{ "diffOp": { "equal": { "range": [77, 183] } } },
								{ "diffOp": { "delete": { "range": [183, 198] } } },
								{ "diffOp": { "insert": { "range": [198, 214] } } },
								{ "diffOp": { "equal": { "range": [214, 352] } } },
								{ "equalLines": { "line_count": 24 } },
								{ "diffOp": { "equal": { "range": [352, 441] } } },
								{ "diffOp": { "equal": { "range": [441, 444] } } },
								{ "diffOp": { "delete": { "range": [183, 198] } } },
								{ "diffOp": { "insert": { "range": [198, 214] } } },
								{ "diffOp": { "equal": { "range": [444, 445] } } },
								{ "diffOp": { "equal": { "range": [445, 476] } } },
								{ "equalLines": { "line_count": 13 } },
								{ "diffOp": { "equal": { "range": [476, 586] } } },
								{ "diffOp": { "equal": { "range": [586, 589] } } },
								{ "diffOp": { "delete": { "range": [183, 198] } } },
								{ "diffOp": { "insert": { "range": [198, 214] } } },
								{ "diffOp": { "equal": { "range": [444, 445] } } },
								{ "diffOp": { "equal": { "range": [589, 636] } } },
								{ "equalLines": { "line_count": 6 } },
								{ "diffOp": { "equal": { "range": [636, 718] } } },
								{ "diffOp": { "equal": { "range": [352, 354] } } },
								{ "diffOp": { "delete": { "range": [183, 198] } } },
								{ "diffOp": { "insert": { "range": [198, 214] } } },
								{ "diffOp": { "equal": { "range": [444, 445] } } },
								{ "diffOp": { "equal": { "range": [718, 766] } } }
							]
						}
					}
				]
			},
			"verboseAdvices": { "advices": [] },
			"location": {
				"path": { "file": "src\\lib\\components\\ProjectCreate.svelte" },
				"span": [358, 373],
				"sourceCode": "<script lang=\"ts\">\r\nimport { projectManager } from \"../projectManager.svelte\";\n\ninterface Props {\n\toncreated?: (detail: { project: string }) => void;\n}\n\ntype FormValues = { name: string; systemPrompt: string };\n\nconst { oncreated }: Props = $props();\n\n// Form state using Svelte 5 runes\nlet formData: FormValues = $state({ name: \"\", systemPrompt: \"\" });\nlet submissionError: string | null = $state(null);\nlet _isSubmitting = $state(false);\nlet fieldErrors = $state<{ name?: string; systemPrompt?: string }>({});\n\n// Derived computed values for accessibility\nconst _descriptionIds = $derived(\n\tfieldErrors.name ? \"name-error project-hint\" : \"project-hint\",\n);\n\n// Validation function\nfunction validateForm(values: FormValues): {\n\tname?: string;\n\tsystemPrompt?: string;\n} {\n\tconst errors: { name?: string; systemPrompt?: string } = {};\n\tif (!values.name || values.name.trim() === \"\") {\n\t\terrors.name = \"Project name is required\";\n\t}\n\tif (values.systemPrompt && values.systemPrompt.length > 8000) {\n\t\terrors.systemPrompt = \"System prompt must be less than 8000 characters\";\n\t}\n\treturn errors;\n}\n\n// Handle form submission\nasync function handleSubmit(e: SubmitEvent) {\n\te.preventDefault();\n\n\tfieldErrors = validateForm(formData);\n\tif (Object.keys(fieldErrors).length > 0) return;\n\n\tsubmissionError = null;\n\t_isSubmitting = true;\n\n\ttry {\n\t\tconst trimmedName = formData.name.trim();\n\t\tconst trimmedSystemPrompt = formData.systemPrompt.trim() || undefined;\n\t\tconst created = await projectManager.createProject(\n\t\t\ttrimmedName,\n\t\t\ttrimmedSystemPrompt,\n\t\t);\n\n\t\t// Reset form\n\t\tformData = { name: \"\", systemPrompt: \"\" };\n\t\tfieldErrors = {};\n\n\t\t// Emit event via callback\n\t\toncreated?.({ project: created.id });\n\t} catch (error) {\n\t\tconsole.error(\"Failed to create project\", error);\n\t\tsubmissionError =\n\t\t\terror instanceof Error\n\t\t\t\t? error.message\n\t\t\t\t: \"Unable to create project right now. Try again in a moment.\";\n\t} finally {\n\t\t_isSubmitting = false;\n\t}\n}\n\nfunction cancel() {\n\tformData = { name: \"\", systemPrompt: \"\" };\n\tfieldErrors = {};\n\tsubmissionError = null;\n\tprojectManager.selectProject(\"all\");\n}\n</script>\r\n\r\n<section class=\"project-create\">\r\n  <h2>Create project</h2>\r\n  <form onsubmit={handleSubmit} aria-describedby={_descriptionIds} class=\"project-form\">\r\n    <label for=\"proj-name\">Project name</label>\r\n    <input\r\n      id=\"proj-name\"\r\n      bind:value={formData.name}\r\n      type=\"text\"\r\n      placeholder=\"e.g. JavaScript\"\r\n      aria-invalid={fieldErrors.name ? 'true' : 'false'}\r\n      class:error={fieldErrors.name}\r\n      disabled={_isSubmitting}\r\n    />\r\n    {#if fieldErrors.name}\r\n      <p id=\"name-error\" class=\"field-error\" role=\"alert\">\r\n        {fieldErrors.name}\r\n      </p>\r\n    {/if}\r\n    <p class=\"hint\" id=\"project-hint\">The project name appears in the sidebar list.</p>\r\n    \r\n    <label for=\"proj-system-prompt\">System prompt <span class=\"optional\">(optional)</span></label>\r\n    <textarea\r\n      id=\"proj-system-prompt\"\r\n      bind:value={formData.systemPrompt}\r\n      placeholder=\"e.g. You are an expert JavaScript developer. Always provide code examples and explain best practices.\"\r\n      aria-invalid={fieldErrors.systemPrompt ? 'true' : 'false'}\r\n      class:error={fieldErrors.systemPrompt}\r\n      disabled={_isSubmitting}\r\n      rows=\"4\"\r\n    ></textarea>\r\n    {#if fieldErrors.systemPrompt}\r\n      <p id=\"system-prompt-error\" class=\"field-error\" role=\"alert\">\r\n        {fieldErrors.systemPrompt}\r\n      </p>\r\n    {/if}\r\n    <p class=\"hint\" id=\"system-prompt-hint\">This prompt will be prepended to all learning cards in this project when sent to ChatGPT.</p>\r\n    \r\n    {#if submissionError}\r\n      <p class=\"submission-error\" role=\"alert\">{submissionError}</p>\r\n    {/if}\r\n    <div class=\"actions\">\r\n      <button type=\"submit\" class=\"primary\" disabled={_isSubmitting}>\r\n        {_isSubmitting ? 'Creating...' : 'Create project'}\r\n      </button>\r\n      <button type=\"button\" class=\"ghost\" onclick={cancel} disabled={_isSubmitting}>\r\n        Cancel\r\n      </button>\r\n    </div>\r\n  </form>\r\n</section>\r\n\r\n<style>\r\n  .project-create {\r\n    padding: 1.5rem;\r\n    max-width: 520px;\r\n    background: var(--surface, #ffffff);\r\n    border-radius: 14px;\r\n    box-shadow: 0 18px 42px rgba(15, 23, 42, 0.08);\r\n  }\r\n\r\n  h2 {\r\n    margin: 0 0 1rem;\r\n    font-size: 1.35rem;\r\n    letter-spacing: 0.02em;\r\n  }\r\n\r\n  .project-form {\r\n    display: flex;\r\n    flex-direction: column;\r\n    gap: 0.25rem;\r\n  }\r\n\r\n  label {\r\n    font-weight: 600;\r\n    font-size: 0.95rem;\r\n  }\r\n\r\n  input {\r\n    padding: 0.75rem 0.85rem;\r\n    border-radius: 10px;\r\n    border: 1px solid #d0d7de;\r\n    font-size: 1rem;\r\n    font-family: inherit;\r\n  }\r\n\r\n  input.error {\r\n    border-color: #d10c2a;\r\n    box-shadow: inset 0 0 0 1px rgba(209, 12, 42, 0.2);\r\n  }\r\n\r\n  .hint {\r\n    margin: 0;\r\n    font-size: 0.85rem;\r\n    color: #5f6c7b;\r\n  }\r\n\r\n  .field-error,\r\n  .submission-error {\r\n    margin: 0;\r\n    font-size: 0.85rem;\r\n    color: #d10c2a;\r\n  }\r\n\r\n  .actions {\r\n    margin-top: 1.25rem;\r\n    display: flex;\r\n    gap: 0.75rem;\r\n  }\r\n\r\n  button {\r\n    border: none;\r\n    border-radius: 8px;\r\n    padding: 0.65rem 1.2rem;\r\n    font-weight: 600;\r\n    cursor: pointer;\r\n    transition: transform 0.2s ease, box-shadow 0.2s ease;\r\n  }\r\n\r\n  button:disabled {\r\n    opacity: 0.65;\r\n    cursor: not-allowed;\r\n  }\r\n\r\n  button.primary {\r\n    background: #1f7ae0;\r\n    color: #fff;\r\n    box-shadow: 0 10px 20px rgba(31, 122, 224, 0.25);\r\n  }\r\n\r\n  button.primary:not(:disabled):active {\r\n    transform: translateY(1px);\r\n  }\r\n\r\n  button.ghost {\r\n    background: transparent;\r\n    border: 1px solid #1f7ae0;\r\n    color: #1f7ae0;\r\n  }\r\n\r\n  button.ghost:not(:disabled):hover {\r\n    background: rgba(31, 122, 224, 0.08);\r\n  }\r\n\r\n  @media (max-width: 600px) {\r\n    .project-create {\r\n      padding: 1.25rem;\r\n    }\r\n\r\n    .actions {\r\n      flex-direction: column;\r\n    }\r\n\r\n    button {\r\n      width: 100%;\r\n    }\r\n  }\r\n</style>\r\n"
			},
			"tags": ["fixable"],
			"source": null
		},
		{
			"category": "lint/correctness/noUnusedVariables",
			"severity": "warning",
			"description": "This function handleSubmit is unused.",
			"message": [
				{ "elements": [], "content": "This function " },
				{ "elements": ["Emphasis"], "content": "handleSubmit" },
				{ "elements": [], "content": " is unused." }
			],
			"advices": {
				"advices": [
					{
						"log": [
							"info",
							[
								{
									"elements": [],
									"content": "Unused variables are often the result of typos, incomplete refactors, or other sources of bugs."
								}
							]
						]
					},
					{
						"log": [
							"info",
							[
								{
									"elements": [],
									"content": "Unsafe fix: If this is intentional, prepend "
								},
								{ "elements": ["Emphasis"], "content": "handleSubmit" },
								{ "elements": [], "content": " with an underscore." }
							]
						]
					},
					{
						"diff": {
							"dictionary": "import { projectManager } from \"../projectManager.svelte\";\n\ninterface Props {\n// Handle form submission\nasync function handleSubmit_handleSubmit(e: SubmitEvent) {\n\te.preventDefault();\n\tprojectManager.selectProject(\"all\");\n}\n",
							"ops": [
								{ "diffOp": { "equal": { "range": [0, 77] } } },
								{ "equalLines": { "line_count": 32 } },
								{ "diffOp": { "equal": { "range": [77, 119] } } },
								{ "diffOp": { "delete": { "range": [119, 131] } } },
								{ "diffOp": { "insert": { "range": [131, 144] } } },
								{ "diffOp": { "equal": { "range": [144, 184] } } },
								{ "equalLines": { "line_count": 35 } },
								{ "diffOp": { "equal": { "range": [184, 224] } } }
							]
						}
					}
				]
			},
			"verboseAdvices": { "advices": [] },
			"location": {
				"path": { "file": "src\\lib\\components\\ProjectCreate.svelte" },
				"span": [1134, 1146],
				"sourceCode": "<script lang=\"ts\">\r\nimport { projectManager } from \"../projectManager.svelte\";\n\ninterface Props {\n\toncreated?: (detail: { project: string }) => void;\n}\n\ntype FormValues = { name: string; systemPrompt: string };\n\nconst { oncreated }: Props = $props();\n\n// Form state using Svelte 5 runes\nlet formData: FormValues = $state({ name: \"\", systemPrompt: \"\" });\nlet submissionError: string | null = $state(null);\nlet _isSubmitting = $state(false);\nlet fieldErrors = $state<{ name?: string; systemPrompt?: string }>({});\n\n// Derived computed values for accessibility\nconst _descriptionIds = $derived(\n\tfieldErrors.name ? \"name-error project-hint\" : \"project-hint\",\n);\n\n// Validation function\nfunction validateForm(values: FormValues): {\n\tname?: string;\n\tsystemPrompt?: string;\n} {\n\tconst errors: { name?: string; systemPrompt?: string } = {};\n\tif (!values.name || values.name.trim() === \"\") {\n\t\terrors.name = \"Project name is required\";\n\t}\n\tif (values.systemPrompt && values.systemPrompt.length > 8000) {\n\t\terrors.systemPrompt = \"System prompt must be less than 8000 characters\";\n\t}\n\treturn errors;\n}\n\n// Handle form submission\nasync function handleSubmit(e: SubmitEvent) {\n\te.preventDefault();\n\n\tfieldErrors = validateForm(formData);\n\tif (Object.keys(fieldErrors).length > 0) return;\n\n\tsubmissionError = null;\n\t_isSubmitting = true;\n\n\ttry {\n\t\tconst trimmedName = formData.name.trim();\n\t\tconst trimmedSystemPrompt = formData.systemPrompt.trim() || undefined;\n\t\tconst created = await projectManager.createProject(\n\t\t\ttrimmedName,\n\t\t\ttrimmedSystemPrompt,\n\t\t);\n\n\t\t// Reset form\n\t\tformData = { name: \"\", systemPrompt: \"\" };\n\t\tfieldErrors = {};\n\n\t\t// Emit event via callback\n\t\toncreated?.({ project: created.id });\n\t} catch (error) {\n\t\tconsole.error(\"Failed to create project\", error);\n\t\tsubmissionError =\n\t\t\terror instanceof Error\n\t\t\t\t? error.message\n\t\t\t\t: \"Unable to create project right now. Try again in a moment.\";\n\t} finally {\n\t\t_isSubmitting = false;\n\t}\n}\n\nfunction cancel() {\n\tformData = { name: \"\", systemPrompt: \"\" };\n\tfieldErrors = {};\n\tsubmissionError = null;\n\tprojectManager.selectProject(\"all\");\n}\n</script>\r\n\r\n<section class=\"project-create\">\r\n  <h2>Create project</h2>\r\n  <form onsubmit={handleSubmit} aria-describedby={_descriptionIds} class=\"project-form\">\r\n    <label for=\"proj-name\">Project name</label>\r\n    <input\r\n      id=\"proj-name\"\r\n      bind:value={formData.name}\r\n      type=\"text\"\r\n      placeholder=\"e.g. JavaScript\"\r\n      aria-invalid={fieldErrors.name ? 'true' : 'false'}\r\n      class:error={fieldErrors.name}\r\n      disabled={_isSubmitting}\r\n    />\r\n    {#if fieldErrors.name}\r\n      <p id=\"name-error\" class=\"field-error\" role=\"alert\">\r\n        {fieldErrors.name}\r\n      </p>\r\n    {/if}\r\n    <p class=\"hint\" id=\"project-hint\">The project name appears in the sidebar list.</p>\r\n    \r\n    <label for=\"proj-system-prompt\">System prompt <span class=\"optional\">(optional)</span></label>\r\n    <textarea\r\n      id=\"proj-system-prompt\"\r\n      bind:value={formData.systemPrompt}\r\n      placeholder=\"e.g. You are an expert JavaScript developer. Always provide code examples and explain best practices.\"\r\n      aria-invalid={fieldErrors.systemPrompt ? 'true' : 'false'}\r\n      class:error={fieldErrors.systemPrompt}\r\n      disabled={_isSubmitting}\r\n      rows=\"4\"\r\n    ></textarea>\r\n    {#if fieldErrors.systemPrompt}\r\n      <p id=\"system-prompt-error\" class=\"field-error\" role=\"alert\">\r\n        {fieldErrors.systemPrompt}\r\n      </p>\r\n    {/if}\r\n    <p class=\"hint\" id=\"system-prompt-hint\">This prompt will be prepended to all learning cards in this project when sent to ChatGPT.</p>\r\n    \r\n    {#if submissionError}\r\n      <p class=\"submission-error\" role=\"alert\">{submissionError}</p>\r\n    {/if}\r\n    <div class=\"actions\">\r\n      <button type=\"submit\" class=\"primary\" disabled={_isSubmitting}>\r\n        {_isSubmitting ? 'Creating...' : 'Create project'}\r\n      </button>\r\n      <button type=\"button\" class=\"ghost\" onclick={cancel} disabled={_isSubmitting}>\r\n        Cancel\r\n      </button>\r\n    </div>\r\n  </form>\r\n</section>\r\n\r\n<style>\r\n  .project-create {\r\n    padding: 1.5rem;\r\n    max-width: 520px;\r\n    background: var(--surface, #ffffff);\r\n    border-radius: 14px;\r\n    box-shadow: 0 18px 42px rgba(15, 23, 42, 0.08);\r\n  }\r\n\r\n  h2 {\r\n    margin: 0 0 1rem;\r\n    font-size: 1.35rem;\r\n    letter-spacing: 0.02em;\r\n  }\r\n\r\n  .project-form {\r\n    display: flex;\r\n    flex-direction: column;\r\n    gap: 0.25rem;\r\n  }\r\n\r\n  label {\r\n    font-weight: 600;\r\n    font-size: 0.95rem;\r\n  }\r\n\r\n  input {\r\n    padding: 0.75rem 0.85rem;\r\n    border-radius: 10px;\r\n    border: 1px solid #d0d7de;\r\n    font-size: 1rem;\r\n    font-family: inherit;\r\n  }\r\n\r\n  input.error {\r\n    border-color: #d10c2a;\r\n    box-shadow: inset 0 0 0 1px rgba(209, 12, 42, 0.2);\r\n  }\r\n\r\n  .hint {\r\n    margin: 0;\r\n    font-size: 0.85rem;\r\n    color: #5f6c7b;\r\n  }\r\n\r\n  .field-error,\r\n  .submission-error {\r\n    margin: 0;\r\n    font-size: 0.85rem;\r\n    color: #d10c2a;\r\n  }\r\n\r\n  .actions {\r\n    margin-top: 1.25rem;\r\n    display: flex;\r\n    gap: 0.75rem;\r\n  }\r\n\r\n  button {\r\n    border: none;\r\n    border-radius: 8px;\r\n    padding: 0.65rem 1.2rem;\r\n    font-weight: 600;\r\n    cursor: pointer;\r\n    transition: transform 0.2s ease, box-shadow 0.2s ease;\r\n  }\r\n\r\n  button:disabled {\r\n    opacity: 0.65;\r\n    cursor: not-allowed;\r\n  }\r\n\r\n  button.primary {\r\n    background: #1f7ae0;\r\n    color: #fff;\r\n    box-shadow: 0 10px 20px rgba(31, 122, 224, 0.25);\r\n  }\r\n\r\n  button.primary:not(:disabled):active {\r\n    transform: translateY(1px);\r\n  }\r\n\r\n  button.ghost {\r\n    background: transparent;\r\n    border: 1px solid #1f7ae0;\r\n    color: #1f7ae0;\r\n  }\r\n\r\n  button.ghost:not(:disabled):hover {\r\n    background: rgba(31, 122, 224, 0.08);\r\n  }\r\n\r\n  @media (max-width: 600px) {\r\n    .project-create {\r\n      padding: 1.25rem;\r\n    }\r\n\r\n    .actions {\r\n      flex-direction: column;\r\n    }\r\n\r\n    button {\r\n      width: 100%;\r\n    }\r\n  }\r\n</style>\r\n"
			},
			"tags": ["fixable"],
			"source": null
		},
		{
			"category": "lint/correctness/noUnusedImports",
			"severity": "warning",
			"description": "This import is unused.",
			"message": [
				{ "elements": [], "content": "This " },
				{ "elements": ["Emphasis"], "content": "import" },
				{ "elements": [], "content": " is unused." }
			],
			"advices": {
				"advices": [
					{
						"log": [
							"info",
							[
								{
									"elements": [],
									"content": "Unused imports might be the result of an incomplete refactoring."
								}
							]
						]
					},
					{
						"log": [
							"info",
							[
								{
									"elements": [],
									"content": "Unsafe fix: Remove the unused imports."
								}
							]
						]
					},
					{
						"diff": {
							"dictionary": "import { projectManager } from \"../projectManager.svelte\";\nimport { cardManager } from \"../cardManager.svelte\";\nimport AddForm from \"./AddForm.svelte\";\nimport EditCardForm from \"./EditCardForm.svelte\";\nimport CardList from \"./CardList.svelte\";\nimport { modalStore } from \"../stores/modalStore\";\t}\n}\n",
							"ops": [
								{ "diffOp": { "equal": { "range": [0, 151] } } },
								{ "diffOp": { "delete": { "range": [151, 201] } } },
								{ "diffOp": { "equal": { "range": [201, 294] } } },
								{ "equalLines": { "line_count": 89 } },
								{ "diffOp": { "equal": { "range": [294, 299] } } }
							]
						}
					}
				]
			},
			"verboseAdvices": { "advices": [] },
			"location": {
				"path": { "file": "src\\lib\\components\\ProjectDetail.svelte" },
				"span": [179, 191],
				"sourceCode": "<script lang=\"ts\">\r\nimport { projectManager } from \"../projectManager.svelte\";\nimport { cardManager } from \"../cardManager.svelte\";\nimport AddForm from \"./AddForm.svelte\";\nimport EditCardForm from \"./EditCardForm.svelte\";\nimport CardList from \"./CardList.svelte\";\nimport { modalStore } from \"../stores/modalStore\";\nimport type { LearningCard } from \"../../types\";\n\ninterface Props {\n\tprojectId: string;\n}\n\nconst { projectId }: Props = $props();\n\n// Derived value: find current project\nconst project = $derived.by(() => {\n\tif (!projectManager.all || !projectId) return undefined;\n\treturn projectManager.all.find((p) => p.id === projectId);\n});\n\n// Effect: Ensure projects are loaded\n$effect(() => {\n\tif (!projectManager.all || projectManager.all.length === 0) {\n\t\tprojectManager.loadProjects();\n\t}\n});\n\nfunction openAddForm() {\n\tmodalStore.open(AddForm, {\n\t\tinitialProject: projectId,\n\t\tonSubmit: async (data: {\n\t\t\ttitle: string;\n\t\t\tprompt: string;\n\t\t\ttopic?: string;\n\t\t\tproject?: string;\n\t\t}) => {\n\t\t\tawait handleFormSubmit(data);\n\t\t\tmodalStore.close();\n\t\t},\n\t\tonCancel: () => modalStore.close(),\n\t});\n}\n\nasync function handleFormSubmit(data: {\n\ttitle: string;\n\tprompt: string;\n\ttopic?: string;\n\tproject?: string;\n}) {\n\tconst hasProject = data.project && String(data.project).trim().length > 0;\n\tconst assignedProject = hasProject ? data.project : projectId || undefined;\n\tawait cardManager.addCard({ ...data, project: assignedProject });\n\tcardManager.closeForm();\n}\n\nasync function handleStart(card: LearningCard) {\n\t// Get the project's system prompt if the card belongs to a project\n\tlet systemPrompt: string | undefined;\n\tif (card.project) {\n\t\tconst proj = projectManager.all.find((p) => p.id === card.project);\n\t\tsystemPrompt = proj?.systemPrompt;\n\t}\n\n\t// Pass both the card prompt and system prompt\n\tawait cardManager.runPromptWithSystem(card.prompt, systemPrompt);\n}\n\nasync function handleCardToggle(id: string, status: \"active\" | \"done\") {\n\tawait cardManager.updateCardStatus(id, status);\n}\n\nlet editingCard = $state<LearningCard | null>(null);\n\nfunction handleCardEdit(card: LearningCard) {\n\teditingCard = card;\n}\n\nasync function handleEditSubmit(data: {\n\tid: string;\n\ttitle: string;\n\tprompt: string;\n\ttopic?: string;\n\tproject?: string;\n}) {\n\tawait cardManager.updateCard(data);\n\teditingCard = null;\n}\n\nfunction handleEditCancel() {\n\teditingCard = null;\n}\n\nasync function handleCardDelete(id: string) {\n\tif (window.confirm(\"Are you sure you want to delete this learning card?\")) {\n\t\tawait cardManager.deleteCard(id);\n\t}\n}\n</script>\r\n\r\n<section class=\"project-detail\">\r\n  <header>\r\n    <h2>{project ? project.name : 'Project'}</h2>\r\n    <div class=\"actions\">\r\n      <button\r\n        class=\"primary\"\r\n        onclick={openAddForm}\r\n        type=\"button\"\r\n      >\r\n        + New Learning Item\r\n      </button>\r\n    </div>\r\n  </header>\r\n\r\n  \r\n\r\n  {#if editingCard}\r\n    <dialog open class=\"modal-overlay\" onclick={(e) => { if (e.target === e.currentTarget) handleEditCancel(); }} onkeydown={(e) => e.key === 'Escape' && handleEditCancel()}>\r\n      <div\r\n        class=\"modal-content\"\r\n        aria-labelledby=\"edit-heading\"\r\n        role=\"document\"\r\n      >\r\n        <EditCardForm \r\n          card={editingCard}\r\n          onSubmit={handleEditSubmit}\r\n          onCancel={handleEditCancel}\r\n        />\r\n      </div>\r\n    </dialog>\r\n  {/if}\r\n\r\n  <CardList\r\n    onStart={handleStart}\r\n    onToggle={handleCardToggle}\r\n    onEdit={handleCardEdit}\r\n    onDelete={handleCardDelete}\r\n  />\r\n</section>\r\n\r\n<style>\r\n  .project-detail { padding:1rem; }\r\n  .actions { display:flex; gap:8px; }\r\n</style>\r\n"
			},
			"tags": ["fixable"],
			"source": null
		},
		{
			"category": "lint/correctness/noUnusedImports",
			"severity": "warning",
			"description": "This import is unused.",
			"message": [
				{ "elements": [], "content": "This " },
				{ "elements": ["Emphasis"], "content": "import" },
				{ "elements": [], "content": " is unused." }
			],
			"advices": {
				"advices": [
					{
						"log": [
							"info",
							[
								{
									"elements": [],
									"content": "Unused imports might be the result of an incomplete refactoring."
								}
							]
						]
					},
					{
						"log": [
							"info",
							[
								{
									"elements": [],
									"content": "Unsafe fix: Remove the unused imports."
								}
							]
						]
					},
					{
						"diff": {
							"dictionary": "import { projectManager } from \"../projectManager.svelte\";\nimport { cardManager } from \"../cardManager.svelte\";\nimport AddForm from \"./AddForm.svelte\";\nimport EditCardForm from \"./EditCardForm.svelte\";\nimport CardList from \"./CardList.svelte\";\nimport { modalStore } from \"../stores/modalStore\";\nimport type { LearningCard } from \"../../types\";\t}\n}\n",
							"ops": [
								{ "diffOp": { "equal": { "range": [0, 201] } } },
								{ "diffOp": { "delete": { "range": [201, 243] } } },
								{ "diffOp": { "equal": { "range": [243, 343] } } },
								{ "equalLines": { "line_count": 88 } },
								{ "diffOp": { "equal": { "range": [343, 348] } } }
							]
						}
					}
				]
			},
			"verboseAdvices": { "advices": [] },
			"location": {
				"path": { "file": "src\\lib\\components\\ProjectDetail.svelte" },
				"span": [229, 237],
				"sourceCode": "<script lang=\"ts\">\r\nimport { projectManager } from \"../projectManager.svelte\";\nimport { cardManager } from \"../cardManager.svelte\";\nimport AddForm from \"./AddForm.svelte\";\nimport EditCardForm from \"./EditCardForm.svelte\";\nimport CardList from \"./CardList.svelte\";\nimport { modalStore } from \"../stores/modalStore\";\nimport type { LearningCard } from \"../../types\";\n\ninterface Props {\n\tprojectId: string;\n}\n\nconst { projectId }: Props = $props();\n\n// Derived value: find current project\nconst project = $derived.by(() => {\n\tif (!projectManager.all || !projectId) return undefined;\n\treturn projectManager.all.find((p) => p.id === projectId);\n});\n\n// Effect: Ensure projects are loaded\n$effect(() => {\n\tif (!projectManager.all || projectManager.all.length === 0) {\n\t\tprojectManager.loadProjects();\n\t}\n});\n\nfunction openAddForm() {\n\tmodalStore.open(AddForm, {\n\t\tinitialProject: projectId,\n\t\tonSubmit: async (data: {\n\t\t\ttitle: string;\n\t\t\tprompt: string;\n\t\t\ttopic?: string;\n\t\t\tproject?: string;\n\t\t}) => {\n\t\t\tawait handleFormSubmit(data);\n\t\t\tmodalStore.close();\n\t\t},\n\t\tonCancel: () => modalStore.close(),\n\t});\n}\n\nasync function handleFormSubmit(data: {\n\ttitle: string;\n\tprompt: string;\n\ttopic?: string;\n\tproject?: string;\n}) {\n\tconst hasProject = data.project && String(data.project).trim().length > 0;\n\tconst assignedProject = hasProject ? data.project : projectId || undefined;\n\tawait cardManager.addCard({ ...data, project: assignedProject });\n\tcardManager.closeForm();\n}\n\nasync function handleStart(card: LearningCard) {\n\t// Get the project's system prompt if the card belongs to a project\n\tlet systemPrompt: string | undefined;\n\tif (card.project) {\n\t\tconst proj = projectManager.all.find((p) => p.id === card.project);\n\t\tsystemPrompt = proj?.systemPrompt;\n\t}\n\n\t// Pass both the card prompt and system prompt\n\tawait cardManager.runPromptWithSystem(card.prompt, systemPrompt);\n}\n\nasync function handleCardToggle(id: string, status: \"active\" | \"done\") {\n\tawait cardManager.updateCardStatus(id, status);\n}\n\nlet editingCard = $state<LearningCard | null>(null);\n\nfunction handleCardEdit(card: LearningCard) {\n\teditingCard = card;\n}\n\nasync function handleEditSubmit(data: {\n\tid: string;\n\ttitle: string;\n\tprompt: string;\n\ttopic?: string;\n\tproject?: string;\n}) {\n\tawait cardManager.updateCard(data);\n\teditingCard = null;\n}\n\nfunction handleEditCancel() {\n\teditingCard = null;\n}\n\nasync function handleCardDelete(id: string) {\n\tif (window.confirm(\"Are you sure you want to delete this learning card?\")) {\n\t\tawait cardManager.deleteCard(id);\n\t}\n}\n</script>\r\n\r\n<section class=\"project-detail\">\r\n  <header>\r\n    <h2>{project ? project.name : 'Project'}</h2>\r\n    <div class=\"actions\">\r\n      <button\r\n        class=\"primary\"\r\n        onclick={openAddForm}\r\n        type=\"button\"\r\n      >\r\n        + New Learning Item\r\n      </button>\r\n    </div>\r\n  </header>\r\n\r\n  \r\n\r\n  {#if editingCard}\r\n    <dialog open class=\"modal-overlay\" onclick={(e) => { if (e.target === e.currentTarget) handleEditCancel(); }} onkeydown={(e) => e.key === 'Escape' && handleEditCancel()}>\r\n      <div\r\n        class=\"modal-content\"\r\n        aria-labelledby=\"edit-heading\"\r\n        role=\"document\"\r\n      >\r\n        <EditCardForm \r\n          card={editingCard}\r\n          onSubmit={handleEditSubmit}\r\n          onCancel={handleEditCancel}\r\n        />\r\n      </div>\r\n    </dialog>\r\n  {/if}\r\n\r\n  <CardList\r\n    onStart={handleStart}\r\n    onToggle={handleCardToggle}\r\n    onEdit={handleCardEdit}\r\n    onDelete={handleCardDelete}\r\n  />\r\n</section>\r\n\r\n<style>\r\n  .project-detail { padding:1rem; }\r\n  .actions { display:flex; gap:8px; }\r\n</style>\r\n"
			},
			"tags": ["fixable"],
			"source": null
		},
		{
			"category": "lint/correctness/noUnusedVariables",
			"severity": "warning",
			"description": "This variable project is unused.",
			"message": [
				{ "elements": [], "content": "This variable " },
				{ "elements": ["Emphasis"], "content": "project" },
				{ "elements": [], "content": " is unused." }
			],
			"advices": {
				"advices": [
					{
						"log": [
							"info",
							[
								{
									"elements": [],
									"content": "Unused variables are often the result of typos, incomplete refactors, or other sources of bugs."
								}
							]
						]
					},
					{
						"log": [
							"info",
							[
								{
									"elements": [],
									"content": "Unsafe fix: If this is intentional, prepend "
								},
								{ "elements": ["Emphasis"], "content": "project" },
								{ "elements": [], "content": " with an underscore." }
							]
						]
					},
					{
						"diff": {
							"dictionary": "import { projectManager } from \"../projectManager.svelte\";\nimport { cardManager } from \"../cardManager.svelte\";\nimport AddForm from \"./AddForm.svelte\";\n// Derived value: find current project\nconst project_project = $derived.by(() => {\n\tif (!projectManager.all || !projectId) return undefined;\n\treturn projectManager.all.find((p) => p.id === projectId);\t}\n}\n",
							"ops": [
								{ "diffOp": { "equal": { "range": [0, 151] } } },
								{ "equalLines": { "line_count": 10 } },
								{ "diffOp": { "equal": { "range": [151, 197] } } },
								{ "diffOp": { "delete": { "range": [197, 204] } } },
								{ "diffOp": { "insert": { "range": [204, 212] } } },
								{ "diffOp": { "equal": { "range": [212, 213] } } },
								{ "diffOp": { "equal": { "range": [213, 352] } } },
								{ "equalLines": { "line_count": 77 } },
								{ "diffOp": { "equal": { "range": [352, 357] } } }
							]
						}
					}
				]
			},
			"verboseAdvices": { "advices": [] },
			"location": {
				"path": { "file": "src\\lib\\components\\ProjectDetail.svelte" },
				"span": [491, 498],
				"sourceCode": "<script lang=\"ts\">\r\nimport { projectManager } from \"../projectManager.svelte\";\nimport { cardManager } from \"../cardManager.svelte\";\nimport AddForm from \"./AddForm.svelte\";\nimport EditCardForm from \"./EditCardForm.svelte\";\nimport CardList from \"./CardList.svelte\";\nimport { modalStore } from \"../stores/modalStore\";\nimport type { LearningCard } from \"../../types\";\n\ninterface Props {\n\tprojectId: string;\n}\n\nconst { projectId }: Props = $props();\n\n// Derived value: find current project\nconst project = $derived.by(() => {\n\tif (!projectManager.all || !projectId) return undefined;\n\treturn projectManager.all.find((p) => p.id === projectId);\n});\n\n// Effect: Ensure projects are loaded\n$effect(() => {\n\tif (!projectManager.all || projectManager.all.length === 0) {\n\t\tprojectManager.loadProjects();\n\t}\n});\n\nfunction openAddForm() {\n\tmodalStore.open(AddForm, {\n\t\tinitialProject: projectId,\n\t\tonSubmit: async (data: {\n\t\t\ttitle: string;\n\t\t\tprompt: string;\n\t\t\ttopic?: string;\n\t\t\tproject?: string;\n\t\t}) => {\n\t\t\tawait handleFormSubmit(data);\n\t\t\tmodalStore.close();\n\t\t},\n\t\tonCancel: () => modalStore.close(),\n\t});\n}\n\nasync function handleFormSubmit(data: {\n\ttitle: string;\n\tprompt: string;\n\ttopic?: string;\n\tproject?: string;\n}) {\n\tconst hasProject = data.project && String(data.project).trim().length > 0;\n\tconst assignedProject = hasProject ? data.project : projectId || undefined;\n\tawait cardManager.addCard({ ...data, project: assignedProject });\n\tcardManager.closeForm();\n}\n\nasync function handleStart(card: LearningCard) {\n\t// Get the project's system prompt if the card belongs to a project\n\tlet systemPrompt: string | undefined;\n\tif (card.project) {\n\t\tconst proj = projectManager.all.find((p) => p.id === card.project);\n\t\tsystemPrompt = proj?.systemPrompt;\n\t}\n\n\t// Pass both the card prompt and system prompt\n\tawait cardManager.runPromptWithSystem(card.prompt, systemPrompt);\n}\n\nasync function handleCardToggle(id: string, status: \"active\" | \"done\") {\n\tawait cardManager.updateCardStatus(id, status);\n}\n\nlet editingCard = $state<LearningCard | null>(null);\n\nfunction handleCardEdit(card: LearningCard) {\n\teditingCard = card;\n}\n\nasync function handleEditSubmit(data: {\n\tid: string;\n\ttitle: string;\n\tprompt: string;\n\ttopic?: string;\n\tproject?: string;\n}) {\n\tawait cardManager.updateCard(data);\n\teditingCard = null;\n}\n\nfunction handleEditCancel() {\n\teditingCard = null;\n}\n\nasync function handleCardDelete(id: string) {\n\tif (window.confirm(\"Are you sure you want to delete this learning card?\")) {\n\t\tawait cardManager.deleteCard(id);\n\t}\n}\n</script>\r\n\r\n<section class=\"project-detail\">\r\n  <header>\r\n    <h2>{project ? project.name : 'Project'}</h2>\r\n    <div class=\"actions\">\r\n      <button\r\n        class=\"primary\"\r\n        onclick={openAddForm}\r\n        type=\"button\"\r\n      >\r\n        + New Learning Item\r\n      </button>\r\n    </div>\r\n  </header>\r\n\r\n  \r\n\r\n  {#if editingCard}\r\n    <dialog open class=\"modal-overlay\" onclick={(e) => { if (e.target === e.currentTarget) handleEditCancel(); }} onkeydown={(e) => e.key === 'Escape' && handleEditCancel()}>\r\n      <div\r\n        class=\"modal-content\"\r\n        aria-labelledby=\"edit-heading\"\r\n        role=\"document\"\r\n      >\r\n        <EditCardForm \r\n          card={editingCard}\r\n          onSubmit={handleEditSubmit}\r\n          onCancel={handleEditCancel}\r\n        />\r\n      </div>\r\n    </dialog>\r\n  {/if}\r\n\r\n  <CardList\r\n    onStart={handleStart}\r\n    onToggle={handleCardToggle}\r\n    onEdit={handleCardEdit}\r\n    onDelete={handleCardDelete}\r\n  />\r\n</section>\r\n\r\n<style>\r\n  .project-detail { padding:1rem; }\r\n  .actions { display:flex; gap:8px; }\r\n</style>\r\n"
			},
			"tags": ["fixable"],
			"source": null
		},
		{
			"category": "lint/correctness/noUnusedVariables",
			"severity": "warning",
			"description": "This function openAddForm is unused.",
			"message": [
				{ "elements": [], "content": "This function " },
				{ "elements": ["Emphasis"], "content": "openAddForm" },
				{ "elements": [], "content": " is unused." }
			],
			"advices": {
				"advices": [
					{
						"log": [
							"info",
							[
								{
									"elements": [],
									"content": "Unused variables are often the result of typos, incomplete refactors, or other sources of bugs."
								}
							]
						]
					},
					{
						"log": [
							"info",
							[
								{
									"elements": [],
									"content": "Unsafe fix: If this is intentional, prepend "
								},
								{ "elements": ["Emphasis"], "content": "openAddForm" },
								{ "elements": [], "content": " with an underscore." }
							]
						]
					},
					{
						"diff": {
							"dictionary": "import { projectManager } from \"../projectManager.svelte\";\nimport { cardManager } from \"../cardManager.svelte\";\nimport AddForm from \"./AddForm.svelte\";});\n\nfunction openAddForm_openAddForm() {\n\tmodalStore.open(AddForm, {\n\t\tinitialProject: projectId,\t}\n}\n",
							"ops": [
								{ "diffOp": { "equal": { "range": [0, 151] } } },
								{ "equalLines": { "line_count": 22 } },
								{ "diffOp": { "equal": { "range": [151, 165] } } },
								{ "diffOp": { "delete": { "range": [165, 176] } } },
								{ "diffOp": { "insert": { "range": [176, 188] } } },
								{ "diffOp": { "equal": { "range": [188, 249] } } },
								{ "equalLines": { "line_count": 65 } },
								{ "diffOp": { "equal": { "range": [249, 254] } } }
							]
						}
					}
				]
			},
			"verboseAdvices": { "advices": [] },
			"location": {
				"path": { "file": "src\\lib\\components\\ProjectDetail.svelte" },
				"span": [811, 822],
				"sourceCode": "<script lang=\"ts\">\r\nimport { projectManager } from \"../projectManager.svelte\";\nimport { cardManager } from \"../cardManager.svelte\";\nimport AddForm from \"./AddForm.svelte\";\nimport EditCardForm from \"./EditCardForm.svelte\";\nimport CardList from \"./CardList.svelte\";\nimport { modalStore } from \"../stores/modalStore\";\nimport type { LearningCard } from \"../../types\";\n\ninterface Props {\n\tprojectId: string;\n}\n\nconst { projectId }: Props = $props();\n\n// Derived value: find current project\nconst project = $derived.by(() => {\n\tif (!projectManager.all || !projectId) return undefined;\n\treturn projectManager.all.find((p) => p.id === projectId);\n});\n\n// Effect: Ensure projects are loaded\n$effect(() => {\n\tif (!projectManager.all || projectManager.all.length === 0) {\n\t\tprojectManager.loadProjects();\n\t}\n});\n\nfunction openAddForm() {\n\tmodalStore.open(AddForm, {\n\t\tinitialProject: projectId,\n\t\tonSubmit: async (data: {\n\t\t\ttitle: string;\n\t\t\tprompt: string;\n\t\t\ttopic?: string;\n\t\t\tproject?: string;\n\t\t}) => {\n\t\t\tawait handleFormSubmit(data);\n\t\t\tmodalStore.close();\n\t\t},\n\t\tonCancel: () => modalStore.close(),\n\t});\n}\n\nasync function handleFormSubmit(data: {\n\ttitle: string;\n\tprompt: string;\n\ttopic?: string;\n\tproject?: string;\n}) {\n\tconst hasProject = data.project && String(data.project).trim().length > 0;\n\tconst assignedProject = hasProject ? data.project : projectId || undefined;\n\tawait cardManager.addCard({ ...data, project: assignedProject });\n\tcardManager.closeForm();\n}\n\nasync function handleStart(card: LearningCard) {\n\t// Get the project's system prompt if the card belongs to a project\n\tlet systemPrompt: string | undefined;\n\tif (card.project) {\n\t\tconst proj = projectManager.all.find((p) => p.id === card.project);\n\t\tsystemPrompt = proj?.systemPrompt;\n\t}\n\n\t// Pass both the card prompt and system prompt\n\tawait cardManager.runPromptWithSystem(card.prompt, systemPrompt);\n}\n\nasync function handleCardToggle(id: string, status: \"active\" | \"done\") {\n\tawait cardManager.updateCardStatus(id, status);\n}\n\nlet editingCard = $state<LearningCard | null>(null);\n\nfunction handleCardEdit(card: LearningCard) {\n\teditingCard = card;\n}\n\nasync function handleEditSubmit(data: {\n\tid: string;\n\ttitle: string;\n\tprompt: string;\n\ttopic?: string;\n\tproject?: string;\n}) {\n\tawait cardManager.updateCard(data);\n\teditingCard = null;\n}\n\nfunction handleEditCancel() {\n\teditingCard = null;\n}\n\nasync function handleCardDelete(id: string) {\n\tif (window.confirm(\"Are you sure you want to delete this learning card?\")) {\n\t\tawait cardManager.deleteCard(id);\n\t}\n}\n</script>\r\n\r\n<section class=\"project-detail\">\r\n  <header>\r\n    <h2>{project ? project.name : 'Project'}</h2>\r\n    <div class=\"actions\">\r\n      <button\r\n        class=\"primary\"\r\n        onclick={openAddForm}\r\n        type=\"button\"\r\n      >\r\n        + New Learning Item\r\n      </button>\r\n    </div>\r\n  </header>\r\n\r\n  \r\n\r\n  {#if editingCard}\r\n    <dialog open class=\"modal-overlay\" onclick={(e) => { if (e.target === e.currentTarget) handleEditCancel(); }} onkeydown={(e) => e.key === 'Escape' && handleEditCancel()}>\r\n      <div\r\n        class=\"modal-content\"\r\n        aria-labelledby=\"edit-heading\"\r\n        role=\"document\"\r\n      >\r\n        <EditCardForm \r\n          card={editingCard}\r\n          onSubmit={handleEditSubmit}\r\n          onCancel={handleEditCancel}\r\n        />\r\n      </div>\r\n    </dialog>\r\n  {/if}\r\n\r\n  <CardList\r\n    onStart={handleStart}\r\n    onToggle={handleCardToggle}\r\n    onEdit={handleCardEdit}\r\n    onDelete={handleCardDelete}\r\n  />\r\n</section>\r\n\r\n<style>\r\n  .project-detail { padding:1rem; }\r\n  .actions { display:flex; gap:8px; }\r\n</style>\r\n"
			},
			"tags": ["fixable"],
			"source": null
		},
		{
			"category": "lint/correctness/noUnusedVariables",
			"severity": "warning",
			"description": "This function handleStart is unused.",
			"message": [
				{ "elements": [], "content": "This function " },
				{ "elements": ["Emphasis"], "content": "handleStart" },
				{ "elements": [], "content": " is unused." }
			],
			"advices": {
				"advices": [
					{
						"log": [
							"info",
							[
								{
									"elements": [],
									"content": "Unused variables are often the result of typos, incomplete refactors, or other sources of bugs."
								}
							]
						]
					},
					{
						"log": [
							"info",
							[
								{
									"elements": [],
									"content": "Unsafe fix: If this is intentional, prepend "
								},
								{ "elements": ["Emphasis"], "content": "handleStart" },
								{ "elements": [], "content": " with an underscore." }
							]
						]
					},
					{
						"diff": {
							"dictionary": "import { projectManager } from \"../projectManager.svelte\";\nimport { cardManager } from \"../cardManager.svelte\";\nimport AddForm from \"./AddForm.svelte\";}\n\nasync function handleStart_handleStart(card: LearningCard) {\n\t// Get the project's system prompt if the card belongs to a project\n\tlet systemPrompt: string | undefined;\t}\n}\n",
							"ops": [
								{ "diffOp": { "equal": { "range": [0, 151] } } },
								{ "equalLines": { "line_count": 50 } },
								{ "diffOp": { "equal": { "range": [151, 169] } } },
								{ "diffOp": { "delete": { "range": [169, 180] } } },
								{ "diffOp": { "insert": { "range": [180, 192] } } },
								{ "diffOp": { "equal": { "range": [192, 322] } } },
								{ "equalLines": { "line_count": 37 } },
								{ "diffOp": { "equal": { "range": [322, 327] } } }
							]
						}
					}
				]
			},
			"verboseAdvices": { "advices": [] },
			"location": {
				"path": { "file": "src\\lib\\components\\ProjectDetail.svelte" },
				"span": [1483, 1494],
				"sourceCode": "<script lang=\"ts\">\r\nimport { projectManager } from \"../projectManager.svelte\";\nimport { cardManager } from \"../cardManager.svelte\";\nimport AddForm from \"./AddForm.svelte\";\nimport EditCardForm from \"./EditCardForm.svelte\";\nimport CardList from \"./CardList.svelte\";\nimport { modalStore } from \"../stores/modalStore\";\nimport type { LearningCard } from \"../../types\";\n\ninterface Props {\n\tprojectId: string;\n}\n\nconst { projectId }: Props = $props();\n\n// Derived value: find current project\nconst project = $derived.by(() => {\n\tif (!projectManager.all || !projectId) return undefined;\n\treturn projectManager.all.find((p) => p.id === projectId);\n});\n\n// Effect: Ensure projects are loaded\n$effect(() => {\n\tif (!projectManager.all || projectManager.all.length === 0) {\n\t\tprojectManager.loadProjects();\n\t}\n});\n\nfunction openAddForm() {\n\tmodalStore.open(AddForm, {\n\t\tinitialProject: projectId,\n\t\tonSubmit: async (data: {\n\t\t\ttitle: string;\n\t\t\tprompt: string;\n\t\t\ttopic?: string;\n\t\t\tproject?: string;\n\t\t}) => {\n\t\t\tawait handleFormSubmit(data);\n\t\t\tmodalStore.close();\n\t\t},\n\t\tonCancel: () => modalStore.close(),\n\t});\n}\n\nasync function handleFormSubmit(data: {\n\ttitle: string;\n\tprompt: string;\n\ttopic?: string;\n\tproject?: string;\n}) {\n\tconst hasProject = data.project && String(data.project).trim().length > 0;\n\tconst assignedProject = hasProject ? data.project : projectId || undefined;\n\tawait cardManager.addCard({ ...data, project: assignedProject });\n\tcardManager.closeForm();\n}\n\nasync function handleStart(card: LearningCard) {\n\t// Get the project's system prompt if the card belongs to a project\n\tlet systemPrompt: string | undefined;\n\tif (card.project) {\n\t\tconst proj = projectManager.all.find((p) => p.id === card.project);\n\t\tsystemPrompt = proj?.systemPrompt;\n\t}\n\n\t// Pass both the card prompt and system prompt\n\tawait cardManager.runPromptWithSystem(card.prompt, systemPrompt);\n}\n\nasync function handleCardToggle(id: string, status: \"active\" | \"done\") {\n\tawait cardManager.updateCardStatus(id, status);\n}\n\nlet editingCard = $state<LearningCard | null>(null);\n\nfunction handleCardEdit(card: LearningCard) {\n\teditingCard = card;\n}\n\nasync function handleEditSubmit(data: {\n\tid: string;\n\ttitle: string;\n\tprompt: string;\n\ttopic?: string;\n\tproject?: string;\n}) {\n\tawait cardManager.updateCard(data);\n\teditingCard = null;\n}\n\nfunction handleEditCancel() {\n\teditingCard = null;\n}\n\nasync function handleCardDelete(id: string) {\n\tif (window.confirm(\"Are you sure you want to delete this learning card?\")) {\n\t\tawait cardManager.deleteCard(id);\n\t}\n}\n</script>\r\n\r\n<section class=\"project-detail\">\r\n  <header>\r\n    <h2>{project ? project.name : 'Project'}</h2>\r\n    <div class=\"actions\">\r\n      <button\r\n        class=\"primary\"\r\n        onclick={openAddForm}\r\n        type=\"button\"\r\n      >\r\n        + New Learning Item\r\n      </button>\r\n    </div>\r\n  </header>\r\n\r\n  \r\n\r\n  {#if editingCard}\r\n    <dialog open class=\"modal-overlay\" onclick={(e) => { if (e.target === e.currentTarget) handleEditCancel(); }} onkeydown={(e) => e.key === 'Escape' && handleEditCancel()}>\r\n      <div\r\n        class=\"modal-content\"\r\n        aria-labelledby=\"edit-heading\"\r\n        role=\"document\"\r\n      >\r\n        <EditCardForm \r\n          card={editingCard}\r\n          onSubmit={handleEditSubmit}\r\n          onCancel={handleEditCancel}\r\n        />\r\n      </div>\r\n    </dialog>\r\n  {/if}\r\n\r\n  <CardList\r\n    onStart={handleStart}\r\n    onToggle={handleCardToggle}\r\n    onEdit={handleCardEdit}\r\n    onDelete={handleCardDelete}\r\n  />\r\n</section>\r\n\r\n<style>\r\n  .project-detail { padding:1rem; }\r\n  .actions { display:flex; gap:8px; }\r\n</style>\r\n"
			},
			"tags": ["fixable"],
			"source": null
		},
		{
			"category": "lint/correctness/noUnusedVariables",
			"severity": "warning",
			"description": "This function handleCardToggle is unused.",
			"message": [
				{ "elements": [], "content": "This function " },
				{ "elements": ["Emphasis"], "content": "handleCardToggle" },
				{ "elements": [], "content": " is unused." }
			],
			"advices": {
				"advices": [
					{
						"log": [
							"info",
							[
								{
									"elements": [],
									"content": "Unused variables are often the result of typos, incomplete refactors, or other sources of bugs."
								}
							]
						]
					},
					{
						"log": [
							"info",
							[
								{
									"elements": [],
									"content": "Unsafe fix: If this is intentional, prepend "
								},
								{ "elements": ["Emphasis"], "content": "handleCardToggle" },
								{ "elements": [], "content": " with an underscore." }
							]
						]
					},
					{
						"diff": {
							"dictionary": "import { projectManager } from \"../projectManager.svelte\";\nimport { cardManager } from \"../cardManager.svelte\";\nimport AddForm from \"./AddForm.svelte\";}\n\nasync function handleCardToggle_handleCardToggle(id: string, status: \"active\" | \"done\") {\n\tawait cardManager.updateCardStatus(id, status);\n}\t}\n}\n",
							"ops": [
								{ "diffOp": { "equal": { "range": [0, 151] } } },
								{ "equalLines": { "line_count": 62 } },
								{ "diffOp": { "equal": { "range": [151, 169] } } },
								{ "diffOp": { "delete": { "range": [169, 185] } } },
								{ "diffOp": { "insert": { "range": [185, 202] } } },
								{ "diffOp": { "equal": { "range": [202, 294] } } },
								{ "equalLines": { "line_count": 25 } },
								{ "diffOp": { "equal": { "range": [294, 299] } } }
							]
						}
					}
				]
			},
			"verboseAdvices": { "advices": [] },
			"location": {
				"path": { "file": "src\\lib\\components\\ProjectDetail.svelte" },
				"span": [1890, 1906],
				"sourceCode": "<script lang=\"ts\">\r\nimport { projectManager } from \"../projectManager.svelte\";\nimport { cardManager } from \"../cardManager.svelte\";\nimport AddForm from \"./AddForm.svelte\";\nimport EditCardForm from \"./EditCardForm.svelte\";\nimport CardList from \"./CardList.svelte\";\nimport { modalStore } from \"../stores/modalStore\";\nimport type { LearningCard } from \"../../types\";\n\ninterface Props {\n\tprojectId: string;\n}\n\nconst { projectId }: Props = $props();\n\n// Derived value: find current project\nconst project = $derived.by(() => {\n\tif (!projectManager.all || !projectId) return undefined;\n\treturn projectManager.all.find((p) => p.id === projectId);\n});\n\n// Effect: Ensure projects are loaded\n$effect(() => {\n\tif (!projectManager.all || projectManager.all.length === 0) {\n\t\tprojectManager.loadProjects();\n\t}\n});\n\nfunction openAddForm() {\n\tmodalStore.open(AddForm, {\n\t\tinitialProject: projectId,\n\t\tonSubmit: async (data: {\n\t\t\ttitle: string;\n\t\t\tprompt: string;\n\t\t\ttopic?: string;\n\t\t\tproject?: string;\n\t\t}) => {\n\t\t\tawait handleFormSubmit(data);\n\t\t\tmodalStore.close();\n\t\t},\n\t\tonCancel: () => modalStore.close(),\n\t});\n}\n\nasync function handleFormSubmit(data: {\n\ttitle: string;\n\tprompt: string;\n\ttopic?: string;\n\tproject?: string;\n}) {\n\tconst hasProject = data.project && String(data.project).trim().length > 0;\n\tconst assignedProject = hasProject ? data.project : projectId || undefined;\n\tawait cardManager.addCard({ ...data, project: assignedProject });\n\tcardManager.closeForm();\n}\n\nasync function handleStart(card: LearningCard) {\n\t// Get the project's system prompt if the card belongs to a project\n\tlet systemPrompt: string | undefined;\n\tif (card.project) {\n\t\tconst proj = projectManager.all.find((p) => p.id === card.project);\n\t\tsystemPrompt = proj?.systemPrompt;\n\t}\n\n\t// Pass both the card prompt and system prompt\n\tawait cardManager.runPromptWithSystem(card.prompt, systemPrompt);\n}\n\nasync function handleCardToggle(id: string, status: \"active\" | \"done\") {\n\tawait cardManager.updateCardStatus(id, status);\n}\n\nlet editingCard = $state<LearningCard | null>(null);\n\nfunction handleCardEdit(card: LearningCard) {\n\teditingCard = card;\n}\n\nasync function handleEditSubmit(data: {\n\tid: string;\n\ttitle: string;\n\tprompt: string;\n\ttopic?: string;\n\tproject?: string;\n}) {\n\tawait cardManager.updateCard(data);\n\teditingCard = null;\n}\n\nfunction handleEditCancel() {\n\teditingCard = null;\n}\n\nasync function handleCardDelete(id: string) {\n\tif (window.confirm(\"Are you sure you want to delete this learning card?\")) {\n\t\tawait cardManager.deleteCard(id);\n\t}\n}\n</script>\r\n\r\n<section class=\"project-detail\">\r\n  <header>\r\n    <h2>{project ? project.name : 'Project'}</h2>\r\n    <div class=\"actions\">\r\n      <button\r\n        class=\"primary\"\r\n        onclick={openAddForm}\r\n        type=\"button\"\r\n      >\r\n        + New Learning Item\r\n      </button>\r\n    </div>\r\n  </header>\r\n\r\n  \r\n\r\n  {#if editingCard}\r\n    <dialog open class=\"modal-overlay\" onclick={(e) => { if (e.target === e.currentTarget) handleEditCancel(); }} onkeydown={(e) => e.key === 'Escape' && handleEditCancel()}>\r\n      <div\r\n        class=\"modal-content\"\r\n        aria-labelledby=\"edit-heading\"\r\n        role=\"document\"\r\n      >\r\n        <EditCardForm \r\n          card={editingCard}\r\n          onSubmit={handleEditSubmit}\r\n          onCancel={handleEditCancel}\r\n        />\r\n      </div>\r\n    </dialog>\r\n  {/if}\r\n\r\n  <CardList\r\n    onStart={handleStart}\r\n    onToggle={handleCardToggle}\r\n    onEdit={handleCardEdit}\r\n    onDelete={handleCardDelete}\r\n  />\r\n</section>\r\n\r\n<style>\r\n  .project-detail { padding:1rem; }\r\n  .actions { display:flex; gap:8px; }\r\n</style>\r\n"
			},
			"tags": ["fixable"],
			"source": null
		},
		{
			"category": "lint/correctness/noUnusedVariables",
			"severity": "warning",
			"description": "This variable editingCard is unused.",
			"message": [
				{ "elements": [], "content": "This variable " },
				{ "elements": ["Emphasis"], "content": "editingCard" },
				{ "elements": [], "content": " is unused." }
			],
			"advices": {
				"advices": [
					{
						"log": [
							"info",
							[
								{
									"elements": [],
									"content": "Unused variables are often the result of typos, incomplete refactors, or other sources of bugs."
								}
							]
						]
					},
					{
						"log": [
							"info",
							[
								{
									"elements": [],
									"content": "Unsafe fix: If this is intentional, prepend "
								},
								{ "elements": ["Emphasis"], "content": "editingCard" },
								{ "elements": [], "content": " with an underscore." }
							]
						]
					},
					{
						"diff": {
							"dictionary": "import { projectManager } from \"../projectManager.svelte\";\nimport { cardManager } from \"../cardManager.svelte\";\nimport AddForm from \"./AddForm.svelte\";}\n\nlet editingCard_editingCard = $state<LearningCard | null>(null);\n\nfunction handleCardEdit(card: LearningCard) {\n\t= card;\n}\n\tproject?: string;\n}) {\n\tawait cardManager.updateCard(data);= null;\n}\n\nfunction handleEditCancel() {\t}\n}\n",
							"ops": [
								{ "diffOp": { "equal": { "range": [0, 151] } } },
								{ "equalLines": { "line_count": 66 } },
								{ "diffOp": { "equal": { "range": [151, 158] } } },
								{ "diffOp": { "delete": { "range": [158, 169] } } },
								{ "diffOp": { "insert": { "range": [169, 181] } } },
								{ "diffOp": { "equal": { "range": [181, 182] } } },
								{ "diffOp": { "equal": { "range": [182, 265] } } },
								{ "diffOp": { "equal": { "range": [265, 267] } } },
								{ "diffOp": { "delete": { "range": [158, 169] } } },
								{ "diffOp": { "insert": { "range": [169, 181] } } },
								{ "diffOp": { "equal": { "range": [181, 182] } } },
								{ "diffOp": { "equal": { "range": [267, 277] } } },
								{ "equalLines": { "line_count": 5 } },
								{ "diffOp": { "equal": { "range": [277, 337] } } },
								{ "diffOp": { "equal": { "range": [265, 267] } } },
								{ "diffOp": { "delete": { "range": [158, 169] } } },
								{ "diffOp": { "insert": { "range": [169, 181] } } },
								{ "diffOp": { "equal": { "range": [181, 182] } } },
								{ "diffOp": { "equal": { "range": [337, 377] } } },
								{ "diffOp": { "equal": { "range": [265, 267] } } },
								{ "diffOp": { "delete": { "range": [158, 169] } } },
								{ "diffOp": { "insert": { "range": [169, 181] } } },
								{ "diffOp": { "equal": { "range": [181, 182] } } },
								{ "diffOp": { "equal": { "range": [337, 347] } } },
								{ "equalLines": { "line_count": 3 } },
								{ "diffOp": { "equal": { "range": [377, 382] } } }
							]
						}
					}
				]
			},
			"verboseAdvices": { "advices": [] },
			"location": {
				"path": { "file": "src\\lib\\components\\ProjectDetail.svelte" },
				"span": [2004, 2015],
				"sourceCode": "<script lang=\"ts\">\r\nimport { projectManager } from \"../projectManager.svelte\";\nimport { cardManager } from \"../cardManager.svelte\";\nimport AddForm from \"./AddForm.svelte\";\nimport EditCardForm from \"./EditCardForm.svelte\";\nimport CardList from \"./CardList.svelte\";\nimport { modalStore } from \"../stores/modalStore\";\nimport type { LearningCard } from \"../../types\";\n\ninterface Props {\n\tprojectId: string;\n}\n\nconst { projectId }: Props = $props();\n\n// Derived value: find current project\nconst project = $derived.by(() => {\n\tif (!projectManager.all || !projectId) return undefined;\n\treturn projectManager.all.find((p) => p.id === projectId);\n});\n\n// Effect: Ensure projects are loaded\n$effect(() => {\n\tif (!projectManager.all || projectManager.all.length === 0) {\n\t\tprojectManager.loadProjects();\n\t}\n});\n\nfunction openAddForm() {\n\tmodalStore.open(AddForm, {\n\t\tinitialProject: projectId,\n\t\tonSubmit: async (data: {\n\t\t\ttitle: string;\n\t\t\tprompt: string;\n\t\t\ttopic?: string;\n\t\t\tproject?: string;\n\t\t}) => {\n\t\t\tawait handleFormSubmit(data);\n\t\t\tmodalStore.close();\n\t\t},\n\t\tonCancel: () => modalStore.close(),\n\t});\n}\n\nasync function handleFormSubmit(data: {\n\ttitle: string;\n\tprompt: string;\n\ttopic?: string;\n\tproject?: string;\n}) {\n\tconst hasProject = data.project && String(data.project).trim().length > 0;\n\tconst assignedProject = hasProject ? data.project : projectId || undefined;\n\tawait cardManager.addCard({ ...data, project: assignedProject });\n\tcardManager.closeForm();\n}\n\nasync function handleStart(card: LearningCard) {\n\t// Get the project's system prompt if the card belongs to a project\n\tlet systemPrompt: string | undefined;\n\tif (card.project) {\n\t\tconst proj = projectManager.all.find((p) => p.id === card.project);\n\t\tsystemPrompt = proj?.systemPrompt;\n\t}\n\n\t// Pass both the card prompt and system prompt\n\tawait cardManager.runPromptWithSystem(card.prompt, systemPrompt);\n}\n\nasync function handleCardToggle(id: string, status: \"active\" | \"done\") {\n\tawait cardManager.updateCardStatus(id, status);\n}\n\nlet editingCard = $state<LearningCard | null>(null);\n\nfunction handleCardEdit(card: LearningCard) {\n\teditingCard = card;\n}\n\nasync function handleEditSubmit(data: {\n\tid: string;\n\ttitle: string;\n\tprompt: string;\n\ttopic?: string;\n\tproject?: string;\n}) {\n\tawait cardManager.updateCard(data);\n\teditingCard = null;\n}\n\nfunction handleEditCancel() {\n\teditingCard = null;\n}\n\nasync function handleCardDelete(id: string) {\n\tif (window.confirm(\"Are you sure you want to delete this learning card?\")) {\n\t\tawait cardManager.deleteCard(id);\n\t}\n}\n</script>\r\n\r\n<section class=\"project-detail\">\r\n  <header>\r\n    <h2>{project ? project.name : 'Project'}</h2>\r\n    <div class=\"actions\">\r\n      <button\r\n        class=\"primary\"\r\n        onclick={openAddForm}\r\n        type=\"button\"\r\n      >\r\n        + New Learning Item\r\n      </button>\r\n    </div>\r\n  </header>\r\n\r\n  \r\n\r\n  {#if editingCard}\r\n    <dialog open class=\"modal-overlay\" onclick={(e) => { if (e.target === e.currentTarget) handleEditCancel(); }} onkeydown={(e) => e.key === 'Escape' && handleEditCancel()}>\r\n      <div\r\n        class=\"modal-content\"\r\n        aria-labelledby=\"edit-heading\"\r\n        role=\"document\"\r\n      >\r\n        <EditCardForm \r\n          card={editingCard}\r\n          onSubmit={handleEditSubmit}\r\n          onCancel={handleEditCancel}\r\n        />\r\n      </div>\r\n    </dialog>\r\n  {/if}\r\n\r\n  <CardList\r\n    onStart={handleStart}\r\n    onToggle={handleCardToggle}\r\n    onEdit={handleCardEdit}\r\n    onDelete={handleCardDelete}\r\n  />\r\n</section>\r\n\r\n<style>\r\n  .project-detail { padding:1rem; }\r\n  .actions { display:flex; gap:8px; }\r\n</style>\r\n"
			},
			"tags": ["fixable"],
			"source": null
		},
		{
			"category": "lint/correctness/noUnusedVariables",
			"severity": "warning",
			"description": "This function handleCardEdit is unused.",
			"message": [
				{ "elements": [], "content": "This function " },
				{ "elements": ["Emphasis"], "content": "handleCardEdit" },
				{ "elements": [], "content": " is unused." }
			],
			"advices": {
				"advices": [
					{
						"log": [
							"info",
							[
								{
									"elements": [],
									"content": "Unused variables are often the result of typos, incomplete refactors, or other sources of bugs."
								}
							]
						]
					},
					{
						"log": [
							"info",
							[
								{
									"elements": [],
									"content": "Unsafe fix: If this is intentional, prepend "
								},
								{ "elements": ["Emphasis"], "content": "handleCardEdit" },
								{ "elements": [], "content": " with an underscore." }
							]
						]
					},
					{
						"diff": {
							"dictionary": "import { projectManager } from \"../projectManager.svelte\";\nimport { cardManager } from \"../cardManager.svelte\";\nimport AddForm from \"./AddForm.svelte\";let editingCard = $state<LearningCard | null>(null);\n\nfunction handleCardEdit_handleCardEdit(card: LearningCard) {\n\teditingCard = card;\n}\t}\n}\n",
							"ops": [
								{ "diffOp": { "equal": { "range": [0, 151] } } },
								{ "equalLines": { "line_count": 68 } },
								{ "diffOp": { "equal": { "range": [151, 214] } } },
								{ "diffOp": { "delete": { "range": [214, 228] } } },
								{ "diffOp": { "insert": { "range": [228, 243] } } },
								{ "diffOp": { "equal": { "range": [243, 288] } } },
								{ "equalLines": { "line_count": 19 } },
								{ "diffOp": { "equal": { "range": [288, 293] } } }
							]
						}
					}
				]
			},
			"verboseAdvices": { "advices": [] },
			"location": {
				"path": { "file": "src\\lib\\components\\ProjectDetail.svelte" },
				"span": [2063, 2077],
				"sourceCode": "<script lang=\"ts\">\r\nimport { projectManager } from \"../projectManager.svelte\";\nimport { cardManager } from \"../cardManager.svelte\";\nimport AddForm from \"./AddForm.svelte\";\nimport EditCardForm from \"./EditCardForm.svelte\";\nimport CardList from \"./CardList.svelte\";\nimport { modalStore } from \"../stores/modalStore\";\nimport type { LearningCard } from \"../../types\";\n\ninterface Props {\n\tprojectId: string;\n}\n\nconst { projectId }: Props = $props();\n\n// Derived value: find current project\nconst project = $derived.by(() => {\n\tif (!projectManager.all || !projectId) return undefined;\n\treturn projectManager.all.find((p) => p.id === projectId);\n});\n\n// Effect: Ensure projects are loaded\n$effect(() => {\n\tif (!projectManager.all || projectManager.all.length === 0) {\n\t\tprojectManager.loadProjects();\n\t}\n});\n\nfunction openAddForm() {\n\tmodalStore.open(AddForm, {\n\t\tinitialProject: projectId,\n\t\tonSubmit: async (data: {\n\t\t\ttitle: string;\n\t\t\tprompt: string;\n\t\t\ttopic?: string;\n\t\t\tproject?: string;\n\t\t}) => {\n\t\t\tawait handleFormSubmit(data);\n\t\t\tmodalStore.close();\n\t\t},\n\t\tonCancel: () => modalStore.close(),\n\t});\n}\n\nasync function handleFormSubmit(data: {\n\ttitle: string;\n\tprompt: string;\n\ttopic?: string;\n\tproject?: string;\n}) {\n\tconst hasProject = data.project && String(data.project).trim().length > 0;\n\tconst assignedProject = hasProject ? data.project : projectId || undefined;\n\tawait cardManager.addCard({ ...data, project: assignedProject });\n\tcardManager.closeForm();\n}\n\nasync function handleStart(card: LearningCard) {\n\t// Get the project's system prompt if the card belongs to a project\n\tlet systemPrompt: string | undefined;\n\tif (card.project) {\n\t\tconst proj = projectManager.all.find((p) => p.id === card.project);\n\t\tsystemPrompt = proj?.systemPrompt;\n\t}\n\n\t// Pass both the card prompt and system prompt\n\tawait cardManager.runPromptWithSystem(card.prompt, systemPrompt);\n}\n\nasync function handleCardToggle(id: string, status: \"active\" | \"done\") {\n\tawait cardManager.updateCardStatus(id, status);\n}\n\nlet editingCard = $state<LearningCard | null>(null);\n\nfunction handleCardEdit(card: LearningCard) {\n\teditingCard = card;\n}\n\nasync function handleEditSubmit(data: {\n\tid: string;\n\ttitle: string;\n\tprompt: string;\n\ttopic?: string;\n\tproject?: string;\n}) {\n\tawait cardManager.updateCard(data);\n\teditingCard = null;\n}\n\nfunction handleEditCancel() {\n\teditingCard = null;\n}\n\nasync function handleCardDelete(id: string) {\n\tif (window.confirm(\"Are you sure you want to delete this learning card?\")) {\n\t\tawait cardManager.deleteCard(id);\n\t}\n}\n</script>\r\n\r\n<section class=\"project-detail\">\r\n  <header>\r\n    <h2>{project ? project.name : 'Project'}</h2>\r\n    <div class=\"actions\">\r\n      <button\r\n        class=\"primary\"\r\n        onclick={openAddForm}\r\n        type=\"button\"\r\n      >\r\n        + New Learning Item\r\n      </button>\r\n    </div>\r\n  </header>\r\n\r\n  \r\n\r\n  {#if editingCard}\r\n    <dialog open class=\"modal-overlay\" onclick={(e) => { if (e.target === e.currentTarget) handleEditCancel(); }} onkeydown={(e) => e.key === 'Escape' && handleEditCancel()}>\r\n      <div\r\n        class=\"modal-content\"\r\n        aria-labelledby=\"edit-heading\"\r\n        role=\"document\"\r\n      >\r\n        <EditCardForm \r\n          card={editingCard}\r\n          onSubmit={handleEditSubmit}\r\n          onCancel={handleEditCancel}\r\n        />\r\n      </div>\r\n    </dialog>\r\n  {/if}\r\n\r\n  <CardList\r\n    onStart={handleStart}\r\n    onToggle={handleCardToggle}\r\n    onEdit={handleCardEdit}\r\n    onDelete={handleCardDelete}\r\n  />\r\n</section>\r\n\r\n<style>\r\n  .project-detail { padding:1rem; }\r\n  .actions { display:flex; gap:8px; }\r\n</style>\r\n"
			},
			"tags": ["fixable"],
			"source": null
		},
		{
			"category": "lint/correctness/noUnusedVariables",
			"severity": "warning",
			"description": "This function handleEditSubmit is unused.",
			"message": [
				{ "elements": [], "content": "This function " },
				{ "elements": ["Emphasis"], "content": "handleEditSubmit" },
				{ "elements": [], "content": " is unused." }
			],
			"advices": {
				"advices": [
					{
						"log": [
							"info",
							[
								{
									"elements": [],
									"content": "Unused variables are often the result of typos, incomplete refactors, or other sources of bugs."
								}
							]
						]
					},
					{
						"log": [
							"info",
							[
								{
									"elements": [],
									"content": "Unsafe fix: If this is intentional, prepend "
								},
								{ "elements": ["Emphasis"], "content": "handleEditSubmit" },
								{ "elements": [], "content": " with an underscore." }
							]
						]
					},
					{
						"diff": {
							"dictionary": "import { projectManager } from \"../projectManager.svelte\";\nimport { cardManager } from \"../cardManager.svelte\";\nimport AddForm from \"./AddForm.svelte\";}\n\nasync function handleEditSubmit_handleEditSubmit(data: {\n\tid: string;\n\ttitle: string;\t}\n}\n",
							"ops": [
								{ "diffOp": { "equal": { "range": [0, 151] } } },
								{ "equalLines": { "line_count": 72 } },
								{ "diffOp": { "equal": { "range": [151, 169] } } },
								{ "diffOp": { "delete": { "range": [169, 185] } } },
								{ "diffOp": { "insert": { "range": [185, 202] } } },
								{ "diffOp": { "equal": { "range": [202, 239] } } },
								{ "equalLines": { "line_count": 15 } },
								{ "diffOp": { "equal": { "range": [239, 244] } } }
							]
						}
					}
				]
			},
			"verboseAdvices": { "advices": [] },
			"location": {
				"path": { "file": "src\\lib\\components\\ProjectDetail.svelte" },
				"span": [2139, 2155],
				"sourceCode": "<script lang=\"ts\">\r\nimport { projectManager } from \"../projectManager.svelte\";\nimport { cardManager } from \"../cardManager.svelte\";\nimport AddForm from \"./AddForm.svelte\";\nimport EditCardForm from \"./EditCardForm.svelte\";\nimport CardList from \"./CardList.svelte\";\nimport { modalStore } from \"../stores/modalStore\";\nimport type { LearningCard } from \"../../types\";\n\ninterface Props {\n\tprojectId: string;\n}\n\nconst { projectId }: Props = $props();\n\n// Derived value: find current project\nconst project = $derived.by(() => {\n\tif (!projectManager.all || !projectId) return undefined;\n\treturn projectManager.all.find((p) => p.id === projectId);\n});\n\n// Effect: Ensure projects are loaded\n$effect(() => {\n\tif (!projectManager.all || projectManager.all.length === 0) {\n\t\tprojectManager.loadProjects();\n\t}\n});\n\nfunction openAddForm() {\n\tmodalStore.open(AddForm, {\n\t\tinitialProject: projectId,\n\t\tonSubmit: async (data: {\n\t\t\ttitle: string;\n\t\t\tprompt: string;\n\t\t\ttopic?: string;\n\t\t\tproject?: string;\n\t\t}) => {\n\t\t\tawait handleFormSubmit(data);\n\t\t\tmodalStore.close();\n\t\t},\n\t\tonCancel: () => modalStore.close(),\n\t});\n}\n\nasync function handleFormSubmit(data: {\n\ttitle: string;\n\tprompt: string;\n\ttopic?: string;\n\tproject?: string;\n}) {\n\tconst hasProject = data.project && String(data.project).trim().length > 0;\n\tconst assignedProject = hasProject ? data.project : projectId || undefined;\n\tawait cardManager.addCard({ ...data, project: assignedProject });\n\tcardManager.closeForm();\n}\n\nasync function handleStart(card: LearningCard) {\n\t// Get the project's system prompt if the card belongs to a project\n\tlet systemPrompt: string | undefined;\n\tif (card.project) {\n\t\tconst proj = projectManager.all.find((p) => p.id === card.project);\n\t\tsystemPrompt = proj?.systemPrompt;\n\t}\n\n\t// Pass both the card prompt and system prompt\n\tawait cardManager.runPromptWithSystem(card.prompt, systemPrompt);\n}\n\nasync function handleCardToggle(id: string, status: \"active\" | \"done\") {\n\tawait cardManager.updateCardStatus(id, status);\n}\n\nlet editingCard = $state<LearningCard | null>(null);\n\nfunction handleCardEdit(card: LearningCard) {\n\teditingCard = card;\n}\n\nasync function handleEditSubmit(data: {\n\tid: string;\n\ttitle: string;\n\tprompt: string;\n\ttopic?: string;\n\tproject?: string;\n}) {\n\tawait cardManager.updateCard(data);\n\teditingCard = null;\n}\n\nfunction handleEditCancel() {\n\teditingCard = null;\n}\n\nasync function handleCardDelete(id: string) {\n\tif (window.confirm(\"Are you sure you want to delete this learning card?\")) {\n\t\tawait cardManager.deleteCard(id);\n\t}\n}\n</script>\r\n\r\n<section class=\"project-detail\">\r\n  <header>\r\n    <h2>{project ? project.name : 'Project'}</h2>\r\n    <div class=\"actions\">\r\n      <button\r\n        class=\"primary\"\r\n        onclick={openAddForm}\r\n        type=\"button\"\r\n      >\r\n        + New Learning Item\r\n      </button>\r\n    </div>\r\n  </header>\r\n\r\n  \r\n\r\n  {#if editingCard}\r\n    <dialog open class=\"modal-overlay\" onclick={(e) => { if (e.target === e.currentTarget) handleEditCancel(); }} onkeydown={(e) => e.key === 'Escape' && handleEditCancel()}>\r\n      <div\r\n        class=\"modal-content\"\r\n        aria-labelledby=\"edit-heading\"\r\n        role=\"document\"\r\n      >\r\n        <EditCardForm \r\n          card={editingCard}\r\n          onSubmit={handleEditSubmit}\r\n          onCancel={handleEditCancel}\r\n        />\r\n      </div>\r\n    </dialog>\r\n  {/if}\r\n\r\n  <CardList\r\n    onStart={handleStart}\r\n    onToggle={handleCardToggle}\r\n    onEdit={handleCardEdit}\r\n    onDelete={handleCardDelete}\r\n  />\r\n</section>\r\n\r\n<style>\r\n  .project-detail { padding:1rem; }\r\n  .actions { display:flex; gap:8px; }\r\n</style>\r\n"
			},
			"tags": ["fixable"],
			"source": null
		},
		{
			"category": "lint/correctness/noUnusedVariables",
			"severity": "warning",
			"description": "This function handleEditCancel is unused.",
			"message": [
				{ "elements": [], "content": "This function " },
				{ "elements": ["Emphasis"], "content": "handleEditCancel" },
				{ "elements": [], "content": " is unused." }
			],
			"advices": {
				"advices": [
					{
						"log": [
							"info",
							[
								{
									"elements": [],
									"content": "Unused variables are often the result of typos, incomplete refactors, or other sources of bugs."
								}
							]
						]
					},
					{
						"log": [
							"info",
							[
								{
									"elements": [],
									"content": "Unsafe fix: If this is intentional, prepend "
								},
								{ "elements": ["Emphasis"], "content": "handleEditCancel" },
								{ "elements": [], "content": " with an underscore." }
							]
						]
					},
					{
						"diff": {
							"dictionary": "import { projectManager } from \"../projectManager.svelte\";\nimport { cardManager } from \"../cardManager.svelte\";\nimport AddForm from \"./AddForm.svelte\";}\n\nfunction handleEditCancel_handleEditCancel() {\n\teditingCard = null;\n}\t}\n}\n",
							"ops": [
								{ "diffOp": { "equal": { "range": [0, 151] } } },
								{ "equalLines": { "line_count": 83 } },
								{ "diffOp": { "equal": { "range": [151, 163] } } },
								{ "diffOp": { "delete": { "range": [163, 179] } } },
								{ "diffOp": { "insert": { "range": [179, 196] } } },
								{ "diffOp": { "equal": { "range": [196, 223] } } },
								{ "equalLines": { "line_count": 4 } },
								{ "diffOp": { "equal": { "range": [223, 228] } } }
							]
						}
					}
				]
			},
			"verboseAdvices": { "advices": [] },
			"location": {
				"path": { "file": "src\\lib\\components\\ProjectDetail.svelte" },
				"span": [2321, 2337],
				"sourceCode": "<script lang=\"ts\">\r\nimport { projectManager } from \"../projectManager.svelte\";\nimport { cardManager } from \"../cardManager.svelte\";\nimport AddForm from \"./AddForm.svelte\";\nimport EditCardForm from \"./EditCardForm.svelte\";\nimport CardList from \"./CardList.svelte\";\nimport { modalStore } from \"../stores/modalStore\";\nimport type { LearningCard } from \"../../types\";\n\ninterface Props {\n\tprojectId: string;\n}\n\nconst { projectId }: Props = $props();\n\n// Derived value: find current project\nconst project = $derived.by(() => {\n\tif (!projectManager.all || !projectId) return undefined;\n\treturn projectManager.all.find((p) => p.id === projectId);\n});\n\n// Effect: Ensure projects are loaded\n$effect(() => {\n\tif (!projectManager.all || projectManager.all.length === 0) {\n\t\tprojectManager.loadProjects();\n\t}\n});\n\nfunction openAddForm() {\n\tmodalStore.open(AddForm, {\n\t\tinitialProject: projectId,\n\t\tonSubmit: async (data: {\n\t\t\ttitle: string;\n\t\t\tprompt: string;\n\t\t\ttopic?: string;\n\t\t\tproject?: string;\n\t\t}) => {\n\t\t\tawait handleFormSubmit(data);\n\t\t\tmodalStore.close();\n\t\t},\n\t\tonCancel: () => modalStore.close(),\n\t});\n}\n\nasync function handleFormSubmit(data: {\n\ttitle: string;\n\tprompt: string;\n\ttopic?: string;\n\tproject?: string;\n}) {\n\tconst hasProject = data.project && String(data.project).trim().length > 0;\n\tconst assignedProject = hasProject ? data.project : projectId || undefined;\n\tawait cardManager.addCard({ ...data, project: assignedProject });\n\tcardManager.closeForm();\n}\n\nasync function handleStart(card: LearningCard) {\n\t// Get the project's system prompt if the card belongs to a project\n\tlet systemPrompt: string | undefined;\n\tif (card.project) {\n\t\tconst proj = projectManager.all.find((p) => p.id === card.project);\n\t\tsystemPrompt = proj?.systemPrompt;\n\t}\n\n\t// Pass both the card prompt and system prompt\n\tawait cardManager.runPromptWithSystem(card.prompt, systemPrompt);\n}\n\nasync function handleCardToggle(id: string, status: \"active\" | \"done\") {\n\tawait cardManager.updateCardStatus(id, status);\n}\n\nlet editingCard = $state<LearningCard | null>(null);\n\nfunction handleCardEdit(card: LearningCard) {\n\teditingCard = card;\n}\n\nasync function handleEditSubmit(data: {\n\tid: string;\n\ttitle: string;\n\tprompt: string;\n\ttopic?: string;\n\tproject?: string;\n}) {\n\tawait cardManager.updateCard(data);\n\teditingCard = null;\n}\n\nfunction handleEditCancel() {\n\teditingCard = null;\n}\n\nasync function handleCardDelete(id: string) {\n\tif (window.confirm(\"Are you sure you want to delete this learning card?\")) {\n\t\tawait cardManager.deleteCard(id);\n\t}\n}\n</script>\r\n\r\n<section class=\"project-detail\">\r\n  <header>\r\n    <h2>{project ? project.name : 'Project'}</h2>\r\n    <div class=\"actions\">\r\n      <button\r\n        class=\"primary\"\r\n        onclick={openAddForm}\r\n        type=\"button\"\r\n      >\r\n        + New Learning Item\r\n      </button>\r\n    </div>\r\n  </header>\r\n\r\n  \r\n\r\n  {#if editingCard}\r\n    <dialog open class=\"modal-overlay\" onclick={(e) => { if (e.target === e.currentTarget) handleEditCancel(); }} onkeydown={(e) => e.key === 'Escape' && handleEditCancel()}>\r\n      <div\r\n        class=\"modal-content\"\r\n        aria-labelledby=\"edit-heading\"\r\n        role=\"document\"\r\n      >\r\n        <EditCardForm \r\n          card={editingCard}\r\n          onSubmit={handleEditSubmit}\r\n          onCancel={handleEditCancel}\r\n        />\r\n      </div>\r\n    </dialog>\r\n  {/if}\r\n\r\n  <CardList\r\n    onStart={handleStart}\r\n    onToggle={handleCardToggle}\r\n    onEdit={handleCardEdit}\r\n    onDelete={handleCardDelete}\r\n  />\r\n</section>\r\n\r\n<style>\r\n  .project-detail { padding:1rem; }\r\n  .actions { display:flex; gap:8px; }\r\n</style>\r\n"
			},
			"tags": ["fixable"],
			"source": null
		},
		{
			"category": "lint/correctness/noUnusedVariables",
			"severity": "warning",
			"description": "This function handleCardDelete is unused.",
			"message": [
				{ "elements": [], "content": "This function " },
				{ "elements": ["Emphasis"], "content": "handleCardDelete" },
				{ "elements": [], "content": " is unused." }
			],
			"advices": {
				"advices": [
					{
						"log": [
							"info",
							[
								{
									"elements": [],
									"content": "Unused variables are often the result of typos, incomplete refactors, or other sources of bugs."
								}
							]
						]
					},
					{
						"log": [
							"info",
							[
								{
									"elements": [],
									"content": "Unsafe fix: If this is intentional, prepend "
								},
								{ "elements": ["Emphasis"], "content": "handleCardDelete" },
								{ "elements": [], "content": " with an underscore." }
							]
						]
					},
					{
						"diff": {
							"dictionary": "import { projectManager } from \"../projectManager.svelte\";\nimport { cardManager } from \"../cardManager.svelte\";\nimport AddForm from \"./AddForm.svelte\";}\n\nasync function handleCardDelete_handleCardDelete(id: string) {\n\tif (window.confirm(\"Are you sure you want to delete this learning card?\")) {\n\t\tawait cardManager.deleteCard(id);\n\t}\n}\n",
							"ops": [
								{ "diffOp": { "equal": { "range": [0, 151] } } },
								{ "equalLines": { "line_count": 87 } },
								{ "diffOp": { "equal": { "range": [151, 169] } } },
								{ "diffOp": { "delete": { "range": [169, 185] } } },
								{ "diffOp": { "insert": { "range": [185, 202] } } },
								{ "diffOp": { "equal": { "range": [202, 336] } } }
							]
						}
					}
				]
			},
			"verboseAdvices": { "advices": [] },
			"location": {
				"path": { "file": "src\\lib\\components\\ProjectDetail.svelte" },
				"span": [2381, 2397],
				"sourceCode": "<script lang=\"ts\">\r\nimport { projectManager } from \"../projectManager.svelte\";\nimport { cardManager } from \"../cardManager.svelte\";\nimport AddForm from \"./AddForm.svelte\";\nimport EditCardForm from \"./EditCardForm.svelte\";\nimport CardList from \"./CardList.svelte\";\nimport { modalStore } from \"../stores/modalStore\";\nimport type { LearningCard } from \"../../types\";\n\ninterface Props {\n\tprojectId: string;\n}\n\nconst { projectId }: Props = $props();\n\n// Derived value: find current project\nconst project = $derived.by(() => {\n\tif (!projectManager.all || !projectId) return undefined;\n\treturn projectManager.all.find((p) => p.id === projectId);\n});\n\n// Effect: Ensure projects are loaded\n$effect(() => {\n\tif (!projectManager.all || projectManager.all.length === 0) {\n\t\tprojectManager.loadProjects();\n\t}\n});\n\nfunction openAddForm() {\n\tmodalStore.open(AddForm, {\n\t\tinitialProject: projectId,\n\t\tonSubmit: async (data: {\n\t\t\ttitle: string;\n\t\t\tprompt: string;\n\t\t\ttopic?: string;\n\t\t\tproject?: string;\n\t\t}) => {\n\t\t\tawait handleFormSubmit(data);\n\t\t\tmodalStore.close();\n\t\t},\n\t\tonCancel: () => modalStore.close(),\n\t});\n}\n\nasync function handleFormSubmit(data: {\n\ttitle: string;\n\tprompt: string;\n\ttopic?: string;\n\tproject?: string;\n}) {\n\tconst hasProject = data.project && String(data.project).trim().length > 0;\n\tconst assignedProject = hasProject ? data.project : projectId || undefined;\n\tawait cardManager.addCard({ ...data, project: assignedProject });\n\tcardManager.closeForm();\n}\n\nasync function handleStart(card: LearningCard) {\n\t// Get the project's system prompt if the card belongs to a project\n\tlet systemPrompt: string | undefined;\n\tif (card.project) {\n\t\tconst proj = projectManager.all.find((p) => p.id === card.project);\n\t\tsystemPrompt = proj?.systemPrompt;\n\t}\n\n\t// Pass both the card prompt and system prompt\n\tawait cardManager.runPromptWithSystem(card.prompt, systemPrompt);\n}\n\nasync function handleCardToggle(id: string, status: \"active\" | \"done\") {\n\tawait cardManager.updateCardStatus(id, status);\n}\n\nlet editingCard = $state<LearningCard | null>(null);\n\nfunction handleCardEdit(card: LearningCard) {\n\teditingCard = card;\n}\n\nasync function handleEditSubmit(data: {\n\tid: string;\n\ttitle: string;\n\tprompt: string;\n\ttopic?: string;\n\tproject?: string;\n}) {\n\tawait cardManager.updateCard(data);\n\teditingCard = null;\n}\n\nfunction handleEditCancel() {\n\teditingCard = null;\n}\n\nasync function handleCardDelete(id: string) {\n\tif (window.confirm(\"Are you sure you want to delete this learning card?\")) {\n\t\tawait cardManager.deleteCard(id);\n\t}\n}\n</script>\r\n\r\n<section class=\"project-detail\">\r\n  <header>\r\n    <h2>{project ? project.name : 'Project'}</h2>\r\n    <div class=\"actions\">\r\n      <button\r\n        class=\"primary\"\r\n        onclick={openAddForm}\r\n        type=\"button\"\r\n      >\r\n        + New Learning Item\r\n      </button>\r\n    </div>\r\n  </header>\r\n\r\n  \r\n\r\n  {#if editingCard}\r\n    <dialog open class=\"modal-overlay\" onclick={(e) => { if (e.target === e.currentTarget) handleEditCancel(); }} onkeydown={(e) => e.key === 'Escape' && handleEditCancel()}>\r\n      <div\r\n        class=\"modal-content\"\r\n        aria-labelledby=\"edit-heading\"\r\n        role=\"document\"\r\n      >\r\n        <EditCardForm \r\n          card={editingCard}\r\n          onSubmit={handleEditSubmit}\r\n          onCancel={handleEditCancel}\r\n        />\r\n      </div>\r\n    </dialog>\r\n  {/if}\r\n\r\n  <CardList\r\n    onStart={handleStart}\r\n    onToggle={handleCardToggle}\r\n    onEdit={handleCardEdit}\r\n    onDelete={handleCardDelete}\r\n  />\r\n</section>\r\n\r\n<style>\r\n  .project-detail { padding:1rem; }\r\n  .actions { display:flex; gap:8px; }\r\n</style>\r\n"
			},
			"tags": ["fixable"],
			"source": null
		},
		{
			"category": "lint/correctness/noUnusedImports",
			"severity": "warning",
			"description": "This import is unused.",
			"message": [
				{ "elements": [], "content": "This " },
				{ "elements": ["Emphasis"], "content": "import" },
				{ "elements": [], "content": " is unused." }
			],
			"advices": {
				"advices": [
					{
						"log": [
							"info",
							[
								{
									"elements": [],
									"content": "Unused imports might be the result of an incomplete refactoring."
								}
							]
						]
					},
					{
						"log": [
							"info",
							[
								{
									"elements": [],
									"content": "Unsafe fix: Remove the unused imports."
								}
							]
						]
					},
					{
						"diff": {
							"dictionary": "import CardItem from \"../CardItem.svelte\";\nimport ModalContainer from \"../ModalContainer.svelte\";\nvoid ModalContainer; // used in test wrapper markupexport let onDelete: (...args: unknown[]) => void;\nexport let noteApi: unknown;\n",
							"ops": [
								{ "diffOp": { "delete": { "range": [0, 42] } } },
								{ "diffOp": { "equal": { "range": [42, 149] } } },
								{ "equalLines": { "line_count": 4 } },
								{ "diffOp": { "equal": { "range": [149, 229] } } }
							]
						}
					}
				]
			},
			"verboseAdvices": { "advices": [] },
			"location": {
				"path": {
					"file": "src\\lib\\components\\__tests__\\CardItemTestWrapper.svelte"
				},
				"span": [26, 34],
				"sourceCode": "<script lang=\"ts\">\nimport CardItem from \"../CardItem.svelte\";\nimport ModalContainer from \"../ModalContainer.svelte\";\nvoid ModalContainer; // used in test wrapper markup\nexport let card: unknown;\nexport let onStart: (...args: unknown[]) => void;\nexport let onToggle: (...args: unknown[]) => void;\nexport let onEdit: (...args: unknown[]) => void;\nexport let onDelete: (...args: unknown[]) => void;\nexport let noteApi: unknown;\n</script>\n\n<ModalContainer />\n<CardItem {card} {onStart} {onToggle} onEdit={onEdit} onDelete={onDelete} noteApi={noteApi} />\n"
			},
			"tags": ["fixable"],
			"source": null
		},
		{
			"category": "lint/correctness/noUnusedImports",
			"severity": "warning",
			"description": "This import is unused.",
			"message": [
				{ "elements": [], "content": "This " },
				{ "elements": ["Emphasis"], "content": "import" },
				{ "elements": [], "content": " is unused." }
			],
			"advices": {
				"advices": [
					{
						"log": [
							"info",
							[
								{
									"elements": [],
									"content": "Unused imports might be the result of an incomplete refactoring."
								}
							]
						]
					},
					{
						"log": [
							"info",
							[
								{
									"elements": [],
									"content": "Unsafe fix: Remove the unused imports."
								}
							]
						]
					},
					{
						"diff": {
							"dictionary": "import ModalContainer from \"../ModalContainer.svelte\";\nvoid ModalContainer; // used in test wrapper markup\nimport NoteModal from \"../NoteModal.svelte\";\nexport let cardId: string;\nexport let cardTitle: string;\nexport let confirmFn: () => boolean;\n",
							"ops": [
								{ "diffOp": { "equal": { "range": [0, 106] } } },
								{ "diffOp": { "delete": { "range": [106, 151] } } },
								{ "diffOp": { "equal": { "range": [151, 246] } } }
							]
						}
					}
				]
			},
			"verboseAdvices": { "advices": [] },
			"location": {
				"path": {
					"file": "src\\lib\\components\\__tests__\\NoteModalTestWrapper.svelte"
				},
				"span": [133, 142],
				"sourceCode": "<script lang=\"ts\">\nimport ModalContainer from \"../ModalContainer.svelte\";\nvoid ModalContainer; // used in test wrapper markup\nimport NoteModal from \"../NoteModal.svelte\";\nexport let cardId: string;\nexport let cardTitle: string;\nexport let confirmFn: () => boolean;\n</script>\n\n<ModalContainer />\n<NoteModal {cardId} {cardTitle} {confirmFn} />\n"
			},
			"tags": ["fixable"],
			"source": null
		}
	],
	"command": "lint"
}
