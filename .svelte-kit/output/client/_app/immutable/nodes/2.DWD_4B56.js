import{f as T,a as C,c as le}from"../chunks/C1rc5x0e.js";import{h as W,d as gt,o as et,D as a,ar as bt,q as jt,H as wt,t as Ke,v as Ee,w as je,m as _e,Z as tt,am as yt,a4 as Ve,g as $,k as Le,s as Pt,ak as Oe,aG as rt,X as We,aC as Ct,aH as St,aI as Et,aJ as kt,j as Me,aK as ne,r as at,p as nt,aL as xe,ag as qe,aj as Ft,i as It,aM as xt,O as At,ac as Tt,aN as Lt,aO as Mt,aP as lt,x as it,aQ as st,aR as qt,aS as Nt,z as Ot,aT as Dt,aU as Rt,aV as Ht,aE as Qt,b as Bt,y as Ut,at as y,aD as D,as as ue,I as ie,N as g,L as v,M as f,K as se,f as ee,J as U,aF as Y,u as De,a5 as Je,aW as zt,A as Gt,aX as Kt}from"../chunks/DljqI-rb.js";import{d as oe,s as R,e as ot}from"../chunks/AcsUjBIT.js";import{i as z,b as Vt}from"../chunks/COjQm-7I.js";function Wt(t,e,r){for(var n=[],i=e.length,l,c=e.length,s=0;s<i;s++){let j=e[s];nt(j,()=>{if(l){if(l.pending.delete(j),l.done.add(j),l.pending.size===0){var E=t.outrogroups;Ne(Oe(l.done)),E.delete(l),E.size===0&&(t.outrogroups=null)}}else c-=1},!1)}if(c===0){var o=n.length===0&&r!==null;if(o){var h=r,w=h.parentNode;Ft(w),w.append(h),t.items.clear()}Ne(e,!o)}else l={pending:new Set(e),done:new Set},(t.outrogroups??=new Set).add(l)}function Ne(t,e=!0){for(var r=0;r<t.length;r++)It(t[r],e)}var Ye;function ce(t,e,r,n,i,l=null){var c=t,s=new Map;W&&gt();var o=null,h=bt(()=>{var F=r();return rt(F)?F:F==null?[]:Oe(F)}),w,j=!0;function E(){u.fallback=o,Jt(u,w,c,e,n),o!==null&&(w.length===0?(o.f&ne)===0?at(o):(o.f^=ne,ge(o,null,c)):nt(o,()=>{o=null}))}var L=et(()=>{w=a(h);var F=w.length;let p=!1;if(W){var x=jt(c)===wt;x!==(F===0)&&(c=Ke(),Ee(c),je(!1),p=!0)}for(var A=new Set,M=$,B=Pt(),k=0;k<F;k+=1){W&&_e.nodeType===tt&&_e.data===yt&&(c=_e,p=!0,je(!1));var m=w[k],_=n(m,k),d=j?null:s.get(_);d?(d.v&&Ve(d.v,m),d.i&&Ve(d.i,k),B&&M.skipped_effects.delete(d.e)):(d=Yt(s,j?c:Ye??=Me(),m,_,k,i,e,r),j||(d.e.f|=ne),s.set(_,d)),A.add(_)}if(F===0&&l&&!o&&(j?o=Le(()=>l(c)):(o=Le(()=>l(Ye??=Me())),o.f|=ne)),W&&F>0&&Ee(Ke()),!j)if(B){for(const[b,S]of s)A.has(b)||M.skipped_effects.add(S.e);M.oncommit(E),M.ondiscard(()=>{})}else E();p&&je(!0),a(h)}),u={effect:L,items:s,outrogroups:null,fallback:o};j=!1,W&&(c=_e)}function Jt(t,e,r,n,i){var l=e.length,c=t.items,s=t.effect.first,o,h=null,w=[],j=[],E,L,u,F;for(F=0;F<l;F+=1){if(E=e[F],L=i(E,F),u=c.get(L).e,t.outrogroups!==null)for(const d of t.outrogroups)d.pending.delete(u),d.done.delete(u);if((u.f&ne)!==0)if(u.f^=ne,u===s)ge(u,null,r);else{var p=h?h.next:s;u===t.effect.last&&(t.effect.last=u.prev),u.prev&&(u.prev.next=u.next),u.next&&(u.next.prev=u.prev),ae(t,h,u),ae(t,u,p),ge(u,p,r),h=u,w=[],j=[],s=h.next;continue}if((u.f&xe)!==0&&at(u),u!==s){if(o!==void 0&&o.has(u)){if(w.length<j.length){var x=j[0],A;h=x.prev;var M=w[0],B=w[w.length-1];for(A=0;A<w.length;A+=1)ge(w[A],x,r);for(A=0;A<j.length;A+=1)o.delete(j[A]);ae(t,M.prev,B.next),ae(t,h,M),ae(t,B,x),s=x,h=B,F-=1,w=[],j=[]}else o.delete(u),ge(u,s,r),ae(t,u.prev,u.next),ae(t,u,h===null?t.effect.first:h.next),ae(t,h,u),h=u;continue}for(w=[],j=[];s!==null&&s!==u;)(o??=new Set).add(s),j.push(s),s=s.next;if(s===null)continue}(u.f&ne)===0&&w.push(u),h=u,s=u.next}if(t.outrogroups!==null){for(const d of t.outrogroups)d.pending.size===0&&(Ne(Oe(d.done)),t.outrogroups?.delete(d));t.outrogroups.size===0&&(t.outrogroups=null)}if(s!==null||o!==void 0){var k=[];if(o!==void 0)for(u of o)(u.f&xe)===0&&k.push(u);for(;s!==null;)(s.f&xe)===0&&s!==t.fallback&&k.push(s),s=s.next;var m=k.length;if(m>0){var _=null;Wt(t,k,_)}}}function Yt(t,e,r,n,i,l,c,s){var o=(c&Et)!==0?(c&kt)===0?Ct(r,!1,!1):We(r):null,h=(c&St)!==0?We(i):null;return{v:o,i:h,e:Le(()=>(l(e,o??r,h??i,s),()=>{t.delete(n)}))}}function ge(t,e,r){if(t.nodes)for(var n=t.nodes.start,i=t.nodes.end,l=e&&(e.f&ne)===0?e.nodes.start:r;n!==null;){var c=qe(n);if(l.before(n),n===i)return;n=c}}function ae(t,e,r){e===null?t.effect.first=r:e.next=r,r===null?t.effect.last=e:r.prev=e}function Xt(t,e){let r=null,n=W;var i;if(W){r=_e;for(var l=At(document.head);l!==null&&(l.nodeType!==tt||l.data!==t);)l=qe(l);if(l===null)je(!1);else{var c=qe(l);l.remove(),Ee(c)}}W||(i=document.head.appendChild(Me()));try{et(()=>e(i),xt)}finally{n&&(je(!0),Ee(r))}}const Xe=[...` 	
\r\f \v\uFEFF`];function Zt(t,e,r){var n=t==null?"":""+t;if(r){for(var i in r)if(r[i])n=n?n+" "+i:i;else if(n.length)for(var l=i.length,c=0;(c=n.indexOf(i,c))>=0;){var s=c+l;(c===0||Xe.includes(n[c-1]))&&(s===n.length||Xe.includes(n[s]))?n=(c===0?"":n.substring(0,c))+n.substring(s+1):c=s}}return n===""?null:n}function de(t,e,r,n,i,l){var c=t.__className;if(W||c!==r||c===void 0){var s=Zt(r,n,l);(!W||s!==t.getAttribute("class"))&&(s==null?t.removeAttribute("class"):t.className=s),t.__className=r}else if(l&&i!==l)for(var o in l){var h=!!l[o];(i==null||h!==!!i[o])&&t.classList.toggle(o,h)}return l}function Re(t,e,r=!1){if(t.multiple){if(e==null)return;if(!rt(e))return Lt();for(var n of t.options)n.selected=e.includes(we(n));return}for(n of t.options){var i=we(n);if(Mt(i,e)){n.selected=!0;return}}(!r||e!==void 0)&&(t.selectedIndex=-1)}function ct(t){var e=new MutationObserver(()=>{Re(t,t.__value)});e.observe(t,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),Tt(()=>{e.disconnect()})}function $t(t,e,r=e){var n=new WeakSet,i=!0;lt(t,"change",l=>{var c=l?"[selected]":":checked",s;if(t.multiple)s=[].map.call(t.querySelectorAll(c),we);else{var o=t.querySelector(c)??t.querySelector("option:not([disabled])");s=o&&we(o)}r(s),$!==null&&n.add($)}),it(()=>{var l=e();if(t===document.activeElement){var c=st??$;if(n.has(c))return}if(Re(t,l,i),i&&l===void 0){var s=t.querySelector(":checked");s!==null&&(l=we(s),r(l))}t.__value=l,i=!1}),ct(t)}function we(t){return"__value"in t?t.__value:t.value}const er=Symbol("is custom element"),tr=Symbol("is html");function Se(t){if(W){var e=!1,r=()=>{if(!e){if(e=!0,t.hasAttribute("value")){var n=t.value;X(t,"value",null),t.value=n}if(t.hasAttribute("checked")){var i=t.checked;X(t,"checked",null),t.checked=i}}};t.__on_r=r,Ot(r),Dt()}}function X(t,e,r,n){var i=rr(t);W&&(i[e]=t.getAttribute(e),e==="src"||e==="srcset"||e==="href"&&t.nodeName==="LINK")||i[e]!==(i[e]=r)&&(e==="loading"&&(t[Rt]=r),r==null?t.removeAttribute(e):typeof r!="string"&&ar(t).includes(e)?t[e]=r:t.setAttribute(e,r))}function rr(t){return t.__attributes??={[er]:t.nodeName.includes("-"),[tr]:t.namespaceURI===qt}}var Ze=new Map;function ar(t){var e=t.getAttribute("is")||t.nodeName,r=Ze.get(e);if(r)return r;Ze.set(e,r=[]);for(var n,i=t,l=Element.prototype;l!==i;){n=Ht(i);for(var c in n)n[c].set&&r.push(c);i=Nt(i)}return r}function be(t,e,r=e){var n=new WeakSet;lt(t,"input",async i=>{var l=i?t.defaultValue:t.value;if(l=Ae(t)?Te(l):l,r(l),$!==null&&n.add($),await Qt(),l!==(l=e())){var c=t.selectionStart,s=t.selectionEnd,o=t.value.length;if(t.value=l??"",s!==null){var h=t.value.length;c===s&&s===o&&h>o?(t.selectionStart=h,t.selectionEnd=h):(t.selectionStart=c,t.selectionEnd=Math.min(s,h))}}}),(W&&t.defaultValue!==t.value||Bt(e)==null&&t.value)&&(r(Ae(t)?Te(t.value):t.value),$!==null&&n.add($)),Ut(()=>{var i=e();if(t===document.activeElement){var l=st??$;if(n.has(l))return}Ae(t)&&i===Te(t.value)||t.type==="date"&&!i&&!t.value||i!==t.value&&(t.value=i??"")})}function Ae(t){var e=t.type;return e==="number"||e==="range"}function Te(t){return t===""?null:+t}class nr{#e;get all(){return a(this.#e)}set all(e){y(this.#e,e,!0)}#t;get isLoading(){return a(this.#t)}set isLoading(e){y(this.#t,e,!0)}#r;get viewMode(){return a(this.#r)}set viewMode(e){y(this.#r,e,!0)}#a;get selectedProjectId(){return a(this.#a)}set selectedProjectId(e){y(this.#a,e,!0)}constructor(){this.#e=D(ue([])),this.#t=D(!1),this.#r=D("list"),this.#a=D(null)}get selectedProject(){return this.viewMode==="list"?"all":this.viewMode==="create"?"create":this.selectedProjectId||"all"}async loadProjects(){if(typeof window>"u"||!("api"in window)){console.warn("Window API not available, skipping project load");return}this.isLoading=!0;try{const e=await window.api.getProjects();Array.isArray(e)&&(this.all=e.slice().sort((r,n)=>r.name.localeCompare(n.name)))}catch(e){console.error("Failed to load projects from main process",e)}finally{this.isLoading=!1}}async createProject(e){const r=e.trim();if(!r)throw new Error("Project name is required");if(typeof window>"u"||!("api"in window))throw new Error("Window API not available - preload may not have loaded");const n=await window.api.createProject(r);return this.all=[...this.all,n].sort((i,l)=>i.name.localeCompare(l.name)),n}selectAll(){this.viewMode="list",this.selectedProjectId=null}selectProject(e){if(e===null||e==="all"){this.selectAll();return}if(e==="create"){this.viewMode="create",this.selectedProjectId=null;return}this.viewMode="detail",this.selectedProjectId=e}selectCreateProject(){this.viewMode="create",this.selectedProjectId=null}findById(e){return this.all.find(r=>r.id===e)}}const P=new nr;class lr{#e;get all(){return a(this.#e)}set all(e){y(this.#e,e,!0)}#t;get isLoading(){return a(this.#t)}set isLoading(e){y(this.#t,e,!0)}#r;get isFormOpen(){return a(this.#r)}set isFormOpen(e){y(this.#r,e,!0)}#a;get filterStatus(){return a(this.#a)}set filterStatus(e){y(this.#a,e,!0)}#n;get filterQuery(){return a(this.#n)}set filterQuery(e){y(this.#n,e,!0)}#l;get filterProject(){return a(this.#l)}set filterProject(e){y(this.#l,e,!0)}constructor(){this.#e=D(ue([])),this.#t=D(!1),this.#r=D(!1),this.#a=D("all"),this.#n=D(""),this.#l=D("all")}get filtered(){let e=this.all.slice();if(this.filterStatus!=="all"&&(e=e.filter(r=>this.filterStatus==="active"?r.status==="active":r.status==="done")),this.filterProject&&this.filterProject!=="all"&&(e=e.filter(r=>(r.project||"")===this.filterProject)),this.filterQuery&&this.filterQuery.trim()!==""){const r=this.filterQuery.toLowerCase();e=e.filter(n=>(n.title||"").toLowerCase().includes(r)||(n.prompt||"").toLowerCase().includes(r)||(n.topic||"").toLowerCase().includes(r)||(n.project||"").toLowerCase().includes(r))}return e}get activeCards(){return this.all.filter(e=>e.status==="active")}get completedCards(){return this.all.filter(e=>e.status==="done")}get cardCount(){return this.all.length}async loadCards(){if(!(typeof window>"u"||!("api"in window))){this.isLoading=!0;try{const r=(await window.api.getCards()).map(n=>({...n,createdAt:new Date(n.createdAt)})).sort((n,i)=>i.createdAt.getTime()-n.createdAt.getTime());this.all=r}catch(e){console.error("Failed to load cards:",e)}finally{this.isLoading=!1}}}async addCard(e){if(!(typeof window>"u"||!("api"in window)))try{const r=await window.api.addCard(e);return this.all=[r,...this.all],r}catch(r){throw console.error("Failed to add card:",r),r}}async updateCardStatus(e,r){if(!(typeof window>"u"||!("api"in window)))try{await window.api.toggleCard(e,r);const n=this.all.findIndex(i=>i.id===e);n!==-1&&(this.all[n]={...this.all[n],status:r})}catch(n){throw console.error("Failed to update card status:",n),n}}async runPrompt(e){if(!(typeof window>"u"||!("api"in window)))try{await window.api.runPrompt(e)}catch(r){throw console.error("Failed to run prompt:",r),r}}toggleForm(){this.isFormOpen=!this.isFormOpen}openForm(){this.isFormOpen=!0}closeForm(){this.isFormOpen=!1}setFilterStatus(e){this.filterStatus=e}setFilterQuery(e){this.filterQuery=e}setFilterProject(e){this.filterProject=e}}const N=new lr;var ir=T('<li class="empty svelte-138d5ja">No projects yet — create one.</li>'),sr=T('<li><button class="project-card svelte-138d5ja"><span class="project-name svelte-138d5ja"> </span></button></li>'),or=T('<section class="projects svelte-138d5ja"><header><h2>Projects</h2> <div class="actions svelte-138d5ja"><p class="hint">Create a project from the header above.</p></div></header> <ul class="project-list svelte-138d5ja"><!></ul></section>');function cr(t,e){ie(e,!0);function r(o){P.selectProject(o),e.onopen?.({projectId:o})}var n=or(),i=g(v(n),2),l=v(i);{var c=o=>{var h=ir();C(o,h)},s=o=>{var h=le(),w=ee(h);ce(w,17,()=>P.all,j=>j.id,(j,E)=>{var L=sr(),u=v(L);u.__click=()=>r(a(E).id);var F=v(u),p=v(F,!0);f(F),f(u),f(L),U(()=>{X(u,"aria-label",`Open project ${a(E).name}`),R(p,a(E).name)}),C(j,L)}),C(o,h)};z(l,o=>{P.all.length===0?o(c):o(s,!1)})}f(i),f(n),C(t,n),se()}oe(["click"]);var dr=T('<p id="name-error" class="field-error svelte-t06kqd" role="alert"> </p>'),ur=T('<p class="submission-error svelte-t06kqd" role="alert"> </p>'),vr=T('<section class="project-create svelte-t06kqd"><h2 class="svelte-t06kqd">Create project</h2> <form class="project-form svelte-t06kqd"><label for="proj-name" class="svelte-t06kqd">Project name</label> <input id="proj-name" type="text" placeholder="e.g. JavaScript"/> <!> <p class="hint svelte-t06kqd" id="project-hint">The project name appears in the sidebar list.</p> <!> <div class="actions svelte-t06kqd"><button type="submit" class="primary svelte-t06kqd"> </button> <button type="button" class="ghost svelte-t06kqd">Cancel</button></div></form></section>');function fr(t,e){ie(e,!0);let r=D(ue({name:""})),n=D(null),i=D(!1),l=D(ue({})),c=Y(()=>a(l).name?"name-error project-hint":"project-hint");function s(m){const _={};return(!m.name||m.name.trim()==="")&&(_.name="Project name is required"),_}async function o(m){if(m.preventDefault(),y(l,s(a(r)),!0),!(Object.keys(a(l)).length>0)){y(n,null),y(i,!0);try{const _=a(r).name.trim(),d=await P.createProject(_);y(r,{name:""},!0),y(l,{},!0),e.oncreated?.({project:d.id})}catch(_){console.error("Failed to create project",_),y(n,_ instanceof Error?_.message:"Unable to create project right now. Try again in a moment.",!0)}finally{y(i,!1)}}}function h(){y(r,{name:""},!0),y(l,{},!0),y(n,null),P.selectProject("all")}var w=vr(),j=g(v(w),2),E=g(v(j),2);Se(E);let L;var u=g(E,2);{var F=m=>{var _=dr(),d=v(_,!0);f(_),U(()=>R(d,a(l).name)),C(m,_)};z(u,m=>{a(l).name&&m(F)})}var p=g(u,4);{var x=m=>{var _=ur(),d=v(_,!0);f(_),U(()=>R(d,a(n))),C(m,_)};z(p,m=>{a(n)&&m(x)})}var A=g(p,2),M=v(A),B=v(M,!0);f(M);var k=g(M,2);k.__click=h,f(A),f(j),f(w),U(()=>{X(j,"aria-describedby",a(c)),X(E,"aria-invalid",a(l).name?"true":"false"),E.disabled=a(i),L=de(E,1,"svelte-t06kqd",null,L,{error:a(l).name}),M.disabled=a(i),R(B,a(i)?"Creating...":"Create project"),k.disabled=a(i)}),ot("submit",j,o),be(E,()=>a(r).name,m=>a(r).name=m),C(t,w),se()}oe(["click"]);var pr=T('<div role="status" class="form-status"> </div>'),hr=T('<span class="error-message"> </span>'),mr=T('<span class="hint">Give your learning card a clear, memorable name.</span>'),_r=T("<option> </option>"),gr=T('<span class="error-message"> </span>'),br=T('<span class="hint">Give your project a short, unique name.</span>'),jr=T('<div class="field"><label for="project">New project name <span class="required">*</span></label> <input id="project" type="text" autocomplete="off"/> <!></div>'),wr=T('<span class="error-message"> </span>'),yr=T('<span class="hint">What do you want to learn or understand?</span>'),Pr=T('<section id="add-section"><form aria-labelledby="add-heading"><h2>New Card Details</h2> <!> <div class="field"><label for="title">Title <span class="required">*</span></label> <input id="title" type="text" autocomplete="off" required/> <!></div> <div class="field"><label for="topic">Topic <span class="optional">(optional)</span></label> <input id="topic" type="text" autocomplete="off"/> <span class="hint">e.g., JavaScript, Design Patterns, Math</span></div> <div class="field"><label for="project-select">Project <span class="optional">(optional)</span></label> <select id="project-select" aria-describedby="project-hint"><option>Select a project</option><!><option>+ Create new project...</option></select> <span id="project-hint" class="hint">Assign this card to a project or create a new one.</span></div> <!> <div class="field"><label for="prompt">Learning prompt <span class="required">*</span></label> <textarea id="prompt" required placeholder="e.g. Explain the concept of closures in JavaScript"></textarea> <!></div> <div class="form-actions"><button type="submit" class="primary"> </button> <button type="button" class="ghost">Cancel</button></div></form></section>');function Cr(t,e){ie(e,!0);let r=D(""),n=D(""),i=D(ue(P.selectedProject!=="all"&&P.selectedProject!=="create"?P.selectedProject:"")),l=D(!1),c=D(""),s=D(""),o=D(!1),h=Y(()=>{const d=a(r).trim();return d.length===0?"":d.length<3?"Title must be at least 3 characters":d.length>100?"Title must be less than 100 characters":""}),w=Y(()=>{const d=a(c).trim();return d.length===0?"":d.length<10?"Prompt must be at least 10 characters":d.length>1e3?"Prompt must be less than 1000 characters":""}),j=Y(()=>{if(a(l)){const d=a(i).trim();if(d.length===0)return"Project name is required";if(d.length<2)return"Project name must be at least 2 characters";if(d.length>50)return"Project name must be less than 50 characters";if(P.all.some(b=>b.name.toLowerCase()===d.toLowerCase()))return"A project with this name already exists"}return""}),E=Y(()=>a(r).trim().length>0&&a(c).trim().length>0&&!a(h)&&!a(w)&&!a(j)),L=null,u=null,F=null;De(()=>{if(!N.isFormOpen)return;const d=document.getElementById("title");d&&setTimeout(()=>d.focus(),0);const b=()=>{if(!L)return;const Q=L.querySelectorAll('input:not([disabled]), textarea:not([disabled]), button:not([disabled]), select:not([disabled]), [tabindex]:not([tabindex="-1"])');Q.length>0&&(u=Q[0],F=Q[Q.length-1])};b();const S=H=>{H.key==="Tab"&&(b(),H.shiftKey?document.activeElement===u&&(H.preventDefault(),F?.focus()):document.activeElement===F&&(H.preventDefault(),u?.focus()))},O=H=>{H.key==="Escape"&&M()};return L?.addEventListener("keydown",S),window.addEventListener("keydown",O),()=>{L?.removeEventListener("keydown",S),window.removeEventListener("keydown",O)}});async function p(d){if(d.preventDefault(),!(!a(E)||a(o))){y(o,!0),y(s,"");try{await e.onSubmit({title:a(r).trim(),prompt:a(c).trim(),topic:a(n).trim()||void 0,project:a(l)?a(i).trim()||void 0:a(i)||void 0}),A(),N.closeForm(),B(`Card "${a(r)}" added successfully`)}catch(b){y(s,b instanceof Error?b.message:"Failed to add card",!0),B(a(s))}finally{y(o,!1)}}}function x(d){const b=d.target;b.value==="__create__"?(y(l,!0),y(i,"")):(y(l,!1),y(i,b.value,!0))}function A(){y(r,""),y(n,""),y(i,""),y(l,!1),y(c,""),y(s,"")}function M(){A(),N.closeForm()}function B(d){const b=document.getElementById("sr-announcements");b&&(b.textContent=d)}var k=le(),m=ee(k);{var _=d=>{var b=Pr(),S=v(b),O=g(v(S),2);{var H=I=>{var q=pr(),V=v(q,!0);f(q),U(()=>R(V,a(s))),C(I,q)};z(O,I=>{a(s)&&I(H)})}var Q=g(O,2),G=g(v(Q),2);Se(G);let K;var te=g(G,2);{var Z=I=>{var q=hr(),V=v(q,!0);f(q),U(()=>R(V,a(h))),C(I,q)},ke=I=>{var q=mr();C(I,q)};z(te,I=>{a(h)?I(Z):I(ke,!1)})}f(Q);var ve=g(Q,2),J=g(v(ve),2);Se(J),Je(2),f(ve);var fe=g(ve,2),pe=g(v(fe),2);pe.__change=x;var Fe=v(pe);Fe.value=Fe.__value="";var He=g(Fe);ce(He,17,()=>P.all,I=>I.id,(I,q)=>{var V=_r(),Pe=v(V,!0);f(V);var Ce={};U(()=>{R(Pe,a(q).name),Ce!==(Ce=a(q).id)&&(V.value=(V.__value=a(q).id)??"")}),C(I,V)});var Qe=g(He);Qe.value=Qe.__value="__create__",f(pe),Je(2),f(fe);var Be=g(fe,2);{var dt=I=>{var q=jr(),V=g(v(q),2);Se(V);let Pe;var Ce=g(V,2);{var ht=re=>{var me=gr(),_t=v(me,!0);f(me),U(()=>R(_t,a(j))),C(re,me)},mt=re=>{var me=br();C(re,me)};z(Ce,re=>{a(j)?re(ht):re(mt,!1)})}f(q),U(()=>{V.disabled=a(o),Pe=de(V,1,"",null,Pe,{error:a(j)})}),be(V,()=>a(i),re=>y(i,re)),C(I,q)};z(Be,I=>{a(l)&&I(dt)})}var Ie=g(Be,2),he=g(v(Ie),2);zt(he);let Ue;var ut=g(he,2);{var vt=I=>{var q=wr(),V=v(q,!0);f(q),U(()=>R(V,a(w))),C(I,q)},ft=I=>{var q=yr();C(I,q)};z(ut,I=>{a(w)?I(vt):I(ft,!1)})}f(Ie);var ze=g(Ie,2),ye=v(ze),pt=v(ye,!0);f(ye);var Ge=g(ye,2);Ge.__click=M,f(ze),f(S),f(b),Vt(b,I=>L=I,()=>L),U(()=>{G.disabled=a(o),K=de(G,1,"",null,K,{error:a(h)}),J.disabled=a(o),pe.disabled=a(o),he.disabled=a(o),Ue=de(he,1,"",null,Ue,{error:a(w)}),ye.disabled=!a(E)||a(o),R(pt,a(o)?"Saving...":"Save card"),Ge.disabled=a(o)}),ot("submit",S,p),be(G,()=>a(r),I=>y(r,I)),be(J,()=>a(n),I=>y(n,I)),$t(pe,()=>a(i),I=>y(i,I)),be(he,()=>a(c),I=>y(c,I)),C(d,b)};z(m,d=>{N.isFormOpen&&d(_)})}C(t,k),se()}oe(["change","click"]);var Sr=T('<p class="topic"> </p>'),Er=T('<p class="project">Project: <strong> </strong></p>'),kr=T('<article><header><h3> </h3> <!> <!></header> <section><div> </div> <pre class="prompt"> </pre></section> <footer class="card-actions"><button type="button" class="primary">Start in ChatGPT</button> <button type="button" class="ghost"> </button></footer></article>');function $e(t,e){ie(e,!0);const r=Y(()=>e.card.status==="done"),n=Y(()=>a(r)?"Mark active":"Mark done"),i=Y(()=>a(r)?"✓ Completed":"Active"),l=Y(()=>e.card.project?P.all.find(b=>b.id===e.card.project)?.name||e.card.project:"");var c=kr();let s;var o=v(c),h=v(o),w=v(h,!0);f(h);var j=g(h,2);{var E=b=>{var S=Sr(),O=v(S,!0);f(S),U(()=>R(O,e.card.topic)),C(b,S)};z(j,b=>{e.card.topic&&b(E)})}var L=g(j,2);{var u=b=>{var S=Er(),O=g(v(S)),H=v(O,!0);f(O),f(S),U(()=>R(H,a(l))),C(b,S)};z(L,b=>{e.card.project&&b(u)})}f(o);var F=g(o,2),p=v(F);let x;var A=v(p,!0);f(p);var M=g(p,2),B=v(M,!0);f(M),f(F);var k=g(F,2),m=v(k);m.__click=()=>e.onStart(e.card.prompt);var _=g(m,2);_.__click=()=>e.onToggle(e.card.id,a(r)?"active":"done");var d=v(_,!0);f(_),f(k),f(c),U(()=>{s=de(c,1,"card svelte-ybr5in",null,s,{done:a(r)}),R(w,e.card.title),x=de(p,1,"status svelte-ybr5in",null,x,{done:a(r)}),R(A,a(i)),R(B,e.card.prompt),X(m,"aria-label",`Start chat with prompt for ${e.card.title}`),X(_,"aria-pressed",a(r)),X(_,"aria-label",a(r)?`Mark ${e.card.title} as active`:`Mark ${e.card.title} as done`),R(d,a(n))}),C(t,c),se()}oe(["click"]);var Fr=T('<p class="empty-state" role="status" aria-live="polite">No learning cards match your filters.</p>'),Ir=T('<section class="project-group"><h3> </h3> <!></section>'),xr=T('<section><h2>Your learning cards</h2> <div class="filters"><label class="filter">Show: <select><option> </option><option> </option><option> </option></select></label> <label class="filter search">Search: <input type="search" placeholder="Search title, prompt, topic" aria-label="Search cards"/></label></div> <div class="card-list"><!></div></section>');function Ar(t,e){ie(e,!0);function r(m){const _=new Map;for(const b of m){const S=b.project||"";_.has(S)||_.set(S,[]),_.get(S).push(b)}const d=[];for(const[b,S]of _.entries())d.push({project:b,cards:S,headingId:`project-${(b||"unassigned").replace(/\s+/g,"-")}`});return d.sort((b,S)=>{const O=b.project?P.all.find(Q=>Q.id===b.project)?.name||b.project:"Unassigned",H=S.project?P.all.find(Q=>Q.id===S.project)?.name||S.project:"Unassigned";return O.localeCompare(H)}),d}const n=Y(()=>N.filterProject==="all"?r(N.filtered):[]);function i(m){const _=m.target;N.setFilterStatus(_.value)}function l(m){const _=m.target;N.setFilterQuery(_.value)}var c=xr(),s=g(v(c),2),o=v(s),h=g(v(o));h.__change=i;var w=v(h),j=v(w);f(w),w.value=w.__value="all";var E=g(w),L=v(E);f(E),E.value=E.__value="active";var u=g(E),F=v(u);f(u),u.value=u.__value="done",f(h),f(o);var p=g(o,2),x=g(v(p));x.__input=l,f(p),f(s);var A=g(s,2),M=v(A);{var B=m=>{var _=Fr();C(m,_)},k=m=>{var _=le(),d=ee(_);{var b=O=>{var H=le(),Q=ee(H);ce(Q,17,()=>a(n),G=>G.headingId,(G,K)=>{var te=Ir(),Z=v(te),ke=v(Z,!0);f(Z);var ve=g(Z,2);ce(ve,17,()=>a(K).cards,J=>J.id,(J,fe)=>{$e(J,{get card(){return a(fe)},get onStart(){return e.onStart},get onToggle(){return e.onToggle}})}),f(te),U(J=>{X(te,"aria-labelledby",a(K).headingId),X(Z,"id",a(K).headingId),R(ke,J)},[()=>a(K).project?P.all.find(J=>J.id===a(K).project)?.name||a(K).project:"Unassigned"]),C(G,te)}),C(O,H)},S=O=>{var H=le(),Q=ee(H);ce(Q,17,()=>N.filtered,G=>G.id,(G,K)=>{$e(G,{get card(){return a(K)},get onStart(){return e.onStart},get onToggle(){return e.onToggle}})}),C(O,H)};z(d,O=>{N.filterProject==="all"?O(b):O(S,!1)},!0)}C(m,_)};z(M,m=>{N.filtered.length===0?m(B):m(k,!1)})}f(A),f(c),U(()=>{R(j,`All (${N.all.length??""})`),R(L,`Active (${N.activeCards.length??""})`),R(F,`Completed (${N.completedCards.length??""})`)}),C(t,c),se()}oe(["change","input"]);var Tr=T('<section class="project-detail svelte-1ykxz3w"><header><h2> </h2> <div class="actions svelte-1ykxz3w"><button class="primary" aria-controls="add-section">+ New Learning Item</button></div></header> <!> <!></section>');function Lr(t,e){ie(e,!0);const r=Y(()=>{if(!(!P.all||!e.projectId))return P.all.find(p=>p.id===e.projectId)});De(()=>{(!P.all||P.all.length===0)&&P.loadProjects()});function n(){N.toggleForm()}async function i(p){const A=p.project&&String(p.project).trim().length>0?p.project:e.projectId||void 0;await N.addCard({...p,project:A}),N.closeForm()}async function l(p){await N.runPrompt(p)}async function c(p,x){await N.updateCardStatus(p,x)}var s=Tr(),o=v(s),h=v(o),w=v(h,!0);f(h);var j=g(h,2),E=v(j);E.__click=n,f(j),f(o);var L=g(o,2);{var u=p=>{Cr(p,{onSubmit:i})};z(L,p=>{N.isFormOpen&&p(u)})}var F=g(L,2);Ar(F,{onStart:l,onToggle:c}),f(s),U(()=>{R(w,a(r)?a(r).name:"Project"),X(E,"aria-expanded",N.isFormOpen)}),C(t,s),se()}oe(["click"]);var Mr=T('<meta name="description" content="Finish what you start"/>'),qr=T('<button class="primary" aria-label="Create project">+ New Project</button>'),Nr=T('<button class="ghost" aria-label="Back to projects">← Projects</button>'),Or=T("<option> </option>"),Dr=T('<div class="project-controls svelte-1uha8ag"><label class="project-filter svelte-1uha8ag">Project: <select aria-label="Switch project" class="svelte-1uha8ag"><option>All projects</option><!></select></label> <button class="ghost" aria-label="Back to projects">← Projects</button></div>'),Rr=T("<p>Loading...</p>"),Hr=T('<div id="sr-announcements" class="sr-only" aria-live="polite" aria-atomic="true"></div> <div class="container"><header><h1>Learning Cards</h1> <p class="subtitle">Finish what you start</p> <div class="top-actions"><!></div></header> <main id="main-content"><!></main></div>',1);function Gr(t,e){ie(e,!0),Gt(()=>{(async()=>await Promise.all([N.loadCards(),P.loadProjects()]))()});function r(p){const x=p.project;P.selectProject(x)}let n=D(ue(P.selectedProject));De(()=>{y(n,P.selectedProject,!0)});function i(p){const A=p.target.value;A==="all"?P.selectAll():A&&P.selectProject(A)}var l=Hr();Xt("1uha8ag",p=>{var x=Mr();it(()=>{Kt.title="Learning Cards"}),C(p,x)});var c=g(ee(l),2),s=v(c),o=g(v(s),4),h=v(o);{var w=p=>{var x=qr();x.__click=()=>P.selectCreateProject(),C(p,x)},j=p=>{var x=le(),A=ee(x);{var M=k=>{var m=Nr();m.__click=()=>P.selectProject("all"),C(k,m)},B=k=>{var m=Dr(),_=v(m),d=g(v(_));d.__change=i;var b=v(d);b.value=b.__value="all";var S=g(b);ce(S,17,()=>P.all,Q=>Q.id,(Q,G)=>{var K=Or(),te=v(K,!0);f(K);var Z={};U(()=>{R(te,a(G).name),Z!==(Z=a(G).id)&&(K.value=(K.__value=a(G).id)??"")}),C(Q,K)}),f(d);var O;ct(d),f(_);var H=g(_,2);H.__click=()=>P.selectProject("all"),f(m),U(()=>{O!==(O=P.selectedProject)&&(d.value=(d.__value=P.selectedProject)??"",Re(d,P.selectedProject))}),C(k,m)};z(A,k=>{P.selectedProject==="create"?k(M):k(B,!1)},!0)}C(p,x)};z(h,p=>{P.selectedProject==="all"?p(w):p(j,!1)})}f(o),f(s);var E=g(s,2),L=v(E);{var u=p=>{var x=Rr();C(p,x)},F=p=>{var x=le(),A=ee(x);{var M=k=>{cr(k,{onopen:m=>P.selectProject(m.projectId)})},B=k=>{var m=le(),_=ee(m);{var d=S=>{fr(S,{oncreated:r})},b=S=>{Lr(S,{get projectId(){return P.selectedProject}})};z(_,S=>{P.selectedProject==="create"?S(d):S(b,!1)},!0)}C(k,m)};z(A,k=>{P.selectedProject==="all"?k(M):k(B,!1)},!0)}C(p,x)};z(L,p=>{N.isLoading||P.isLoading?p(u):p(F,!1)})}f(E),f(c),C(t,l),se()}oe(["click","change"]);export{Gr as component};
