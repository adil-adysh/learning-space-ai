import{c as Oe,a as I,f as G}from"../chunks/B5PUMfxm.js";import"../chunks/DWiubQqv.js";import{d as le,w as te,o as De}from"../chunks/CMNNw03A.js";import{i as k,j as Je,G as Re,g as p,W as Ke,I as Qe,J as Ue,K as Le,L as ie,M as j,D as X,ae as He,aB as We,al as xe,x as J,C as be,F as Xe,az as Se,aI as Ze,aa as Fe,P as O,aJ as je,aK as ea,aL as aa,B as ye,aM as z,y as Ge,A as Pe,aN as ve,av as Ce,ay as ta,z as ra,aO as na,a3 as sa,aP as ia,aQ as oa,aR as la,ad as ca,aS as fa,aT as da,aU as ua,aG as va,b as H,ab as pa,aV as ma,p as ce,aW as se,aX as ze,k as Ee,l as fe,Q as N,m,s as C,am as pe,n as g,aY as ga,t as Q,e as W,aD as ha,aZ as _a}from"../chunks/BgyVqQB0.js";import{s as D,e as Y}from"../chunks/D7ijz6kA.js";import{p as K,i as ae,s as Te,a as q}from"../chunks/Ch9oNCAl.js";import{i as de}from"../chunks/Bh05FFAn.js";function ba(e,a,t){for(var n=[],i=a.length,r,l=a.length,s=0;s<i;s++){let v=a[s];Pe(v,()=>{if(r){if(r.pending.delete(v),r.done.add(v),r.pending.size===0){var L=e.outrogroups;we(Se(r.done)),L.delete(r),L.size===0&&(e.outrogroups=null)}}else l-=1},!1)}if(l===0){var c=n.length===0&&t!==null;if(c){var f=t,u=f.parentNode;ta(u),u.append(f),e.items.clear()}we(a,!c)}else r={pending:new Set(a),done:new Set},(e.outrogroups??=new Set).add(r)}function we(e,a=!0){for(var t=0;t<e.length;t++)ra(e[t],a)}var Ne;function ya(e,a,t,n,i,r=null){var l=e,s=new Map;k&&Je();var c=null,f=Ke(()=>{var _=t();return Ze(_)?_:_==null?[]:Se(_)}),u,v=!0;function L(){o.fallback=c,Ca(o,u,l,a,n),c!==null&&(u.length===0?(c.f&z)===0?Ge(c):(c.f^=z,Z(c,null,l)):Pe(c,()=>{c=null}))}var x=Re(()=>{u=p(f);var _=u.length;let w=!1;if(k){var F=Qe(l)===Ue;F!==(_===0)&&(l=Le(),ie(l),j(!1),w=!0)}for(var S=new Set,b=J,E=Xe(),d=0;d<_;d+=1){k&&X.nodeType===He&&X.data===We&&(l=X,w=!0,j(!1));var h=u[d],T=n(h,d),y=v?null:s.get(T);y?(y.v&&xe(y.v,h),y.i&&xe(y.i,d),E&&b.skipped_effects.delete(y.e)):(y=wa(s,v?l:Ne??=ye(),h,T,d,i,a,t),v||(y.e.f|=z),s.set(T,y)),S.add(T)}if(_===0&&r&&!c&&(v?c=be(()=>r(l)):(c=be(()=>r(Ne??=ye())),c.f|=z)),k&&_>0&&ie(Le()),!v)if(E){for(const[M,A]of s)S.has(M)||b.skipped_effects.add(A.e);b.oncommit(L),b.ondiscard(()=>{})}else L();w&&j(!0),p(f)}),o={effect:x,items:s,outrogroups:null,fallback:c};v=!1,k&&(l=X)}function Ca(e,a,t,n,i){var r=a.length,l=e.items,s=e.effect.first,c,f=null,u=[],v=[],L,x,o,_;for(_=0;_<r;_+=1){if(L=a[_],x=i(L,_),o=l.get(x).e,e.outrogroups!==null)for(const y of e.outrogroups)y.pending.delete(o),y.done.delete(o);if((o.f&z)!==0)if(o.f^=z,o===s)Z(o,null,t);else{var w=f?f.next:s;o===e.effect.last&&(e.effect.last=o.prev),o.prev&&(o.prev.next=o.next),o.next&&(o.next.prev=o.prev),P(e,f,o),P(e,o,w),Z(o,w,t),f=o,u=[],v=[],s=f.next;continue}if((o.f&ve)!==0&&Ge(o),o!==s){if(c!==void 0&&c.has(o)){if(u.length<v.length){var F=v[0],S;f=F.prev;var b=u[0],E=u[u.length-1];for(S=0;S<u.length;S+=1)Z(u[S],F,t);for(S=0;S<v.length;S+=1)c.delete(v[S]);P(e,b.prev,E.next),P(e,f,b),P(e,E,F),s=F,f=E,_-=1,u=[],v=[]}else c.delete(o),Z(o,s,t),P(e,o.prev,o.next),P(e,o,f===null?e.effect.first:f.next),P(e,f,o),f=o;continue}for(u=[],v=[];s!==null&&s!==o;)(c??=new Set).add(s),v.push(s),s=s.next;if(s===null)continue}(o.f&z)===0&&u.push(o),f=o,s=o.next}if(e.outrogroups!==null){for(const y of e.outrogroups)y.pending.size===0&&(we(Se(y.done)),e.outrogroups?.delete(y));e.outrogroups.size===0&&(e.outrogroups=null)}if(s!==null||c!==void 0){var d=[];if(c!==void 0)for(o of c)(o.f&ve)===0&&d.push(o);for(;s!==null;)(s.f&ve)===0&&s!==e.fallback&&d.push(s),s=s.next;var h=d.length;if(h>0){var T=null;ba(e,d,T)}}}function wa(e,a,t,n,i,r,l,s){var c=(l&ea)!==0?(l&aa)===0?O(t,!1,!1):Fe(t):null,f=(l&je)!==0?Fe(i):null;return{v:c,i:f,e:be(()=>(r(a,c??t,f??i,s),()=>{e.delete(n)}))}}function Z(e,a,t){if(e.nodes)for(var n=e.nodes.start,i=e.nodes.end,r=a&&(a.f&z)===0?a.nodes.start:t;n!==null;){var l=Ce(n);if(r.before(n),n===i)return;n=l}}function P(e,a,t){a===null?e.effect.first=t:a.next=t,t===null?e.effect.last=a:t.prev=a}function Sa(e,a){let t=null,n=k;var i;if(k){t=X;for(var r=sa(document.head);r!==null&&(r.nodeType!==He||r.data!==e);)r=Ce(r);if(r===null)j(!1);else{var l=Ce(r);r.remove(),ie(l)}}k||(i=document.head.appendChild(ye()));try{Re(()=>a(i),na)}finally{n&&(j(!0),ie(t))}}const ke=[...` 	
\r\f \v\uFEFF`];function Ea(e,a,t){var n=e==null?"":""+e;if(t){for(var i in t)if(t[i])n=n?n+" "+i:i;else if(n.length)for(var r=i.length,l=0;(l=n.indexOf(i,l))>=0;){var s=l+r;(l===0||ke.includes(n[l-1]))&&(s===n.length||ke.includes(n[s]))?n=(l===0?"":n.substring(0,l))+n.substring(s+1):l=s}}return n===""?null:n}function Me(e,a,t,n,i,r){var l=e.__className;if(k||l!==t||l===void 0){var s=Ea(t,n,r);(!k||s!==e.getAttribute("class"))&&(s==null?e.removeAttribute("class"):e.className=s),e.__className=t}else if(r&&i!==r)for(var c in r){var f=!!r[c];(i==null||f!==!!i[c])&&e.classList.toggle(c,f)}return r}const Ta=Symbol("is custom element"),Aa=Symbol("is html");function Ie(e){if(k){var a=!1,t=()=>{if(!a){if(a=!0,e.hasAttribute("value")){var n=e.value;oe(e,"value",null),e.value=n}if(e.hasAttribute("checked")){var i=e.checked;oe(e,"checked",null),e.checked=i}}};e.__on_r=t,ca(t),fa()}}function oe(e,a,t,n){var i=La(e);k&&(i[a]=e.getAttribute(a),a==="src"||a==="srcset"||a==="href"&&e.nodeName==="LINK")||i[a]!==(i[a]=t)&&(a==="loading"&&(e[da]=t),t==null?e.removeAttribute(a):typeof t!="string"&&xa(e).includes(a)?e[a]=t:e.setAttribute(a,t))}function La(e){return e.__attributes??={[Ta]:e.nodeName.includes("-"),[Aa]:e.namespaceURI===ia}}var $e=new Map;function xa(e){var a=e.getAttribute("is")||e.nodeName,t=$e.get(a);if(t)return t;$e.set(a,t=[]);for(var n,i=e,r=Element.prototype;r!==i;){n=la(i);for(var l in n)n[l].set&&t.push(l);i=oa(i)}return t}function me(e,a,t=a){var n=new WeakSet;ua(e,"input",async i=>{var r=i?e.defaultValue:e.value;if(r=ge(e)?he(r):r,t(r),J!==null&&n.add(J),await va(),r!==(r=a())){var l=e.selectionStart,s=e.selectionEnd,c=e.value.length;if(e.value=r??"",s!==null){var f=e.value.length;l===s&&s===c&&f>c?(e.selectionStart=f,e.selectionEnd=f):(e.selectionStart=l,e.selectionEnd=Math.min(s,f))}}}),(k&&e.defaultValue!==e.value||H(a)==null&&e.value)&&(t(ge(e)?he(e.value):e.value),J!==null&&n.add(J)),pa(()=>{var i=a();if(e===document.activeElement){var r=ma??J;if(n.has(r))return}ge(e)&&i===he(e.value)||e.type==="date"&&!i&&!e.value||i!==e.value&&(e.value=i??"")})}function ge(e){var a=e.type;return a==="number"||a==="range"}function he(e){return e===""?null:+e}function Fa(e){return function(...a){var t=a[0];return t.preventDefault(),e?.apply(this,a)}}const B=te([]),ee=te(!1),_e=te(!1);le(B,e=>e.length);const Na=le(B,e=>e.filter(a=>a.status==="active")),ka=le(B,e=>e.filter(a=>a.status==="done")),Be=te("all"),Ve=te(""),Ma=le([B,Be,Ve],([e,a,t])=>{let n=e.slice();if(a!=="all"&&(n=n.filter(i=>a==="active"?i.status==="active":i.status==="done")),t&&t.trim()!==""){const i=t.toLowerCase();n=n.filter(r=>(r.title||"").toLowerCase().includes(i)||(r.prompt||"").toLowerCase().includes(i)||(r.topic||"").toLowerCase().includes(i))}return n});function Ia(e){Be.set(e)}function $a(e){Ve.set(e)}function Oa(e){B.update(a=>[e,...a])}function Da(e,a){B.update(t=>t.map(n=>n.id===e?{...n,status:a}:n))}function Ra(e){B.set(e)}var Ha=G('<div role="status" class="form-status"> </div>'),Ga=G('<section id="add-section"><form><h2>New Card Details</h2> <!> <div class="field"><label for="title">Title <span class="required">*</span></label> <input id="title" type="text" autocomplete="off" required/> <span class="hint">Give your learning card a clear, memorable name.</span></div> <div class="field"><label for="topic">Topic <span class="optional">(optional)</span></label> <input id="topic" type="text" autocomplete="off"/> <span class="hint">e.g., JavaScript, Design Patterns, Math</span></div> <div class="field"><label for="prompt">Learning prompt <span class="required">*</span></label> <textarea id="prompt" required placeholder="e.g. Explain the concept of closures in JavaScript"></textarea> <span class="hint">What do you want to learn or understand?</span></div> <div class="form-actions"><button type="submit" class="primary"> </button> <button type="button" class="ghost">Cancel</button></div></form></section>');function Pa(e,a){ce(a,!1);const t=()=>q(ee,"$isFormOpen",n),[n,i]=Te(),r=O();let l=K(a,"onSubmit",8),s=O(""),c=O(""),f=O(""),u=O(""),v=O(!1);async function L(){if(!(!p(r)||p(v))){N(v,!0),N(u,"");try{await l()({title:p(s).trim(),prompt:p(f).trim(),topic:p(c).trim()||void 0}),x(),ee.set(!1),N(u,"Card added successfully!"),_(p(u))}catch(b){N(u,b instanceof Error?b.message:"Failed to add card"),_(p(u))}finally{N(v,!1)}}}function x(){N(s,""),N(c,""),N(f,""),N(u,"")}function o(){x(),ee.set(!1)}function _(b){const E=document.getElementById("sr-announcements");E&&(E.textContent=b)}De(()=>{const b=E=>{E.key==="Escape"&&t()&&o()};return window.addEventListener("keydown",b),()=>{window.removeEventListener("keydown",b)}}),se(()=>(p(s),p(f)),()=>{N(r,p(s).trim().length>0&&p(f).trim().length>0)}),ze(),de();var w=Oe(),F=Ee(w);{var S=b=>{var E=Ga(),d=m(E),h=C(m(d),2);{var T=R=>{var ue=Ha(),Ye=m(ue,!0);g(ue),Q(()=>D(Ye,p(u))),I(R,ue)};ae(h,R=>{p(u)&&R(T)})}var y=C(h,2),M=C(m(y),2);Ie(M),pe(2),g(y);var A=C(y,2),$=C(m(A),2);Ie($),pe(2),g(A);var U=C(A,2),V=C(m(U),2);ga(V),pe(2),g(U);var re=C(U,2),ne=m(re),qe=m(ne,!0);g(ne);var Ae=C(ne,2);g(re),g(d),g(E),Q(()=>{M.disabled=p(v),$.disabled=p(v),V.disabled=p(v),ne.disabled=!p(r)||p(v),D(qe,p(v)?"Saving...":"Save card"),Ae.disabled=p(v)}),me(M,()=>p(s),R=>N(s,R)),me($,()=>p(c),R=>N(c,R)),me(V,()=>p(f),R=>N(f,R)),Y("click",Ae,o),Y("submit",d,Fa(L)),I(b,E)};ae(F,b=>{t()&&b(S)})}I(e,w),fe(),i()}var za=G('<p class="topic"> </p>'),Ba=G('<article><header><h3> </h3> <!></header> <section><div> </div> <pre class="prompt"> </pre></section> <footer class="card-actions"><button type="button" class="primary">Start in ChatGPT</button> <button type="button" class="ghost"> </button></footer></article>');function Va(e,a){ce(a,!1);const t=O(),n=O(),i=O();let r=K(a,"card",8),l=K(a,"onStart",8),s=K(a,"onToggle",8);se(()=>W(r()),()=>{N(t,r().status==="done")}),se(()=>p(t),()=>{N(n,p(t)?"Mark active":"Mark done")}),se(()=>p(t),()=>{N(i,p(t)?"✓ Completed":"Active")}),ze(),de();var c=Ba();let f;var u=m(c),v=m(u),L=m(v,!0);g(v);var x=C(v,2);{var o=M=>{var A=za(),$=m(A,!0);g(A),Q(()=>D($,(W(r()),H(()=>r().topic)))),I(M,A)};ae(x,M=>{W(r()),H(()=>r().topic)&&M(o)})}g(u);var _=C(u,2),w=m(_);let F;var S=m(w,!0);g(w);var b=C(w,2),E=m(b,!0);g(b),g(_);var d=C(_,2),h=m(d),T=C(h,2),y=m(T,!0);g(T),g(d),g(c),Q(()=>{f=Me(c,1,"card svelte-ybr5in",null,f,{done:p(t)}),D(L,(W(r()),H(()=>r().title))),F=Me(w,1,"status svelte-ybr5in",null,F,{done:p(t)}),D(S,p(i)),D(E,(W(r()),H(()=>r().prompt))),oe(T,"aria-pressed",p(t)),D(y,p(n))}),Y("click",h,()=>l()(r().prompt)),Y("click",T,()=>s()(r().id,p(t)?"active":"done")),I(e,c),fe()}var qa=G('<p class="empty-state">No learning cards match your filters.</p>'),Ya=G('<section><h2>Your learning cards</h2> <div class="filters"><label class="filter">Show: <select><option> </option><option> </option><option> </option></select></label> <label class="filter search">Search: <input type="search" placeholder="Search title, prompt, topic"/></label></div> <div class="card-list"><!></div></section>');function Ja(e,a){ce(a,!1);const t=()=>q(B,"$cards",l),n=()=>q(Na,"$activeCards",l),i=()=>q(ka,"$completedCards",l),r=()=>q(Ma,"$filteredCards",l),[l,s]=Te();let c=K(a,"onStart",8),f=K(a,"onToggle",8);de();var u=Ya(),v=C(m(u),2),L=m(v),x=C(m(L)),o=m(x),_=m(o);g(o),o.value=o.__value="all";var w=C(o),F=m(w);g(w),w.value=w.__value="active";var S=C(w),b=m(S);g(S),S.value=S.__value="done",g(x),g(L);var E=C(L,2),d=C(m(E));g(E),g(v);var h=C(v,2),T=m(h);{var y=A=>{var $=qa();I(A,$)},M=A=>{var $=Oe(),U=Ee($);ya(U,1,r,V=>V.id,(V,re)=>{Va(V,{get card(){return p(re)},get onStart(){return c()},get onToggle(){return f()}})}),I(A,$)};ae(T,A=>{r(),H(()=>r().length===0)?A(y):A(M,!1)})}g(h),g(u),Q(()=>{D(_,`All (${t(),H(()=>t().length)??""})`),D(F,`Active (${n(),H(()=>n().length)??""})`),D(b,`Completed (${i(),H(()=>i().length)??""})`)}),Y("change",x,A=>Ia(A.currentTarget.value)),Y("input",d,A=>$a(A.currentTarget.value)),I(e,u),fe(),s()}var Ka=G('<meta name="description" content="Finish what you start"/>'),Qa=G("<p>Loading cards...</p>"),Ua=G('<div id="sr-announcements" class="sr-only" aria-live="polite" aria-atomic="true"></div> <div class="container"><header><h1>Learning Cards</h1> <p class="subtitle">Finish what you start</p> <div class="top-actions"><button class="primary" aria-controls="add-section">+ Add learning card</button></div></header> <main id="main-content"><!> <!></main></div>',1);function rt(e,a){ce(a,!1);const t=()=>q(ee,"$isFormOpen",i),n=()=>q(_e,"$isLoading",i),[i,r]=Te();De(async()=>{_e.set(!0);try{const h=(await window.api.getCards()).map(T=>({...T,createdAt:new Date(T.createdAt)})).sort((T,y)=>y.createdAt.getTime()-T.createdAt.getTime());Ra(h)}catch(d){console.error("Failed to load cards:",d)}finally{_e.set(!1)}});async function l(d){const h=await window.api.addCard(d);Oa(h),u(`Card "${d.title}" added successfully`)}async function s(d){await window.api.runPrompt(d),u("Opening prompt in ChatGPT")}async function c(d,h){await window.api.toggleCard(d,h),Da(d,h),u(`Card marked as ${h}`)}function f(){ee.update(d=>!d)}function u(d){const h=document.getElementById("sr-announcements");h&&(h.textContent=d)}de();var v=Ua();Sa("1uha8ag",d=>{var h=Ka();ha(()=>{_a.title="Learning Cards"}),I(d,h)});var L=C(Ee(v),2),x=m(L),o=C(m(x),4),_=m(o);g(o),g(x);var w=C(x,2),F=m(w);Pa(F,{onSubmit:l});var S=C(F,2);{var b=d=>{var h=Qa();I(d,h)},E=d=>{Ja(d,{onStart:s,onToggle:c})};ae(S,d=>{n()?d(b):d(E,!1)})}g(w),g(L),Q(()=>oe(_,"aria-expanded",t())),Y("click",_,f),I(e,v),fe(),r()}export{rt as component};
