import{c as De,a as M,f as $}from"../chunks/B5PUMfxm.js";import"../chunks/DWiubQqv.js";import{d as ye,w as we,o as $e}from"../chunks/CMNNw03A.js";import{i as x,j as Ve,G as Re,g as p,W as Ye,I as Je,J as Ke,K as Le,L as ae,M as U,D as J,ae as He,aB as Ue,al as Ne,x as q,C as ge,F as We,az as Ee,aI as Qe,aa as ke,P as F,aJ as Xe,aK as Ze,aL as je,B as he,aM as H,y as Ge,A as Pe,aN as ce,av as _e,ay as ea,z as aa,aO as ta,a3 as ra,aP as na,aQ as sa,aR as ia,ad as oa,aS as la,aT as fa,aU as ca,aG as da,b as z,ab as ua,aV as va,p as ne,aW as ee,aX as qe,k as Se,l as se,Q as N,m as b,s as C,am as de,n as y,aY as pa,t as Q,e as Y,aD as ma,aZ as ga}from"../chunks/BgyVqQB0.js";import{s as G,e as X}from"../chunks/D7ijz6kA.js";import{p as B,i as Z,s as Ce,a as te}from"../chunks/Ch9oNCAl.js";import{i as ie}from"../chunks/Bh05FFAn.js";function ha(e,a,t){for(var s=[],i=a.length,r,f=a.length,n=0;n<i;n++){let v=a[n];Pe(v,()=>{if(r){if(r.pending.delete(v),r.done.add(v),r.pending.size===0){var w=e.outrogroups;be(Ee(r.done)),w.delete(r),w.size===0&&(e.outrogroups=null)}}else f-=1},!1)}if(f===0){var l=s.length===0&&t!==null;if(l){var c=t,u=c.parentNode;ea(u),u.append(c),e.items.clear()}be(a,!l)}else r={pending:new Set(a),done:new Set},(e.outrogroups??=new Set).add(r)}function be(e,a=!0){for(var t=0;t<e.length;t++)aa(e[t],a)}var xe;function _a(e,a,t,s,i,r=null){var f=e,n=new Map;x&&Ve();var l=null,c=Ye(()=>{var m=t();return Qe(m)?m:m==null?[]:Ee(m)}),u,v=!0;function w(){o.fallback=l,ba(o,u,f,a,s),l!==null&&(u.length===0?(l.f&H)===0?Ge(l):(l.f^=H,K(l,null,f)):Pe(l,()=>{l=null}))}var T=Re(()=>{u=p(c);var m=u.length;let E=!1;if(x){var k=Je(f)===Ke;k!==(m===0)&&(f=Le(),ae(f),U(!1),E=!0)}for(var L=new Set,h=q,S=We(),d=0;d<m;d+=1){x&&J.nodeType===He&&J.data===Ue&&(f=J,E=!0,U(!1));var g=u[d],A=s(g,d),_=v?null:n.get(A);_?(_.v&&Ne(_.v,g),_.i&&Ne(_.i,d),S&&h.skipped_effects.delete(_.e)):(_=ya(n,v?f:xe??=he(),g,A,d,i,a,t),v||(_.e.f|=H),n.set(A,_)),L.add(A)}if(m===0&&r&&!l&&(v?l=ge(()=>r(f)):(l=ge(()=>r(xe??=he())),l.f|=H)),x&&m>0&&ae(Le()),!v)if(S){for(const[I,O]of n)L.has(I)||h.skipped_effects.add(O.e);h.oncommit(w),h.ondiscard(()=>{})}else w();E&&U(!0),p(c)}),o={effect:T,items:n,outrogroups:null,fallback:l};v=!1,x&&(f=J)}function ba(e,a,t,s,i){var r=a.length,f=e.items,n=e.effect.first,l,c=null,u=[],v=[],w,T,o,m;for(m=0;m<r;m+=1){if(w=a[m],T=i(w,m),o=f.get(T).e,e.outrogroups!==null)for(const _ of e.outrogroups)_.pending.delete(o),_.done.delete(o);if((o.f&H)!==0)if(o.f^=H,o===n)K(o,null,t);else{var E=c?c.next:n;o===e.effect.last&&(e.effect.last=o.prev),o.prev&&(o.prev.next=o.next),o.next&&(o.next.prev=o.prev),R(e,c,o),R(e,o,E),K(o,E,t),c=o,u=[],v=[],n=c.next;continue}if((o.f&ce)!==0&&Ge(o),o!==n){if(l!==void 0&&l.has(o)){if(u.length<v.length){var k=v[0],L;c=k.prev;var h=u[0],S=u[u.length-1];for(L=0;L<u.length;L+=1)K(u[L],k,t);for(L=0;L<v.length;L+=1)l.delete(v[L]);R(e,h.prev,S.next),R(e,c,h),R(e,S,k),n=k,c=S,m-=1,u=[],v=[]}else l.delete(o),K(o,n,t),R(e,o.prev,o.next),R(e,o,c===null?e.effect.first:c.next),R(e,c,o),c=o;continue}for(u=[],v=[];n!==null&&n!==o;)(l??=new Set).add(n),v.push(n),n=n.next;if(n===null)continue}(o.f&H)===0&&u.push(o),c=o,n=o.next}if(e.outrogroups!==null){for(const _ of e.outrogroups)_.pending.size===0&&(be(Ee(_.done)),e.outrogroups?.delete(_));e.outrogroups.size===0&&(e.outrogroups=null)}if(n!==null||l!==void 0){var d=[];if(l!==void 0)for(o of l)(o.f&ce)===0&&d.push(o);for(;n!==null;)(n.f&ce)===0&&n!==e.fallback&&d.push(n),n=n.next;var g=d.length;if(g>0){var A=null;ha(e,d,A)}}}function ya(e,a,t,s,i,r,f,n){var l=(f&Ze)!==0?(f&je)===0?F(t,!1,!1):ke(t):null,c=(f&Xe)!==0?ke(i):null;return{v:l,i:c,e:ge(()=>(r(a,l??t,c??i,n),()=>{e.delete(s)}))}}function K(e,a,t){if(e.nodes)for(var s=e.nodes.start,i=e.nodes.end,r=a&&(a.f&H)===0?a.nodes.start:t;s!==null;){var f=_e(s);if(r.before(s),s===i)return;s=f}}function R(e,a,t){a===null?e.effect.first=t:a.next=t,t===null?e.effect.last=a:t.prev=a}function wa(e,a){let t=null,s=x;var i;if(x){t=J;for(var r=ra(document.head);r!==null&&(r.nodeType!==He||r.data!==e);)r=_e(r);if(r===null)U(!1);else{var f=_e(r);r.remove(),ae(f)}}x||(i=document.head.appendChild(he()));try{Re(()=>a(i),ta)}finally{s&&(U(!0),ae(t))}}const Me=[...` 	
\r\f \v\uFEFF`];function Ea(e,a,t){var s=e==null?"":""+e;if(t){for(var i in t)if(t[i])s=s?s+" "+i:i;else if(s.length)for(var r=i.length,f=0;(f=s.indexOf(i,f))>=0;){var n=f+r;(f===0||Me.includes(s[f-1]))&&(n===s.length||Me.includes(s[n]))?s=(f===0?"":s.substring(0,f))+s.substring(n+1):f=n}}return s===""?null:s}function Fe(e,a,t,s,i,r){var f=e.__className;if(x||f!==t||f===void 0){var n=Ea(t,s,r);(!x||n!==e.getAttribute("class"))&&(n==null?e.removeAttribute("class"):e.className=n),e.__className=t}else if(r&&i!==r)for(var l in r){var c=!!r[l];(i==null||c!==!!i[l])&&e.classList.toggle(l,c)}return r}const Sa=Symbol("is custom element"),Ca=Symbol("is html");function Ie(e){if(x){var a=!1,t=()=>{if(!a){if(a=!0,e.hasAttribute("value")){var s=e.value;re(e,"value",null),e.value=s}if(e.hasAttribute("checked")){var i=e.checked;re(e,"checked",null),e.checked=i}}};e.__on_r=t,oa(t),la()}}function re(e,a,t,s){var i=Ta(e);x&&(i[a]=e.getAttribute(a),a==="src"||a==="srcset"||a==="href"&&e.nodeName==="LINK")||i[a]!==(i[a]=t)&&(a==="loading"&&(e[fa]=t),t==null?e.removeAttribute(a):typeof t!="string"&&Aa(e).includes(a)?e[a]=t:e.setAttribute(a,t))}function Ta(e){return e.__attributes??={[Sa]:e.nodeName.includes("-"),[Ca]:e.namespaceURI===na}}var Oe=new Map;function Aa(e){var a=e.getAttribute("is")||e.nodeName,t=Oe.get(a);if(t)return t;Oe.set(a,t=[]);for(var s,i=e,r=Element.prototype;r!==i;){s=ia(i);for(var f in s)s[f].set&&t.push(f);i=sa(i)}return t}function ue(e,a,t=a){var s=new WeakSet;ca(e,"input",async i=>{var r=i?e.defaultValue:e.value;if(r=ve(e)?pe(r):r,t(r),q!==null&&s.add(q),await da(),r!==(r=a())){var f=e.selectionStart,n=e.selectionEnd,l=e.value.length;if(e.value=r??"",n!==null){var c=e.value.length;f===n&&n===l&&c>l?(e.selectionStart=c,e.selectionEnd=c):(e.selectionStart=f,e.selectionEnd=Math.min(n,c))}}}),(x&&e.defaultValue!==e.value||z(a)==null&&e.value)&&(t(ve(e)?pe(e.value):e.value),q!==null&&s.add(q)),ua(()=>{var i=a();if(e===document.activeElement){var r=va??q;if(s.has(r))return}ve(e)&&i===pe(e.value)||e.type==="date"&&!i&&!e.value||i!==e.value&&(e.value=i??"")})}function ve(e){var a=e.type;return a==="number"||a==="range"}function pe(e){return e===""?null:+e}function La(e){return function(...a){var t=a[0];return t.preventDefault(),e?.apply(this,a)}}const P=we([]),W=we(!1),me=we(!1);ye(P,e=>e.length);ye(P,e=>e.filter(a=>a.status==="active"));ye(P,e=>e.filter(a=>a.status==="done"));function Na(e){P.update(a=>[e,...a])}function ka(e,a){P.update(t=>t.map(s=>s.id===e?{...s,status:a}:s))}function xa(e){P.set(e)}var Ma=$('<div role="status" class="form-status"> </div>'),Fa=$('<section id="add-section"><form><h2>New Card Details</h2> <!> <div class="field"><label for="title">Title <span class="required">*</span></label> <input id="title" type="text" autocomplete="off" required/> <span class="hint">Give your learning card a clear, memorable name.</span></div> <div class="field"><label for="topic">Topic <span class="optional">(optional)</span></label> <input id="topic" type="text" autocomplete="off"/> <span class="hint">e.g., JavaScript, Design Patterns, Math</span></div> <div class="field"><label for="prompt">Learning prompt <span class="required">*</span></label> <textarea id="prompt" required placeholder="e.g. Explain the concept of closures in JavaScript"></textarea> <span class="hint">What do you want to learn or understand?</span></div> <div class="form-actions"><button type="submit" class="primary"> </button> <button type="button" class="ghost">Cancel</button></div></form></section>');function Ia(e,a){ne(a,!1);const t=()=>te(W,"$isFormOpen",s),[s,i]=Ce(),r=F();let f=B(a,"onSubmit",8),n=F(""),l=F(""),c=F(""),u=F(""),v=F(!1);async function w(){if(!(!p(r)||p(v))){N(v,!0),N(u,"");try{await f()({title:p(n).trim(),prompt:p(c).trim(),topic:p(l).trim()||void 0}),T(),W.set(!1),N(u,"Card added successfully!"),m(p(u))}catch(h){N(u,h instanceof Error?h.message:"Failed to add card"),m(p(u))}finally{N(v,!1)}}}function T(){N(n,""),N(l,""),N(c,""),N(u,"")}function o(){T(),W.set(!1)}function m(h){const S=document.getElementById("sr-announcements");S&&(S.textContent=h)}$e(()=>{const h=S=>{S.key==="Escape"&&t()&&o()};return window.addEventListener("keydown",h),()=>{window.removeEventListener("keydown",h)}}),ee(()=>(p(n),p(c)),()=>{N(r,p(n).trim().length>0&&p(c).trim().length>0)}),qe(),ie();var E=De(),k=Se(E);{var L=h=>{var S=Fa(),d=b(S),g=C(b(d),2);{var A=D=>{var fe=Ma(),Be=b(fe,!0);y(fe),Q(()=>G(Be,p(u))),M(D,fe)};Z(g,D=>{p(u)&&D(A)})}var _=C(g,2),I=C(b(_),2);Ie(I),de(2),y(_);var O=C(_,2),V=C(b(O),2);Ie(V),de(2),y(O);var oe=C(O,2),le=C(b(oe),2);pa(le),de(2),y(oe);var Te=C(oe,2),j=b(Te),ze=b(j,!0);y(j);var Ae=C(j,2);y(Te),y(d),y(S),Q(()=>{I.disabled=p(v),V.disabled=p(v),le.disabled=p(v),j.disabled=!p(r)||p(v),G(ze,p(v)?"Saving...":"Save card"),Ae.disabled=p(v)}),ue(I,()=>p(n),D=>N(n,D)),ue(V,()=>p(l),D=>N(l,D)),ue(le,()=>p(c),D=>N(c,D)),X("click",Ae,o),X("submit",d,La(w)),M(h,S)};Z(k,h=>{t()&&h(L)})}M(e,E),se(),i()}var Oa=$('<p class="topic"> </p>'),Da=$('<article><header><h3> </h3> <!></header> <section><div> </div> <pre class="prompt"> </pre></section> <footer class="card-actions"><button type="button" class="primary">Start in ChatGPT</button> <button type="button" class="ghost"> </button></footer></article>');function $a(e,a){ne(a,!1);const t=F(),s=F(),i=F();let r=B(a,"card",8),f=B(a,"onStart",8),n=B(a,"onToggle",8);ee(()=>Y(r()),()=>{N(t,r().status==="done")}),ee(()=>p(t),()=>{N(s,p(t)?"Mark active":"Mark done")}),ee(()=>p(t),()=>{N(i,p(t)?"✓ Completed":"Active")}),qe(),ie();var l=Da();let c;var u=b(l),v=b(u),w=b(v,!0);y(v);var T=C(v,2);{var o=I=>{var O=Oa(),V=b(O,!0);y(O),Q(()=>G(V,(Y(r()),z(()=>r().topic)))),M(I,O)};Z(T,I=>{Y(r()),z(()=>r().topic)&&I(o)})}y(u);var m=C(u,2),E=b(m);let k;var L=b(E,!0);y(E);var h=C(E,2),S=b(h,!0);y(h),y(m);var d=C(m,2),g=b(d),A=C(g,2),_=b(A,!0);y(A),y(d),y(l),Q(()=>{c=Fe(l,1,"card svelte-ybr5in",null,c,{done:p(t)}),G(w,(Y(r()),z(()=>r().title))),k=Fe(E,1,"status svelte-ybr5in",null,k,{done:p(t)}),G(L,p(i)),G(S,(Y(r()),z(()=>r().prompt))),re(A,"aria-pressed",p(t)),G(_,p(s))}),X("click",g,()=>f()(r().prompt)),X("click",A,()=>n()(r().id,p(t)?"active":"done")),M(e,l),se()}var Ra=$('<p class="empty-state">No learning cards yet. Create one to get started!</p>'),Ha=$('<section><h2>Your learning cards</h2> <div class="card-list"><!></div></section>');function Ga(e,a){ne(a,!1);const t=()=>te(P,"$cards",s),[s,i]=Ce();let r=B(a,"onStart",8),f=B(a,"onToggle",8);ie();var n=Ha(),l=C(b(n),2),c=b(l);{var u=w=>{var T=Ra();M(w,T)},v=w=>{var T=De(),o=Se(T);_a(o,1,t,m=>m.id,(m,E)=>{$a(m,{get card(){return p(E)},get onStart(){return r()},get onToggle(){return f()}})}),M(w,T)};Z(c,w=>{t(),z(()=>t().length===0)?w(u):w(v,!1)})}y(l),y(n),M(e,n),se(),i()}var Pa=$('<meta name="description" content="Finish what you start"/>'),qa=$("<p>Loading cards...</p>"),za=$('<div id="sr-announcements" class="sr-only" aria-live="polite" aria-atomic="true"></div> <div class="container"><header><h1>Learning Cards</h1> <p class="subtitle">Finish what you start</p> <div class="top-actions"><button class="primary" aria-controls="add-section">+ Add learning card</button></div></header> <main id="main-content"><!> <!></main></div>',1);function Qa(e,a){ne(a,!1);const t=()=>te(W,"$isFormOpen",i),s=()=>te(me,"$isLoading",i),[i,r]=Ce();$e(async()=>{me.set(!0);try{const g=(await window.api.getCards()).map(A=>({...A,createdAt:new Date(A.createdAt)})).sort((A,_)=>_.createdAt.getTime()-A.createdAt.getTime());xa(g)}catch(d){console.error("Failed to load cards:",d)}finally{me.set(!1)}});async function f(d){const g=await window.api.addCard(d);Na(g),u(`Card "${d.title}" added successfully`)}async function n(d){await window.api.runPrompt(d),u("Opening prompt in ChatGPT")}async function l(d,g){await window.api.toggleCard(d,g),ka(d,g),u(`Card marked as ${g}`)}function c(){W.update(d=>!d)}function u(d){const g=document.getElementById("sr-announcements");g&&(g.textContent=d)}ie();var v=za();wa("1uha8ag",d=>{var g=Pa();ma(()=>{ga.title="Learning Cards"}),M(d,g)});var w=C(Se(v),2),T=b(w),o=C(b(T),4),m=b(o);y(o),y(T);var E=C(T,2),k=b(E);Ia(k,{onSubmit:f});var L=C(k,2);{var h=d=>{var g=qa();M(d,g)},S=d=>{Ga(d,{onStart:n,onToggle:l})};Z(L,d=>{s()?d(h):d(S,!1)})}y(E),y(w),Q(()=>re(m,"aria-expanded",t())),X("click",m,c),M(e,v),se(),r()}export{Qa as component};
