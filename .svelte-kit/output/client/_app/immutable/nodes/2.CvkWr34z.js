import{f as I,a as E,c as ye}from"../chunks/fMaAp8ef.js";import{h as ae,d as yt,o as st,D as t,ar as wt,q as Pt,H as Et,t as tt,v as Be,w as Le,m as Te,Z as ct,am as St,a4 as rt,g as ve,k as Ue,s as Ct,ak as Ze,aG as dt,X as at,aC as kt,aH as xt,aI as Ft,aJ as It,j as Ve,aK as je,r as ut,p as vt,aL as Ge,ag as Ye,aj as Tt,i as At,aM as Lt,O as qt,ac as Dt,aN as Mt,aO as Nt,aP as ft,x as pt,aQ as mt,z as Ot,aR as Rt,aS as Bt,aT as Kt,aU as Ht,aV as Qt,aE as Wt,b as Gt,y as zt,at as b,aD as Q,as as ie,I as pe,u as Ee,L as s,N as u,M as c,aW as He,J as W,aF as $,K as me,f as fe,a5 as Ke,A as Jt,aX as Ut}from"../chunks/DzgE3F9E.js";import{d as he,s as G,e as Qe}from"../chunks/DnIN349N.js";import{i as J,b as $e}from"../chunks/Dw-W-a9x.js";function Vt(a,e,r){for(var n=[],i=e.length,o,f=e.length,l=0;l<i;l++){let T=e[l];vt(T,()=>{if(o){if(o.pending.delete(T),o.done.add(T),o.pending.size===0){var N=a.outrogroups;Xe(Ze(o.done)),N.delete(o),N.size===0&&(a.outrogroups=null)}}else f-=1},!1)}if(f===0){var v=n.length===0&&r!==null;if(v){var y=r,C=y.parentNode;Tt(C),C.append(y),a.items.clear()}Xe(e,!v)}else o={pending:new Set(e),done:new Set},(a.outrogroups??=new Set).add(o)}function Xe(a,e=!0){for(var r=0;r<a.length;r++)At(a[r],e)}var nt;function Se(a,e,r,n,i,o=null){var f=a,l=new Map;ae&&yt();var v=null,y=wt(()=>{var j=r();return dt(j)?j:j==null?[]:Ze(j)}),C,T=!0;function N(){h.fallback=v,Yt(h,C,f,e,n),v!==null&&(C.length===0?(v.f&je)===0?ut(v):(v.f^=je,Ae(v,null,f)):vt(v,()=>{v=null}))}var K=st(()=>{C=t(y);var j=C.length;let _=!1;if(ae){var F=Pt(f)===Et;F!==(j===0)&&(f=tt(),Be(f),Le(!1),_=!0)}for(var L=new Set,M=ve,H=Ct(),A=0;A<j;A+=1){ae&&Te.nodeType===ct&&Te.data===St&&(f=Te,_=!0,Le(!1));var x=C[A],p=n(x,A),d=T?null:l.get(p);d?(d.v&&rt(d.v,x),d.i&&rt(d.i,A),H&&M.skipped_effects.delete(d.e)):(d=Xt(l,T?f:nt??=Ve(),x,p,A,i,e,r),T||(d.e.f|=je),l.set(p,d)),L.add(p)}if(j===0&&o&&!v&&(T?v=Ue(()=>o(f)):(v=Ue(()=>o(nt??=Ve())),v.f|=je)),ae&&j>0&&Be(tt()),!T)if(H){for(const[P,g]of l)L.has(P)||M.skipped_effects.add(g.e);M.oncommit(N),M.ondiscard(()=>{})}else N();_&&Le(!0),t(y)}),h={effect:K,items:l,outrogroups:null,fallback:v};T=!1,ae&&(f=Te)}function Yt(a,e,r,n,i){var o=e.length,f=a.items,l=a.effect.first,v,y=null,C=[],T=[],N,K,h,j;for(j=0;j<o;j+=1){if(N=e[j],K=i(N,j),h=f.get(K).e,a.outrogroups!==null)for(const d of a.outrogroups)d.pending.delete(h),d.done.delete(h);if((h.f&je)!==0)if(h.f^=je,h===l)Ae(h,null,r);else{var _=y?y.next:l;h===a.effect.last&&(a.effect.last=h.prev),h.prev&&(h.prev.next=h.next),h.next&&(h.next.prev=h.prev),be(a,y,h),be(a,h,_),Ae(h,_,r),y=h,C=[],T=[],l=y.next;continue}if((h.f&Ge)!==0&&ut(h),h!==l){if(v!==void 0&&v.has(h)){if(C.length<T.length){var F=T[0],L;y=F.prev;var M=C[0],H=C[C.length-1];for(L=0;L<C.length;L+=1)Ae(C[L],F,r);for(L=0;L<T.length;L+=1)v.delete(T[L]);be(a,M.prev,H.next),be(a,y,M),be(a,H,F),l=F,y=H,j-=1,C=[],T=[]}else v.delete(h),Ae(h,l,r),be(a,h.prev,h.next),be(a,h,y===null?a.effect.first:y.next),be(a,y,h),y=h;continue}for(C=[],T=[];l!==null&&l!==h;)(v??=new Set).add(l),T.push(l),l=l.next;if(l===null)continue}(h.f&je)===0&&C.push(h),y=h,l=h.next}if(a.outrogroups!==null){for(const d of a.outrogroups)d.pending.size===0&&(Xe(Ze(d.done)),a.outrogroups?.delete(d));a.outrogroups.size===0&&(a.outrogroups=null)}if(l!==null||v!==void 0){var A=[];if(v!==void 0)for(h of v)(h.f&Ge)===0&&A.push(h);for(;l!==null;)(l.f&Ge)===0&&l!==a.fallback&&A.push(l),l=l.next;var x=A.length;if(x>0){var p=null;Vt(a,A,p)}}}function Xt(a,e,r,n,i,o,f,l){var v=(f&Ft)!==0?(f&It)===0?kt(r,!1,!1):at(r):null,y=(f&xt)!==0?at(i):null;return{v,i:y,e:Ue(()=>(o(e,v??r,y??i,l),()=>{a.delete(n)}))}}function Ae(a,e,r){if(a.nodes)for(var n=a.nodes.start,i=a.nodes.end,o=e&&(e.f&je)===0?e.nodes.start:r;n!==null;){var f=Ye(n);if(o.before(n),n===i)return;n=f}}function be(a,e,r){e===null?a.effect.first=r:e.next=r,r===null?a.effect.last=e:r.prev=e}function Zt(a,e){let r=null,n=ae;var i;if(ae){r=Te;for(var o=qt(document.head);o!==null&&(o.nodeType!==ct||o.data!==a);)o=Ye(o);if(o===null)Le(!1);else{var f=Ye(o);o.remove(),Be(f)}}ae||(i=document.head.appendChild(Ve()));try{st(()=>e(i),Lt)}finally{n&&(Le(!0),Be(r))}}const it=[...` 	
\r\f¬†\v\uFEFF`];function $t(a,e,r){var n=a==null?"":""+a;if(r){for(var i in r)if(r[i])n=n?n+" "+i:i;else if(n.length)for(var o=i.length,f=0;(f=n.indexOf(i,f))>=0;){var l=f+o;(f===0||it.includes(n[f-1]))&&(l===n.length||it.includes(n[l]))?n=(f===0?"":n.substring(0,f))+n.substring(l+1):f=l}}return n===""?null:n}function le(a,e,r,n,i,o){var f=a.__className;if(ae||f!==r||f===void 0){var l=$t(r,n,o);(!ae||l!==a.getAttribute("class"))&&(l==null?a.removeAttribute("class"):a.className=l),a.__className=r}else if(o&&i!==o)for(var v in o){var y=!!o[v];(i==null||y!==!!i[v])&&a.classList.toggle(v,y)}return o}function et(a,e,r=!1){if(a.multiple){if(e==null)return;if(!dt(e))return Mt();for(var n of a.options)n.selected=e.includes(qe(n));return}for(n of a.options){var i=qe(n);if(Nt(i,e)){n.selected=!0;return}}(!r||e!==void 0)&&(a.selectedIndex=-1)}function ht(a){var e=new MutationObserver(()=>{et(a,a.__value)});e.observe(a,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),Dt(()=>{e.disconnect()})}function _t(a,e,r=e){var n=new WeakSet,i=!0;ft(a,"change",o=>{var f=o?"[selected]":":checked",l;if(a.multiple)l=[].map.call(a.querySelectorAll(f),qe);else{var v=a.querySelector(f)??a.querySelector("option:not([disabled])");l=v&&qe(v)}r(l),ve!==null&&n.add(ve)}),pt(()=>{var o=e();if(a===document.activeElement){var f=mt??ve;if(n.has(f))return}if(et(a,o,i),i&&o===void 0){var l=a.querySelector(":checked");l!==null&&(o=qe(l),r(o))}a.__value=o,i=!1}),ht(a)}function qe(a){return"__value"in a?a.__value:a.value}const er=Symbol("is custom element"),tr=Symbol("is html");function we(a){if(ae){var e=!1,r=()=>{if(!e){if(e=!0,a.hasAttribute("value")){var n=a.value;Z(a,"value",null),a.value=n}if(a.hasAttribute("checked")){var i=a.checked;Z(a,"checked",null),a.checked=i}}};a.__on_r=r,Ot(r),Rt()}}function Z(a,e,r,n){var i=rr(a);ae&&(i[e]=a.getAttribute(e),e==="src"||e==="srcset"||e==="href"&&a.nodeName==="LINK")||i[e]!==(i[e]=r)&&(e==="loading"&&(a[Bt]=r),r==null?a.removeAttribute(e):typeof r!="string"&&ar(a).includes(e)?a[e]=r:a.setAttribute(e,r))}function rr(a){return a.__attributes??={[er]:a.nodeName.includes("-"),[tr]:a.namespaceURI===Kt}}var ot=new Map;function ar(a){var e=a.getAttribute("is")||a.nodeName,r=ot.get(e);if(r)return r;ot.set(e,r=[]);for(var n,i=a,o=Element.prototype;o!==i;){n=Qt(i);for(var f in n)n[f].set&&r.push(f);i=Ht(i)}return r}function oe(a,e,r=e){var n=new WeakSet;ft(a,"input",async i=>{var o=i?a.defaultValue:a.value;if(o=ze(a)?Je(o):o,r(o),ve!==null&&n.add(ve),await Wt(),o!==(o=e())){var f=a.selectionStart,l=a.selectionEnd,v=a.value.length;if(a.value=o??"",l!==null){var y=a.value.length;f===l&&l===v&&y>v?(a.selectionStart=y,a.selectionEnd=y):(a.selectionStart=f,a.selectionEnd=Math.min(l,y))}}}),(ae&&a.defaultValue!==a.value||Gt(e)==null&&a.value)&&(r(ze(a)?Je(a.value):a.value),ve!==null&&n.add(ve)),zt(()=>{var i=e();if(a===document.activeElement){var o=mt??ve;if(n.has(o))return}ze(a)&&i===Je(a.value)||a.type==="date"&&!i&&!a.value||i!==a.value&&(a.value=i??"")})}function ze(a){var e=a.type;return e==="number"||e==="range"}function Je(a){return a===""?null:+a}class nr{#e;get all(){return t(this.#e)}set all(e){b(this.#e,e,!0)}#t;get isLoading(){return t(this.#t)}set isLoading(e){b(this.#t,e,!0)}#r;get isFormOpen(){return t(this.#r)}set isFormOpen(e){b(this.#r,e,!0)}#a;get filterStatus(){return t(this.#a)}set filterStatus(e){b(this.#a,e,!0)}#n;get filterQuery(){return t(this.#n)}set filterQuery(e){b(this.#n,e,!0)}#i;get filterProject(){return t(this.#i)}set filterProject(e){b(this.#i,e,!0)}constructor(){this.#e=Q(ie([])),this.#t=Q(!1),this.#r=Q(!1),this.#a=Q("all"),this.#n=Q(""),this.#i=Q("all")}get filtered(){let e=this.all.slice();if(this.filterStatus!=="all"&&(e=e.filter(r=>this.filterStatus==="active"?r.status==="active":r.status==="done")),this.filterProject&&this.filterProject!=="all"&&(e=e.filter(r=>(r.project||"")===this.filterProject)),this.filterQuery&&this.filterQuery.trim()!==""){const r=this.filterQuery.toLowerCase();e=e.filter(n=>(n.title||"").toLowerCase().includes(r)||(n.prompt||"").toLowerCase().includes(r)||(n.topic||"").toLowerCase().includes(r)||(n.project||"").toLowerCase().includes(r))}return e}get activeCards(){return this.all.filter(e=>e.status==="active")}get completedCards(){return this.all.filter(e=>e.status==="done")}get cardCount(){return this.all.length}async loadCards(){if(!(typeof window>"u"||!("api"in window))){this.isLoading=!0;try{const r=(await window.api.getCards()).map(n=>({...n,createdAt:new Date(n.createdAt)})).sort((n,i)=>i.createdAt.getTime()-n.createdAt.getTime());this.all=r}catch(e){console.error("Failed to load cards:",e)}finally{this.isLoading=!1}}}async addCard(e){if(!(typeof window>"u"||!("api"in window)))try{const r=await window.api.addCard(e);return this.all=[r,...this.all],r}catch(r){throw console.error("Failed to add card:",r),r}}async updateCard(e){if(!(typeof window>"u"||!("api"in window)))try{const r=await window.api.updateCard(e),n=this.all.findIndex(i=>i.id===e.id);return n!==-1&&(this.all[n]=r),r}catch(r){throw console.error("Failed to update card:",r),r}}async deleteCard(e){if(!(typeof window>"u"||!("api"in window)))try{await window.api.deleteCard(e),this.all=this.all.filter(r=>r.id!==e)}catch(r){throw console.error("Failed to delete card:",r),r}}async updateCardStatus(e,r){if(!(typeof window>"u"||!("api"in window)))try{await window.api.toggleCard(e,r);const n=this.all.findIndex(i=>i.id===e);n!==-1&&(this.all[n]={...this.all[n],status:r})}catch(n){throw console.error("Failed to update card status:",n),n}}async runPrompt(e){if(!(typeof window>"u"||!("api"in window)))try{await window.api.runPrompt(e)}catch(r){throw console.error("Failed to run prompt:",r),r}}async runPromptWithSystem(e,r){if(typeof window>"u"||!("api"in window))return;let n=e;r&&r.trim()&&(n=`${r.trim()}

${e}`);try{await window.api.runPrompt(n)}catch(i){throw console.error("Failed to run prompt:",i),i}}toggleForm(){this.isFormOpen=!this.isFormOpen}openForm(){this.isFormOpen=!0}closeForm(){this.isFormOpen=!1}setFilterStatus(e){this.filterStatus=e}setFilterQuery(e){this.filterQuery=e}setFilterProject(e){this.filterProject=e}}const U=new nr;class ir{#e;get all(){return t(this.#e)}set all(e){b(this.#e,e,!0)}#t;get isLoading(){return t(this.#t)}set isLoading(e){b(this.#t,e,!0)}#r;get viewMode(){return t(this.#r)}set viewMode(e){b(this.#r,e,!0)}#a;get selectedProjectId(){return t(this.#a)}set selectedProjectId(e){b(this.#a,e,!0)}constructor(){this.#e=Q(ie([])),this.#t=Q(!1),this.#r=Q("list"),this.#a=Q(null)}get selectedProject(){return this.viewMode==="list"?"all":this.viewMode==="create"?"create":this.selectedProjectId||"all"}async loadProjects(){if(typeof window>"u"||!("api"in window)){console.warn("Window API not available, skipping project load");return}this.isLoading=!0;try{const e=await window.api.getProjects();Array.isArray(e)&&(this.all=e.slice().sort((r,n)=>r.name.localeCompare(n.name)))}catch(e){console.error("Failed to load projects from main process",e)}finally{this.isLoading=!1}}async createProject(e,r){const n=e.trim();if(!n)throw new Error("Project name is required");if(typeof window>"u"||!("api"in window))throw new Error("Window API not available - preload may not have loaded");const i=await window.api.createProject({name:n,systemPrompt:r});return this.all=[...this.all,i].sort((o,f)=>o.name.localeCompare(f.name)),i}selectAll(){this.viewMode="list",this.selectedProjectId=null,U.setFilterProject("all")}selectProject(e){if(e===null||e==="all"){this.selectAll();return}if(e==="create"){this.viewMode="create",this.selectedProjectId=null,U.setFilterProject("all");return}this.viewMode="detail",this.selectedProjectId=e,U.setFilterProject(e)}selectCreateProject(){this.viewMode="create",this.selectedProjectId=null,U.setFilterProject("all")}async updateProject(e){if(!e.id||!e.name.trim())throw new Error("Project ID and name are required");if(typeof window>"u"||!("api"in window))throw new Error("Window API not available");const r=await window.api.updateProject(e),n=this.all.findIndex(i=>i.id===e.id);return n!==-1&&(this.all[n]=r,this.all.sort((i,o)=>i.name.localeCompare(o.name))),r}async deleteProject(e){if(!e)throw new Error("Project ID is required");if(typeof window>"u"||!("api"in window))throw new Error("Window API not available");await window.api.deleteProject(e),this.all=this.all.filter(r=>r.id!==e),this.selectedProjectId===e&&this.selectAll()}findById(e){return this.all.find(r=>r.id===e)}}const D=new ir;var or=I('<div role="alert" class="form-status error"> </div>'),lr=I('<span class="error-message"> </span>'),sr=I('<span class="hint">Pick a clear name so you can find this project fast.</span>'),cr=I('<span class="error-message"> </span>'),dr=I('<span class="hint">This text will auto-prepend to every card prompt in the project‚Äîgreat for tone, context, or guardrails. Max 500 characters.</span>'),ur=I('<section id="edit-project-section"><form aria-labelledby="edit-project-heading"><h2 id="edit-project-heading">Edit Project</h2> <!> <div class="field"><label for="edit-project-name">Project name <span class="required">*</span></label> <input id="edit-project-name" type="text" autocomplete="off" required/> <!></div> <div class="field"><label for="edit-project-system-prompt">System prompt <span class="optional">(optional)</span></label> <textarea id="edit-project-system-prompt" placeholder="Add context or constraints that should prefix every card prompt for this project." rows="6"></textarea> <!></div> <div class="form-actions"><button type="submit" class="primary"> </button> <button type="button" class="ghost">Cancel</button></div></form></section>');function vr(a,e){pe(e,!0);let r=ie({name:e.project.name,systemPrompt:e.project.systemPrompt||""}),n=ie({name:"",systemPrompt:""}),i=Q(""),o=Q(!1);Ee(()=>{const m=r.name.trim();m.length===0?n.name="Project name is required":m.length>50?n.name="Project name must be less than 50 characters":n.name=""}),Ee(()=>{r.systemPrompt.trim().length>500?n.systemPrompt="System prompt must be less than 500 characters":n.systemPrompt=""});let f=$(()=>!n.name&&!n.systemPrompt&&r.name.trim().length>0),l=null;Ee(()=>{const m=document.getElementById("edit-project-name");m&&setTimeout(()=>m.focus(),0);const k=V=>{V.key==="Escape"&&e.onCancel()};return window.addEventListener("keydown",k),()=>{window.removeEventListener("keydown",k)}});async function v(m){if(m.preventDefault(),!(!t(f)||t(o))){b(o,!0),b(i,"");try{const k=r.systemPrompt.trim();await e.onSubmit({id:e.project.id,name:r.name.trim(),systemPrompt:k||void 0}),y(`Project "${r.name}" updated successfully`)}catch(k){b(i,k instanceof Error?k.message:"Failed to update project",!0),y(t(i))}finally{b(o,!1)}}}function y(m){const k=document.getElementById("sr-announcements");k&&(k.textContent=m)}var C=ur(),T=s(C),N=u(s(T),2);{var K=m=>{var k=or(),V=s(k,!0);c(k),W(()=>G(V,t(i))),E(m,k)};J(N,m=>{t(i)&&m(K)})}var h=u(N,2),j=u(s(h),2);we(j);let _;var F=u(j,2);{var L=m=>{var k=lr(),V=s(k,!0);c(k),W(()=>G(V,n.name)),E(m,k)},M=m=>{var k=sr();E(m,k)};J(F,m=>{n.name?m(L):m(M,!1)})}c(h);var H=u(h,2),A=u(s(H),2);He(A);let x;var p=u(A,2);{var d=m=>{var k=cr(),V=s(k,!0);c(k),W(()=>G(V,n.systemPrompt)),E(m,k)},P=m=>{var k=dr();E(m,k)};J(p,m=>{n.systemPrompt?m(d):m(P,!1)})}c(H);var g=u(H,2),S=s(g),R=s(S,!0);c(S);var q=u(S,2);q.__click=function(...m){e.onCancel?.apply(this,m)},c(g),c(T),c(C),$e(C,m=>l=m,()=>l),W(()=>{j.disabled=t(o),_=le(j,1,"",null,_,{error:n.name}),A.disabled=t(o),x=le(A,1,"",null,x,{error:n.systemPrompt}),S.disabled=!t(f)||t(o),G(R,t(o)?"Saving...":"Save changes"),q.disabled=t(o)}),Qe("submit",T,v),oe(j,()=>r.name,m=>r.name=m),oe(A,()=>r.systemPrompt,m=>r.systemPrompt=m),E(a,C),me()}he(["click"]);var fr=I('<li class="empty svelte-138d5ja">No projects yet ‚Äî create one.</li>'),pr=I('<li><div class="project-card-wrapper svelte-138d5ja"><button class="project-card svelte-138d5ja"><span class="project-name svelte-138d5ja"> </span></button> <div class="project-actions svelte-138d5ja"><button class="icon-btn svelte-138d5ja" title="Edit project">‚úèÔ∏è</button> <button class="icon-btn danger svelte-138d5ja" title="Delete project">üóëÔ∏è</button></div></div></li>'),mr=I('<div class="modal-overlay" role="presentation" tabindex="-1"><div class="modal-content" role="dialog" aria-modal="true" aria-labelledby="edit-project-heading"><!></div></div>'),hr=I('<section class="projects svelte-138d5ja"><header><h2>Projects</h2> <div class="actions svelte-138d5ja"><p class="hint">Create a project from the header above.</p></div></header> <ul class="project-list svelte-138d5ja"><!></ul> <!></section>');function _r(a,e){pe(e,!0);function r(j){D.selectProject(j),e.onopen?.({projectId:j})}async function n(j,_){j.stopPropagation();const F=D.all.find(L=>L.id===_);confirm(`Are you sure you want to delete the project "${F?.name}"?

This will unassign all cards from this project.`)&&await D.deleteProject(_)}let i=Q(null);function o(j,_){j.stopPropagation();const F=D.all.find(L=>L.id===_);F&&b(i,F,!0)}async function f(j){await D.updateProject(j),b(i,null)}function l(){b(i,null)}var v=hr(),y=u(s(v),2),C=s(y);{var T=j=>{var _=fr();E(j,_)},N=j=>{var _=ye(),F=fe(_);Se(F,17,()=>D.all,L=>L.id,(L,M)=>{var H=pr(),A=s(H),x=s(A);x.__click=()=>r(t(M).id);var p=s(x),d=s(p,!0);c(p),c(x);var P=u(x,2),g=s(P);g.__click=R=>o(R,t(M).id);var S=u(g,2);S.__click=R=>n(R,t(M).id),c(P),c(A),c(H),W(()=>{Z(x,"aria-label",`Open project ${t(M).name}`),G(d,t(M).name),Z(g,"aria-label",`Edit project ${t(M).name}`),Z(S,"aria-label",`Delete project ${t(M).name}`)}),E(L,H)}),E(j,_)};J(C,j=>{D.all.length===0?j(T):j(N,!1)})}c(y);var K=u(y,2);{var h=j=>{var _=mr();_.__click=l,_.__keydown=M=>M.key==="Escape"&&l();var F=s(_);F.__click=M=>M.stopPropagation(),F.__keydown=M=>M.key==="Escape"&&l();var L=s(F);vr(L,{get project(){return t(i)},onSubmit:f,onCancel:l}),c(F),c(_),E(j,_)};J(K,j=>{t(i)&&j(h)})}c(v),E(a,v),me()}he(["click","keydown"]);var gr=I('<p id="name-error" class="field-error svelte-t06kqd" role="alert"> </p>'),br=I('<p id="system-prompt-error" class="field-error svelte-t06kqd" role="alert"> </p>'),jr=I('<p class="submission-error svelte-t06kqd" role="alert"> </p>'),yr=I('<section class="project-create svelte-t06kqd"><h2 class="svelte-t06kqd">Create project</h2> <form class="project-form svelte-t06kqd"><label for="proj-name" class="svelte-t06kqd">Project name</label> <input id="proj-name" type="text" placeholder="e.g. JavaScript"/> <!> <p class="hint svelte-t06kqd" id="project-hint">The project name appears in the sidebar list.</p> <label for="proj-system-prompt" class="svelte-t06kqd">System prompt <span class="optional">(optional)</span></label> <textarea id="proj-system-prompt" placeholder="e.g. You are an expert JavaScript developer. Always provide code examples and explain best practices." rows="4"></textarea> <!> <p class="hint svelte-t06kqd" id="system-prompt-hint">This prompt will be prepended to all learning cards in this project when sent to ChatGPT.</p> <!> <div class="actions svelte-t06kqd"><button type="submit" class="primary svelte-t06kqd"> </button> <button type="button" class="ghost svelte-t06kqd">Cancel</button></div></form></section>');function wr(a,e){pe(e,!0);let r=Q(ie({name:"",systemPrompt:""})),n=Q(null),i=Q(!1),o=Q(ie({})),f=$(()=>t(o).name?"name-error project-hint":"project-hint");function l(g){const S={};return(!g.name||g.name.trim()==="")&&(S.name="Project name is required"),g.systemPrompt&&g.systemPrompt.length>500&&(S.systemPrompt="System prompt must be less than 500 characters"),S}async function v(g){if(g.preventDefault(),b(o,l(t(r)),!0),!(Object.keys(t(o)).length>0)){b(n,null),b(i,!0);try{const S=t(r).name.trim(),R=t(r).systemPrompt.trim()||void 0,q=await D.createProject(S,R);b(r,{name:"",systemPrompt:""},!0),b(o,{},!0),e.oncreated?.({project:q.id})}catch(S){console.error("Failed to create project",S),b(n,S instanceof Error?S.message:"Unable to create project right now. Try again in a moment.",!0)}finally{b(i,!1)}}}function y(){b(r,{name:"",systemPrompt:""},!0),b(o,{},!0),b(n,null),D.selectProject("all")}var C=yr(),T=u(s(C),2),N=u(s(T),2);we(N);let K;var h=u(N,2);{var j=g=>{var S=gr(),R=s(S,!0);c(S),W(()=>G(R,t(o).name)),E(g,S)};J(h,g=>{t(o).name&&g(j)})}var _=u(h,6);He(_);let F;var L=u(_,2);{var M=g=>{var S=br(),R=s(S,!0);c(S),W(()=>G(R,t(o).systemPrompt)),E(g,S)};J(L,g=>{t(o).systemPrompt&&g(M)})}var H=u(L,4);{var A=g=>{var S=jr(),R=s(S,!0);c(S),W(()=>G(R,t(n))),E(g,S)};J(H,g=>{t(n)&&g(A)})}var x=u(H,2),p=s(x),d=s(p,!0);c(p);var P=u(p,2);P.__click=y,c(x),c(T),c(C),W(()=>{Z(T,"aria-describedby",t(f)),Z(N,"aria-invalid",t(o).name?"true":"false"),N.disabled=t(i),K=le(N,1,"svelte-t06kqd",null,K,{error:t(o).name}),Z(_,"aria-invalid",t(o).systemPrompt?"true":"false"),_.disabled=t(i),F=le(_,1,"",null,F,{error:t(o).systemPrompt}),p.disabled=t(i),G(d,t(i)?"Creating...":"Create project"),P.disabled=t(i)}),Qe("submit",T,v),oe(N,()=>t(r).name,g=>t(r).name=g),oe(_,()=>t(r).systemPrompt,g=>t(r).systemPrompt=g),E(a,C),me()}he(["click"]);var Pr=I('<div role="status" class="form-status"> </div>'),Er=I('<span class="error-message"> </span>'),Sr=I('<span class="hint">Give your learning card a clear, memorable name.</span>'),Cr=I("<option> </option>"),kr=I('<span class="error-message"> </span>'),xr=I('<span class="hint">Give your project a short, unique name.</span>'),Fr=I('<div class="field"><label for="project">New project name <span class="required">*</span></label> <input id="project" type="text" autocomplete="off"/> <!></div>'),Ir=I('<span class="error-message"> </span>'),Tr=I('<span class="hint">What do you want to learn or understand?</span>'),Ar=I('<section id="add-section"><form aria-labelledby="add-heading"><h2>New Card Details</h2> <!> <div class="field"><label for="title">Title <span class="required">*</span></label> <input id="title" type="text" autocomplete="off" required/> <!></div> <div class="field"><label for="topic">Topic <span class="optional">(optional)</span></label> <input id="topic" type="text" autocomplete="off"/> <span class="hint">e.g., JavaScript, Design Patterns, Math</span></div> <div class="field"><label for="project-select">Project <span class="optional">(optional)</span></label> <select id="project-select" aria-describedby="project-hint"><option>Select a project</option><!><option>+ Create new project...</option></select> <span id="project-hint" class="hint">Assign this card to a project or create a new one.</span></div> <!> <div class="field"><label for="prompt">Learning prompt <span class="required">*</span></label> <textarea id="prompt" required placeholder="e.g. Explain the concept of closures in JavaScript"></textarea> <!></div> <div class="form-actions"><button type="submit" class="primary"> </button> <button type="button" class="ghost">Cancel</button></div></form></section>');function Lr(a,e){pe(e,!0);let r=Q(""),n=Q(""),i=Q(ie(D.selectedProject!=="all"&&D.selectedProject!=="create"?D.selectedProject:"")),o=Q(!1),f=Q(""),l=Q(""),v=Q(!1),y=$(()=>{const d=t(r).trim();return d.length===0?"":d.length<3?"Title must be at least 3 characters":d.length>100?"Title must be less than 100 characters":""}),C=$(()=>{const d=t(f).trim();return d.length===0?"":d.length<10?"Prompt must be at least 10 characters":d.length>1e3?"Prompt must be less than 1000 characters":""}),T=$(()=>{if(t(o)){const d=t(i).trim();if(d.length===0)return"Project name is required";if(d.length<2)return"Project name must be at least 2 characters";if(d.length>50)return"Project name must be less than 50 characters";if(D.all.some(P=>P.name.toLowerCase()===d.toLowerCase()))return"A project with this name already exists"}return""}),N=$(()=>t(r).trim().length>0&&t(f).trim().length>0&&!t(y)&&!t(C)&&!t(T)),K=null,h=null,j=null;Ee(()=>{if(!U.isFormOpen)return;const d=document.getElementById("title");d&&setTimeout(()=>d.focus(),0);const P=()=>{if(!K)return;const q=K.querySelectorAll('input:not([disabled]), textarea:not([disabled]), button:not([disabled]), select:not([disabled]), [tabindex]:not([tabindex="-1"])');q.length>0&&(h=q[0],j=q[q.length-1])};P();const g=R=>{R.key==="Tab"&&(P(),R.shiftKey?document.activeElement===h&&(R.preventDefault(),j?.focus()):document.activeElement===j&&(R.preventDefault(),h?.focus()))},S=R=>{R.key==="Escape"&&M()};return K?.addEventListener("keydown",g),window.addEventListener("keydown",S),()=>{K?.removeEventListener("keydown",g),window.removeEventListener("keydown",S)}});async function _(d){if(d.preventDefault(),!(!t(N)||t(v))){b(v,!0),b(l,"");try{await e.onSubmit({title:t(r).trim(),prompt:t(f).trim(),topic:t(n).trim()||void 0,project:t(o)?t(i).trim()||void 0:t(i)||void 0}),L(),U.closeForm(),H(`Card "${t(r)}" added successfully`)}catch(P){b(l,P instanceof Error?P.message:"Failed to add card",!0),H(t(l))}finally{b(v,!1)}}}function F(d){const P=d.target;P.value==="__create__"?(b(o,!0),b(i,"")):(b(o,!1),b(i,P.value,!0))}function L(){b(r,""),b(n,""),b(i,""),b(o,!1),b(f,""),b(l,"")}function M(){L(),U.closeForm()}function H(d){const P=document.getElementById("sr-announcements");P&&(P.textContent=d)}var A=ye(),x=fe(A);{var p=d=>{var P=Ar(),g=s(P),S=u(s(g),2);{var R=B=>{var z=Pr(),X=s(z,!0);c(z),W(()=>G(X,t(l))),E(B,z)};J(S,B=>{t(l)&&B(R)})}var q=u(S,2),m=u(s(q),2);we(m);let k;var V=u(m,2);{var re=B=>{var z=Er(),X=s(z,!0);c(z),W(()=>G(X,t(y))),E(B,z)},Ce=B=>{var z=Sr();E(B,z)};J(V,B=>{t(y)?B(re):B(Ce,!1)})}c(q);var _e=u(q,2),ee=u(s(_e),2);we(ee),Ke(2),c(_e);var Pe=u(_e,2),ce=u(s(Pe),2);ce.__change=F;var de=s(ce);de.value=de.__value="";var Fe=u(de);Se(Fe,17,()=>D.all,B=>B.id,(B,z)=>{var X=Cr(),xe=s(X,!0);c(X);var Re={};W(()=>{G(xe,t(z).name),Re!==(Re=t(z).id)&&(X.value=(X.__value=t(z).id)??"")}),E(B,X)});var De=u(Fe);De.value=De.__value="__create__",c(ce),Ke(2),c(Pe);var Me=u(Pe,2);{var We=B=>{var z=Fr(),X=u(s(z),2);we(X);let xe;var Re=u(X,2);{var gt=ge=>{var Ie=kr(),jt=s(Ie,!0);c(Ie),W(()=>G(jt,t(T))),E(ge,Ie)},bt=ge=>{var Ie=xr();E(ge,Ie)};J(Re,ge=>{t(T)?ge(gt):ge(bt,!1)})}c(z),W(()=>{X.disabled=t(v),xe=le(X,1,"",null,xe,{error:t(T)})}),oe(X,()=>t(i),ge=>b(i,ge)),E(B,z)};J(Me,B=>{t(o)&&B(We)})}var ke=u(Me,2),se=u(s(ke),2);He(se);let Ne;var Oe=u(se,2);{var w=B=>{var z=Ir(),X=s(z,!0);c(z),W(()=>G(X,t(C))),E(B,z)},O=B=>{var z=Tr();E(B,z)};J(Oe,B=>{t(C)?B(w):B(O,!1)})}c(ke);var Y=u(ke,2),ne=s(Y),te=s(ne,!0);c(ne);var ue=u(ne,2);ue.__click=M,c(Y),c(g),c(P),$e(P,B=>K=B,()=>K),W(()=>{m.disabled=t(v),k=le(m,1,"",null,k,{error:t(y)}),ee.disabled=t(v),ce.disabled=t(v),se.disabled=t(v),Ne=le(se,1,"",null,Ne,{error:t(C)}),ne.disabled=!t(N)||t(v),G(te,t(v)?"Saving...":"Save card"),ue.disabled=t(v)}),Qe("submit",g,_),oe(m,()=>t(r),B=>b(r,B)),oe(ee,()=>t(n),B=>b(n,B)),_t(ce,()=>t(i),B=>b(i,B)),oe(se,()=>t(f),B=>b(f,B)),E(d,P)};J(x,d=>{U.isFormOpen&&d(p)})}E(a,A),me()}he(["change","click"]);var qr=I('<div role="status" class="form-status"> </div>'),Dr=I('<span class="error-message"> </span>'),Mr=I(`<span class="hint">Choose a short title you'll recognize later.</span>`),Nr=I("<option> </option>"),Or=I('<span class="error-message"> </span>'),Rr=I('<span class="hint">Keep it concise and unique.</span>'),Br=I('<div class="field"><label for="edit-project">New project name <span class="required">*</span></label> <input id="edit-project" type="text" autocomplete="off"/> <!></div>'),Kr=I('<span class="error-message"> </span>'),Hr=I('<span class="hint">Describe what you want to learn so the AI can help.</span>'),Qr=I('<section id="edit-section"><form aria-labelledby="edit-heading"><h2 id="edit-heading">Edit learning item</h2> <!> <div class="field"><label for="edit-title">Title <span class="required">*</span></label> <input id="edit-title" type="text" autocomplete="off" required/> <!></div> <div class="field"><label for="edit-topic">Topic <span class="optional">(optional)</span></label> <input id="edit-topic" type="text" autocomplete="off"/> <span class="hint">e.g., JavaScript, Design Patterns, Math</span></div> <div class="field"><label for="edit-project-select">Project <span class="optional">(optional)</span></label> <select id="edit-project-select" aria-describedby="edit-project-hint"><option>Select a project</option><!><option>+ Create new project...</option></select> <span id="edit-project-hint" class="hint">Attach to an existing project or make a new one.</span></div> <!> <div class="field"><label for="edit-prompt">Learning prompt <span class="required">*</span></label> <textarea id="edit-prompt" required placeholder="e.g. Explain the concept of closures in JavaScript"></textarea> <!></div> <div class="form-actions"><button type="submit" class="primary"> </button> <button type="button" class="ghost">Cancel</button></div></form></section>');function Wr(a,e){pe(e,!0);let r=Q(ie(e.card.title)),n=Q(ie(e.card.topic||"")),i=Q(ie(e.card.project||"")),o=Q(!1),f=Q(ie(e.card.prompt)),l=Q(""),v=Q(!1),y=$(()=>{const w=t(r).trim();return w.length===0?"Title is required":w.length<3?"Title must be at least 3 characters":w.length>100?"Title must be less than 100 characters":""}),C=$(()=>{const w=t(f).trim();return w.length===0?"Prompt is required":w.length<10?"Prompt must be at least 10 characters":w.length>1e3?"Prompt must be less than 1000 characters":""}),T=$(()=>{if(t(o)){const w=t(i).trim();if(w.length===0)return"Project name is required";if(w.length<2)return"Project name must be at least 2 characters";if(w.length>50)return"Project name must be less than 50 characters";if(D.all.some(O=>O.name.toLowerCase()===w.toLowerCase()))return"A project with this name already exists"}return""}),N=$(()=>t(r).trim().length>0&&t(f).trim().length>0&&!t(y)&&!t(C)&&!t(T)),K=null,h=null,j=null;Ee(()=>{const w=document.getElementById("edit-title");w&&setTimeout(()=>w.focus(),0);const O=()=>{if(!K)return;const ue=K.querySelectorAll('input:not([disabled]), textarea:not([disabled]), button:not([disabled]), select:not([disabled]), [tabindex]:not([tabindex="-1"])');ue.length>0&&(h=ue[0],j=ue[ue.length-1])};O();const Y=te=>{te.key==="Tab"&&(O(),te.shiftKey?document.activeElement===h&&(te.preventDefault(),j?.focus()):document.activeElement===j&&(te.preventDefault(),h?.focus()))},ne=te=>{te.key==="Escape"&&e.onCancel()};return K?.addEventListener("keydown",Y),window.addEventListener("keydown",ne),()=>{K?.removeEventListener("keydown",Y),window.removeEventListener("keydown",ne)}});async function _(w){if(w.preventDefault(),!(!t(N)||t(v))){b(v,!0),b(l,"");try{await e.onSubmit({id:e.card.id,title:t(r).trim(),prompt:t(f).trim(),topic:t(n).trim()||void 0,project:t(o)?t(i).trim()||void 0:t(i)||void 0}),L(`Card "${t(r)}" updated successfully`)}catch(O){b(l,O instanceof Error?O.message:"Failed to update card",!0),L(t(l))}finally{b(v,!1)}}}function F(w){const O=w.target;O.value==="__create__"?(b(o,!0),b(i,"")):(b(o,!1),b(i,O.value,!0))}function L(w){const O=document.getElementById("sr-announcements");O&&(O.textContent=w)}var M=Qr(),H=s(M),A=u(s(H),2);{var x=w=>{var O=qr(),Y=s(O,!0);c(O),W(()=>G(Y,t(l))),E(w,O)};J(A,w=>{t(l)&&w(x)})}var p=u(A,2),d=u(s(p),2);we(d);let P;var g=u(d,2);{var S=w=>{var O=Dr(),Y=s(O,!0);c(O),W(()=>G(Y,t(y))),E(w,O)},R=w=>{var O=Mr();E(w,O)};J(g,w=>{t(y)?w(S):w(R,!1)})}c(p);var q=u(p,2),m=u(s(q),2);we(m),Ke(2),c(q);var k=u(q,2),V=u(s(k),2);V.__change=F;var re=s(V);re.value=re.__value="";var Ce=u(re);Se(Ce,17,()=>D.all,w=>w.id,(w,O)=>{var Y=Nr(),ne=s(Y,!0);c(Y);var te={};W(()=>{G(ne,t(O).name),te!==(te=t(O).id)&&(Y.value=(Y.__value=t(O).id)??"")}),E(w,Y)});var _e=u(Ce);_e.value=_e.__value="__create__",c(V),Ke(2),c(k);var ee=u(k,2);{var Pe=w=>{var O=Br(),Y=u(s(O),2);we(Y);let ne;var te=u(Y,2);{var ue=z=>{var X=Or(),xe=s(X,!0);c(X),W(()=>G(xe,t(T))),E(z,X)},B=z=>{var X=Rr();E(z,X)};J(te,z=>{t(T)?z(ue):z(B,!1)})}c(O),W(()=>{Y.disabled=t(v),ne=le(Y,1,"",null,ne,{error:t(T)})}),oe(Y,()=>t(i),z=>b(i,z)),E(w,O)};J(ee,w=>{t(o)&&w(Pe)})}var ce=u(ee,2),de=u(s(ce),2);He(de);let Fe;var De=u(de,2);{var Me=w=>{var O=Kr(),Y=s(O,!0);c(O),W(()=>G(Y,t(C))),E(w,O)},We=w=>{var O=Hr();E(w,O)};J(De,w=>{t(C)?w(Me):w(We,!1)})}c(ce);var ke=u(ce,2),se=s(ke),Ne=s(se,!0);c(se);var Oe=u(se,2);Oe.__click=function(...w){e.onCancel?.apply(this,w)},c(ke),c(H),c(M),$e(M,w=>K=w,()=>K),W(()=>{d.disabled=t(v),P=le(d,1,"",null,P,{error:t(y)}),m.disabled=t(v),V.disabled=t(v),de.disabled=t(v),Fe=le(de,1,"",null,Fe,{error:t(C)}),se.disabled=!t(N)||t(v),G(Ne,t(v)?"Saving...":"Save changes"),Oe.disabled=t(v)}),Qe("submit",H,_),oe(d,()=>t(r),w=>b(r,w)),oe(m,()=>t(n),w=>b(n,w)),_t(V,()=>t(i),w=>b(i,w)),oe(de,()=>t(f),w=>b(f,w)),E(a,M),me()}he(["change","click"]);var Gr=I('<p class="topic"> </p>'),zr=I('<p class="project">Project: <strong> </strong></p>'),Jr=I('<button type="button" class="ghost">Edit</button>'),Ur=I('<button type="button" class="ghost danger svelte-ybr5in">Delete</button>'),Vr=I('<article><header><h3> </h3> <!> <!></header> <section><div> </div> <pre class="prompt"> </pre></section> <footer class="card-actions"><button type="button" class="primary">Start in ChatGPT</button> <button type="button" class="ghost"> </button> <!> <!></footer></article>');function lt(a,e){pe(e,!0);const r=$(()=>e.card.status==="done"),n=$(()=>t(r)?"Mark active":"Mark done"),i=$(()=>t(r)?"‚úì Completed":"Active"),o=$(()=>e.card.project?D.all.find(q=>q.id===e.card.project)?.name||e.card.project:"");var f=Vr();let l;var v=s(f),y=s(v),C=s(y,!0);c(y);var T=u(y,2);{var N=q=>{var m=Gr(),k=s(m,!0);c(m),W(()=>G(k,e.card.topic)),E(q,m)};J(T,q=>{e.card.topic&&q(N)})}var K=u(T,2);{var h=q=>{var m=zr(),k=u(s(m)),V=s(k,!0);c(k),c(m),W(()=>G(V,t(o))),E(q,m)};J(K,q=>{e.card.project&&q(h)})}c(v);var j=u(v,2),_=s(j);let F;var L=s(_,!0);c(_);var M=u(_,2),H=s(M,!0);c(M),c(j);var A=u(j,2),x=s(A);x.__click=()=>e.onStart(e.card);var p=u(x,2);p.__click=()=>e.onToggle(e.card.id,t(r)?"active":"done");var d=s(p,!0);c(p);var P=u(p,2);{var g=q=>{var m=Jr();m.__click=()=>e.onEdit?.(e.card),W(()=>Z(m,"aria-label",`Edit ${e.card.title}`)),E(q,m)};J(P,q=>{e.onEdit&&q(g)})}var S=u(P,2);{var R=q=>{var m=Ur();m.__click=()=>e.onDelete?.(e.card.id),W(()=>Z(m,"aria-label",`Delete ${e.card.title}`)),E(q,m)};J(S,q=>{e.onDelete&&q(R)})}c(A),c(f),W(()=>{l=le(f,1,"card svelte-ybr5in",null,l,{done:t(r)}),G(C,e.card.title),F=le(_,1,"status svelte-ybr5in",null,F,{done:t(r)}),G(L,t(i)),G(H,e.card.prompt),Z(x,"aria-label",`Start chat with prompt for ${e.card.title}`),Z(p,"aria-pressed",t(r)),Z(p,"aria-label",t(r)?`Mark ${e.card.title} as active`:`Mark ${e.card.title} as done`),G(d,t(n))}),E(a,f),me()}he(["click"]);var Yr=I('<p class="empty-state" role="status" aria-live="polite">No learning cards match your filters.</p>'),Xr=I('<section class="project-group"><h3> </h3> <!></section>'),Zr=I('<section><h2>Your learning cards</h2> <div class="filters"><label class="filter">Show: <select><option> </option><option> </option><option> </option></select></label> <label class="filter search">Search: <input type="search" placeholder="Search title, prompt, topic" aria-label="Search cards"/></label></div> <div class="card-list"><!></div></section>');function $r(a,e){pe(e,!0);function r(x){const p=new Map;for(const P of x){const g=P.project||"";p.has(g)||p.set(g,[]),p.get(g).push(P)}const d=[];for(const[P,g]of p.entries())d.push({project:P,cards:g,headingId:`project-${(P||"unassigned").replace(/\s+/g,"-")}`});return d.sort((P,g)=>{const S=P.project?D.all.find(q=>q.id===P.project)?.name||P.project:"Unassigned",R=g.project?D.all.find(q=>q.id===g.project)?.name||g.project:"Unassigned";return S.localeCompare(R)}),d}const n=$(()=>U.filterProject==="all"?r(U.filtered):[]);function i(x){const p=x.target;U.setFilterStatus(p.value)}function o(x){const p=x.target;U.setFilterQuery(p.value)}var f=Zr(),l=u(s(f),2),v=s(l),y=u(s(v));y.__change=i;var C=s(y),T=s(C);c(C),C.value=C.__value="all";var N=u(C),K=s(N);c(N),N.value=N.__value="active";var h=u(N),j=s(h);c(h),h.value=h.__value="done",c(y),c(v);var _=u(v,2),F=u(s(_));F.__input=o,c(_),c(l);var L=u(l,2),M=s(L);{var H=x=>{var p=Yr();E(x,p)},A=x=>{var p=ye(),d=fe(p);{var P=S=>{var R=ye(),q=fe(R);Se(q,17,()=>t(n),m=>m.headingId,(m,k)=>{var V=Xr(),re=s(V),Ce=s(re,!0);c(re);var _e=u(re,2);Se(_e,17,()=>t(k).cards,ee=>ee.id,(ee,Pe)=>{lt(ee,{get card(){return t(Pe)},get onStart(){return e.onStart},get onToggle(){return e.onToggle},get onEdit(){return e.onEdit},get onDelete(){return e.onDelete}})}),c(V),W(ee=>{Z(V,"aria-labelledby",t(k).headingId),Z(re,"id",t(k).headingId),G(Ce,ee)},[()=>t(k).project?D.all.find(ee=>ee.id===t(k).project)?.name||t(k).project:"Unassigned"]),E(m,V)}),E(S,R)},g=S=>{var R=ye(),q=fe(R);Se(q,17,()=>U.filtered,m=>m.id,(m,k)=>{lt(m,{get card(){return t(k)},get onStart(){return e.onStart},get onToggle(){return e.onToggle},get onEdit(){return e.onEdit},get onDelete(){return e.onDelete}})}),E(S,R)};J(d,S=>{U.filterProject==="all"?S(P):S(g,!1)},!0)}E(x,p)};J(M,x=>{U.filtered.length===0?x(H):x(A,!1)})}c(L),c(f),W(()=>{G(T,`All (${U.all.length??""})`),G(K,`Active (${U.activeCards.length??""})`),G(j,`Completed (${U.completedCards.length??""})`)}),E(a,f),me()}he(["change","input"]);var ea=I('<div class="modal-overlay" role="presentation" tabindex="-1"><div class="modal-content" role="dialog" aria-modal="true" aria-labelledby="edit-heading"><!></div></div>'),ta=I('<section class="project-detail svelte-1ykxz3w"><header><h2> </h2> <div class="actions svelte-1ykxz3w"><button class="primary" aria-controls="add-section">+ New Learning Item</button></div></header> <!> <!> <!></section>');function ra(a,e){pe(e,!0);const r=$(()=>{if(!(!D.all||!e.projectId))return D.all.find(p=>p.id===e.projectId)});Ee(()=>{(!D.all||D.all.length===0)&&D.loadProjects()});function n(){U.toggleForm()}async function i(p){const P=p.project&&String(p.project).trim().length>0?p.project:e.projectId||void 0;await U.addCard({...p,project:P}),U.closeForm()}async function o(p){let d;p.project&&(d=D.all.find(g=>g.id===p.project)?.systemPrompt),await U.runPromptWithSystem(p.prompt,d)}async function f(p,d){await U.updateCardStatus(p,d)}let l=Q(null);function v(p){b(l,p,!0)}async function y(p){await U.updateCard(p),b(l,null)}function C(){b(l,null)}async function T(p){confirm("Are you sure you want to delete this learning card?")&&await U.deleteCard(p)}var N=ta(),K=s(N),h=s(K),j=s(h,!0);c(h);var _=u(h,2),F=s(_);F.__click=n,c(_),c(K);var L=u(K,2);{var M=p=>{Lr(p,{onSubmit:i})};J(L,p=>{U.isFormOpen&&p(M)})}var H=u(L,2);{var A=p=>{var d=ea();d.__click=C,d.__keydown=S=>S.key==="Escape"&&C();var P=s(d);P.__click=S=>S.stopPropagation(),P.__keydown=S=>S.key==="Escape"&&C();var g=s(P);Wr(g,{get card(){return t(l)},onSubmit:y,onCancel:C}),c(P),c(d),E(p,d)};J(H,p=>{t(l)&&p(A)})}var x=u(H,2);$r(x,{onStart:o,onToggle:f,onEdit:v,onDelete:T}),c(N),W(()=>{G(j,t(r)?t(r).name:"Project"),Z(F,"aria-expanded",U.isFormOpen)}),E(a,N),me()}he(["click","keydown"]);var aa=I('<meta name="description" content="Finish what you start"/>'),na=I('<button class="primary" aria-label="Create project">+ New Project</button>'),ia=I('<button class="ghost" aria-label="Back to projects">‚Üê Projects</button>'),oa=I("<option> </option>"),la=I('<div class="project-controls svelte-1uha8ag"><label class="project-filter svelte-1uha8ag">Project: <select aria-label="Switch project" class="svelte-1uha8ag"><option>All projects</option><!></select></label> <button class="ghost" aria-label="Back to projects">‚Üê Projects</button></div>'),sa=I("<p>Loading...</p>"),ca=I('<div id="sr-announcements" class="sr-only" aria-live="polite" aria-atomic="true"></div> <div class="container"><header><h1>Learning Space</h1> <p class="subtitle">Finish what you start</p> <div class="top-actions"><!></div></header> <main id="main-content"><!></main></div>',1);function pa(a,e){pe(e,!0),Jt(()=>{(async()=>await Promise.all([U.loadCards(),D.loadProjects()]))()});function r(_){const F=_.project;D.selectProject(F)}let n=Q(ie(D.selectedProject));Ee(()=>{b(n,D.selectedProject,!0)});function i(_){const L=_.target.value;L==="all"?D.selectAll():L&&D.selectProject(L)}var o=ca();Zt("1uha8ag",_=>{var F=aa();pt(()=>{Ut.title="Learning Space"}),E(_,F)});var f=u(fe(o),2),l=s(f),v=u(s(l),4),y=s(v);{var C=_=>{var F=na();F.__click=()=>D.selectCreateProject(),E(_,F)},T=_=>{var F=ye(),L=fe(F);{var M=A=>{var x=ia();x.__click=()=>D.selectProject("all"),E(A,x)},H=A=>{var x=la(),p=s(x),d=u(s(p));d.__change=i;var P=s(d);P.value=P.__value="all";var g=u(P);Se(g,17,()=>D.all,q=>q.id,(q,m)=>{var k=oa(),V=s(k,!0);c(k);var re={};W(()=>{G(V,t(m).name),re!==(re=t(m).id)&&(k.value=(k.__value=t(m).id)??"")}),E(q,k)}),c(d);var S;ht(d),c(p);var R=u(p,2);R.__click=()=>D.selectProject("all"),c(x),W(()=>{S!==(S=D.selectedProject)&&(d.value=(d.__value=D.selectedProject)??"",et(d,D.selectedProject))}),E(A,x)};J(L,A=>{D.selectedProject==="create"?A(M):A(H,!1)},!0)}E(_,F)};J(y,_=>{D.selectedProject==="all"?_(C):_(T,!1)})}c(v),c(l);var N=u(l,2),K=s(N);{var h=_=>{var F=sa();E(_,F)},j=_=>{var F=ye(),L=fe(F);{var M=A=>{_r(A,{onopen:x=>D.selectProject(x.projectId)})},H=A=>{var x=ye(),p=fe(x);{var d=g=>{wr(g,{oncreated:r})},P=g=>{ra(g,{get projectId(){return D.selectedProject}})};J(p,g=>{D.selectedProject==="create"?g(d):g(P,!1)},!0)}E(A,x)};J(L,A=>{D.selectedProject==="all"?A(M):A(H,!1)},!0)}E(_,F)};J(K,_=>{U.isLoading||D.isLoading?_(h):_(j,!1)})}c(N),c(f),E(a,o),me()}he(["click","change"]);export{pa as component};
