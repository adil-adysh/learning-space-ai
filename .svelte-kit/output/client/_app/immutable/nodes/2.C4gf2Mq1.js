import{f as M,a as k,c as se}from"../chunks/up6PPZA2.js";import{i as J,n as $e,k as Qe,A as i,ar as et,o as tt,H as rt,q as Ne,t as ye,v as ge,j as he,X as Ge,ak as at,a2 as qe,d as ae,h as Ee,s as it,ai as Te,aG as We,S as Oe,aC as nt,aH as ot,aI as lt,aJ as st,g as Ie,aK as ne,r as ze,p as Be,aL as Se,ae as Ae,ah as ct,f as dt,aM as ut,L as ft,aN as Ve,am as Je,aO as Ke,aP as vt,aQ as pt,aa as ht,aR as _t,aS as mt,W as gt,aT as jt,aU as bt,aV as wt,aE as yt,b as Pt,U as Ct,at as b,aD as q,as as Pe,D as ce,K as h,I as u,J as f,G as de,w as le,F as z,aF as oe,u as Ye,a3 as pe,aW as St,x as kt,aX as Ft}from"../chunks/DoPReKMj.js";import{d as ue,s as R,e as Xe}from"../chunks/C9RPriGG.js";import{i as B}from"../chunks/Buq5sgrN.js";function Et(t,e,r){for(var a=[],o=e.length,n,d=e.length,s=0;s<o;s++){let _=e[s];Be(_,()=>{if(n){if(n.pending.delete(_),n.done.add(_),n.pending.size===0){var C=t.outrogroups;xe(Te(n.done)),C.delete(n),C.size===0&&(t.outrogroups=null)}}else d-=1},!1)}if(d===0){var c=a.length===0&&r!==null;if(c){var v=r,w=v.parentNode;ct(w),w.append(v),t.items.clear()}xe(e,!c)}else n={pending:new Set(e),done:new Set},(t.outrogroups??=new Set).add(n)}function xe(t,e=!0){for(var r=0;r<t.length;r++)dt(t[r],e)}var De;function ve(t,e,r,a,o,n=null){var d=t,s=new Map;J&&$e();var c=null,v=et(()=>{var p=r();return We(p)?p:p==null?[]:Te(p)}),w,_=!0;function C(){l.fallback=c,It(l,w,d,e,a),c!==null&&(w.length===0?(c.f&ne)===0?ze(c):(c.f^=ne,_e(c,null,d)):Be(c,()=>{c=null}))}var L=Qe(()=>{w=i(v);var p=w.length;let m=!1;if(J){var O=tt(d)===rt;O!==(p===0)&&(d=Ne(),ye(d),ge(!1),m=!0)}for(var g=new Set,j=ae,I=it(),A=0;A<p;A+=1){J&&he.nodeType===Ge&&he.data===at&&(d=he,m=!0,ge(!1));var S=w[A],P=a(S,A),y=_?null:s.get(P);y?(y.v&&qe(y.v,S),y.i&&qe(y.i,A),I&&j.skipped_effects.delete(y.e)):(y=At(s,_?d:De??=Ie(),S,P,A,o,e,r),_||(y.e.f|=ne),s.set(P,y)),g.add(P)}if(p===0&&n&&!c&&(_?c=Ee(()=>n(d)):(c=Ee(()=>n(De??=Ie())),c.f|=ne)),J&&p>0&&ye(Ne()),!_)if(I){for(const[U,G]of s)g.has(U)||j.skipped_effects.add(G.e);j.oncommit(C),j.ondiscard(()=>{})}else C();m&&ge(!0),i(v)}),l={effect:L,items:s,outrogroups:null,fallback:c};_=!1,J&&(d=he)}function It(t,e,r,a,o){var n=e.length,d=t.items,s=t.effect.first,c,v=null,w=[],_=[],C,L,l,p;for(p=0;p<n;p+=1){if(C=e[p],L=o(C,p),l=d.get(L).e,t.outrogroups!==null)for(const y of t.outrogroups)y.pending.delete(l),y.done.delete(l);if((l.f&ne)!==0)if(l.f^=ne,l===s)_e(l,null,r);else{var m=v?v.next:s;l===t.effect.last&&(t.effect.last=l.prev),l.prev&&(l.prev.next=l.next),l.next&&(l.next.prev=l.prev),ie(t,v,l),ie(t,l,m),_e(l,m,r),v=l,w=[],_=[],s=v.next;continue}if((l.f&Se)!==0&&ze(l),l!==s){if(c!==void 0&&c.has(l)){if(w.length<_.length){var O=_[0],g;v=O.prev;var j=w[0],I=w[w.length-1];for(g=0;g<w.length;g+=1)_e(w[g],O,r);for(g=0;g<_.length;g+=1)c.delete(_[g]);ie(t,j.prev,I.next),ie(t,v,j),ie(t,I,O),s=O,v=I,p-=1,w=[],_=[]}else c.delete(l),_e(l,s,r),ie(t,l.prev,l.next),ie(t,l,v===null?t.effect.first:v.next),ie(t,v,l),v=l;continue}for(w=[],_=[];s!==null&&s!==l;)(c??=new Set).add(s),_.push(s),s=s.next;if(s===null)continue}(l.f&ne)===0&&w.push(l),v=l,s=l.next}if(t.outrogroups!==null){for(const y of t.outrogroups)y.pending.size===0&&(xe(Te(y.done)),t.outrogroups?.delete(y));t.outrogroups.size===0&&(t.outrogroups=null)}if(s!==null||c!==void 0){var A=[];if(c!==void 0)for(l of c)(l.f&Se)===0&&A.push(l);for(;s!==null;)(s.f&Se)===0&&s!==t.fallback&&A.push(s),s=s.next;var S=A.length;if(S>0){var P=null;Et(t,A,P)}}}function At(t,e,r,a,o,n,d,s){var c=(d&lt)!==0?(d&st)===0?nt(r,!1,!1):Oe(r):null,v=(d&ot)!==0?Oe(o):null;return{v:c,i:v,e:Ee(()=>(n(e,c??r,v??o,s),()=>{t.delete(a)}))}}function _e(t,e,r){if(t.nodes)for(var a=t.nodes.start,o=t.nodes.end,n=e&&(e.f&ne)===0?e.nodes.start:r;a!==null;){var d=Ae(a);if(n.before(a),a===o)return;a=d}}function ie(t,e,r){e===null?t.effect.first=r:e.next=r,r===null?t.effect.last=e:r.prev=e}function xt(t,e){let r=null,a=J;var o;if(J){r=he;for(var n=ft(document.head);n!==null&&(n.nodeType!==Ge||n.data!==t);)n=Ae(n);if(n===null)ge(!1);else{var d=Ae(n);n.remove(),ye(d)}}J||(o=document.head.appendChild(Ie()));try{Qe(()=>e(o),ut)}finally{a&&(ge(!0),ye(r))}}const Re=[...` 	
\r\f \v\uFEFF`];function Lt(t,e,r){var a=t==null?"":""+t;if(r){for(var o in r)if(r[o])a=a?a+" "+o:o;else if(a.length)for(var n=o.length,d=0;(d=a.indexOf(o,d))>=0;){var s=d+n;(d===0||Re.includes(a[d-1]))&&(s===a.length||Re.includes(a[s]))?a=(d===0?"":a.substring(0,d))+a.substring(s+1):d=s}}return a===""?null:a}function Le(t,e,r,a,o,n){var d=t.__className;if(J||d!==r||d===void 0){var s=Lt(r,a,n);(!J||s!==t.getAttribute("class"))&&(s==null?t.removeAttribute("class"):t.className=s),t.__className=r}else if(n&&o!==n)for(var c in n){var v=!!n[c];(o==null||v!==!!o[c])&&t.classList.toggle(c,v)}return n}function Ze(t,e,r=!1){if(t.multiple){if(e==null)return;if(!We(e))return vt();for(var a of t.options)a.selected=e.includes(je(a));return}for(a of t.options){var o=je(a);if(pt(o,e)){a.selected=!0;return}}(!r||e!==void 0)&&(t.selectedIndex=-1)}function Tt(t){var e=new MutationObserver(()=>{Ze(t,t.__value)});e.observe(t,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),ht(()=>{e.disconnect()})}function Mt(t,e,r=e){var a=new WeakSet,o=!0;Ve(t,"change",n=>{var d=n?"[selected]":":checked",s;if(t.multiple)s=[].map.call(t.querySelectorAll(d),je);else{var c=t.querySelector(d)??t.querySelector("option:not([disabled])");s=c&&je(c)}r(s),ae!==null&&a.add(ae)}),Je(()=>{var n=e();if(t===document.activeElement){var d=Ke??ae;if(a.has(d))return}if(Ze(t,n,o),o&&n===void 0){var s=t.querySelector(":checked");s!==null&&(n=je(s),r(n))}t.__value=n,o=!1}),Tt(t)}function je(t){return"__value"in t?t.__value:t.value}const Nt=Symbol("is custom element"),qt=Symbol("is html");function we(t){if(J){var e=!1,r=()=>{if(!e){if(e=!0,t.hasAttribute("value")){var a=t.value;$(t,"value",null),t.value=a}if(t.hasAttribute("checked")){var o=t.checked;$(t,"checked",null),t.checked=o}}};t.__on_r=r,gt(r),jt()}}function $(t,e,r,a){var o=Ot(t);J&&(o[e]=t.getAttribute(e),e==="src"||e==="srcset"||e==="href"&&t.nodeName==="LINK")||o[e]!==(o[e]=r)&&(e==="loading"&&(t[bt]=r),r==null?t.removeAttribute(e):typeof r!="string"&&Dt(t).includes(e)?t[e]=r:t.setAttribute(e,r))}function Ot(t){return t.__attributes??={[Nt]:t.nodeName.includes("-"),[qt]:t.namespaceURI===_t}}var Ue=new Map;function Dt(t){var e=t.getAttribute("is")||t.nodeName,r=Ue.get(e);if(r)return r;Ue.set(e,r=[]);for(var a,o=t,n=Element.prototype;n!==o;){a=wt(o);for(var d in a)a[d].set&&r.push(d);o=mt(o)}return r}function me(t,e,r=e){var a=new WeakSet;Ve(t,"input",async o=>{var n=o?t.defaultValue:t.value;if(n=ke(t)?Fe(n):n,r(n),ae!==null&&a.add(ae),await yt(),n!==(n=e())){var d=t.selectionStart,s=t.selectionEnd,c=t.value.length;if(t.value=n??"",s!==null){var v=t.value.length;d===s&&s===c&&v>c?(t.selectionStart=v,t.selectionEnd=v):(t.selectionStart=d,t.selectionEnd=Math.min(s,v))}}}),(J&&t.defaultValue!==t.value||Pt(e)==null&&t.value)&&(r(ke(t)?Fe(t.value):t.value),ae!==null&&a.add(ae)),Ct(()=>{var o=e();if(t===document.activeElement){var n=Ke??ae;if(a.has(n))return}ke(t)&&o===Fe(t.value)||t.type==="date"&&!o&&!t.value||o!==t.value&&(t.value=o??"")})}function ke(t){var e=t.type;return e==="number"||e==="range"}function Fe(t){return t===""?null:+t}class Rt{#e;get all(){return i(this.#e)}set all(e){b(this.#e,e,!0)}#t;get isLoading(){return i(this.#t)}set isLoading(e){b(this.#t,e,!0)}#r;get viewMode(){return i(this.#r)}set viewMode(e){b(this.#r,e,!0)}#a;get selectedProjectId(){return i(this.#a)}set selectedProjectId(e){b(this.#a,e,!0)}constructor(){this.#e=q(Pe([])),this.#t=q(!1),this.#r=q("list"),this.#a=q(null)}get selectedProject(){return this.viewMode==="list"?"all":this.viewMode==="create"?"create":this.selectedProjectId||"all"}async loadProjects(){if(typeof window>"u"||!("api"in window)){console.warn("Window API not available, skipping project load");return}this.isLoading=!0;try{const e=await window.api.getProjects();Array.isArray(e)&&(this.all=e.slice().sort((r,a)=>r.name.localeCompare(a.name)))}catch(e){console.error("Failed to load projects from main process",e)}finally{this.isLoading=!1}}async createProject(e){const r=e.trim();if(!r)throw new Error("Project name is required");if(typeof window>"u"||!("api"in window))throw new Error("Window API not available - preload may not have loaded");const a=await window.api.createProject(r);return this.all=[...this.all,a].sort((o,n)=>o.name.localeCompare(n.name)),a}selectAll(){this.viewMode="list",this.selectedProjectId=null}selectProject(e){if(e===null||e==="all"){this.selectAll();return}if(e==="create"){this.viewMode="create",this.selectedProjectId=null;return}this.viewMode="detail",this.selectedProjectId=e}selectCreateProject(){this.viewMode="create",this.selectedProjectId=null}findById(e){return this.all.find(r=>r.id===e)}}const E=new Rt;class Ut{#e;get all(){return i(this.#e)}set all(e){b(this.#e,e,!0)}#t;get isLoading(){return i(this.#t)}set isLoading(e){b(this.#t,e,!0)}#r;get isFormOpen(){return i(this.#r)}set isFormOpen(e){b(this.#r,e,!0)}#a;get filterStatus(){return i(this.#a)}set filterStatus(e){b(this.#a,e,!0)}#i;get filterQuery(){return i(this.#i)}set filterQuery(e){b(this.#i,e,!0)}#n;get filterProject(){return i(this.#n)}set filterProject(e){b(this.#n,e,!0)}constructor(){this.#e=q(Pe([])),this.#t=q(!1),this.#r=q(!1),this.#a=q("all"),this.#i=q(""),this.#n=q("all")}get filtered(){let e=this.all.slice();if(this.filterStatus!=="all"&&(e=e.filter(r=>this.filterStatus==="active"?r.status==="active":r.status==="done")),this.filterProject&&this.filterProject!=="all"&&(e=e.filter(r=>(r.project||"")===this.filterProject)),this.filterQuery&&this.filterQuery.trim()!==""){const r=this.filterQuery.toLowerCase();e=e.filter(a=>(a.title||"").toLowerCase().includes(r)||(a.prompt||"").toLowerCase().includes(r)||(a.topic||"").toLowerCase().includes(r)||(a.project||"").toLowerCase().includes(r))}return e}get activeCards(){return this.all.filter(e=>e.status==="active")}get completedCards(){return this.all.filter(e=>e.status==="done")}get cardCount(){return this.all.length}async loadCards(){if(!(typeof window>"u"||!("api"in window))){this.isLoading=!0;try{const r=(await window.api.getCards()).map(a=>({...a,createdAt:new Date(a.createdAt)})).sort((a,o)=>o.createdAt.getTime()-a.createdAt.getTime());this.all=r}catch(e){console.error("Failed to load cards:",e)}finally{this.isLoading=!1}}}async addCard(e){if(!(typeof window>"u"||!("api"in window)))try{const r=await window.api.addCard(e);return this.all=[r,...this.all],r}catch(r){throw console.error("Failed to add card:",r),r}}async updateCardStatus(e,r){if(!(typeof window>"u"||!("api"in window)))try{await window.api.toggleCard(e,r);const a=this.all.findIndex(o=>o.id===e);a!==-1&&(this.all[a]={...this.all[a],status:r})}catch(a){throw console.error("Failed to update card status:",a),a}}async runPrompt(e){if(!(typeof window>"u"||!("api"in window)))try{await window.api.runPrompt(e)}catch(r){throw console.error("Failed to run prompt:",r),r}}toggleForm(){this.isFormOpen=!this.isFormOpen}openForm(){this.isFormOpen=!0}closeForm(){this.isFormOpen=!1}setFilterStatus(e){this.filterStatus=e}setFilterQuery(e){this.filterQuery=e}setFilterProject(e){this.filterProject=e}}const x=new Ut;var Ht=M('<li class="empty svelte-138d5ja">No projects yet — create one.</li>'),Qt=M('<li><button class="project-card svelte-138d5ja"><span class="project-name svelte-138d5ja"> </span></button></li>'),Gt=M('<section class="projects svelte-138d5ja"><header><h2>Projects</h2> <div class="actions svelte-138d5ja"><p class="hint">Create a project from the header above.</p></div></header> <ul class="project-list svelte-138d5ja"><!></ul></section>');function Wt(t,e){ce(e,!0);function r(c){E.selectProject(c),e.onopen?.({projectId:c})}var a=Gt(),o=h(u(a),2),n=u(o);{var d=c=>{var v=Ht();k(c,v)},s=c=>{var v=se(),w=le(v);ve(w,17,()=>E.all,_=>_.id,(_,C)=>{var L=Qt(),l=u(L);l.__click=()=>r(i(C).id);var p=u(l),m=u(p,!0);f(p),f(l),f(L),z(()=>{$(l,"aria-label",`Open project ${i(C).name}`),R(m,i(C).name)}),k(_,L)}),k(c,v)};B(n,c=>{E.all.length===0?c(d):c(s,!1)})}f(o),f(a),k(t,a),de()}ue(["click"]);var zt=M('<p id="name-error" class="field-error svelte-t06kqd" role="alert"> </p>'),Bt=M('<p class="submission-error svelte-t06kqd" role="alert"> </p>'),Vt=M('<section class="project-create svelte-t06kqd"><h2 class="svelte-t06kqd">Create project</h2> <form class="project-form svelte-t06kqd"><label for="proj-name" class="svelte-t06kqd">Project name</label> <input id="proj-name" type="text" placeholder="e.g. JavaScript"/> <!> <p class="hint svelte-t06kqd" id="project-hint">The project name appears in the sidebar list.</p> <!> <div class="actions svelte-t06kqd"><button type="submit" class="primary svelte-t06kqd"> </button> <button type="button" class="ghost svelte-t06kqd">Cancel</button></div></form></section>');function Jt(t,e){ce(e,!0);let r=q(Pe({name:""})),a=q(null),o=q(!1),n=q(Pe({})),d=oe(()=>i(n).name?"name-error project-hint":"project-hint");function s(S){const P={};return(!S.name||S.name.trim()==="")&&(P.name="Project name is required"),P}async function c(S){if(S.preventDefault(),b(n,s(i(r)),!0),!(Object.keys(i(n)).length>0)){b(a,null),b(o,!0);try{const P=i(r).name.trim(),y=await E.createProject(P);b(r,{name:""},!0),b(n,{},!0),e.oncreated?.({project:y.id})}catch(P){console.error("Failed to create project",P),b(a,P instanceof Error?P.message:"Unable to create project right now. Try again in a moment.",!0)}finally{b(o,!1)}}}function v(){b(r,{name:""},!0),b(n,{},!0),b(a,null),E.selectProject("all")}var w=Vt(),_=h(u(w),2),C=h(u(_),2);we(C);let L;var l=h(C,2);{var p=S=>{var P=zt(),y=u(P,!0);f(P),z(()=>R(y,i(n).name)),k(S,P)};B(l,S=>{i(n).name&&S(p)})}var m=h(l,4);{var O=S=>{var P=Bt(),y=u(P,!0);f(P),z(()=>R(y,i(a))),k(S,P)};B(m,S=>{i(a)&&S(O)})}var g=h(m,2),j=u(g),I=u(j,!0);f(j);var A=h(j,2);A.__click=v,f(g),f(_),f(w),z(()=>{$(_,"aria-describedby",i(d)),$(C,"aria-invalid",i(n).name?"true":"false"),C.disabled=i(o),L=Le(C,1,"svelte-t06kqd",null,L,{error:i(n).name}),j.disabled=i(o),R(I,i(o)?"Creating...":"Create project"),A.disabled=i(o)}),Xe("submit",_,c),me(C,()=>i(r).name,S=>i(r).name=S),k(t,w),de()}ue(["click"]);var Kt=M('<div role="status" class="form-status"> </div>'),Yt=M("<option> </option>"),Xt=M('<div class="field"><label for="project">New project name</label> <input id="project" type="text" autocomplete="off"/> <span class="hint">Give your project a short, unique name.</span></div>'),Zt=M('<section id="add-section"><form aria-labelledby="add-heading"><h2>New Card Details</h2> <!> <div class="field"><label for="title">Title <span class="required">*</span></label> <input id="title" type="text" autocomplete="off" required/> <span class="hint">Give your learning card a clear, memorable name.</span></div> <div class="field"><label for="topic">Topic <span class="optional">(optional)</span></label> <input id="topic" type="text" autocomplete="off"/> <span class="hint">e.g., JavaScript, Design Patterns, Math</span></div> <div class="field"><label for="project-select">Project <span class="optional">(optional)</span></label> <select id="project-select" aria-describedby="project-hint"><option>All projects</option><option>Unassigned</option><!><option>+ Create new project...</option></select> <span id="project-hint" class="hint">Assign this card to a project or create a new one.</span></div> <!> <div class="field"><label for="prompt">Learning prompt <span class="required">*</span></label> <textarea id="prompt" required placeholder="e.g. Explain the concept of closures in JavaScript"></textarea> <span class="hint">What do you want to learn or understand?</span></div> <div class="form-actions"><button type="submit" class="primary"> </button> <button type="button" class="ghost">Cancel</button></div></form></section>');function $t(t,e){ce(e,!0);let r=q(""),a=q(""),o=q(""),n=q(!1),d=q(""),s=q(""),c=q(!1),v=oe(()=>i(r).trim().length>0&&i(d).trim().length>0);Ye(()=>{if(!x.isFormOpen)return;const g=j=>{j.key==="Escape"&&L()};return window.addEventListener("keydown",g),()=>{window.removeEventListener("keydown",g)}});async function w(g){if(g.preventDefault(),!(!i(v)||i(c))){b(c,!0),b(s,"");try{await e.onSubmit({title:i(r).trim(),prompt:i(d).trim(),topic:i(a).trim()||void 0,project:i(n)?i(o).trim()||void 0:i(o)||void 0}),C(),x.closeForm(),l(`Card "${i(r)}" added successfully`)}catch(j){b(s,j instanceof Error?j.message:"Failed to add card",!0),l(i(s))}finally{b(c,!1)}}}function _(g){const j=g.target;j.value==="__create__"?(b(n,!0),b(o,"")):(b(n,!1),b(o,j.value,!0))}function C(){b(r,""),b(a,""),b(o,""),b(n,!1),b(d,""),b(s,"")}function L(){C(),x.closeForm()}function l(g){const j=document.getElementById("sr-announcements");j&&(j.textContent=g)}var p=se(),m=le(p);{var O=g=>{var j=Zt(),I=u(j),A=h(u(I),2);{var S=N=>{var D=Kt(),V=u(D,!0);f(D),z(()=>R(V,i(s))),k(N,D)};B(A,N=>{i(s)&&N(S)})}var P=h(A,2),y=h(u(P),2);we(y),pe(2),f(P);var U=h(P,2),G=h(u(U),2);we(G),pe(2),f(U);var ee=h(U,2),F=h(u(ee),2);F.__change=_;var T=u(F);T.value=T.__value="all";var W=h(T);W.value=W.__value="";var Q=h(W);ve(Q,17,()=>E.all,N=>N.id,(N,D)=>{var V=Yt(),Ce=u(V,!0);f(V);var Me={};z(()=>{R(Ce,i(D).name),Me!==(Me=i(D).id)&&(V.value=(V.__value=i(D).id)??"")}),k(N,V)});var H=h(Q);H.value=H.__value="__create__",f(F),pe(2),f(ee);var K=h(ee,2);{var te=N=>{var D=Xt(),V=h(u(D),2);we(V),pe(2),f(D),z(()=>V.disabled=i(c)),me(V,()=>i(o),Ce=>b(o,Ce)),k(N,D)};B(K,N=>{i(n)&&N(te)})}var Y=h(K,2),X=h(u(Y),2);St(X),pe(2),f(Y);var Z=h(Y,2),re=u(Z),fe=u(re,!0);f(re);var be=h(re,2);be.__click=L,f(Z),f(I),f(j),z(()=>{y.disabled=i(c),G.disabled=i(c),F.disabled=i(c),X.disabled=i(c),re.disabled=!i(v)||i(c),R(fe,i(c)?"Saving...":"Save card"),be.disabled=i(c)}),Xe("submit",I,w),me(y,()=>i(r),N=>b(r,N)),me(G,()=>i(a),N=>b(a,N)),Mt(F,()=>i(o),N=>b(o,N)),me(X,()=>i(d),N=>b(d,N)),k(g,j)};B(m,g=>{x.isFormOpen&&g(O)})}k(t,p),de()}ue(["change","click"]);var er=M('<p class="topic"> </p>'),tr=M('<p class="project">Project: <strong> </strong></p>'),rr=M('<article><header><h3> </h3> <!> <!></header> <section><div> </div> <pre class="prompt"> </pre></section> <footer class="card-actions"><button type="button" class="primary">Start in ChatGPT</button> <button type="button" class="ghost"> </button></footer></article>');function He(t,e){ce(e,!0);const r=oe(()=>e.card.status==="done"),a=oe(()=>i(r)?"Mark active":"Mark done"),o=oe(()=>i(r)?"✓ Completed":"Active"),n=oe(()=>e.card.project?E.all.find(U=>U.id===e.card.project)?.name||e.card.project:"");var d=rr();let s;var c=u(d),v=u(c),w=u(v,!0);f(v);var _=h(v,2);{var C=U=>{var G=er(),ee=u(G,!0);f(G),z(()=>R(ee,e.card.topic)),k(U,G)};B(_,U=>{e.card.topic&&U(C)})}var L=h(_,2);{var l=U=>{var G=tr(),ee=h(u(G)),F=u(ee,!0);f(ee),f(G),z(()=>R(F,i(n))),k(U,G)};B(L,U=>{e.card.project&&U(l)})}f(c);var p=h(c,2),m=u(p);let O;var g=u(m,!0);f(m);var j=h(m,2),I=u(j,!0);f(j),f(p);var A=h(p,2),S=u(A);S.__click=()=>e.onStart(e.card.prompt);var P=h(S,2);P.__click=()=>e.onToggle(e.card.id,i(r)?"active":"done");var y=u(P,!0);f(P),f(A),f(d),z(()=>{s=Le(d,1,"card svelte-ybr5in",null,s,{done:i(r)}),R(w,e.card.title),O=Le(m,1,"status svelte-ybr5in",null,O,{done:i(r)}),R(g,i(o)),R(I,e.card.prompt),$(S,"aria-label",`Start chat with prompt for ${e.card.title}`),$(P,"aria-pressed",i(r)),$(P,"aria-label",i(r)?`Mark ${e.card.title} as active`:`Mark ${e.card.title} as done`),R(y,i(a))}),k(t,d),de()}ue(["click"]);var ar=M("<option> </option>"),ir=M('<p class="empty-state" role="status" aria-live="polite">No learning cards match your filters.</p>'),nr=M('<section class="project-group"><h3> </h3> <!></section>'),or=M('<section><h2>Your learning cards</h2> <div class="filters"><label class="filter">Project: <select aria-label="Filter by project"><option>All projects</option><option>Unassigned</option><!></select></label> <label class="filter">Show: <select><option> </option><option> </option><option> </option></select></label> <label class="filter search">Search: <input type="search" placeholder="Search title, prompt, topic, project" aria-label="Search cards"/></label></div> <div class="card-list"><!></div></section>');function lr(t,e){ce(e,!0);function r(F){const T=new Map;for(const Q of F){const H=Q.project||"";T.has(H)||T.set(H,[]),T.get(H).push(Q)}const W=[];for(const[Q,H]of T.entries())W.push({project:Q,cards:H,headingId:`project-${(Q||"unassigned").replace(/\s+/g,"-")}`});return W.sort((Q,H)=>{const K=Q.project?E.all.find(Y=>Y.id===Q.project)?.name||Q.project:"Unassigned",te=H.project?E.all.find(Y=>Y.id===H.project)?.name||H.project:"Unassigned";return K.localeCompare(te)}),W}const a=oe(()=>x.filterProject==="all"?r(x.filtered):[]);function o(F){const T=F.target;x.setFilterProject(T.value)}function n(F){const T=F.target;x.setFilterStatus(T.value)}function d(F){const T=F.target;x.setFilterQuery(T.value)}var s=or(),c=h(u(s),2),v=u(c),w=h(u(v));w.__change=o;var _=u(w);_.value=_.__value="all";var C=h(_);C.value=C.__value="";var L=h(C);ve(L,17,()=>E.all,F=>F.id,(F,T)=>{var W=ar(),Q=u(W,!0);f(W);var H={};z(()=>{R(Q,i(T).name),H!==(H=i(T).id)&&(W.value=(W.__value=i(T).id)??"")}),k(F,W)}),f(w),f(v);var l=h(v,2),p=h(u(l));p.__change=n;var m=u(p),O=u(m);f(m),m.value=m.__value="all";var g=h(m),j=u(g);f(g),g.value=g.__value="active";var I=h(g),A=u(I);f(I),I.value=I.__value="done",f(p),f(l);var S=h(l,2),P=h(u(S));P.__input=d,f(S),f(c);var y=h(c,2),U=u(y);{var G=F=>{var T=ir();k(F,T)},ee=F=>{var T=se(),W=le(T);{var Q=K=>{var te=se(),Y=le(te);ve(Y,17,()=>i(a),X=>X.headingId,(X,Z)=>{var re=nr(),fe=u(re),be=u(fe,!0);f(fe);var N=h(fe,2);ve(N,17,()=>i(Z).cards,D=>D.id,(D,V)=>{He(D,{get card(){return i(V)},get onStart(){return e.onStart},get onToggle(){return e.onToggle}})}),f(re),z(D=>{$(re,"aria-labelledby",i(Z).headingId),$(fe,"id",i(Z).headingId),R(be,D)},[()=>i(Z).project?E.all.find(D=>D.id===i(Z).project)?.name||i(Z).project:"Unassigned"]),k(X,re)}),k(K,te)},H=K=>{var te=se(),Y=le(te);ve(Y,17,()=>x.filtered,X=>X.id,(X,Z)=>{He(X,{get card(){return i(Z)},get onStart(){return e.onStart},get onToggle(){return e.onToggle}})}),k(K,te)};B(W,K=>{x.filterProject==="all"?K(Q):K(H,!1)},!0)}k(F,T)};B(U,F=>{x.filtered.length===0?F(G):F(ee,!1)})}f(y),f(s),z(()=>{R(O,`All (${x.all.length??""})`),R(j,`Active (${x.activeCards.length??""})`),R(A,`Completed (${x.completedCards.length??""})`)}),k(t,s),de()}ue(["change","input"]);var sr=M('<section class="project-detail svelte-1ykxz3w"><header><h2> </h2> <div class="actions svelte-1ykxz3w"><button class="primary" aria-controls="add-section">+ New Learning Item</button></div></header> <!> <!></section>');function cr(t,e){ce(e,!0);const r=oe(()=>{if(!(!E.all||!e.projectId))return E.all.find(m=>m.id===e.projectId)});Ye(()=>{(!E.all||E.all.length===0)&&E.loadProjects()});function a(){x.toggleForm()}async function o(m){const g=m.project&&String(m.project).trim().length>0?m.project:e.projectId||void 0;await x.addCard({...m,project:g}),x.closeForm()}async function n(m){await x.runPrompt(m)}async function d(m,O){await x.updateCardStatus(m,O)}var s=sr(),c=u(s),v=u(c),w=u(v,!0);f(v);var _=h(v,2),C=u(_);C.__click=a,f(_),f(c);var L=h(c,2);{var l=m=>{$t(m,{onSubmit:o})};B(L,m=>{x.isFormOpen&&m(l)})}var p=h(L,2);lr(p,{onStart:n,onToggle:d}),f(s),z(()=>{R(w,i(r)?i(r).name:"Project"),$(C,"aria-expanded",x.isFormOpen)}),k(t,s),de()}ue(["click"]);var dr=M('<meta name="description" content="Finish what you start"/>'),ur=M('<button class="primary" aria-label="Create project">+ New Project</button>'),fr=M('<button class="ghost" aria-label="Back to projects">← Projects</button>'),vr=M("<p>Loading...</p>"),pr=M('<div id="sr-announcements" class="sr-only" aria-live="polite" aria-atomic="true"></div> <div class="container"><header><h1>Learning Cards</h1> <p class="subtitle">Finish what you start</p> <div class="top-actions"><!></div></header> <main id="main-content"><!></main></div>',1);function jr(t,e){ce(e,!0),kt(()=>{(async()=>await Promise.all([x.loadCards(),E.loadProjects()]))()});function r(l){const p=l.project;E.selectProject(p)}var a=pr();xt("1uha8ag",l=>{var p=dr();Je(()=>{Ft.title="Learning Cards"}),k(l,p)});var o=h(le(a),2),n=u(o),d=h(u(n),4),s=u(d);{var c=l=>{var p=ur();p.__click=()=>E.selectCreateProject(),k(l,p)},v=l=>{var p=fr();p.__click=()=>E.selectProject("all"),k(l,p)};B(s,l=>{E.selectedProject==="all"?l(c):l(v,!1)})}f(d),f(n);var w=h(n,2),_=u(w);{var C=l=>{var p=vr();k(l,p)},L=l=>{var p=se(),m=le(p);{var O=j=>{Wt(j,{onopen:I=>E.selectProject(I.projectId)})},g=j=>{var I=se(),A=le(I);{var S=y=>{Jt(y,{oncreated:r})},P=y=>{cr(y,{get projectId(){return E.selectedProject}})};B(A,y=>{E.selectedProject==="create"?y(S):y(P,!1)},!0)}k(j,I)};B(m,j=>{E.selectedProject==="all"?j(O):j(g,!1)},!0)}k(l,p)};B(_,l=>{x.isLoading||E.isLoading?l(C):l(L,!1)})}f(w),f(o),k(t,a),de()}ue(["click"]);export{jr as component};
