import{f as L,a as x,c as ie}from"../chunks/DQ01h2FL.js";import{i as z,n as $e,k as Ue,A as i,ar as et,o as tt,H as rt,q as Ne,t as be,v as me,j as pe,X as Be,ak as at,a2 as qe,d as $,h as Se,s as it,ai as Ae,aG as Ge,S as Oe,aC as nt,aH as lt,aI as ot,aJ as st,g as ke,aK as re,r as We,p as ze,aL as ye,ae as Ee,ah as ct,f as dt,aM as ut,L as vt,aa as ft,aN as pt,aO as ht,aP as Ve,am as Je,aQ as Ke,aR as _t,aS as mt,W as gt,aT as jt,aU as bt,aV as wt,aE as yt,b as Pt,U as Ct,at as w,aD as N,as as de,D as ne,K as m,I as v,J as f,G as le,w as ee,F as B,aF as ae,u as xe,a3 as fe,aW as St,x as kt,aX as Et}from"../chunks/YQmcHDhG.js";import{d as oe,s as R,e as Ye}from"../chunks/CVmzytAt.js";import{i as U}from"../chunks/CKJ7kUYQ.js";function Ft(t,e,r){for(var a=[],l=e.length,n,c=e.length,o=0;o<l;o++){let b=e[o];ze(b,()=>{if(n){if(n.pending.delete(b),n.done.add(b),n.pending.size===0){var C=t.outrogroups;Fe(Ae(n.done)),C.delete(n),C.size===0&&(t.outrogroups=null)}}else c-=1},!1)}if(c===0){var s=a.length===0&&r!==null;if(s){var p=r,y=p.parentNode;ct(y),y.append(p),t.items.clear()}Fe(e,!s)}else n={pending:new Set(e),done:new Set},(t.outrogroups??=new Set).add(n)}function Fe(t,e=!0){for(var r=0;r<t.length;r++)dt(t[r],e)}var De;function ce(t,e,r,a,l,n=null){var c=t,o=new Map;z&&$e();var s=null,p=et(()=>{var E=r();return Ge(E)?E:E==null?[]:Ae(E)}),y,b=!0;function C(){d.fallback=s,It(d,y,c,e,a),s!==null&&(y.length===0?(s.f&re)===0?We(s):(s.f^=re,he(s,null,c)):ze(s,()=>{s=null}))}var T=Ue(()=>{y=i(p);var E=y.length;let u=!1;if(z){var F=tt(c)===rt;F!==(E===0)&&(c=Ne(),be(c),me(!1),u=!0)}for(var j=new Set,S=$,q=it(),k=0;k<E;k+=1){z&&pe.nodeType===Be&&pe.data===at&&(c=pe,u=!0,me(!1));var _=y[k],h=a(_,k),g=b?null:o.get(h);g?(g.v&&qe(g.v,_),g.i&&qe(g.i,k),q&&S.skipped_effects.delete(g.e)):(g=At(o,b?c:De??=ke(),_,h,k,l,e,r),b||(g.e.f|=re),o.set(h,g)),j.add(h)}if(E===0&&n&&!s&&(b?s=Se(()=>n(c)):(s=Se(()=>n(De??=ke())),s.f|=re)),z&&E>0&&be(Ne()),!b)if(q){for(const[A,I]of o)j.has(A)||S.skipped_effects.add(I.e);S.oncommit(C),S.ondiscard(()=>{})}else C();u&&me(!0),i(p)}),d={effect:T,items:o,outrogroups:null,fallback:s};b=!1,z&&(c=pe)}function It(t,e,r,a,l){var n=e.length,c=t.items,o=t.effect.first,s,p=null,y=[],b=[],C,T,d,E;for(E=0;E<n;E+=1){if(C=e[E],T=l(C,E),d=c.get(T).e,t.outrogroups!==null)for(const g of t.outrogroups)g.pending.delete(d),g.done.delete(d);if((d.f&re)!==0)if(d.f^=re,d===o)he(d,null,r);else{var u=p?p.next:o;d===t.effect.last&&(t.effect.last=d.prev),d.prev&&(d.prev.next=d.next),d.next&&(d.next.prev=d.prev),te(t,p,d),te(t,d,u),he(d,u,r),p=d,y=[],b=[],o=p.next;continue}if((d.f&ye)!==0&&We(d),d!==o){if(s!==void 0&&s.has(d)){if(y.length<b.length){var F=b[0],j;p=F.prev;var S=y[0],q=y[y.length-1];for(j=0;j<y.length;j+=1)he(y[j],F,r);for(j=0;j<b.length;j+=1)s.delete(b[j]);te(t,S.prev,q.next),te(t,p,S),te(t,q,F),o=F,p=q,E-=1,y=[],b=[]}else s.delete(d),he(d,o,r),te(t,d.prev,d.next),te(t,d,p===null?t.effect.first:p.next),te(t,p,d),p=d;continue}for(y=[],b=[];o!==null&&o!==d;)(s??=new Set).add(o),b.push(o),o=o.next;if(o===null)continue}(d.f&re)===0&&y.push(d),p=d,o=d.next}if(t.outrogroups!==null){for(const g of t.outrogroups)g.pending.size===0&&(Fe(Ae(g.done)),t.outrogroups?.delete(g));t.outrogroups.size===0&&(t.outrogroups=null)}if(o!==null||s!==void 0){var k=[];if(s!==void 0)for(d of s)(d.f&ye)===0&&k.push(d);for(;o!==null;)(o.f&ye)===0&&o!==t.fallback&&k.push(o),o=o.next;var _=k.length;if(_>0){var h=null;Ft(t,k,h)}}}function At(t,e,r,a,l,n,c,o){var s=(c&ot)!==0?(c&st)===0?nt(r,!1,!1):Oe(r):null,p=(c&lt)!==0?Oe(l):null;return{v:s,i:p,e:Se(()=>(n(e,s??r,p??l,o),()=>{t.delete(a)}))}}function he(t,e,r){if(t.nodes)for(var a=t.nodes.start,l=t.nodes.end,n=e&&(e.f&re)===0?e.nodes.start:r;a!==null;){var c=Ee(a);if(n.before(a),a===l)return;a=c}}function te(t,e,r){e===null?t.effect.first=r:e.next=r,r===null?t.effect.last=e:r.prev=e}function xt(t,e){let r=null,a=z;var l;if(z){r=pe;for(var n=vt(document.head);n!==null&&(n.nodeType!==Be||n.data!==t);)n=Ee(n);if(n===null)me(!1);else{var c=Ee(n);n.remove(),be(c)}}z||(l=document.head.appendChild(ke()));try{Ue(()=>e(l),ut)}finally{a&&(me(!0),be(r))}}const Re=[...` 	
\r\f \v\uFEFF`];function Lt(t,e,r){var a=t==null?"":""+t;if(r){for(var l in r)if(r[l])a=a?a+" "+l:l;else if(a.length)for(var n=l.length,c=0;(c=a.indexOf(l,c))>=0;){var o=c+n;(c===0||Re.includes(a[c-1]))&&(o===a.length||Re.includes(a[o]))?a=(c===0?"":a.substring(0,c))+a.substring(o+1):c=o}}return a===""?null:a}function Ie(t,e,r,a,l,n){var c=t.__className;if(z||c!==r||c===void 0){var o=Lt(r,a,n);(!z||o!==t.getAttribute("class"))&&(o==null?t.removeAttribute("class"):t.className=o),t.__className=r}else if(n&&l!==n)for(var s in n){var p=!!n[s];(l==null||p!==!!l[s])&&t.classList.toggle(s,p)}return n}function Le(t,e,r=!1){if(t.multiple){if(e==null)return;if(!Ge(e))return pt();for(var a of t.options)a.selected=e.includes(ge(a));return}for(a of t.options){var l=ge(a);if(ht(l,e)){a.selected=!0;return}}(!r||e!==void 0)&&(t.selectedIndex=-1)}function Xe(t){var e=new MutationObserver(()=>{Le(t,t.__value)});e.observe(t,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),ft(()=>{e.disconnect()})}function Tt(t,e,r=e){var a=new WeakSet,l=!0;Ve(t,"change",n=>{var c=n?"[selected]":":checked",o;if(t.multiple)o=[].map.call(t.querySelectorAll(c),ge);else{var s=t.querySelector(c)??t.querySelector("option:not([disabled])");o=s&&ge(s)}r(o),$!==null&&a.add($)}),Je(()=>{var n=e();if(t===document.activeElement){var c=Ke??$;if(a.has(c))return}if(Le(t,n,l),l&&n===void 0){var o=t.querySelector(":checked");o!==null&&(n=ge(o),r(n))}t.__value=n,l=!1}),Xe(t)}function ge(t){return"__value"in t?t.__value:t.value}const Mt=Symbol("is custom element"),Nt=Symbol("is html");function je(t){if(z){var e=!1,r=()=>{if(!e){if(e=!0,t.hasAttribute("value")){var a=t.value;K(t,"value",null),t.value=a}if(t.hasAttribute("checked")){var l=t.checked;K(t,"checked",null),t.checked=l}}};t.__on_r=r,gt(r),jt()}}function K(t,e,r,a){var l=qt(t);z&&(l[e]=t.getAttribute(e),e==="src"||e==="srcset"||e==="href"&&t.nodeName==="LINK")||l[e]!==(l[e]=r)&&(e==="loading"&&(t[bt]=r),r==null?t.removeAttribute(e):typeof r!="string"&&Ot(t).includes(e)?t[e]=r:t.setAttribute(e,r))}function qt(t){return t.__attributes??={[Mt]:t.nodeName.includes("-"),[Nt]:t.namespaceURI===_t}}var He=new Map;function Ot(t){var e=t.getAttribute("is")||t.nodeName,r=He.get(e);if(r)return r;He.set(e,r=[]);for(var a,l=t,n=Element.prototype;n!==l;){a=wt(l);for(var c in a)a[c].set&&r.push(c);l=mt(l)}return r}function _e(t,e,r=e){var a=new WeakSet;Ve(t,"input",async l=>{var n=l?t.defaultValue:t.value;if(n=Pe(t)?Ce(n):n,r(n),$!==null&&a.add($),await yt(),n!==(n=e())){var c=t.selectionStart,o=t.selectionEnd,s=t.value.length;if(t.value=n??"",o!==null){var p=t.value.length;c===o&&o===s&&p>s?(t.selectionStart=p,t.selectionEnd=p):(t.selectionStart=c,t.selectionEnd=Math.min(o,p))}}}),(z&&t.defaultValue!==t.value||Pt(e)==null&&t.value)&&(r(Pe(t)?Ce(t.value):t.value),$!==null&&a.add($)),Ct(()=>{var l=e();if(t===document.activeElement){var n=Ke??$;if(a.has(n))return}Pe(t)&&l===Ce(t.value)||t.type==="date"&&!l&&!t.value||l!==t.value&&(t.value=l??"")})}function Pe(t){var e=t.type;return e==="number"||e==="range"}function Ce(t){return t===""?null:+t}class Dt{#e;get all(){return i(this.#e)}set all(e){w(this.#e,e,!0)}#t;get isLoading(){return i(this.#t)}set isLoading(e){w(this.#t,e,!0)}#r;get viewMode(){return i(this.#r)}set viewMode(e){w(this.#r,e,!0)}#a;get selectedProjectId(){return i(this.#a)}set selectedProjectId(e){w(this.#a,e,!0)}constructor(){this.#e=N(de([])),this.#t=N(!1),this.#r=N("list"),this.#a=N(null)}get selectedProject(){return this.viewMode==="list"?"all":this.viewMode==="create"?"create":this.selectedProjectId||"all"}async loadProjects(){if(typeof window>"u"||!("api"in window)){console.warn("Window API not available, skipping project load");return}this.isLoading=!0;try{const e=await window.api.getProjects();Array.isArray(e)&&(this.all=e.slice().sort((r,a)=>r.name.localeCompare(a.name)))}catch(e){console.error("Failed to load projects from main process",e)}finally{this.isLoading=!1}}async createProject(e){const r=e.trim();if(!r)throw new Error("Project name is required");if(typeof window>"u"||!("api"in window))throw new Error("Window API not available - preload may not have loaded");const a=await window.api.createProject(r);return this.all=[...this.all,a].sort((l,n)=>l.name.localeCompare(n.name)),a}selectAll(){this.viewMode="list",this.selectedProjectId=null}selectProject(e){if(e===null||e==="all"){this.selectAll();return}if(e==="create"){this.viewMode="create",this.selectedProjectId=null;return}this.viewMode="detail",this.selectedProjectId=e}selectCreateProject(){this.viewMode="create",this.selectedProjectId=null}findById(e){return this.all.find(r=>r.id===e)}}const P=new Dt;class Rt{#e;get all(){return i(this.#e)}set all(e){w(this.#e,e,!0)}#t;get isLoading(){return i(this.#t)}set isLoading(e){w(this.#t,e,!0)}#r;get isFormOpen(){return i(this.#r)}set isFormOpen(e){w(this.#r,e,!0)}#a;get filterStatus(){return i(this.#a)}set filterStatus(e){w(this.#a,e,!0)}#i;get filterQuery(){return i(this.#i)}set filterQuery(e){w(this.#i,e,!0)}#n;get filterProject(){return i(this.#n)}set filterProject(e){w(this.#n,e,!0)}constructor(){this.#e=N(de([])),this.#t=N(!1),this.#r=N(!1),this.#a=N("all"),this.#i=N(""),this.#n=N("all")}get filtered(){let e=this.all.slice();if(this.filterStatus!=="all"&&(e=e.filter(r=>this.filterStatus==="active"?r.status==="active":r.status==="done")),this.filterProject&&this.filterProject!=="all"&&(e=e.filter(r=>(r.project||"")===this.filterProject)),this.filterQuery&&this.filterQuery.trim()!==""){const r=this.filterQuery.toLowerCase();e=e.filter(a=>(a.title||"").toLowerCase().includes(r)||(a.prompt||"").toLowerCase().includes(r)||(a.topic||"").toLowerCase().includes(r)||(a.project||"").toLowerCase().includes(r))}return e}get activeCards(){return this.all.filter(e=>e.status==="active")}get completedCards(){return this.all.filter(e=>e.status==="done")}get cardCount(){return this.all.length}async loadCards(){if(!(typeof window>"u"||!("api"in window))){this.isLoading=!0;try{const r=(await window.api.getCards()).map(a=>({...a,createdAt:new Date(a.createdAt)})).sort((a,l)=>l.createdAt.getTime()-a.createdAt.getTime());this.all=r}catch(e){console.error("Failed to load cards:",e)}finally{this.isLoading=!1}}}async addCard(e){if(!(typeof window>"u"||!("api"in window)))try{const r=await window.api.addCard(e);return this.all=[r,...this.all],r}catch(r){throw console.error("Failed to add card:",r),r}}async updateCardStatus(e,r){if(!(typeof window>"u"||!("api"in window)))try{await window.api.toggleCard(e,r);const a=this.all.findIndex(l=>l.id===e);a!==-1&&(this.all[a]={...this.all[a],status:r})}catch(a){throw console.error("Failed to update card status:",a),a}}async runPrompt(e){if(!(typeof window>"u"||!("api"in window)))try{await window.api.runPrompt(e)}catch(r){throw console.error("Failed to run prompt:",r),r}}toggleForm(){this.isFormOpen=!this.isFormOpen}openForm(){this.isFormOpen=!0}closeForm(){this.isFormOpen=!1}setFilterStatus(e){this.filterStatus=e}setFilterQuery(e){this.filterQuery=e}setFilterProject(e){this.filterProject=e}}const M=new Rt;var Ht=L('<li class="empty svelte-138d5ja">No projects yet — create one.</li>'),Qt=L('<li><button class="project-card svelte-138d5ja"><span class="project-name svelte-138d5ja"> </span></button></li>'),Ut=L('<section class="projects svelte-138d5ja"><header><h2>Projects</h2> <div class="actions svelte-138d5ja"><p class="hint">Create a project from the header above.</p></div></header> <ul class="project-list svelte-138d5ja"><!></ul></section>');function Bt(t,e){ne(e,!0);function r(s){P.selectProject(s),e.onopen?.({projectId:s})}var a=Ut(),l=m(v(a),2),n=v(l);{var c=s=>{var p=Ht();x(s,p)},o=s=>{var p=ie(),y=ee(p);ce(y,17,()=>P.all,b=>b.id,(b,C)=>{var T=Qt(),d=v(T);d.__click=()=>r(i(C).id);var E=v(d),u=v(E,!0);f(E),f(d),f(T),B(()=>{K(d,"aria-label",`Open project ${i(C).name}`),R(u,i(C).name)}),x(b,T)}),x(s,p)};U(n,s=>{P.all.length===0?s(c):s(o,!1)})}f(l),f(a),x(t,a),le()}oe(["click"]);var Gt=L('<p id="name-error" class="field-error svelte-t06kqd" role="alert"> </p>'),Wt=L('<p class="submission-error svelte-t06kqd" role="alert"> </p>'),zt=L('<section class="project-create svelte-t06kqd"><h2 class="svelte-t06kqd">Create project</h2> <form class="project-form svelte-t06kqd"><label for="proj-name" class="svelte-t06kqd">Project name</label> <input id="proj-name" type="text" placeholder="e.g. JavaScript"/> <!> <p class="hint svelte-t06kqd" id="project-hint">The project name appears in the sidebar list.</p> <!> <div class="actions svelte-t06kqd"><button type="submit" class="primary svelte-t06kqd"> </button> <button type="button" class="ghost svelte-t06kqd">Cancel</button></div></form></section>');function Vt(t,e){ne(e,!0);let r=N(de({name:""})),a=N(null),l=N(!1),n=N(de({})),c=ae(()=>i(n).name?"name-error project-hint":"project-hint");function o(_){const h={};return(!_.name||_.name.trim()==="")&&(h.name="Project name is required"),h}async function s(_){if(_.preventDefault(),w(n,o(i(r)),!0),!(Object.keys(i(n)).length>0)){w(a,null),w(l,!0);try{const h=i(r).name.trim(),g=await P.createProject(h);w(r,{name:""},!0),w(n,{},!0),e.oncreated?.({project:g.id})}catch(h){console.error("Failed to create project",h),w(a,h instanceof Error?h.message:"Unable to create project right now. Try again in a moment.",!0)}finally{w(l,!1)}}}function p(){w(r,{name:""},!0),w(n,{},!0),w(a,null),P.selectProject("all")}var y=zt(),b=m(v(y),2),C=m(v(b),2);je(C);let T;var d=m(C,2);{var E=_=>{var h=Gt(),g=v(h,!0);f(h),B(()=>R(g,i(n).name)),x(_,h)};U(d,_=>{i(n).name&&_(E)})}var u=m(d,4);{var F=_=>{var h=Wt(),g=v(h,!0);f(h),B(()=>R(g,i(a))),x(_,h)};U(u,_=>{i(a)&&_(F)})}var j=m(u,2),S=v(j),q=v(S,!0);f(S);var k=m(S,2);k.__click=p,f(j),f(b),f(y),B(()=>{K(b,"aria-describedby",i(c)),K(C,"aria-invalid",i(n).name?"true":"false"),C.disabled=i(l),T=Ie(C,1,"svelte-t06kqd",null,T,{error:i(n).name}),S.disabled=i(l),R(q,i(l)?"Creating...":"Create project"),k.disabled=i(l)}),Ye("submit",b,s),_e(C,()=>i(r).name,_=>i(r).name=_),x(t,y),le()}oe(["click"]);var Jt=L('<div role="status" class="form-status"> </div>'),Kt=L("<option> </option>"),Yt=L('<div class="field"><label for="project">New project name</label> <input id="project" type="text" autocomplete="off"/> <span class="hint">Give your project a short, unique name.</span></div>'),Xt=L('<section id="add-section"><form aria-labelledby="add-heading"><h2>New Card Details</h2> <!> <div class="field"><label for="title">Title <span class="required">*</span></label> <input id="title" type="text" autocomplete="off" required/> <span class="hint">Give your learning card a clear, memorable name.</span></div> <div class="field"><label for="topic">Topic <span class="optional">(optional)</span></label> <input id="topic" type="text" autocomplete="off"/> <span class="hint">e.g., JavaScript, Design Patterns, Math</span></div> <div class="field"><label for="project-select">Project <span class="optional">(optional)</span></label> <select id="project-select" aria-describedby="project-hint"><option>Select a project</option><!><option>+ Create new project...</option></select> <span id="project-hint" class="hint">Assign this card to a project or create a new one.</span></div> <!> <div class="field"><label for="prompt">Learning prompt <span class="required">*</span></label> <textarea id="prompt" required placeholder="e.g. Explain the concept of closures in JavaScript"></textarea> <span class="hint">What do you want to learn or understand?</span></div> <div class="form-actions"><button type="submit" class="primary"> </button> <button type="button" class="ghost">Cancel</button></div></form></section>');function Zt(t,e){ne(e,!0);let r=N(""),a=N(""),l=N(de(P.selectedProject!=="all"&&P.selectedProject!=="create"?P.selectedProject:"")),n=N(!1),c=N(""),o=N(""),s=N(!1),p=ae(()=>i(r).trim().length>0&&i(c).trim().length>0);xe(()=>{if(!M.isFormOpen)return;const j=S=>{S.key==="Escape"&&T()};return window.addEventListener("keydown",j),()=>{window.removeEventListener("keydown",j)}});async function y(j){if(j.preventDefault(),!(!i(p)||i(s))){w(s,!0),w(o,"");try{await e.onSubmit({title:i(r).trim(),prompt:i(c).trim(),topic:i(a).trim()||void 0,project:i(n)?i(l).trim()||void 0:i(l)||void 0}),C(),M.closeForm(),d(`Card "${i(r)}" added successfully`)}catch(S){w(o,S instanceof Error?S.message:"Failed to add card",!0),d(i(o))}finally{w(s,!1)}}}function b(j){const S=j.target;S.value==="__create__"?(w(n,!0),w(l,"")):(w(n,!1),w(l,S.value,!0))}function C(){w(r,""),w(a,""),w(l,""),w(n,!1),w(c,""),w(o,"")}function T(){C(),M.closeForm()}function d(j){const S=document.getElementById("sr-announcements");S&&(S.textContent=j)}var E=ie(),u=ee(E);{var F=j=>{var S=Xt(),q=v(S),k=m(v(q),2);{var _=D=>{var V=Jt(),J=v(V,!0);f(V),B(()=>R(J,i(o))),x(D,V)};U(k,D=>{i(o)&&D(_)})}var h=m(k,2),g=m(v(h),2);je(g),fe(2),f(h);var A=m(h,2),I=m(v(A),2);je(I),fe(2),f(A);var O=m(A,2),H=m(v(O),2);H.__change=b;var G=v(H);G.value=G.__value="";var W=m(G);ce(W,17,()=>P.all,D=>D.id,(D,V)=>{var J=Kt(),we=v(J,!0);f(J);var Me={};B(()=>{R(we,i(V).name),Me!==(Me=i(V).id)&&(J.value=(J.__value=i(V).id)??"")}),x(D,J)});var Q=m(W);Q.value=Q.__value="__create__",f(H),fe(2),f(O);var X=m(O,2);{var Z=D=>{var V=Yt(),J=m(v(V),2);je(J),fe(2),f(V),B(()=>J.disabled=i(s)),_e(J,()=>i(l),we=>w(l,we)),x(D,V)};U(X,D=>{i(n)&&D(Z)})}var ue=m(X,2),ve=m(v(ue),2);St(ve),fe(2),f(ue);var Y=m(ue,2),se=v(Y),Ze=v(se,!0);f(se);var Te=m(se,2);Te.__click=T,f(Y),f(q),f(S),B(()=>{g.disabled=i(s),I.disabled=i(s),H.disabled=i(s),ve.disabled=i(s),se.disabled=!i(p)||i(s),R(Ze,i(s)?"Saving...":"Save card"),Te.disabled=i(s)}),Ye("submit",q,y),_e(g,()=>i(r),D=>w(r,D)),_e(I,()=>i(a),D=>w(a,D)),Tt(H,()=>i(l),D=>w(l,D)),_e(ve,()=>i(c),D=>w(c,D)),x(j,S)};U(u,j=>{M.isFormOpen&&j(F)})}x(t,E),le()}oe(["change","click"]);var $t=L('<p class="topic"> </p>'),er=L('<p class="project">Project: <strong> </strong></p>'),tr=L('<article><header><h3> </h3> <!> <!></header> <section><div> </div> <pre class="prompt"> </pre></section> <footer class="card-actions"><button type="button" class="primary">Start in ChatGPT</button> <button type="button" class="ghost"> </button></footer></article>');function Qe(t,e){ne(e,!0);const r=ae(()=>e.card.status==="done"),a=ae(()=>i(r)?"Mark active":"Mark done"),l=ae(()=>i(r)?"✓ Completed":"Active"),n=ae(()=>e.card.project?P.all.find(A=>A.id===e.card.project)?.name||e.card.project:"");var c=tr();let o;var s=v(c),p=v(s),y=v(p,!0);f(p);var b=m(p,2);{var C=A=>{var I=$t(),O=v(I,!0);f(I),B(()=>R(O,e.card.topic)),x(A,I)};U(b,A=>{e.card.topic&&A(C)})}var T=m(b,2);{var d=A=>{var I=er(),O=m(v(I)),H=v(O,!0);f(O),f(I),B(()=>R(H,i(n))),x(A,I)};U(T,A=>{e.card.project&&A(d)})}f(s);var E=m(s,2),u=v(E);let F;var j=v(u,!0);f(u);var S=m(u,2),q=v(S,!0);f(S),f(E);var k=m(E,2),_=v(k);_.__click=()=>e.onStart(e.card.prompt);var h=m(_,2);h.__click=()=>e.onToggle(e.card.id,i(r)?"active":"done");var g=v(h,!0);f(h),f(k),f(c),B(()=>{o=Ie(c,1,"card svelte-ybr5in",null,o,{done:i(r)}),R(y,e.card.title),F=Ie(u,1,"status svelte-ybr5in",null,F,{done:i(r)}),R(j,i(l)),R(q,e.card.prompt),K(_,"aria-label",`Start chat with prompt for ${e.card.title}`),K(h,"aria-pressed",i(r)),K(h,"aria-label",i(r)?`Mark ${e.card.title} as active`:`Mark ${e.card.title} as done`),R(g,i(a))}),x(t,c),le()}oe(["click"]);var rr=L('<p class="empty-state" role="status" aria-live="polite">No learning cards match your filters.</p>'),ar=L('<section class="project-group"><h3> </h3> <!></section>'),ir=L('<section><h2>Your learning cards</h2> <div class="filters"><label class="filter">Show: <select><option> </option><option> </option><option> </option></select></label> <label class="filter search">Search: <input type="search" placeholder="Search title, prompt, topic" aria-label="Search cards"/></label></div> <div class="card-list"><!></div></section>');function nr(t,e){ne(e,!0);function r(_){const h=new Map;for(const A of _){const I=A.project||"";h.has(I)||h.set(I,[]),h.get(I).push(A)}const g=[];for(const[A,I]of h.entries())g.push({project:A,cards:I,headingId:`project-${(A||"unassigned").replace(/\s+/g,"-")}`});return g.sort((A,I)=>{const O=A.project?P.all.find(G=>G.id===A.project)?.name||A.project:"Unassigned",H=I.project?P.all.find(G=>G.id===I.project)?.name||I.project:"Unassigned";return O.localeCompare(H)}),g}const a=ae(()=>M.filterProject==="all"?r(M.filtered):[]);function l(_){const h=_.target;M.setFilterStatus(h.value)}function n(_){const h=_.target;M.setFilterQuery(h.value)}var c=ir(),o=m(v(c),2),s=v(o),p=m(v(s));p.__change=l;var y=v(p),b=v(y);f(y),y.value=y.__value="all";var C=m(y),T=v(C);f(C),C.value=C.__value="active";var d=m(C),E=v(d);f(d),d.value=d.__value="done",f(p),f(s);var u=m(s,2),F=m(v(u));F.__input=n,f(u),f(o);var j=m(o,2),S=v(j);{var q=_=>{var h=rr();x(_,h)},k=_=>{var h=ie(),g=ee(h);{var A=O=>{var H=ie(),G=ee(H);ce(G,17,()=>i(a),W=>W.headingId,(W,Q)=>{var X=ar(),Z=v(X),ue=v(Z,!0);f(Z);var ve=m(Z,2);ce(ve,17,()=>i(Q).cards,Y=>Y.id,(Y,se)=>{Qe(Y,{get card(){return i(se)},get onStart(){return e.onStart},get onToggle(){return e.onToggle}})}),f(X),B(Y=>{K(X,"aria-labelledby",i(Q).headingId),K(Z,"id",i(Q).headingId),R(ue,Y)},[()=>i(Q).project?P.all.find(Y=>Y.id===i(Q).project)?.name||i(Q).project:"Unassigned"]),x(W,X)}),x(O,H)},I=O=>{var H=ie(),G=ee(H);ce(G,17,()=>M.filtered,W=>W.id,(W,Q)=>{Qe(W,{get card(){return i(Q)},get onStart(){return e.onStart},get onToggle(){return e.onToggle}})}),x(O,H)};U(g,O=>{M.filterProject==="all"?O(A):O(I,!1)},!0)}x(_,h)};U(S,_=>{M.filtered.length===0?_(q):_(k,!1)})}f(j),f(c),B(()=>{R(b,`All (${M.all.length??""})`),R(T,`Active (${M.activeCards.length??""})`),R(E,`Completed (${M.completedCards.length??""})`)}),x(t,c),le()}oe(["change","input"]);var lr=L('<section class="project-detail svelte-1ykxz3w"><header><h2> </h2> <div class="actions svelte-1ykxz3w"><button class="primary" aria-controls="add-section">+ New Learning Item</button></div></header> <!> <!></section>');function or(t,e){ne(e,!0);const r=ae(()=>{if(!(!P.all||!e.projectId))return P.all.find(u=>u.id===e.projectId)});xe(()=>{(!P.all||P.all.length===0)&&P.loadProjects()});function a(){M.toggleForm()}async function l(u){const j=u.project&&String(u.project).trim().length>0?u.project:e.projectId||void 0;await M.addCard({...u,project:j}),M.closeForm()}async function n(u){await M.runPrompt(u)}async function c(u,F){await M.updateCardStatus(u,F)}var o=lr(),s=v(o),p=v(s),y=v(p,!0);f(p);var b=m(p,2),C=v(b);C.__click=a,f(b),f(s);var T=m(s,2);{var d=u=>{Zt(u,{onSubmit:l})};U(T,u=>{M.isFormOpen&&u(d)})}var E=m(T,2);nr(E,{onStart:n,onToggle:c}),f(o),B(()=>{R(y,i(r)?i(r).name:"Project"),K(C,"aria-expanded",M.isFormOpen)}),x(t,o),le()}oe(["click"]);var sr=L('<meta name="description" content="Finish what you start"/>'),cr=L('<button class="primary" aria-label="Create project">+ New Project</button>'),dr=L('<button class="ghost" aria-label="Back to projects">← Projects</button>'),ur=L("<option> </option>"),vr=L('<div class="project-controls svelte-1uha8ag"><label class="project-filter svelte-1uha8ag">Project: <select aria-label="Switch project" class="svelte-1uha8ag"><option>All projects</option><!></select></label> <button class="ghost" aria-label="Back to projects">← Projects</button></div>'),fr=L("<p>Loading...</p>"),pr=L('<div id="sr-announcements" class="sr-only" aria-live="polite" aria-atomic="true"></div> <div class="container"><header><h1>Learning Cards</h1> <p class="subtitle">Finish what you start</p> <div class="top-actions"><!></div></header> <main id="main-content"><!></main></div>',1);function jr(t,e){ne(e,!0),kt(()=>{(async()=>await Promise.all([M.loadCards(),P.loadProjects()]))()});function r(u){const F=u.project;P.selectProject(F)}let a=N(de(P.selectedProject));xe(()=>{w(a,P.selectedProject,!0)});function l(u){const j=u.target.value;j==="all"?P.selectAll():j&&P.selectProject(j)}var n=pr();xt("1uha8ag",u=>{var F=sr();Je(()=>{Et.title="Learning Cards"}),x(u,F)});var c=m(ee(n),2),o=v(c),s=m(v(o),4),p=v(s);{var y=u=>{var F=cr();F.__click=()=>P.selectCreateProject(),x(u,F)},b=u=>{var F=ie(),j=ee(F);{var S=k=>{var _=dr();_.__click=()=>P.selectProject("all"),x(k,_)},q=k=>{var _=vr(),h=v(_),g=m(v(h));g.__change=l;var A=v(g);A.value=A.__value="all";var I=m(A);ce(I,17,()=>P.all,G=>G.id,(G,W)=>{var Q=ur(),X=v(Q,!0);f(Q);var Z={};B(()=>{R(X,i(W).name),Z!==(Z=i(W).id)&&(Q.value=(Q.__value=i(W).id)??"")}),x(G,Q)}),f(g);var O;Xe(g),f(h);var H=m(h,2);H.__click=()=>P.selectProject("all"),f(_),B(()=>{O!==(O=P.selectedProject)&&(g.value=(g.__value=P.selectedProject)??"",Le(g,P.selectedProject))}),x(k,_)};U(j,k=>{P.selectedProject==="create"?k(S):k(q,!1)},!0)}x(u,F)};U(p,u=>{P.selectedProject==="all"?u(y):u(b,!1)})}f(s),f(o);var C=m(o,2),T=v(C);{var d=u=>{var F=fr();x(u,F)},E=u=>{var F=ie(),j=ee(F);{var S=k=>{Bt(k,{onopen:_=>P.selectProject(_.projectId)})},q=k=>{var _=ie(),h=ee(_);{var g=I=>{Vt(I,{oncreated:r})},A=I=>{or(I,{get projectId(){return P.selectedProject}})};U(h,I=>{P.selectedProject==="create"?I(g):I(A,!1)},!0)}x(k,_)};U(j,k=>{P.selectedProject==="all"?k(S):k(q,!1)},!0)}x(u,F)};U(T,u=>{M.isLoading||P.isLoading?u(d):u(E,!1)})}f(C),f(c),x(t,n),le()}oe(["click","change"]);export{jr as component};
