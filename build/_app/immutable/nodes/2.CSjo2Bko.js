import{c as Ge,a as J,f as ae}from"../chunks/ULpU1OEv.js";import"../chunks/9kEBWlIL.js";import{o as qt,c as er,a as yr,w as br}from"../chunks/DuYnsd-i.js";import{i as Ae,j as _r,H as tr,g as u,V as gr,J as wr,K as Ar,L as Ht,M as gt,N as vt,E as ut,af as rr,aC as Er,am as $t,y as Le,D as Ct,G as Sr,aA as Rt,x as nr,ab as zt,O as he,aJ as jr,aK as Pr,aL as kr,C as xt,aM as He,z as ar,B as ir,aN as Pt,aw as It,az as Tr,A as Or,aO as Fr,a4 as Cr,aE as Wt,b as R,aP as sr,aQ as or,aR as xr,aS as Ir,P as Lr,aT as Dr,aU as Nr,ae as Mr,aV as qr,aW as Rr,aX as Wr,aH as Ur,ac as Hr,R as M,aG as Fe,W as lr,p as Xe,aY as nt,aZ as Et,k as $e,e as ne,l as Ze,m as _,s as j,an as ct,n as g,t as pe,a_ as $r,a$ as zr,b0 as Br}from"../chunks/S5IkUKKS.js";import{d as Ve,s as le,e as Qr}from"../chunks/DoppdJSp.js";import{p as Je,i as ye,s as Bt,a as Kr}from"../chunks/DNNsX8Uk.js";import{i as et}from"../chunks/Ba62dfoZ.js";function wt(e,t){return t}function Gr(e,t,r){for(var n=[],a=t.length,i,s=t.length,o=0;o<a;o++){let b=t[o];ir(b,()=>{if(i){if(i.pending.delete(b),i.done.add(b),i.pending.size===0){var k=e.outrogroups;Lt(Rt(i.done)),k.delete(i),k.size===0&&(e.outrogroups=null)}}else s-=1},!1)}if(s===0){var c=n.length===0&&r!==null;if(c){var d=r,p=d.parentNode;Tr(p),p.append(d),e.items.clear()}Lt(t,!c)}else i={pending:new Set(t),done:new Set},(e.outrogroups??=new Set).add(i)}function Lt(e,t=!0){for(var r=0;r<e.length;r++)Or(e[r],t)}var Qt;function rt(e,t,r,n,a,i=null){var s=e,o=new Map;Ae&&_r();var c=null,d=gr(()=>{var h=r();return nr(h)?h:h==null?[]:Rt(h)}),p,b=!0;function k(){l.fallback=c,Jr(l,p,s,t,n),c!==null&&(p.length===0?(c.f&He)===0?ar(c):(c.f^=He,dt(c,null,s)):ir(c,()=>{c=null}))}var y=tr(()=>{p=u(d);var h=p.length;let x=!1;if(Ae){var P=wr(s)===Ar;P!==(h===0)&&(s=Ht(),gt(s),vt(!1),x=!0)}for(var w=new Set,I=Le,C=Sr(),H=0;H<h;H+=1){Ae&&ut.nodeType===rr&&ut.data===Er&&(s=ut,x=!0,vt(!1));var q=p[H],L=n(q,H),D=b?null:o.get(L);D?(D.v&&$t(D.v,q),D.i&&$t(D.i,H),C&&I.skipped_effects.delete(D.e)):(D=Yr(o,b?s:Qt??=xt(),q,L,H,a,t,r),b||(D.e.f|=He),o.set(L,D)),w.add(L)}if(h===0&&i&&!c&&(b?c=Ct(()=>i(s)):(c=Ct(()=>i(Qt??=xt())),c.f|=He)),Ae&&h>0&&gt(Ht()),!b)if(C){for(const[Y,S]of o)w.has(Y)||I.skipped_effects.add(S.e);I.oncommit(k),I.ondiscard(()=>{})}else k();x&&vt(!0),u(d)}),l={effect:y,items:o,outrogroups:null,fallback:c};b=!1,Ae&&(s=ut)}function Jr(e,t,r,n,a){var i=t.length,s=e.items,o=e.effect.first,c,d=null,p=[],b=[],k,y,l,h;for(h=0;h<i;h+=1){if(k=t[h],y=a(k,h),l=s.get(y).e,e.outrogroups!==null)for(const D of e.outrogroups)D.pending.delete(l),D.done.delete(l);if((l.f&He)!==0)if(l.f^=He,l===o)dt(l,null,r);else{var x=d?d.next:o;l===e.effect.last&&(e.effect.last=l.prev),l.prev&&(l.prev.next=l.next),l.next&&(l.next.prev=l.prev),We(e,d,l),We(e,l,x),dt(l,x,r),d=l,p=[],b=[],o=d.next;continue}if((l.f&Pt)!==0&&ar(l),l!==o){if(c!==void 0&&c.has(l)){if(p.length<b.length){var P=b[0],w;d=P.prev;var I=p[0],C=p[p.length-1];for(w=0;w<p.length;w+=1)dt(p[w],P,r);for(w=0;w<b.length;w+=1)c.delete(b[w]);We(e,I.prev,C.next),We(e,d,I),We(e,C,P),o=P,d=C,h-=1,p=[],b=[]}else c.delete(l),dt(l,o,r),We(e,l.prev,l.next),We(e,l,d===null?e.effect.first:d.next),We(e,d,l),d=l;continue}for(p=[],b=[];o!==null&&o!==l;)(c??=new Set).add(o),b.push(o),o=o.next;if(o===null)continue}(l.f&He)===0&&p.push(l),d=l,o=l.next}if(e.outrogroups!==null){for(const D of e.outrogroups)D.pending.size===0&&(Lt(Rt(D.done)),e.outrogroups?.delete(D));e.outrogroups.size===0&&(e.outrogroups=null)}if(o!==null||c!==void 0){var H=[];if(c!==void 0)for(l of c)(l.f&Pt)===0&&H.push(l);for(;o!==null;)(o.f&Pt)===0&&o!==e.fallback&&H.push(o),o=o.next;var q=H.length;if(q>0){var L=null;Gr(e,H,L)}}}function Yr(e,t,r,n,a,i,s,o){var c=(s&Pr)!==0?(s&kr)===0?he(r,!1,!1):zt(r):null,d=(s&jr)!==0?zt(a):null;return{v:c,i:d,e:Ct(()=>(i(t,c??r,d??a,o),()=>{e.delete(n)}))}}function dt(e,t,r){if(e.nodes)for(var n=e.nodes.start,a=e.nodes.end,i=t&&(t.f&He)===0?t.nodes.start:r;n!==null;){var s=It(n);if(i.before(n),n===a)return;n=s}}function We(e,t,r){t===null?e.effect.first=r:t.next=r,r===null?e.effect.last=t:r.prev=t}function Xr(e,t){let r=null,n=Ae;var a;if(Ae){r=ut;for(var i=Cr(document.head);i!==null&&(i.nodeType!==rr||i.data!==e);)i=It(i);if(i===null)vt(!1);else{var s=It(i);i.remove(),gt(s)}}Ae||(a=document.head.appendChild(xt()));try{tr(()=>t(a),Fr)}finally{n&&(vt(!0),gt(r))}}function Zr(e,t,r){Wt(()=>{var n=R(()=>t(e,r?.())||{});if(n?.destroy)return()=>n.destroy()})}const Kt=[...` 	
\r\f \v\uFEFF`];function Vr(e,t,r){var n=e==null?"":""+e;if(r){for(var a in r)if(r[a])n=n?n+" "+a:a;else if(n.length)for(var i=a.length,s=0;(s=n.indexOf(a,s))>=0;){var o=s+i;(s===0||Kt.includes(n[s-1]))&&(o===n.length||Kt.includes(n[o]))?n=(s===0?"":n.substring(0,s))+n.substring(o+1):s=o}}return n===""?null:n}function Dt(e,t,r,n,a,i){var s=e.__className;if(Ae||s!==r||s===void 0){var o=Vr(r,n,i);(!Ae||o!==e.getAttribute("class"))&&(o==null?e.removeAttribute("class"):e.className=o),e.__className=r}else if(i&&a!==i)for(var c in i){var d=!!i[c];(a==null||d!==!!a[c])&&e.classList.toggle(c,d)}return i}function cr(e,t,r=!1){if(e.multiple){if(t==null)return;if(!nr(t))return xr();for(var n of e.options)n.selected=t.includes(pt(n));return}for(n of e.options){var a=pt(n);if(Ir(a,t)){n.selected=!0;return}}(!r||t!==void 0)&&(e.selectedIndex=-1)}function en(e){var t=new MutationObserver(()=>{cr(e,e.__value)});t.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),Lr(()=>{t.disconnect()})}function tn(e,t,r=t){var n=new WeakSet,a=!0;sr(e,"change",i=>{var s=i?"[selected]":":checked",o;if(e.multiple)o=[].map.call(e.querySelectorAll(s),pt);else{var c=e.querySelector(s)??e.querySelector("option:not([disabled])");o=c&&pt(c)}r(o),Le!==null&&n.add(Le)}),Wt(()=>{var i=t();if(e===document.activeElement){var s=or??Le;if(n.has(s))return}if(cr(e,i,a),a&&i===void 0){var o=e.querySelector(":checked");o!==null&&(i=pt(o),r(i))}e.__value=i,a=!1}),en(e)}function pt(e){return"__value"in e?e.__value:e.value}const rn=Symbol("is custom element"),nn=Symbol("is html");function kt(e){if(Ae){var t=!1,r=()=>{if(!t){if(t=!0,e.hasAttribute("value")){var n=e.value;je(e,"value",null),e.value=n}if(e.hasAttribute("checked")){var a=e.checked;je(e,"checked",null),e.checked=a}}};e.__on_r=r,Mr(r),qr()}}function je(e,t,r,n){var a=an(e);Ae&&(a[t]=e.getAttribute(t),t==="src"||t==="srcset"||t==="href"&&e.nodeName==="LINK")||a[t]!==(a[t]=r)&&(t==="loading"&&(e[Rr]=r),r==null?e.removeAttribute(t):typeof r!="string"&&sn(e).includes(t)?e[t]=r:e.setAttribute(t,r))}function an(e){return e.__attributes??={[rn]:e.nodeName.includes("-"),[nn]:e.namespaceURI===Dr}}var Gt=new Map;function sn(e){var t=e.getAttribute("is")||e.nodeName,r=Gt.get(t);if(r)return r;Gt.set(t,r=[]);for(var n,a=e,i=Element.prototype;i!==a;){n=Wr(a);for(var s in n)n[s].set&&r.push(s);a=Nr(a)}return r}function yt(e,t,r=t){var n=new WeakSet;sr(e,"input",async a=>{var i=a?e.defaultValue:e.value;if(i=Tt(e)?Ot(i):i,r(i),Le!==null&&n.add(Le),await Ur(),i!==(i=t())){var s=e.selectionStart,o=e.selectionEnd,c=e.value.length;if(e.value=i??"",o!==null){var d=e.value.length;s===o&&o===c&&d>c?(e.selectionStart=d,e.selectionEnd=d):(e.selectionStart=s,e.selectionEnd=Math.min(o,d))}}}),(Ae&&e.defaultValue!==e.value||R(t)==null&&e.value)&&(r(Tt(e)?Ot(e.value):e.value),Le!==null&&n.add(Le)),Hr(()=>{var a=t();if(e===document.activeElement){var i=or??Le;if(n.has(i))return}Tt(e)&&a===Ot(e.value)||e.type==="date"&&!a&&!e.value||a!==e.value&&(e.value=a??"")})}function Tt(e){var t=e.type;return t==="number"||t==="range"}function Ot(e){return e===""?null:+e}class on{#e;get all(){return u(this.#e)}set all(t){M(this.#e,t,!0)}#t;get isLoading(){return u(this.#t)}set isLoading(t){M(this.#t,t,!0)}#r;get viewMode(){return u(this.#r)}set viewMode(t){M(this.#r,t,!0)}#n;get selectedProjectId(){return u(this.#n)}set selectedProjectId(t){M(this.#n,t,!0)}constructor(){this.#e=Fe(lr([])),this.#t=Fe(!1),this.#r=Fe("list"),this.#n=Fe(null)}get selectedProject(){return this.viewMode==="list"?"all":this.viewMode==="create"?"create":this.selectedProjectId||"all"}async loadProjects(){if(typeof window>"u"||!window.api){console.warn("Window API not available, skipping project load");return}this.isLoading=!0;try{const t=await window.api.getProjects();Array.isArray(t)&&(this.all=t.slice().sort((r,n)=>r.name.localeCompare(n.name)))}catch(t){console.error("Failed to load projects from main process",t)}finally{this.isLoading=!1}}async createProject(t){const r=t.trim();if(!r)throw new Error("Project name is required");const n=await window.api.createProject(r);return this.all=[...this.all,n].sort((a,i)=>a.name.localeCompare(i.name)),n}selectAll(){this.viewMode="list",this.selectedProjectId=null}selectProject(t){if(t===null||t==="all"){this.selectAll();return}if(t==="create"){this.viewMode="create",this.selectedProjectId=null;return}this.viewMode="detail",this.selectedProjectId=t}selectCreateProject(){this.viewMode="create",this.selectedProjectId=null}findById(t){return this.all.find(r=>r.id===t)}}const Q=new on;class ln{#e;get all(){return u(this.#e)}set all(t){M(this.#e,t,!0)}#t;get isLoading(){return u(this.#t)}set isLoading(t){M(this.#t,t,!0)}#r;get isFormOpen(){return u(this.#r)}set isFormOpen(t){M(this.#r,t,!0)}#n;get filterStatus(){return u(this.#n)}set filterStatus(t){M(this.#n,t,!0)}#a;get filterQuery(){return u(this.#a)}set filterQuery(t){M(this.#a,t,!0)}#i;get filterProject(){return u(this.#i)}set filterProject(t){M(this.#i,t,!0)}constructor(){this.#e=Fe(lr([])),this.#t=Fe(!1),this.#r=Fe(!1),this.#n=Fe("all"),this.#a=Fe(""),this.#i=Fe("all")}get filtered(){let t=this.all.slice();if(this.filterStatus!=="all"&&(t=t.filter(r=>this.filterStatus==="active"?r.status==="active":r.status==="done")),this.filterProject&&this.filterProject!=="all"&&(t=t.filter(r=>(r.project||"")===this.filterProject)),this.filterQuery&&this.filterQuery.trim()!==""){const r=this.filterQuery.toLowerCase();t=t.filter(n=>(n.title||"").toLowerCase().includes(r)||(n.prompt||"").toLowerCase().includes(r)||(n.topic||"").toLowerCase().includes(r)||(n.project||"").toLowerCase().includes(r))}return t}get activeCards(){return this.all.filter(t=>t.status==="active")}get completedCards(){return this.all.filter(t=>t.status==="done")}get cardCount(){return this.all.length}async loadCards(){if(!(typeof window>"u"||!window.api)){this.isLoading=!0;try{const r=(await window.api.getCards()).map(n=>({...n,createdAt:new Date(n.createdAt)})).sort((n,a)=>a.createdAt.getTime()-n.createdAt.getTime());this.all=r}catch(t){console.error("Failed to load cards:",t)}finally{this.isLoading=!1}}}async addCard(t){if(!(typeof window>"u"||!window.api))try{const r=await window.api.addCard(t);return this.all=[r,...this.all],r}catch(r){throw console.error("Failed to add card:",r),r}}async updateCardStatus(t,r){if(!(typeof window>"u"||!window.api))try{await window.api.toggleCard(t,r);const n=this.all.findIndex(a=>a.id===t);n!==-1&&(this.all[n]={...this.all[n],status:r})}catch(n){throw console.error("Failed to update card status:",n),n}}async runPrompt(t){if(!(typeof window>"u"||!window.api))try{await window.api.runPrompt(t)}catch(r){throw console.error("Failed to run prompt:",r),r}}toggleForm(){this.isFormOpen=!this.isFormOpen}openForm(){this.isFormOpen=!0}closeForm(){this.isFormOpen=!1}setFilterStatus(t){this.filterStatus=t}setFilterQuery(t){this.filterQuery=t}setFilterProject(t){this.filterProject=t}}const B=new ln;var cn=ae('<div role="status" class="form-status"> </div>'),un=ae("<option> </option>"),dn=ae('<div class="field"><label for="project">New project name</label> <input id="project" type="text" autocomplete="off"/> <span class="hint">Give your project a short, unique name.</span></div>'),fn=ae('<section id="add-section"><form aria-labelledby="add-heading"><h2>New Card Details</h2> <!> <div class="field"><label for="title">Title <span class="required">*</span></label> <input id="title" type="text" autocomplete="off" required/> <span class="hint">Give your learning card a clear, memorable name.</span></div> <div class="field"><label for="topic">Topic <span class="optional">(optional)</span></label> <input id="topic" type="text" autocomplete="off"/> <span class="hint">e.g., JavaScript, Design Patterns, Math</span></div> <div class="field"><label for="project-select">Project <span class="optional">(optional)</span></label> <select id="project-select" aria-describedby="project-hint"><option>All projects</option><option>Unassigned</option><!><option>+ Create new project...</option></select> <span id="project-hint" class="hint">Assign this card to a project or create a new one.</span></div> <!> <div class="field"><label for="prompt">Learning prompt <span class="required">*</span></label> <textarea id="prompt" required placeholder="e.g. Explain the concept of closures in JavaScript"></textarea> <span class="hint">What do you want to learn or understand?</span></div> <div class="form-actions"><button type="submit" class="primary"> </button> <button type="button" class="ghost">Cancel</button></div></form></section>');function vn(e,t){Xe(t,!1);const r=he();let n=Je(t,"onSubmit",8),a=he(""),i=he(""),s=he(""),o=he(!1),c=he(""),d=he(""),p=he(!1);async function b(){if(!(!u(r)||u(p))){M(p,!0),M(d,"");try{await n()({title:u(a).trim(),prompt:u(c).trim(),topic:u(i).trim()||void 0,project:u(o)?u(s).trim()||void 0:u(s)||void 0}),k(),B.closeForm(),M(d,"Card added successfully!"),l(u(d))}catch(w){M(d,w instanceof Error?w.message:"Failed to add card"),l(u(d))}finally{M(p,!1)}}}function k(){M(a,""),M(i,""),M(s,""),M(o,!1),M(c,""),M(d,"")}function y(){k(),B.closeForm()}function l(w){const I=document.getElementById("sr-announcements");I&&(I.textContent=w)}qt(()=>{const w=I=>{I.key==="Escape"&&B.isFormOpen&&y()};return window.addEventListener("keydown",w),()=>{window.removeEventListener("keydown",w)}}),nt(()=>(u(a),u(c)),()=>{M(r,u(a).trim().length>0&&u(c).trim().length>0)}),Et(),et();var h=Ge(),x=$e(h);{var P=w=>{var I=fn(),C=_(I),H=j(_(C),2);{var q=U=>{var re=cn(),oe=_(re,!0);g(re),pe(()=>le(oe,u(d))),J(U,re)};ye(H,U=>{u(d)&&U(q)})}var L=j(H,2),D=j(_(L),2);kt(D),ct(2),g(L);var Y=j(L,2),S=j(_(Y),2);kt(S),ct(2),g(Y);var m=j(Y,2),E=j(_(m),2);pe(()=>{u(s),$r(()=>{u(o),u(p)})}),E.__change=()=>{u(s)==="__create__"?(M(o,!0),M(s,"")):M(o,!1)};var $=_(E);$.value=$.__value="all";var K=j($);K.value=K.__value="";var ee=j(K);rt(ee,1,()=>(ne(Q),R(()=>Q.all)),wt,(U,re)=>{var oe=un(),Ee=_(oe,!0);g(oe);var Ne={};pe(()=>{le(Ee,(u(re),R(()=>u(re).name))),Ne!==(Ne=(u(re),R(()=>u(re).id)))&&(oe.value=(oe.__value=(u(re),R(()=>u(re).id)))??"")}),J(U,oe)});var z=j(ee);z.value=z.__value="__create__",g(E),ct(2),g(m);var se=j(m,2);{var ve=U=>{var re=dn(),oe=j(_(re),2);kt(oe),ct(2),g(re),pe(()=>oe.disabled=u(p)),yt(oe,()=>u(s),Ee=>M(s,Ee)),J(U,re)};ye(se,U=>{u(o)&&U(ve)})}var v=j(se,2),O=j(_(v),2);zr(O),ct(2),g(v);var F=j(v,2),X=_(F),ie=_(X,!0);g(X);var G=j(X,2);G.__click=y,g(F),g(C),g(I),pe(()=>{D.disabled=u(p),S.disabled=u(p),E.disabled=u(p),O.disabled=u(p),X.disabled=!u(r)||u(p),le(ie,u(p)?"Saving...":"Save card"),G.disabled=u(p)}),Qr("submit",C,U=>{U.preventDefault(),b()}),yt(D,()=>u(a),U=>M(a,U)),yt(S,()=>u(i),U=>M(i,U)),tn(E,()=>u(s),U=>M(s,U)),yt(O,()=>u(c),U=>M(c,U)),J(w,I)};ye(x,w=>{ne(B),R(()=>B.isFormOpen)&&w(P)})}J(e,h),Ze()}Ve(["change","click"]);var pn=ae('<p class="topic"> </p>'),mn=ae('<p class="project">Project: <strong> </strong></p>'),hn=ae('<article><header><h3> </h3> <!> <!></header> <section><div> </div> <pre class="prompt"> </pre></section> <footer class="card-actions"><button type="button" class="primary">Start in ChatGPT</button> <button type="button" class="ghost"> </button></footer></article>');function Jt(e,t){Xe(t,!1);const r=he(),n=he(),a=he();let i=Je(t,"card",8),s=Je(t,"onStart",8),o=Je(t,"onToggle",8);nt(()=>ne(i()),()=>{M(r,i().status==="done")}),nt(()=>u(r),()=>{M(n,u(r)?"Mark active":"Mark done")}),nt(()=>u(r),()=>{M(a,u(r)?"✓ Completed":"Active")}),Et(),et();var c=hn();let d;var p=_(c),b=_(p),k=_(b,!0);g(b);var y=j(b,2);{var l=m=>{var E=pn(),$=_(E,!0);g(E),pe(()=>le($,(ne(i()),R(()=>i().topic)))),J(m,E)};ye(y,m=>{ne(i()),R(()=>i().topic)&&m(l)})}var h=j(y,2);{var x=m=>{var E=mn(),$=j(_(E)),K=_($,!0);g($),g(E),pe(ee=>le(K,ee),[()=>(ne(Q),ne(i()),R(()=>Q.all.find(ee=>ee.id===i().project)?.name||i().project))]),J(m,E)};ye(h,m=>{ne(i()),R(()=>i().project)&&m(x)})}g(p);var P=j(p,2),w=_(P);let I;var C=_(w,!0);g(w);var H=j(w,2),q=_(H,!0);g(H),g(P);var L=j(P,2),D=_(L);D.__click=()=>s()(i().prompt);var Y=j(D,2);Y.__click=()=>o()(i().id,u(r)?"active":"done");var S=_(Y,!0);g(Y),g(L),g(c),pe(()=>{d=Dt(c,1,"card svelte-ybr5in",null,d,{done:u(r)}),le(k,(ne(i()),R(()=>i().title))),I=Dt(w,1,"status svelte-ybr5in",null,I,{done:u(r)}),le(C,u(a)),le(q,(ne(i()),R(()=>i().prompt))),je(D,"aria-label",(ne(i()),R(()=>`Start chat with prompt for ${i().title}`))),je(Y,"aria-pressed",u(r)),je(Y,"aria-label",(u(r),ne(i()),R(()=>u(r)?`Mark ${i().title} as active`:`Mark ${i().title} as done`))),le(S,u(n))}),J(e,c),Ze()}Ve(["click"]);var yn=ae("<option> </option>"),bn=ae('<p class="empty-state" role="status" aria-live="polite">No learning cards match your filters.</p>'),_n=ae('<section class="project-group"><h3> </h3> <!></section>'),gn=ae('<section><h2>Your learning cards</h2> <div class="filters"><label class="filter">Project: <select aria-label="Filter by project"><option>All projects</option><option>Unassigned</option><!></select></label> <label class="filter">Show: <select><option> </option><option> </option><option> </option></select></label> <label class="filter search">Search: <input type="search" placeholder="Search title, prompt, topic, project" aria-label="Search cards"/></label></div> <div class="card-list"><!></div></section>');function wn(e,t){Xe(t,!1);let r=Je(t,"onStart",8),n=Je(t,"onToggle",8);function a(S){const m=new Map;for(const $ of S){const K=$.project||"";m.has(K)||m.set(K,[]),m.get(K).push($)}const E=[];for(const[$,K]of m.entries())E.push({project:$,cards:K,headingId:`project-${($||"unassigned").replace(/\s+/g,"-")}`});return E.sort(($,K)=>{const ee=$.project?Q.all.find(se=>se.id===$.project)?.name||$.project:"Unassigned",z=K.project?Q.all.find(se=>se.id===K.project)?.name||K.project:"Unassigned";return ee.localeCompare(z)}),E}et();var i=gn(),s=j(_(i),2),o=_(s),c=j(_(o));c.__change=S=>B.setFilterProject(S.currentTarget.value);var d=_(c);d.value=d.__value="all";var p=j(d);p.value=p.__value="";var b=j(p);rt(b,1,()=>(ne(Q),R(()=>Q.all)),wt,(S,m)=>{var E=yn(),$=_(E,!0);g(E);var K={};pe(()=>{le($,(u(m),R(()=>u(m).name))),K!==(K=(u(m),R(()=>u(m).id)))&&(E.value=(E.__value=(u(m),R(()=>u(m).id)))??"")}),J(S,E)}),g(c),g(o);var k=j(o,2),y=j(_(k));y.__change=S=>B.setFilterStatus(S.currentTarget.value);var l=_(y),h=_(l);g(l),l.value=l.__value="all";var x=j(l),P=_(x);g(x),x.value=x.__value="active";var w=j(x),I=_(w);g(w),w.value=w.__value="done",g(y),g(k);var C=j(k,2),H=j(_(C));H.__input=S=>B.setFilterQuery(S.currentTarget.value),g(C),g(s);var q=j(s,2),L=_(q);{var D=S=>{var m=bn();J(S,m)},Y=S=>{var m=Ge(),E=$e(m);{var $=ee=>{var z=Ge(),se=$e(z);rt(se,1,()=>(ne(B),R(()=>a(B.filtered))),wt,(ve,v)=>{var O=_n(),F=_(O),X=_(F,!0);g(F);var ie=j(F,2);rt(ie,1,()=>(u(v),R(()=>u(v).cards)),G=>G.id,(G,U)=>{Jt(G,{get card(){return u(U)},get onStart(){return r()},get onToggle(){return n()}})}),g(O),pe(G=>{je(O,"aria-labelledby",(u(v),R(()=>u(v).headingId))),je(F,"id",(u(v),R(()=>u(v).headingId))),le(X,G)},[()=>(u(v),ne(Q),R(()=>u(v).project?Q.all.find(G=>G.id===u(v).project)?.name||u(v).project:"Unassigned"))]),J(ve,O)}),J(ee,z)},K=ee=>{var z=Ge(),se=$e(z);rt(se,1,()=>(ne(B),R(()=>B.filtered)),ve=>ve.id,(ve,v)=>{Jt(ve,{get card(){return u(v)},get onStart(){return r()},get onToggle(){return n()}})}),J(ee,z)};ye(E,ee=>{ne(B),R(()=>B.filterProject==="all")?ee($):ee(K,!1)})}J(S,m)};ye(L,S=>{ne(B),R(()=>B.filtered.length===0)?S(D):S(Y,!1)})}g(q),g(i),pe(()=>{le(h,`All (${ne(B),R(()=>B.all.length)??""})`),le(P,`Active (${ne(B),R(()=>B.activeCards.length)??""})`),le(I,`Completed (${ne(B),R(()=>B.completedCards.length)??""})`)}),J(e,i),Ze()}Ve(["change","input"]);var An=ae('<li class="empty svelte-138d5ja">No projects yet — create one.</li>'),En=ae('<li><button class="project-card svelte-138d5ja"><span class="project-name svelte-138d5ja"> </span></button></li>'),Sn=ae('<section class="projects svelte-138d5ja"><header><h2>Projects</h2> <div class="actions svelte-138d5ja"><p class="hint">Create a project from the header above.</p></div></header> <ul class="project-list svelte-138d5ja"><!></ul></section>');function jn(e,t){Xe(t,!1);const r=er();function n(d){Q.selectProject(d),r("open",{projectId:d})}et();var a=Sn(),i=j(_(a),2),s=_(i);{var o=d=>{var p=An();J(d,p)},c=d=>{var p=Ge(),b=$e(p);rt(b,1,()=>Q.all,wt,(k,y)=>{var l=En(),h=_(l);h.__click=()=>n(u(y).id);var x=_(h),P=_(x,!0);g(x),g(h),g(l),pe(()=>{je(h,"aria-label",`Open project ${u(y).name}`),le(P,u(y).name)}),J(k,l)}),J(d,p)};ye(s,d=>{Q.all.length===0?d(o):d(c,!1)})}g(i),g(a),J(e,a),Ze()}Ve(["click"]);function Pn(e,...t){const r=e.subscribe(...t);return r.unsubscribe?()=>r.unsubscribe():r}function xe(e){let t;return Pn(e,r=>t=r)(),t}class kn extends Error{constructor(t,r){super(t),this.name="FelteSubmitError",this.response=r}}function Tn(e,t){return Object.keys(e).some(n=>t(e[n]))}function St(e,t){return Object.keys(e||{}).reduce((n,a)=>Object.assign(Object.assign({},n),{[a]:t(e[a])}),{})}function W(e){return Object.prototype.toString.call(e)==="[object Object]"}function _e(e){return Object.keys(e||{}).reduce((t,r)=>Object.assign(Object.assign({},t),{[r]:W(e[r])?_e(e[r]):Array.isArray(e[r])?[...e[r]]:e[r]}),{})}function On(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r}function Fn(e){return function(t){if(W(t)){const r=ge(t,e);return On(r,["key"])}return e}}function ge(e,t){return St(e,r=>W(r)?ge(r,t):Array.isArray(r)?r.map(Fn(t)):t)}function ze(...e){const t=e.pop(),r=e.shift();if(typeof r=="string")return r;const n=_e(r);if(e.length===0)return n;for(const a of e){if(!a)continue;if(typeof a=="string")return a;let i=t(n,a);if(typeof i<"u")return i;const s=Array.from(new Set(Object.keys(n).concat(Object.keys(a))));for(const o of s)if(i=t(n[o],a[o]),typeof i<"u")n[o]=i;else if(W(a[o])&&W(n[o]))n[o]=ze(n[o],a[o],t);else if(Array.isArray(a[o]))n[o]=a[o].map((c,d)=>{if(!W(c))return c;const p=Array.isArray(n[o])?n[o][d]:n[o];return ze(p,c,t)});else if(W(a[o])){const c=ge(_e(a[o]),void 0);n[o]=ze(c,a[o],t)}else typeof a[o]<"u"&&(n[o]=a[o])}return n}function Cn(e,t){if(!(W(e)&&W(t))){if(Array.isArray(t)){if(t.some(W))return;const r=Array.isArray(e)?e:[];return t.map((n,a)=>{var i;return(i=r[a])!==null&&i!==void 0?i:n})}if(typeof e<"u")return e}}function Yt(...e){return ze(...e,Cn)}function ur(...e){return ze(...e,()=>{})}function De(e,t,r){const n=i=>String.prototype.split.call(t,i).filter(Boolean).reduce((s,o)=>s!=null?s[o]:s,e),a=n(/[,[\]]+?/)||n(/[,[\].]+?/);return a===void 0||a===e?r:a}function ht(e,t,r){e&&(e=_e(e)),W(e)||(e={});const n=Array.isArray(t)?t:t.match(/[^.[\]]+/g)||[],a=n[n.length-1];if(!a)return e;let i=e;for(let s=0;s<n.length-1;s++){const o=n[s];if(!i[o]||!W(i[o])&&!Array.isArray(i[o])){const c=n[s+1];isNaN(Number(c))?i[o]={}:i[o]=[]}i=i[o]}return i[a]=r(i[a]),e}function V(e,t,r){return ht(e,t,()=>r)}function ft(e,t){if(!e||Object(e)!==e)return;typeof e<"u"&&(e=_e(e));const r=Array.isArray(t)?t:t.toString().match(/[^.[\]]+/g)||[],n=r.length===1?e:De(e,r.slice(0,-1).join("."));return Array.isArray(n)?n.splice(Number(r[r.length-1]),1):n==null||delete n[r[r.length-1]],e}function mt(e,t){return Tn(e,r=>W(r)?mt(r,t):Array.isArray(r)?r.length===0||r.every(n=>typeof n=="string")?t(r):r.some(n=>W(n)?mt(n,t):t(n)):t(r))}function at(e){return e?.nodeName==="INPUT"}function xn(e){return e?.nodeName==="TEXTAREA"}function it(e){return e?.nodeName==="SELECT"}function jt(e){return e?.nodeName==="FIELDSET"}function fe(e){return at(e)||xn(e)||it(e)}function Xt(e){return e.nodeType===Node.ELEMENT_NODE}function de(e,t){return t??(fe(e)?e.name:"")}function Ft(e){let t=e;for(;t&&t.nodeName!=="FORM";){if(t.hasAttribute("data-felte-ignore"))return!0;t=t.parentElement}return!1}function In(e,t){if(!(W(e)||W(t))){if(e===null||e==="")return t;if(t===null||t===""||!t)return e;if(!(!e||!t)){if(Array.isArray(e)){if(!Array.isArray(t))return[...e,t];const r=[],n=Math.max(t.length,e.length);for(let a=0;a<n;a++){let i=e[a],s=t[a];!W(i)&&!W(s)?(Array.isArray(i)||(i=[i]),Array.isArray(s)||(s=[s]),r.push(...i,...s)):r.push(tt([i??{},s??{}]))}return r.filter(Boolean)}return Array.isArray(t)||(t=[t]),[e,...t].reduce((r,n)=>r.concat(n),[]).filter(Boolean)}}}function tt(e){return ze(...e,In)}function Ln(e,t){return t?(Array.isArray(t)?t:[t]).map(n=>n(e)):[]}function Nt(e,t){return t?Array.isArray(t)?t.reduce((r,n)=>n(r),e):t(e):e}function dr(e=8){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let r="";for(let n=0;n<e;n++)r+=t.charAt(Math.floor(Math.random()*t.length));return r}function At(e,t,{onInit:r,onEnd:n}={}){let a;return(...i)=>{a||r?.(),a&&clearTimeout(a),a=setTimeout(()=>{e.apply(this,i),a=void 0,n?.()},t)}}function Mt(e){if(fe(e))return[e];if(e.childElementCount===0)return[];const t=new Set;for(const r of e.children){if(fe(r)&&t.add(r),jt(r))for(const n of r.elements)fe(n)&&t.add(n);r.childElementCount>0&&Mt(r).forEach(n=>t.add(n))}return Array.from(t)}function fr(e){for(const t of e.elements)!fe(t)&&!jt(t)||e.hasAttribute("data-felte-keep-on-remove")&&!t.hasAttribute("data-felte-keep-on-remove")&&(t.dataset.felteKeepOnRemove=e.dataset.felteKeepOnRemove)}function vr(e){return e.type.match(/^(number|range)$/)?e.value?+e.value:null:e.value}function Zt(e){var t;let r={},n={};for(const a of e.elements){if(jt(a)&&fr(a),!fe(a)||!a.name)continue;const i=de(a);if(at(a)){if(a.type==="checkbox"){if(typeof De(r,i)>"u"){if(Array.from(e.querySelectorAll(`[name="${a.name}"]`)).filter(c=>fe(c)?i===de(c):!1).length===1){r=V(r,i,a.checked),n=V(n,i,!1);continue}r=V(r,i,a.checked?[a.value]:[]),n=V(n,i,!1);continue}Array.isArray(De(r,i))&&a.checked&&(r=ht(r,i,o=>[...o,a.value]));continue}if(a.type==="radio"){if(De(r,i))continue;r=V(r,i,a.checked?a.value:void 0),n=V(n,i,!1);continue}if(a.type==="file"){r=V(r,i,a.multiple?Array.from(a.files||[]):(t=a.files)===null||t===void 0?void 0:t[0]),n=V(n,i,!1);continue}}else if(it(a)){if(!a.multiple)r=V(r,i,a.value);else{const c=Array.from(a.selectedOptions).map(d=>d.value);r=V(r,i,c)}n=V(n,i,!1);continue}const s=vr(a);r=V(r,i,s),n=V(n,i,!1)}return{defaultData:r,defaultTouched:n}}function Dn(e,t){var r;if(!fe(e))return;const n=t;if(at(e)){if(e.type==="checkbox"){const a=n;if(typeof a>"u"||typeof a=="boolean"){e.checked=!!a;return}Array.isArray(a)&&(a.includes(e.value)?e.checked=!0:e.checked=!1);return}if(e.type==="radio"){const a=n;e.value===a?e.checked=!0:e.checked=!1;return}if(e.type==="file"){if(t instanceof FileList)e.files=t;else if(t instanceof File&&typeof DataTransfer<"u"){const a=new DataTransfer;a.items.add(t),e.files=a.files}else if(typeof DataTransfer<"u"&&Array.isArray(t)&&t.some(a=>a instanceof File)){const a=new DataTransfer;for(const i of t)i instanceof File&&a.items.add(i);e.files=a.files}else(!t||Array.isArray(t)&&!t.length)&&(e.files=null,e.value="");return}}else if(it(e)){if(e.multiple){if(Array.isArray(n)){e.value=String((r=n[0])!==null&&r!==void 0?r:"");const i=n.map(s=>String(s));for(const s of e.options)i.includes(s.value)?s.selected=!0:s.selected=!1}}else{e.value=String(n??"");for(const i of e.options)i.value===String(n)?i.selected=!0:i.selected=!1}return}e.value=String(n??"")}function bt(e,t){for(const r of e.elements){if(jt(r)&&fr(r),!fe(r)||!r.name)continue;const n=de(r);Dn(r,De(t,n))}}function pr(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r}function Ie(e,t){return St(e,r=>W(r)?Ie(r,t):Array.isArray(r)?r.length===0||r.every(n=>typeof n=="string")?t:r.map(n=>{const a=Ie(n,t);return pr(a,["key"])}):t)}function Ye(e){return e?St(e,t=>W(t)?Ye(t):Array.isArray(t)?t.length===0||t.every(r=>typeof r=="string")?t:t.map(r=>{if(!W(r))return r;const n=Ye(r);return n.key||(n.key=dr()),n}):t):{}}function st(e){return e?St(e,t=>W(t)?st(t):Array.isArray(t)?t.length===0||t.every(r=>typeof r=="string")?t:t.map(r=>{if(!W(r))return r;const n=st(r);return pr(n,["key"])}):t):{}}function Nn(){class e extends CustomEvent{constructor(a){super("feltesuccess",{detail:a})}}class t extends CustomEvent{constructor(a){super("felteerror",{detail:a,cancelable:!0})}setErrors(a){this.preventDefault(),this.errors=a}}class r extends Event{constructor(){super("feltesubmit",{cancelable:!0})}handleSubmit(a){this.onSubmit=a}handleError(a){this.onError=a}handleSuccess(a){this.onSuccess=a}}return{createErrorEvent:n=>new t(n),createSubmitEvent:()=>new r,createSuccessEvent:n=>new e(n)}}function Mn(e){if(e)return async function(){let r=new FormData(e);const n=new URL(e.action),a=e.method.toLowerCase()==="get"?"get":n.searchParams.get("_method")||e.method;let i=e.enctype;e.querySelector('input[type="file"]')&&(i="multipart/form-data"),(a==="get"||i==="application/x-www-form-urlencoded")&&(r=new URLSearchParams(r));let s;a==="get"?(r.forEach((c,d)=>{n.searchParams.append(d,c)}),s={method:a,headers:{Accept:"application/json"}}):s={method:a,body:r,headers:Object.assign(Object.assign({},i!=="multipart/form-data"&&{"Content-Type":i}),{Accept:"application/json"})};const o=await window.fetch(n.toString(),s);if(o.ok)return o;throw new kn("An error occurred while submitting the form",o)}}function _t(e,t,r,n){return ht(e,t,a=>(typeof a<"u"&&!Array.isArray(a)||(a||(a=[]),typeof n>"u"?a.push(r):a.splice(n,0,r)),a))}function qn(e,t,r,n){return ht(e,t,a=>(!a||!Array.isArray(a)||([a[r],a[n]]=[a[n],a[r]]),a))}function Rn(e,t,r,n){return ht(e,t,a=>(!a||!Array.isArray(a)||a.splice(n,0,a.splice(r,1)[0]),a))}function Vt(e){return typeof e=="function"}function Ue(e){return(r,n)=>{if(typeof r=="string"){const a=r;e(i=>{const s=Vt(n)?n(De(i,a)):n;return V(i,a,s)})}else e(a=>Vt(r)?r(a):r)}}function Wn({stores:e,config:t,validateErrors:r,validateWarnings:n,_getCurrentExtenders:a}){var i;let s,o=Ye((i=t.initialValues)!==null&&i!==void 0?i:{});const{data:c,touched:d,errors:p,warnings:b,isDirty:k,isSubmitting:y,interacted:l}=e,h=Ue(c.update),x=Ue(d.update),P=Ue(p.update),w=Ue(b.update);function I(v){h(O=>{const F=v(O);return s&&bt(s,F),F})}const C=(v,O,F)=>{Ue(I)(v,O),typeof v=="string"&&F&&x(v,!0)};function H(v,O,F){const X=W(O)?Ie(O,!1):!1,ie=W(X)?ge(X,[]):[];O=W(O)?Object.assign(Object.assign({},O),{key:dr()}):O,p.update(G=>_t(G,v,ie,F)),b.update(G=>_t(G,v,ie,F)),d.update(G=>_t(G,v,X,F)),c.update(G=>{const U=_t(G,v,O,F);return setTimeout(()=>s&&bt(s,U)),U})}function q(v){p.update(v),b.update(v),d.update(v),c.update(O=>{const F=v(O);return setTimeout(()=>s&&bt(s,F)),F})}function L(v){q(O=>ft(O,v))}function D(v,O,F){q(X=>qn(X,v,O,F))}function Y(v,O,F){q(X=>Rn(X,v,O,F))}function S(v){const O=De(o,v),F=W(O)?Ie(O,!1):!1,X=W(F)?ge(F,[]):[];c.update(ie=>{const G=V(ie,v,O);return s&&bt(s,G),G}),d.update(ie=>V(ie,v,F)),p.update(ie=>V(ie,v,X)),b.update(ie=>V(ie,v,X))}const m=Ue(y.update),E=Ue(k.update),$=Ue(l.update);async function K(){const v=xe(c);d.set(Ie(v,!0)),l.set(null);const O=await r(v);return await n(v),O}function ee(){C(_e(o)),x(v=>ge(v,!1)),l.set(null),k.set(!1)}function z(v){return async function(F){var X,ie,G,U,re,oe,Ee;const{createErrorEvent:Ne,createSubmitEvent:ot,createSuccessEvent:Be}=Nn(),Pe=ot();s?.dispatchEvent(Pe);const A=(ie=(X=Pe.onError)!==null&&X!==void 0?X:v?.onError)!==null&&ie!==void 0?ie:t.onError,f=(U=(G=Pe.onSuccess)!==null&&G!==void 0?G:v?.onSuccess)!==null&&U!==void 0?U:t.onSuccess,T=(Ee=(oe=(re=Pe.onSubmit)!==null&&re!==void 0?re:v?.onSubmit)!==null&&oe!==void 0?oe:t.onSubmit)!==null&&Ee!==void 0?Ee:Mn(s);if(!T||(F?.preventDefault(),Pe.defaultPrevented))return;y.set(!0),l.set(null);const N=st(xe(c)),be=await r(N,v?.validate),Me=await n(N,v?.warn);if(Me&&b.set(ur(ge(N,[]),Me)),d.set(Ie(N,!0)),be&&(d.set(Ie(be,!0)),mt(be,ue=>Array.isArray(ue)?ue.length>=1:!!ue))){await new Promise(ue=>setTimeout(ue)),a().forEach(ue=>{var Se;return(Se=ue.onSubmitError)===null||Se===void 0?void 0:Se.call(ue,{data:N,errors:be})}),y.set(!1);return}const ke={event:F,setFields:C,setData:h,setTouched:x,setErrors:P,setWarnings:w,unsetField:L,addField:H,resetField:S,reset:ee,setInitialValues:se.setInitialValues,moveField:Y,swapFields:D,form:s,controls:s&&Array.from(s.elements).filter(fe),config:Object.assign(Object.assign({},t),v)};try{const ce=await T(N,ke);s?.dispatchEvent(Be(Object.assign({response:ce},ke))),await f?.(ce,ke)}catch(ce){const ue=Ne(Object.assign({error:ce},ke));if(s?.dispatchEvent(ue),!A&&!ue.defaultPrevented)throw ce;if(!A&&!ue.errors)return;const Se=ue.errors||await A?.(ce,ke);Se&&(d.set(Ie(Se,!0)),p.set(Se),await new Promise(Te=>setTimeout(Te)),a().forEach(Te=>{var qe;return(qe=Te.onSubmitError)===null||qe===void 0?void 0:qe.call(Te,{data:N,errors:xe(p)})}))}finally{y.set(!1)}}}const se={setData:h,setFields:C,setTouched:x,setErrors:P,setWarnings:w,setIsSubmitting:m,setIsDirty:E,setInteracted:$,validate:K,reset:ee,unsetField:L,resetField:S,addField:H,swapFields:D,moveField:Y,createSubmitHandler:z,handleSubmit:z(),setInitialValues:v=>{o=Ye(v)}};return{public:se,private:{_setFormNode(v){s=v},_getInitialValues:()=>o}}}function Un({helpers:e,stores:t,config:r,extender:n,createSubmitHandler:a,handleSubmit:i,_setFormNode:s,_getInitialValues:o,_setCurrentExtenders:c,_getCurrentExtenders:d}){const{setFields:p,setTouched:b,reset:k,setInitialValues:y}=e,{addValidator:l,addTransformer:h,validate:x}=e,{data:P,errors:w,warnings:I,touched:C,isSubmitting:H,isDirty:q,interacted:L,isValid:D,isValidating:Y}=t;function S(m){m.requestSubmit||(m.requestSubmit=i);function E(A){return function(f){return f({form:m,stage:A,controls:Array.from(m.elements).filter(fe),data:P,errors:w,warnings:I,touched:C,isValid:D,isValidating:Y,isSubmitting:H,isDirty:q,interacted:L,config:r,addValidator:l,addTransformer:h,setFields:p,validate:x,reset:k,createSubmitHandler:a,handleSubmit:i})}}c(n.map(E("MOUNT"))),m.noValidate=!!r.validate;const{defaultData:$,defaultTouched:K}=Zt(m);s(m),y(ur(_e($),o())),p(o()),C.set(K);function ee(A){const f=de(A),T=Array.from(m.querySelectorAll(`[name="${A.name}"]`)).filter(N=>fe(N)?f===de(N):!1);if(T.length!==0)return T.length===1?P.update(N=>V(N,de(A),A.checked)):P.update(N=>V(N,de(A),T.filter(at).filter(be=>be.checked).map(be=>be.value)))}function z(A){const f=m.querySelectorAll(`[name="${A.name}"]`),T=Array.from(f).find(N=>at(N)&&N.checked);P.update(N=>V(N,de(A),T?.value))}function se(A){var f;const T=Array.from((f=A.files)!==null&&f!==void 0?f:[]);P.update(N=>V(N,de(A),A.multiple?T:T[0]))}function ve(A){if(!A.multiple)P.update(f=>V(f,de(A),A.value));else{const f=Array.from(A.selectedOptions).map(T=>T.value);P.update(T=>V(T,de(A),f))}}function v(A){const f=A.target;if(!f||!fe(f)||it(f)||Ft(f)||["checkbox","radio","file"].includes(f.type)||!f.name)return;q.set(!0);const T=vr(f);L.set(f.name),P.update(N=>V(N,de(f),T))}function O(A){const f=A.target;if(!(!f||!fe(f)||Ft(f))&&f.name)if(b(de(f),!0),L.set(f.name),(it(f)||["checkbox","radio","file","hidden"].includes(f.type))&&q.set(!0),f.type==="hidden"&&P.update(T=>V(T,de(f),f.value)),it(f))ve(f);else if(at(f))f.type==="checkbox"?ee(f):f.type==="radio"?z(f):f.type==="file"&&se(f);else return}function F(A){const f=A.target;!f||!fe(f)||Ft(f)||f.name&&(b(de(f),!0),L.set(f.name))}function X(A){A.preventDefault(),k()}const ie={childList:!0,subtree:!0};function G(A){let f=xe(P),T=xe(C),N=xe(w),be=xe(I);for(const Me of A.reverse()){if(Me.hasAttribute("data-felte-keep-on-remove")&&Me.dataset.felteKeepOnRemove!=="false")continue;const ke=/.*(\[[0-9]+\]|\.[0-9]+)\.[^.]+$/;let ce=de(Me);const ue=xe(C);if(ke.test(ce)){const Te=ce.split(".").slice(0,-1).join("."),qe=De(ue,Te);W(qe)&&Object.keys(qe).length<=1&&(ce=Te)}f=ft(f,ce),T=ft(T,ce),N=ft(N,ce),be=ft(be,ce)}P.set(f),C.set(T),w.set(N),I.set(be)}const U=At(()=>{d().forEach(T=>{var N;return(N=T.destroy)===null||N===void 0?void 0:N.call(T)}),c(n.map(E("UPDATE")));const{defaultData:A,defaultTouched:f}=Zt(m);P.update(T=>Yt(T,A)),C.update(T=>Yt(T,f)),e.setFields(xe(P))},0);let re=[];const oe=At(()=>{d().forEach(A=>{var f;return(f=A.destroy)===null||f===void 0?void 0:f.call(A)}),c(n.map(E("UPDATE"))),G(re),re=[]},0);function Ee(A){Array.from(A.addedNodes).some(T=>Xt(T)?fe(T)?!0:Mt(T).length>0:!1)&&U()}function Ne(A){for(const f of A.removedNodes){if(!Xt(f))continue;const T=Mt(f);T.length!==0&&(re.push(...T),oe())}}function ot(A){for(const f of A)f.type==="childList"&&(f.addedNodes.length>0&&Ee(f),f.removedNodes.length>0&&Ne(f))}const Be=new MutationObserver(ot);Be.observe(m,ie),m.addEventListener("input",v),m.addEventListener("change",O),m.addEventListener("focusout",F),m.addEventListener("submit",i),m.addEventListener("reset",X);const Pe=w.subscribe(A=>{for(const f of m.elements){if(!fe(f)||!f.name)continue;const T=De(A,de(f)),N=Array.isArray(T)?T.join(`
`):typeof T=="string"?T:void 0;N!==f.dataset.felteValidationMessage&&(N?(f.dataset.felteValidationMessage=N,f.setAttribute("aria-invalid","true")):(delete f.dataset.felteValidationMessage,f.removeAttribute("aria-invalid")))}});return{destroy(){Be.disconnect(),m.removeEventListener("input",v),m.removeEventListener("change",O),m.removeEventListener("focusout",F),m.removeEventListener("submit",i),m.removeEventListener("reset",X),Pe(),d().forEach(A=>{var f;return(f=A.destroy)===null||f===void 0?void 0:f.call(A)})}}}return{form:S}}function Hn(e){const t={aborted:!1,priority:e};return{signal:t,abort(){t.aborted=!0}}}function $n(e,t){if(W(e))return!t||W(t)&&Object.keys(t).length===0?ge(e,null):void 0;if(Array.isArray(e)){if(e.some(W))return;const r=Array.isArray(t)?t:[];return e.map((n,a)=>{const i=r[a];return Array.isArray(i)&&i.length===0?null:n&&i||null})}return Array.isArray(t)&&t.length===0?null:Array.isArray(t)?e?t:null:e&&t?[t]:null}function zn(e,t){if(W(e))return!t||W(t)&&Object.keys(t).length===0?ge(e,null):void 0;if(Array.isArray(e)){if(e.some(W))return;const r=Array.isArray(t)?t:[];return e.map((n,a)=>{const i=r[a];return Array.isArray(i)&&i.length===0?null:i||null})}return Array.isArray(t)&&t.length===0?null:Array.isArray(t)?t:t?[t]:null}function Bn([e,t]){return ze(t,e,$n)}function Qn([e,t]){return ze(t,e,zn)}function Kn(e){return function(r,n,a){const i=Array.isArray(r)?r:[r],s=new Array(i.length),o=e(a),c=o.set,d=o.subscribe;let p;function b(){p=i.map((y,l)=>y.subscribe(h=>{s[l]=h,c(n(s))}))}function k(){p?.forEach(y=>y())}return o.subscribe=function(l){const h=d(l);return()=>{h()}},[o,b,k]}}function Gn(e,t){var r,n,a,i,s,o,c,d,p;const b=Kn(e),k=t.initialValues=t.initialValues?Ye(Nt(_e(t.initialValues),t.transform)):{},y=Ie(st(k),!1),l=e(y),h=e(0),[x,P,w]=b([l,h],([te,Z])=>mt(te,we=>!!we)&&Z>=1,!1);delete x.set,delete x.update;function I(te){let Z;return async function(we,Ce,Oe,Qe=!1){if(!Oe||!we)return;let Re=Ce&&Object.keys(Ce).length>0?Ce:ge(we,[]);const Ke=Hn(Qe);if((!Z?.signal.priority||Qe)&&(Z?.abort(),Z=Ke),Z.signal.priority&&!Qe)return;h.update(lt=>lt+1);const Ut=Ln(st(we),Oe);return Ut.forEach(async lt=>{const hr=await lt;Ke.signal.aborted||(Re=tt([Re,hr]),te.set(Re))}),await Promise.all(Ut),Z=void 0,h.update(lt=>lt-1),Re}}let C=ge(y,[]);const H=e(k),q=ge(y,[]),L=e(q),D=e(_e(q)),[Y,S,m]=b([L,D],tt,_e(q)),E=ge(y,[]),$=e(E),K=e(_e(E)),[ee,z,se]=b([$,K],tt,_e(E)),[ve,v,O]=b([Y,l],Bn,_e(q)),[F,X,ie]=b([ee,l],Qn,_e(E));let G=!1;const[U,re,oe]=b(Y,([te])=>{var Z;return G?!mt(te,me=>Array.isArray(me)?me.length>=1:!!me):(G=!0,!t.validate&&!(!((Z=t.debounced)===null||Z===void 0)&&Z.validate))},!t.validate&&!(!((r=t.debounced)===null||r===void 0)&&r.validate));delete U.set,delete U.update;const Ee=e(!1),Ne=e(!1),ot=e(null),Be=I(L),Pe=I($),A=I(D),f=I(K),T=At(A,(s=(a=(n=t.debounced)===null||n===void 0?void 0:n.validateTimeout)!==null&&a!==void 0?a:(i=t.debounced)===null||i===void 0?void 0:i.timeout)!==null&&s!==void 0?s:300,{onInit:()=>{h.update(te=>te+1)},onEnd:()=>{h.update(te=>te-1)}}),N=At(f,(p=(c=(o=t.debounced)===null||o===void 0?void 0:o.warnTimeout)!==null&&c!==void 0?c:(d=t.debounced)===null||d===void 0?void 0:d.timeout)!==null&&p!==void 0?p:300);async function be(te,Z){var me;const we=Be(te,C,Z??t.validate,!0);if(Z)return we;const Ce=A(te,C,(me=t.debounced)===null||me===void 0?void 0:me.validate,!0);return tt(await Promise.all([we,Ce]))}async function Me(te,Z){var me;const we=Pe(te,C,Z??t.warn,!0);if(Z)return we;const Ce=f(te,C,(me=t.debounced)===null||me===void 0?void 0:me.warn,!0);return tt(await Promise.all([we,Ce]))}let ke=q,ce=E;function ue(){const te=H.subscribe(Oe=>{var Qe,Re;const Ke=st(Oe);Be(Ke,C,t.validate),Pe(Ke,C,t.warn),T(Ke,C,(Qe=t.debounced)===null||Qe===void 0?void 0:Qe.validate),N(Ke,C,(Re=t.debounced)===null||Re===void 0?void 0:Re.warn)}),Z=l.subscribe(Oe=>{C=ge(Oe,[])}),me=Y.subscribe(Oe=>{ke=Oe}),we=ee.subscribe(Oe=>{ce=Oe});S(),re(),z(),v(),X(),P();function Ce(){te(),O(),m(),se(),ie(),oe(),w(),Z(),me(),we()}return Ce}function Se(te){L.set(te(ke)),D.set({})}function Te(te){$.set(te(ce)),K.set({})}function qe(te){Se(()=>te)}function mr(te){Te(()=>te)}return ve.set=qe,ve.update=Se,F.set=mr,F.update=Te,{data:H,errors:ve,warnings:F,touched:l,isValid:U,isSubmitting:Ee,isDirty:Ne,isValidating:x,interacted:ot,validateErrors:be,validateWarnings:Me,cleanup:t.preventStoreStart?()=>{}:ue(),start:ue}}function Jn(e,t){var r,n;(r=e.extend)!==null&&r!==void 0||(e.extend=[]),(n=e.debounced)!==null&&n!==void 0||(e.debounced={}),e.validate&&!Array.isArray(e.validate)&&(e.validate=[e.validate]),e.debounced.validate&&!Array.isArray(e.debounced.validate)&&(e.debounced.validate=[e.debounced.validate]),e.transform&&!Array.isArray(e.transform)&&(e.transform=[e.transform]),e.warn&&!Array.isArray(e.warn)&&(e.warn=[e.warn]),e.debounced.warn&&!Array.isArray(e.debounced.warn)&&(e.debounced.warn=[e.debounced.warn]);function a(z,{debounced:se,level:ve}={debounced:!1,level:"error"}){var v;const O=ve==="error"?"validate":"warn";(v=e.debounced)!==null&&v!==void 0||(e.debounced={});const F=se?e.debounced:e;F[O]?F[O]=[...F[O],z]:F[O]=[z]}function i(z){e.transform?e.transform=[...e.transform,z]:e.transform=[z]}const s=Array.isArray(e.extend)?e.extend:[e.extend];let o=[];const c=()=>o,d=z=>{o=z},{isSubmitting:p,isValidating:b,data:k,errors:y,warnings:l,touched:h,isValid:x,isDirty:P,cleanup:w,start:I,validateErrors:C,validateWarnings:H,interacted:q}=Gn(t.storeFactory,e),L=k.update,D=k.set,Y=z=>L(se=>Ye(Nt(z(se),e.transform))),S=z=>D(Ye(Nt(z,e.transform)));k.update=Y,k.set=S;const m=Wn({config:e,validateErrors:C,validateWarnings:H,_getCurrentExtenders:c,stores:{data:k,errors:y,warnings:l,touched:h,isSubmitting:p,isDirty:P,interacted:q}}),{createSubmitHandler:E,handleSubmit:$}=m.public;o=s.map(z=>z({stage:"SETUP",errors:y,warnings:l,touched:h,data:k,isDirty:P,isValid:x,isValidating:b,isSubmitting:p,interacted:q,config:e,addValidator:a,addTransformer:i,setFields:m.public.setFields,reset:m.public.reset,validate:m.public.validate,handleSubmit:$,createSubmitHandler:E}));const K=Object.assign({config:e,stores:{data:k,touched:h,errors:y,warnings:l,isSubmitting:p,isValidating:b,isValid:x,isDirty:P,interacted:q},createSubmitHandler:E,handleSubmit:$,helpers:Object.assign(Object.assign({},m.public),{addTransformer:i,addValidator:a}),extender:s,_getCurrentExtenders:c,_setCurrentExtenders:d},m.private),{form:ee}=Un(K);return Object.assign({data:k,errors:y,warnings:l,touched:h,isValid:x,isSubmitting:p,isValidating:b,isDirty:P,interacted:q,form:ee,cleanup:w,startStores:I},m.public)}function Yn(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r}function Xn(e){const t=Jn(e??{},{storeFactory:br}),{cleanup:r,startStores:n}=t,a=Yn(t,["cleanup","startStores"]);return yr(r),a}var Zn=ae('<p id="name-error" class="field-error svelte-t06kqd" role="alert"> </p>'),Vn=ae('<p class="submission-error svelte-t06kqd" role="alert"> </p>'),ea=ae('<section class="project-create svelte-t06kqd"><h2 class="svelte-t06kqd">Create project</h2> <form class="project-form svelte-t06kqd"><label for="proj-name" class="svelte-t06kqd">Project name</label> <input id="proj-name" name="name" type="text" placeholder="e.g. JavaScript"/> <!> <p class="hint svelte-t06kqd" id="project-hint">The project name appears in the sidebar list.</p> <!> <div class="actions svelte-t06kqd"><button type="submit" class="primary svelte-t06kqd"> </button> <button type="button" class="ghost svelte-t06kqd">Cancel</button></div></form></section>');function ta(e,t){Xe(t,!1);const r=()=>Bt(p,"$errors",a),n=()=>Bt(b,"$isSubmitting",a),[a,i]=Kr(),s=er();let o=he(null),c=he("project-hint");const{form:d,errors:p,isSubmitting:b,reset:k}=Xn({initialValues:{name:""},validate:S=>{const m={};return(!S.name||S.name.trim()==="")&&(m.name="Project name is required"),m},onSubmit:async S=>{M(o,null);const m=S.name?.trim();if(m)try{const E=await Q.createProject(m);s("created",{project:E.id}),k()}catch(E){console.error("Failed to create project",E),M(o,E?.message||"Unable to create project right now. Try again in a moment.")}}});function y(){k(),Q.selectProject("all")}nt(()=>r(),()=>{M(c,r()?.name?"name-error project-hint":"project-hint")}),Et(),et();var l=ea(),h=j(_(l),2),x=j(_(h),2);let P;var w=j(x,2);{var I=S=>{var m=Zn(),E=_(m,!0);g(m),pe(()=>le(E,(r(),R(()=>r().name)))),J(S,m)};ye(w,S=>{r(),R(()=>r()?.name)&&S(I)})}var C=j(w,4);{var H=S=>{var m=Vn(),E=_(m,!0);g(m),pe(()=>le(E,u(o))),J(S,m)};ye(C,S=>{u(o)&&S(H)})}var q=j(C,2),L=_(q),D=_(L,!0);g(L);var Y=j(L,2);Y.__click=y,g(q),g(h),Zr(h,S=>d?.(S)),g(l),pe(()=>{je(h,"aria-describedby",u(c)),je(x,"aria-invalid",(r(),R(()=>r()?.name?"true":"false"))),P=Dt(x,1,"svelte-t06kqd",null,P,{error:r()?.name}),L.disabled=n(),le(D,n()?"Creating...":"Create project"),Y.disabled=n()}),J(e,l),Ze(),i()}Ve(["click"]);var ra=ae('<section class="project-detail svelte-1ykxz3w"><header><h2> </h2> <div class="actions svelte-1ykxz3w"><button class="primary" aria-controls="add-section">+ New Learning Item</button></div></header> <!> <!></section>');function na(e,t){Xe(t,!1);let r=Je(t,"projectId",8),n=he();qt(async()=>{(!Q.all||Q.all.length===0)&&await Q.loadProjects()});function a(){B.toggleForm()}nt(()=>ne(r()),()=>{Q.all&&r()&&M(n,Q.all.find(l=>l.id===r()))}),Et(),et();var i=ra(),s=_(i),o=_(s),c=_(o,!0);g(o);var d=j(o,2),p=_(d);p.__click=a,g(d),g(s);var b=j(s,2);{var k=l=>{vn(l,{onSubmit:async h=>{const P=h.project&&String(h.project).trim().length>0?h.project:r()||void 0;await B.addCard({...h,project:P}),B.closeForm()}})};ye(b,l=>{ne(B),R(()=>B.isFormOpen)&&l(k)})}var y=j(b,2);wn(y,{}),g(i),pe(()=>{le(c,(u(n),R(()=>u(n)?u(n).name:"Project"))),je(p,"aria-expanded",(ne(B),R(()=>B.isFormOpen)))}),J(e,i),Ze()}Ve(["click"]);var aa=ae('<meta name="description" content="Finish what you start"/>'),ia=ae('<button class="primary" aria-label="Create project">+ New Project</button>'),sa=ae('<button class="ghost" aria-label="Back to projects">← Projects</button>'),oa=ae("<p>Loading...</p>"),la=ae('<div id="sr-announcements" class="sr-only" aria-live="polite" aria-atomic="true"></div> <div class="container"><header><h1>Learning Cards</h1> <p class="subtitle">Finish what you start</p> <div class="top-actions"><!></div></header> <main id="main-content"><!></main></div>',1);function ha(e,t){Xe(t,!1),qt(async()=>{await Promise.all([B.loadCards(),Q.loadProjects()])}),et();var r=la();Xr("1uha8ag",y=>{var l=aa();Wt(()=>{Br.title="Learning Cards"}),J(y,l)});var n=j($e(r),2),a=_(n),i=j(_(a),4),s=_(i);{var o=y=>{var l=ia();l.__click=()=>Q.selectCreateProject(),J(y,l)},c=y=>{var l=sa();l.__click=()=>Q.selectProject("all"),J(y,l)};ye(s,y=>{Q.selectedProject==="all"?y(o):y(c,!1)})}g(i),g(a);var d=j(a,2),p=_(d);{var b=y=>{var l=oa();J(y,l)},k=y=>{var l=Ge(),h=$e(l);{var x=w=>{jn(w,{$$events:{open:I=>Q.selectProject(I.detail.projectId)}})},P=w=>{var I=Ge(),C=$e(I);{var H=L=>{ta(L,{$$events:{created:async D=>{await Q.loadProjects(),Q.selectProject(D.detail.project)}}})},q=L=>{na(L,{get projectId(){return Q.selectedProject}})};ye(C,L=>{Q.selectedProject==="create"?L(H):L(q,!1)},!0)}J(w,I)};ye(h,w=>{Q.selectedProject==="all"?w(x):w(P,!1)})}J(y,l)};ye(p,y=>{B.isLoading||Q.isLoading?y(b):y(k,!1)})}g(d),g(n),J(e,r),Ze()}Ve(["click"]);export{ha as component};
