import{d as ie,f as S,g as qe,a as b,e as ge}from"../chunks/BGw5cKeJ.js";import{G as at,b as rt,aZ as nt,h as Fe,Z as it,C as ot,$ as Je,a1 as Ke,Q as Re,z as lt,aD as st,ah as ct,a_ as dt,a$ as ut,b0 as Ye,af as be,ay as Ze,b1 as He,aa as vt,e as pt,w as mt,g as e,ab as u,a8 as J,a9 as je,p as oe,d as ue,n,s as l,o as i,b2 as Ee,t as K,aY as H,m as le,b3 as Xe,l as fe,R as Te,b4 as ft,b5 as ht,ai as Ie,i as _t,ac as Ve,b6 as bt,u as gt,b7 as yt}from"../chunks/BVvvFQyP.js";import{s as O}from"../chunks/-U615j4X.js";import{i as z,b as Pe,p as Be}from"../chunks/Du0dFdXu.js";import{r as de,s as ne,a as ae,e as ye,m as we,i as wt,b as jt}from"../chunks/VFezhV5v.js";import"../chunks/cSjuJP2k.js";import{i as Pt}from"../chunks/CPxQz51b.js";function kt(d,t){let a=null,o=Fe;var c;if(Fe){a=lt;for(var s=it(document.head);s!==null&&(s.nodeType!==ot||s.data!==d);)s=Je(s);if(s===null)Ke(!1);else{var w=Je(s);s.remove(),Re(w)}}Fe||(c=document.head.appendChild(at()));try{rt(()=>t(c),nt)}finally{o&&(Ke(!0),Re(a))}}function Ge(d,t,a=!1){if(d.multiple){if(t==null)return;if(!ct(t))return dt();for(var o of d.options)o.selected=t.includes(Se(o));return}for(o of d.options){var c=Se(o);if(ut(c,t)){o.selected=!0;return}}(!a||t!==void 0)&&(d.selectedIndex=-1)}function $e(d){var t=new MutationObserver(()=>{Ge(d,d.__value)});t.observe(d,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),st(()=>{t.disconnect()})}function et(d,t,a=t){var o=new WeakSet,c=!0;Ye(d,"change",s=>{var w=s?"[selected]":":checked",_;if(d.multiple)_=[].map.call(d.querySelectorAll(w),Se);else{var j=d.querySelector(w)??d.querySelector("option:not([disabled])");_=j&&Se(j)}a(_),be!==null&&o.add(be)}),Ze(()=>{var s=t();if(d===document.activeElement){var w=He??be;if(o.has(w))return}if(Ge(d,s,c),c&&s===void 0){var _=d.querySelector(":checked");_!==null&&(s=Se(_),a(s))}d.__value=s,c=!1}),$e(d)}function Se(d){return"__value"in d?d.__value:d.value}function ee(d,t,a=t){var o=new WeakSet;Ye(d,"input",async c=>{var s=c?d.defaultValue:d.value;if(s=Qe(d)?We(s):s,a(s),be!==null&&o.add(be),await vt(),s!==(s=t())){var w=d.selectionStart,_=d.selectionEnd,j=d.value.length;if(d.value=s??"",_!==null){var D=d.value.length;w===_&&_===j&&D>j?(d.selectionStart=D,d.selectionEnd=D):(d.selectionStart=w,d.selectionEnd=Math.min(_,D))}}}),(Fe&&d.defaultValue!==d.value||pt(t)==null&&d.value)&&(a(Qe(d)?We(d.value):d.value),be!==null&&o.add(be)),mt(()=>{var c=t();if(d===document.activeElement){var s=He??be;if(o.has(s))return}Qe(d)&&c===We(d.value)||d.type==="date"&&!c&&!d.value||c!==d.value&&(d.value=c??"")})}function Qe(d){var t=d.type;return t==="number"||t==="range"}function We(d){return d===""?null:+d}class xt{#e;get all(){return e(this.#e)}set all(t){u(this.#e,t,!0)}#t;get isLoading(){return e(this.#t)}set isLoading(t){u(this.#t,t,!0)}#a;get isFormOpen(){return e(this.#a)}set isFormOpen(t){u(this.#a,t,!0)}#r;get filterStatus(){return e(this.#r)}set filterStatus(t){u(this.#r,t,!0)}#n;get filterQuery(){return e(this.#n)}set filterQuery(t){u(this.#n,t,!0)}#i;get filterProject(){return e(this.#i)}set filterProject(t){u(this.#i,t,!0)}constructor(){this.#e=J(je([])),this.#t=J(!1),this.#a=J(!1),this.#r=J("all"),this.#n=J(""),this.#i=J("all")}get filtered(){let t=this.all.slice();if(this.filterStatus!=="all"&&(t=t.filter(a=>this.filterStatus==="active"?a.status==="active":a.status==="done")),this.filterProject&&this.filterProject!=="all"&&(t=t.filter(a=>(a.project||"")===this.filterProject)),this.filterQuery&&this.filterQuery.trim()!==""){const a=this.filterQuery.toLowerCase();t=t.filter(o=>(o.title||"").toLowerCase().includes(a)||(o.prompt||"").toLowerCase().includes(a)||(o.topic||"").toLowerCase().includes(a)||(o.project||"").toLowerCase().includes(a))}return t}get activeCards(){return this.all.filter(t=>t.status==="active")}get completedCards(){return this.all.filter(t=>t.status==="done")}get cardCount(){return this.all.length}async loadCards(){if(!(typeof window>"u"||!("api"in window))){this.isLoading=!0;try{const a=(await window.api.getCards()).map(o=>({...o,createdAt:new Date(o.createdAt)})).sort((o,c)=>c.createdAt.getTime()-o.createdAt.getTime());this.all=a}catch(t){console.error("Failed to load cards:",t)}finally{this.isLoading=!1}}}async addCard(t){if(!(typeof window>"u"||!("api"in window)))try{const a=await window.api.addCard(t);return this.all=[a,...this.all],a}catch(a){throw console.error("Failed to add card:",a),a}}async updateCard(t){if(!(typeof window>"u"||!("api"in window)))try{const a=await window.api.updateCard(t),o=this.all.findIndex(c=>c.id===t.id);return o!==-1&&(this.all[o]=a),a}catch(a){throw console.error("Failed to update card:",a),a}}async deleteCard(t){if(!(typeof window>"u"||!("api"in window)))try{await window.api.deleteCard(t),this.all=this.all.filter(a=>a.id!==t)}catch(a){throw console.error("Failed to delete card:",a),a}}async updateCardStatus(t,a){if(!(typeof window>"u"||!("api"in window)))try{await window.api.toggleCard(t,a);const o=this.all.findIndex(c=>c.id===t);o!==-1&&(this.all[o]={...this.all[o],status:a})}catch(o){throw console.error("Failed to update card status:",o),o}}async runPrompt(t){if(!(typeof window>"u"||!("api"in window)))try{await window.api.runPrompt(t)}catch(a){throw console.error("Failed to run prompt:",a),a}}async runPromptWithSystem(t,a){if(typeof window>"u"||!("api"in window))return;let o=t;a&&a.trim()&&(o=`${a.trim()}

${t}`);try{await window.api.runPrompt(o)}catch(c){throw console.error("Failed to run prompt:",c),c}}toggleForm(){this.isFormOpen=!this.isFormOpen}openForm(){this.isFormOpen=!0}closeForm(){this.isFormOpen=!1}setFilterStatus(t){this.filterStatus=t}setFilterQuery(t){this.filterQuery=t}setFilterProject(t){this.filterProject=t}}const U=new xt;class Ct{#e;get all(){return e(this.#e)}set all(t){u(this.#e,t,!0)}#t;get isLoading(){return e(this.#t)}set isLoading(t){u(this.#t,t,!0)}#a;get viewMode(){return e(this.#a)}set viewMode(t){u(this.#a,t,!0)}#r;get selectedProjectId(){return e(this.#r)}set selectedProjectId(t){u(this.#r,t,!0)}constructor(){this.#e=J(je([])),this.#t=J(!1),this.#a=J("list"),this.#r=J(null)}get selectedProject(){return this.viewMode==="list"?"all":this.viewMode==="create"?"create":this.selectedProjectId||"all"}async loadProjects(){if(typeof window>"u"||!("api"in window)){console.warn("Window API not available, skipping project load");return}this.isLoading=!0;try{const t=await window.api.getProjects();Array.isArray(t)&&(this.all=t.slice().sort((a,o)=>a.name.localeCompare(o.name)))}catch(t){console.error("Failed to load projects from main process",t)}finally{this.isLoading=!1}}async createProject(t,a){const o=t.trim();if(!o)throw new Error("Project name is required");if(typeof window>"u"||!("api"in window))throw new Error("Window API not available - preload may not have loaded");const c=await window.api.createProject({name:o,systemPrompt:a});return this.all=[...this.all,c].sort((s,w)=>s.name.localeCompare(w.name)),c}selectAll(){this.viewMode="list",this.selectedProjectId=null,U.setFilterProject("all")}selectProject(t){if(t===null||t==="all"){this.selectAll();return}if(t==="create"){this.viewMode="create",this.selectedProjectId=null,U.setFilterProject("all");return}this.viewMode="detail",this.selectedProjectId=t,U.setFilterProject(t)}selectCreateProject(){this.viewMode="create",this.selectedProjectId=null,U.setFilterProject("all")}async updateProject(t){if(!t.id||!t.name.trim())throw new Error("Project ID and name are required");if(typeof window>"u"||!("api"in window))throw new Error("Window API not available");const a=await window.api.updateProject(t),o=this.all.findIndex(c=>c.id===t.id);return o!==-1&&(this.all[o]=a,this.all.sort((c,s)=>c.name.localeCompare(s.name))),a}async deleteProject(t){if(!t)throw new Error("Project ID is required");if(typeof window>"u"||!("api"in window))throw new Error("Window API not available");await window.api.deleteProject(t),this.all=this.all.filter(a=>a.id!==t),this.selectedProjectId===t&&this.selectAll()}findById(t){return this.all.find(a=>a.id===t)}}const q=new Ct;var St=S('<div role="alert" class="form-status error"> </div>'),Et=S('<span class="error-message"> </span>'),It=S('<span class="hint">Pick a clear name so you can find this project fast.</span>'),Ft=S('<span class="error-message"> </span>'),Tt=S('<span class="hint">This text will auto-prepend to every card prompt in the project—great for tone, context, or guardrails. Max 500 characters.</span>'),qt=S('<section id="edit-project-section"><form aria-labelledby="edit-project-heading"><h2 id="edit-project-heading">Edit Project</h2> <!> <div class="field"><label for="edit-project-name">Project name <span class="required">*</span></label> <input id="edit-project-name" type="text" autocomplete="off" required/> <!></div> <div class="field"><label for="edit-project-system-prompt">System prompt <span class="optional">(optional)</span></label> <textarea id="edit-project-system-prompt" placeholder="Add context or constraints that should prefix every card prompt for this project." rows="6"></textarea> <!></div> <div class="form-actions"><button type="submit" class="primary"> </button> <button type="button" class="ghost">Cancel</button></div></form></section>');function Lt(d,t){oe(t,!0);let a=J(je({name:"",systemPrompt:""})),o=je({name:"",systemPrompt:""}),c=J(""),s=J(!1);ue(()=>{u(a,{name:t.project.name,systemPrompt:t.project.systemPrompt||""},!0)}),ue(()=>{const m=e(a).name.trim();m.length===0?o.name="Project name is required":m.length>50?o.name="Project name must be less than 50 characters":o.name=""}),ue(()=>{e(a).systemPrompt.trim().length>8e3?o.systemPrompt="System prompt must be less than 8000 characters":o.systemPrompt=""});let w=H(()=>!o.name&&!o.systemPrompt&&e(a).name.trim().length>0),_=null;ue(()=>{const m=document.getElementById("edit-project-name");m&&setTimeout(()=>m.focus(),0);const I=V=>{V.key==="Escape"&&t.onCancel()};return window.addEventListener("keydown",I),()=>{window.removeEventListener("keydown",I)}});async function j(m){if(m.preventDefault(),!(!e(w)||e(s))){u(s,!0),u(c,"");try{const I=e(a).systemPrompt.trim();await t.onSubmit({id:t.project.id,name:e(a).name.trim(),systemPrompt:I||void 0}),D(`Project "${e(a).name}" updated successfully`)}catch(I){u(c,I instanceof Error?I.message:"Failed to update project",!0),D(e(c))}finally{u(s,!1)}}}function D(m){const I=document.getElementById("sr-announcements");I&&(I.textContent=m)}var L=qt(),B=n(L),F=l(n(B),2);{var R=m=>{var I=St(),V=n(I,!0);i(I),K(()=>O(V,e(c))),b(m,I)};z(F,m=>{e(c)&&m(R)})}var G=l(F,2),v=l(n(G),2);de(v);let g;var Q=l(v,2);{var W=m=>{var I=Et(),V=n(I,!0);i(I),K(()=>O(V,o.name)),b(m,I)},A=m=>{var I=It();b(m,I)};z(Q,m=>{o.name?m(W):m(A,!1)})}i(G);var T=l(G,2),f=l(n(T),2);Ee(f);let x;var P=l(f,2);{var y=m=>{var I=Ft(),V=n(I,!0);i(I),K(()=>O(V,o.systemPrompt)),b(m,I)},C=m=>{var I=Tt();b(m,I)};z(P,m=>{o.systemPrompt?m(y):m(C,!1)})}i(T);var k=l(T,2),E=n(k),h=n(E,!0);i(E);var M=l(E,2);M.__click=function(...m){t.onCancel?.apply(this,m)},i(k),i(B),i(L),Pe(L,m=>_=m,()=>_),K(()=>{v.disabled=e(s),g=ne(v,1,"",null,g,{error:o.name}),f.disabled=e(s),x=ne(f,1,"",null,x,{error:o.systemPrompt}),E.disabled=!e(w)||e(s),O(h,e(s)?"Saving...":"Save changes"),M.disabled=e(s)}),qe("submit",B,j),ee(v,()=>e(a).name,m=>e(a).name=m),ee(f,()=>e(a).systemPrompt,m=>e(a).systemPrompt=m),b(d,L),le()}ie(["click"]);var Dt=S('<details class="more-menu svelte-rmjvfi"><summary class="more-trigger svelte-rmjvfi"><span aria-hidden="true">⋮</span></summary> <div class="menu svelte-rmjvfi" role="menu"><button type="button" role="menuitem" class="svelte-rmjvfi">Edit</button> <button type="button" role="menuitem" class="danger svelte-rmjvfi">Delete</button></div></details>');function tt(d,t){oe(t,!0);const a=Xe();let o=null,c=null;function s(){a("edit"),o&&(o.open=!1)}function w(){a("delete"),o&&(o.open=!1)}ue(()=>{o?.open&&requestAnimationFrame(()=>{c?.querySelector("button")?.focus()})});var _=Dt(),j=n(_);j.__keydown=F=>{(F.key==="Enter"||F.key===" ")&&(F.preventDefault(),o&&(o.open=!o.open))};var D=l(j,2),L=n(D);L.__click=s;var B=l(L,2);B.__click=w,i(D),Pe(D,F=>c=F,()=>c),i(_),Pe(_,F=>o=F,()=>o),K(()=>ae(j,"aria-label",t.ariaLabel)),b(d,_),le()}ie(["keydown","click"]);var At=S('<li class="empty svelte-138d5ja">No projects yet — create one.</li>'),Mt=S('<li><div class="project-card-wrapper svelte-138d5ja"><button class="project-card svelte-138d5ja"><span class="project-name svelte-138d5ja"> </span></button> <div class="project-actions svelte-138d5ja"><!></div></div></li>'),Nt=S('<dialog open class="modal-overlay"><div class="modal-content" aria-labelledby="edit-project-heading" role="document"><!></div></dialog>'),Ot=S('<section class="projects svelte-138d5ja"><header><h2>Projects</h2> <div class="actions svelte-138d5ja"><p class="hint">Create a project from the header above.</p></div></header> <ul class="project-list svelte-138d5ja"><!></ul> <!></section>');function Bt(d,t){oe(t,!0);function a(v){q.selectProject(v),t.onopen?.({projectId:v})}let o=J(null);function c(v){const g=q.all.find(Q=>Q.id===v);g&&u(o,g,!0)}async function s(v){const g=q.all.find(Q=>Q.id===v);window.confirm(`Are you sure you want to delete the project "${g?.name}"?

This will unassign all cards from this project.`)&&await q.deleteProject(v)}async function w(v){await q.updateProject(v),u(o,null)}function _(){u(o,null)}var j=Ot(),D=l(n(j),2),L=n(D);{var B=v=>{var g=At();b(v,g)},F=v=>{var g=ge(),Q=fe(g);ye(Q,17,()=>q.all,W=>W.id,(W,A)=>{var T=Mt(),f=n(T),x=n(f);x.__click=()=>a(e(A).id);var P=n(x),y=n(P,!0);i(P),i(x);var C=l(x,2),k=n(C);{let E=H(()=>`More actions for project ${e(A).name}`);tt(k,{get ariaLabel(){return e(E)},$$events:{edit:()=>c(e(A).id),delete:()=>s(e(A).id)}})}i(C),i(f),i(T),K(()=>{ae(x,"aria-label",`Open project ${e(A).name}`),O(y,e(A).name)}),b(W,T)}),b(v,g)};z(L,v=>{q.all.length===0?v(B):v(F,!1)})}i(D);var R=l(D,2);{var G=v=>{var g=Nt();g.__click=A=>{A.target===A.currentTarget&&_()},g.__keydown=A=>A.key==="Escape"&&_();var Q=n(g),W=n(Q);Lt(W,{get project(){return e(o)},onSubmit:w,onCancel:_}),i(Q),i(g),b(v,g)};z(R,v=>{e(o)&&v(G)})}i(j),b(d,j),le()}ie(["click","keydown"]);var Qt=S('<p id="name-error" class="field-error svelte-t06kqd" role="alert"> </p>'),Wt=S('<p id="system-prompt-error" class="field-error svelte-t06kqd" role="alert"> </p>'),Gt=S('<p class="submission-error svelte-t06kqd" role="alert"> </p>'),Jt=S('<section class="project-create svelte-t06kqd"><h2 class="svelte-t06kqd">Create project</h2> <form class="project-form svelte-t06kqd"><label for="proj-name" class="svelte-t06kqd">Project name</label> <input id="proj-name" type="text" placeholder="e.g. JavaScript"/> <!> <p class="hint svelte-t06kqd" id="project-hint">The project name appears in the sidebar list.</p> <label for="proj-system-prompt" class="svelte-t06kqd">System prompt <span class="optional">(optional)</span></label> <textarea id="proj-system-prompt" placeholder="e.g. You are an expert JavaScript developer. Always provide code examples and explain best practices." rows="4"></textarea> <!> <p class="hint svelte-t06kqd" id="system-prompt-hint">This prompt will be prepended to all learning cards in this project when sent to ChatGPT.</p> <!> <div class="actions svelte-t06kqd"><button type="submit" class="primary svelte-t06kqd"> </button> <button type="button" class="ghost svelte-t06kqd">Cancel</button></div></form></section>');function Kt(d,t){oe(t,!0);let a=J(je({name:"",systemPrompt:""})),o=J(null),c=J(!1),s=J(je({})),w=H(()=>e(s).name?"name-error project-hint":"project-hint");function _(k){const E={};return(!k.name||k.name.trim()==="")&&(E.name="Project name is required"),k.systemPrompt&&k.systemPrompt.length>8e3&&(E.systemPrompt="System prompt must be less than 8000 characters"),E}async function j(k){if(k.preventDefault(),u(s,_(e(a)),!0),!(Object.keys(e(s)).length>0)){u(o,null),u(c,!0);try{const E=e(a).name.trim(),h=e(a).systemPrompt.trim()||void 0,M=await q.createProject(E,h);u(a,{name:"",systemPrompt:""},!0),u(s,{},!0),t.oncreated?.({project:M.id})}catch(E){console.error("Failed to create project",E),u(o,E instanceof Error?E.message:"Unable to create project right now. Try again in a moment.",!0)}finally{u(c,!1)}}}function D(){u(a,{name:"",systemPrompt:""},!0),u(s,{},!0),u(o,null),q.selectProject("all")}var L=Jt(),B=l(n(L),2),F=l(n(B),2);de(F);let R;var G=l(F,2);{var v=k=>{var E=Qt(),h=n(E,!0);i(E),K(()=>O(h,e(s).name)),b(k,E)};z(G,k=>{e(s).name&&k(v)})}var g=l(G,6);Ee(g);let Q;var W=l(g,2);{var A=k=>{var E=Wt(),h=n(E,!0);i(E),K(()=>O(h,e(s).systemPrompt)),b(k,E)};z(W,k=>{e(s).systemPrompt&&k(A)})}var T=l(W,4);{var f=k=>{var E=Gt(),h=n(E,!0);i(E),K(()=>O(h,e(o))),b(k,E)};z(T,k=>{e(o)&&k(f)})}var x=l(T,2),P=n(x),y=n(P,!0);i(P);var C=l(P,2);C.__click=D,i(x),i(B),i(L),K(()=>{ae(B,"aria-describedby",e(w)),ae(F,"aria-invalid",e(s).name?"true":"false"),F.disabled=e(c),R=ne(F,1,"svelte-t06kqd",null,R,{error:e(s).name}),ae(g,"aria-invalid",e(s).systemPrompt?"true":"false"),g.disabled=e(c),Q=ne(g,1,"",null,Q,{error:e(s).systemPrompt}),P.disabled=e(c),O(y,e(c)?"Creating...":"Create project"),C.disabled=e(c)}),qe("submit",B,j),ee(F,()=>e(a).name,k=>e(a).name=k),ee(g,()=>e(a).systemPrompt,k=>e(a).systemPrompt=k),b(d,L),le()}ie(["click"]);var Rt=S('<div role="status" class="form-status"> </div>'),Vt=S('<span class="error-message"> </span>'),zt=S('<span class="hint">Give your learning card a clear, memorable name.</span>'),Ut=S("<option> </option>"),Yt=S('<span class="error-message"> </span>'),Zt=S('<span class="hint">Give your project a short, unique name.</span>'),Ht=S('<div class="field"><label for="project">New project name <span class="required">*</span></label> <input id="project" type="text" autocomplete="off"/> <!></div>'),Xt=S('<span class="error-message"> </span>'),$t=S('<span class="hint">What do you want to learn or understand?</span>'),ea=S('<section id="add-section"><form aria-labelledby="add-heading"><h2>New Card Details</h2> <!> <div class="field"><label for="title">Title <span class="required">*</span></label> <input id="title" type="text" autocomplete="off" required/> <!></div> <div class="field"><label for="topic">Topic <span class="optional">(optional)</span></label> <input id="topic" type="text" autocomplete="off"/> <span class="hint">e.g., JavaScript, Design Patterns, Math</span></div> <div class="field"><label for="project-select">Project <span class="optional">(optional)</span></label> <select id="project-select" aria-describedby="project-hint"><option>Select a project</option><!><option>+ Create new project...</option></select> <span id="project-hint" class="hint">Assign this card to a project or create a new one.</span></div> <!> <div class="field"><label for="prompt">Learning prompt <span class="required">*</span></label> <textarea id="prompt" required placeholder="e.g. Explain the concept of closures in JavaScript"></textarea> <!></div> <div class="form-actions"><button type="submit" class="primary"> </button> <button type="button" class="ghost">Cancel</button></div></form></section>');function ta(d,t){oe(t,!0);let a=J(""),o=J(""),c=J("");ue(()=>{u(c,t.initialProject??(q.selectedProject!=="all"&&q.selectedProject!=="create"?q.selectedProject:""),!0)});let s=J(!1),w=J(""),_=J(""),j=J(!1),D=H(()=>{const r=e(a).trim();return r.length===0?"":r.length<3?"Title must be at least 3 characters":r.length>100?"Title must be less than 100 characters":""}),L=H(()=>{const r=e(w).trim();return r.length===0?"":r.length<10?"Prompt must be at least 10 characters":r.length>8e3?"Prompt must be less than 8000 characters":""}),B=H(()=>{if(e(s)){const r=e(c).trim();if(r.length===0)return"Project name is required";if(r.length<2)return"Project name must be at least 2 characters";if(r.length>50)return"Project name must be less than 50 characters";if(q.all.some(p=>p.name.toLowerCase()===r.toLowerCase()))return"A project with this name already exists"}return""}),F=H(()=>e(a).trim().length>0&&e(w).trim().length>0&&!e(D)&&!e(L)&&!e(B)),R=J(null);ue(()=>{const r=document.getElementById("title");r&&setTimeout(()=>r.focus(),0)});async function G(r){if(r.preventDefault(),!(!e(F)||e(j))){u(j,!0),u(_,"");try{await t.onSubmit({title:e(a).trim(),prompt:e(w).trim(),topic:e(o).trim()||void 0,project:e(s)?e(c).trim()||void 0:e(c)||void 0}),g(),t.onCancel?.(),W(`Card "${e(a)}" added successfully`)}catch(p){u(_,p instanceof Error?p.message:"Failed to add card",!0),W(e(_))}finally{u(j,!1)}}}function v(r){const p=r.target;p.value==="__create__"?(u(s,!0),u(c,"")):(u(s,!1),u(c,p.value,!0))}function g(){u(a,""),u(o,""),u(c,""),u(s,!1),u(w,""),u(_,"")}function Q(){g(),t.onCancel?.()}function W(r){const p=document.getElementById("sr-announcements");p&&(p.textContent=r)}var A=ea(),T=n(A),f=l(n(T),2);{var x=r=>{var p=Rt(),N=n(p,!0);i(p),K(()=>O(N,e(_))),b(r,p)};z(f,r=>{e(_)&&r(x)})}var P=l(f,2),y=l(n(P),2);de(y);let C;var k=l(y,2);{var E=r=>{var p=Vt(),N=n(p,!0);i(p),K(()=>O(N,e(D))),b(r,p)},h=r=>{var p=zt();b(r,p)};z(k,r=>{e(D)?r(E):r(h,!1)})}i(P);var M=l(P,2),m=l(n(M),2);de(m),Te(2),i(M);var I=l(M,2),V=l(n(I),2);V.__change=v;var te=n(V);te.value=te.__value="";var se=l(te);ye(se,17,()=>q.all,r=>r.id,(r,p)=>{var N=Ut(),re=n(N,!0);i(N);var Y={};K(()=>{O(re,e(p).name),Y!==(Y=e(p).id)&&(N.value=(N.__value=e(p).id)??"")}),b(r,N)});var ve=l(se);ve.value=ve.__value="__create__",i(V),Te(2),i(I);var X=l(I,2);{var he=r=>{var p=Ht(),N=l(n(p),2);de(N);let re;var Y=l(N,2);{var _e=Z=>{var ce=Yt(),Oe=n(ce,!0);i(ce),K(()=>O(Oe,e(B))),b(Z,ce)},Ne=Z=>{var ce=Zt();b(Z,ce)};z(Y,Z=>{e(B)?Z(_e):Z(Ne,!1)})}i(p),K(()=>{N.disabled=e(j),re=ne(N,1,"",null,re,{error:e(B)})}),ee(N,()=>e(c),Z=>u(c,Z)),b(r,p)};z(X,r=>{e(s)&&r(he)})}var pe=l(X,2),$=l(n(pe),2);Ee($);let ke;var Le=l($,2);{var De=r=>{var p=Xt(),N=n(p,!0);i(p),K(()=>O(N,e(L))),b(r,p)},Ae=r=>{var p=$t();b(r,p)};z(Le,r=>{e(L)?r(De):r(Ae,!1)})}i(pe);var xe=l(pe,2),me=n(xe),Me=n(me,!0);i(me);var Ce=l(me,2);Ce.__click=Q,i(xe),i(T),i(A),Pe(A,r=>u(R,r),()=>e(R)),K(()=>{y.disabled=e(j),C=ne(y,1,"",null,C,{error:e(D)}),m.disabled=e(j),V.disabled=e(j),$.disabled=e(j),ke=ne($,1,"",null,ke,{error:e(L)}),me.disabled=!e(F)||e(j),O(Me,e(j)?"Saving...":"Save card"),Ce.disabled=e(j)}),qe("submit",T,G),ee(y,()=>e(a),r=>u(a,r)),ee(m,()=>e(o),r=>u(o,r)),et(V,()=>e(c),r=>u(c,r)),ee($,()=>e(w),r=>u(w,r)),b(d,A),le()}ie(["change","click"]);var aa=S('<div role="status" class="form-status"> </div>'),ra=S('<span class="error-message"> </span>'),na=S(`<span class="hint">Choose a short title you'll recognize later.</span>`),ia=S("<option> </option>"),oa=S('<span class="error-message"> </span>'),la=S('<span class="hint">Keep it concise and unique.</span>'),sa=S('<div class="field"><label for="edit-project">New project name <span class="required">*</span></label> <input id="edit-project" type="text" autocomplete="off"/> <!></div>'),ca=S('<span class="error-message"> </span>'),da=S('<span class="hint">Describe what you want to learn so the AI can help.</span>'),ua=S('<section id="edit-section"><form aria-labelledby="edit-heading"><h2 id="edit-heading">Edit learning item</h2> <!> <div class="field"><label for="edit-title">Title <span class="required">*</span></label> <input id="edit-title" type="text" autocomplete="off" required/> <!></div> <div class="field"><label for="edit-topic">Topic <span class="optional">(optional)</span></label> <input id="edit-topic" type="text" autocomplete="off"/> <span class="hint">e.g., JavaScript, Design Patterns, Math</span></div> <div class="field"><label for="edit-project-select">Project <span class="optional">(optional)</span></label> <select id="edit-project-select" aria-describedby="edit-project-hint"><option>Select a project</option><!><option>+ Create new project...</option></select> <span id="edit-project-hint" class="hint">Attach to an existing project or make a new one.</span></div> <!> <div class="field"><label for="edit-prompt">Learning prompt <span class="required">*</span></label> <textarea id="edit-prompt" required placeholder="e.g. Explain the concept of closures in JavaScript"></textarea> <!></div> <div class="form-actions"><button type="submit" class="primary"> </button> <button type="button" class="ghost">Cancel</button></div></form></section>');function va(d,t){oe(t,!0);let a=J(""),o=J(""),c=J(""),s=J(!1),w=J(""),_=J(""),j=J(!1);ue(()=>{u(a,t.card.title,!0),u(o,t.card.topic||"",!0),u(c,t.card.project||"",!0),u(w,t.card.prompt,!0),u(s,!1)});let D=H(()=>{const r=e(a).trim();return r.length===0?"Title is required":r.length<3?"Title must be at least 3 characters":r.length>100?"Title must be less than 100 characters":""}),L=H(()=>{const r=e(w).trim();return r.length===0?"Prompt is required":r.length<10?"Prompt must be at least 10 characters":r.length>8e3?"Prompt must be less than 8000 characters":""}),B=H(()=>{if(e(s)){const r=e(c).trim();if(r.length===0)return"Project name is required";if(r.length<2)return"Project name must be at least 2 characters";if(r.length>50)return"Project name must be less than 50 characters";if(q.all.some(p=>p.name.toLowerCase()===r.toLowerCase()))return"A project with this name already exists"}return""}),F=H(()=>e(a).trim().length>0&&e(w).trim().length>0&&!e(D)&&!e(L)&&!e(B)),R=null,G=null,v=null;ue(()=>{const r=document.getElementById("edit-title");r&&setTimeout(()=>r.focus(),0);const p=()=>{if(!R)return;const _e=R.querySelectorAll('input:not([disabled]), textarea:not([disabled]), button:not([disabled]), select:not([disabled]), [tabindex]:not([tabindex="-1"])');_e.length>0&&(G=_e[0],v=_e[_e.length-1])};p();const N=Y=>{Y.key==="Tab"&&(p(),Y.shiftKey?document.activeElement===G&&(Y.preventDefault(),v?.focus()):document.activeElement===v&&(Y.preventDefault(),G?.focus()))},re=Y=>{Y.key==="Escape"&&t.onCancel()};return R?.addEventListener("keydown",N),window.addEventListener("keydown",re),()=>{R?.removeEventListener("keydown",N),window.removeEventListener("keydown",re)}});async function g(r){if(r.preventDefault(),!(!e(F)||e(j))){u(j,!0),u(_,"");try{await t.onSubmit({id:t.card.id,title:e(a).trim(),prompt:e(w).trim(),topic:e(o).trim()||void 0,project:e(s)?e(c).trim()||void 0:e(c)||void 0}),W(`Card "${e(a)}" updated successfully`)}catch(p){u(_,p instanceof Error?p.message:"Failed to update card",!0),W(e(_))}finally{u(j,!1)}}}function Q(r){const p=r.target;p.value==="__create__"?(u(s,!0),u(c,"")):(u(s,!1),u(c,p.value,!0))}function W(r){const p=document.getElementById("sr-announcements");p&&(p.textContent=r)}var A=ua(),T=n(A),f=l(n(T),2);{var x=r=>{var p=aa(),N=n(p,!0);i(p),K(()=>O(N,e(_))),b(r,p)};z(f,r=>{e(_)&&r(x)})}var P=l(f,2),y=l(n(P),2);de(y);let C;var k=l(y,2);{var E=r=>{var p=ra(),N=n(p,!0);i(p),K(()=>O(N,e(D))),b(r,p)},h=r=>{var p=na();b(r,p)};z(k,r=>{e(D)?r(E):r(h,!1)})}i(P);var M=l(P,2),m=l(n(M),2);de(m),Te(2),i(M);var I=l(M,2),V=l(n(I),2);V.__change=Q;var te=n(V);te.value=te.__value="";var se=l(te);ye(se,17,()=>q.all,r=>r.id,(r,p)=>{var N=ia(),re=n(N,!0);i(N);var Y={};K(()=>{O(re,e(p).name),Y!==(Y=e(p).id)&&(N.value=(N.__value=e(p).id)??"")}),b(r,N)});var ve=l(se);ve.value=ve.__value="__create__",i(V),Te(2),i(I);var X=l(I,2);{var he=r=>{var p=sa(),N=l(n(p),2);de(N);let re;var Y=l(N,2);{var _e=Z=>{var ce=oa(),Oe=n(ce,!0);i(ce),K(()=>O(Oe,e(B))),b(Z,ce)},Ne=Z=>{var ce=la();b(Z,ce)};z(Y,Z=>{e(B)?Z(_e):Z(Ne,!1)})}i(p),K(()=>{N.disabled=e(j),re=ne(N,1,"",null,re,{error:e(B)})}),ee(N,()=>e(c),Z=>u(c,Z)),b(r,p)};z(X,r=>{e(s)&&r(he)})}var pe=l(X,2),$=l(n(pe),2);Ee($);let ke;var Le=l($,2);{var De=r=>{var p=ca(),N=n(p,!0);i(p),K(()=>O(N,e(L))),b(r,p)},Ae=r=>{var p=da();b(r,p)};z(Le,r=>{e(L)?r(De):r(Ae,!1)})}i(pe);var xe=l(pe,2),me=n(xe),Me=n(me,!0);i(me);var Ce=l(me,2);Ce.__click=function(...r){t.onCancel?.apply(this,r)},i(xe),i(T),i(A),Pe(A,r=>R=r,()=>R),K(()=>{y.disabled=e(j),C=ne(y,1,"",null,C,{error:e(D)}),m.disabled=e(j),V.disabled=e(j),$.disabled=e(j),ke=ne($,1,"",null,ke,{error:e(L)}),me.disabled=!e(F)||e(j),O(Me,e(j)?"Saving...":"Save changes"),Ce.disabled=e(j)}),qe("submit",T,g),ee(y,()=>e(a),r=>u(a,r)),ee(m,()=>e(o),r=>u(o,r)),et(V,()=>e(c),r=>u(c,r)),ee($,()=>e(w),r=>u(w,r)),b(d,A),le()}ie(["change","click"]);var pa=S('<div class="modal-backdrop svelte-10arwa" role="dialog" aria-modal="true" tabindex="-1"><div class="modal svelte-10arwa" role="document"><header class="svelte-10arwa"><h2 class="svelte-10arwa"> </h2></header> <div class="body svelte-10arwa"><label class="svelte-10arwa">Title <input class="svelte-10arwa"/></label> <label class="svelte-10arwa">Content <textarea class="svelte-10arwa"></textarea></label> <label class="svelte-10arwa">Tags (comma separated) <input class="svelte-10arwa"/></label></div> <footer class="svelte-10arwa"><button type="button" class="secondary svelte-10arwa">Cancel</button> <button type="button" class="primary svelte-10arwa">Save</button></footer></div></div>');function ze(d,t){oe(t,!1);let a=Be(t,"note",8,null),o=Be(t,"cardId",8,null),c=Be(t,"api",8,null),s=Ie(""),w=Ie(""),_=Ie(""),j=Ie(null);function D(){return c()?c():typeof window<"u"&&window.api?window.api:null}async function L(){const h=e(_).split(",").map(m=>m.trim()).filter(Boolean),M=D();M&&(a()&&a().id?await M.updateNote({id:a().id,title:e(s),content:e(w),tags:h}):o()&&await M.createNote({cardId:o(),title:e(s),content:e(w),tags:h}),window.dispatchEvent(new CustomEvent("notes:changed",{detail:{cardId:o()}})),we.pop())}function B(){we.pop()}function F(h){h.key==="Escape"&&(h.stopPropagation(),B())}ft(()=>_t(a()),()=>{u(s,a()?.title||""),u(w,a()?.content||""),u(_,(a()?.tags||[]).join(", "))}),ht(),Pt();var R=pa();R.__keydown=F;var G=n(R),v=n(G),g=n(v),Q=n(g,!0);i(g),i(v);var W=l(v,2),A=n(W),T=l(n(A));de(T),Pe(T,h=>u(j,h),()=>e(j)),i(A);var f=l(A,2),x=l(n(f));Ee(x),ae(x,"rows",8),i(f);var P=l(f,2),y=l(n(P));de(y),i(P),i(W);var C=l(W,2),k=n(C);k.__click=B;var E=l(k,2);E.__click=L,i(C),i(G),i(R),K(()=>O(Q,a()?"Edit Note":"New Note")),ee(T,()=>e(s),h=>u(s,h)),ee(x,()=>e(w),h=>u(w,h)),ee(y,()=>e(_),h=>u(_,h)),b(d,R),le()}ie(["keydown","click"]);var ma=S('<div class="empty">No notes yet. Click "New Note" to add one.</div>'),fa=S('<article class="note-item svelte-1t0p0k1"><h4> </h4> <div class="meta svelte-1t0p0k1"> </div> <pre class="content svelte-1t0p0k1"> </pre> <div class="actions svelte-1t0p0k1"><button type="button">Edit</button> <button type="button" class="danger svelte-1t0p0k1">Delete</button></div></article>'),ha=S('<div class="notes-modal-backdrop svelte-1t0p0k1" role="dialog" aria-modal="true" tabindex="-1"><div class="notes-modal svelte-1t0p0k1"><header class="svelte-1t0p0k1"><h3> </h3> <button type="button" class="close svelte-1t0p0k1">✕</button></header> <div class="notes-list svelte-1t0p0k1"><!></div> <footer><button type="button" class="primary svelte-1t0p0k1">New Note</button></footer></div></div>');function _a(d,t){oe(t,!0);const a=Xe();let o=J(je([])),c=J(null);function s(){return t.api?t.api:typeof window<"u"&&window.api?window.api:null}async function w(){if(!t.cardId)return;const y=s();y&&u(o,await y.getNotes(t.cardId),!0)}Ve(()=>{w(),setTimeout(()=>e(c)?.focus(),0)});function _(){const y=s();we.push(ze,{cardId:t.cardId,note:null,api:y})}function j(y){const C=s();we.push(ze,{cardId:t.cardId,note:y,api:C})}async function D(y){if(!(t.confirmFn??(typeof window<"u"?window.confirm.bind(window):()=>!0))("Delete this note?"))return;const k=s();k&&(await k.deleteNote(y),await w())}function L(){a("close")}function B(y){const C=y.detail;!C||C.cardId!==t.cardId||w()}Ve(()=>{w(),setTimeout(()=>e(c)?.focus(),0),window.addEventListener("notes:changed",B)}),bt(()=>window.removeEventListener("notes:changed",B));var F=ha(),R=n(F),G=n(R),v=n(G),g=n(v);i(v);var Q=l(v,2);Q.__click=L,ae(Q,"title","Close notes"),i(G);var W=l(G,2),A=n(W);{var T=y=>{var C=ma();b(y,C)},f=y=>{var C=ge(),k=fe(C);ye(k,17,()=>e(o),wt,(E,h)=>{var M=fa(),m=n(M),I=n(m,!0);i(m);var V=l(m,2),te=n(V,!0);i(V);var se=l(V,2),ve=n(se,!0);i(se);var X=l(se,2),he=n(X);he.__click=()=>j(e(h));var pe=l(he,2);pe.__click=()=>D(e(h).id),i(X),i(M),K($=>{O(I,e(h).title||"(untitled)"),O(te,$),O(ve,e(h).content)},[()=>e(h).tags?.map($=>`#${$}`).join(" ")]),b(E,M)}),b(y,C)};z(A,y=>{e(o).length===0?y(T):y(f,!1)})}i(W);var x=l(W,2),P=n(x);P.__click=_,i(x),i(R),i(F),Pe(F,y=>u(c,y),()=>e(c)),K(()=>{O(g,`Notes for ${(t.cardTitle||"Card")??""}`),ae(Q,"aria-label","Close notes for "+(t.cardTitle||"card"))}),b(d,F),le()}ie(["click"]);var ba=S('<p class="topic"> </p>'),ga=S('<p class="project">Project: <strong> </strong></p>'),ya=S('<article><header><h3> </h3> <!> <!></header> <section><div> </div> <pre class="prompt"> </pre></section> <footer class="card-actions"><button type="button" class="primary">Start in ChatGPT</button> <label class="check svelte-ybr5in"><input type="checkbox" class="svelte-ybr5in"/> <span class="check-label svelte-ybr5in"> </span></label> <button type="button" class="secondary open-notes">Open Notes</button> <!></footer></article>');function Ue(d,t){oe(t,!0);const a=H(()=>t.card.status==="done"),o=H(()=>e(a)?"✓ Completed":"Active"),c=H(()=>t.card.project?q.all.find(h=>h.id===t.card.project)?.name||t.card.project:"");var s=ya();let w;var _=n(s),j=n(_),D=n(j,!0);i(j);var L=l(j,2);{var B=h=>{var M=ba(),m=n(M,!0);i(M),K(()=>O(m,t.card.topic)),b(h,M)};z(L,h=>{t.card.topic&&h(B)})}var F=l(L,2);{var R=h=>{var M=ga(),m=l(n(M)),I=n(m,!0);i(m),i(M),K(()=>O(I,e(c))),b(h,M)};z(F,h=>{t.card.project&&h(R)})}i(_);var G=l(_,2),v=n(G);let g;var Q=n(v,!0);i(v);var W=l(v,2),A=n(W,!0);i(W),i(G);var T=l(G,2),f=n(T);f.__click=h=>{h.stopPropagation(),t.onStart(t.card)};var x=l(f,2),P=n(x);de(P),P.__click=h=>{h.stopPropagation(),t.onToggle(t.card.id,e(a)?"active":"done")};var y=l(P,2),C=n(y,!0);i(y),i(x);var k=l(x,2);k.__click=h=>{h.stopPropagation(),we.open(_a,{cardId:t.card.id,cardTitle:t.card.title,api:t.noteApi})};var E=l(k,2);{let h=H(()=>`More actions for ${t.card.title}`);tt(E,{get ariaLabel(){return e(h)},$$events:{edit:()=>t.onEdit?.(t.card),delete:()=>t.onDelete?.(t.card.id)}})}i(T),i(s),K(()=>{w=ne(s,1,"card svelte-ybr5in",null,w,{done:e(a)}),O(D,t.card.title),g=ne(v,1,"status svelte-ybr5in",null,g,{done:e(a)}),O(Q,e(o)),O(A,t.card.prompt),ae(f,"aria-label",`Start chat with prompt for ${t.card.title}`),jt(P,e(a)),ae(P,"aria-label",e(a)?`Mark ${t.card.title} as active`:`Mark ${t.card.title} as done`),O(C,e(a)?"Completed":"Mark done"),ae(k,"aria-label",`Open notes for ${t.card.title}`)}),b(d,s),le()}ie(["click"]);var wa=S('<p class="empty-state" role="status" aria-live="polite">No learning cards match your filters.</p>'),ja=S('<section class="project-group"><h3> </h3> <!></section>'),Pa=S('<section><h2>Your learning cards</h2> <div class="filters"><label class="filter">Show: <select><option> </option><option> </option><option> </option></select></label> <label class="filter search">Search: <input type="search" placeholder="Search title, prompt, topic" aria-label="Search cards"/></label></div> <div class="card-list"><!></div></section>');function ka(d,t){oe(t,!0);function a(x){const P=new Map;for(const C of x){const k=C.project||"";P.has(k)||P.set(k,[]),P.get(k).push(C)}const y=[];for(const[C,k]of P.entries())y.push({project:C,cards:k,headingId:`project-${(C||"unassigned").replace(/\s+/g,"-")}`});return y.sort((C,k)=>{const E=C.project?q.all.find(M=>M.id===C.project)?.name||C.project:"Unassigned",h=k.project?q.all.find(M=>M.id===k.project)?.name||k.project:"Unassigned";return E.localeCompare(h)}),y}const o=H(()=>U.filterProject==="all"?a(U.filtered):[]);function c(x){const P=x.target;U.setFilterStatus(P.value)}function s(x){const P=x.target;U.setFilterQuery(P.value)}var w=Pa(),_=l(n(w),2),j=n(_),D=l(n(j));D.__change=c;var L=n(D),B=n(L);i(L),L.value=L.__value="all";var F=l(L),R=n(F);i(F),F.value=F.__value="active";var G=l(F),v=n(G);i(G),G.value=G.__value="done",i(D),i(j);var g=l(j,2),Q=l(n(g));Q.__input=s,i(g),i(_);var W=l(_,2),A=n(W);{var T=x=>{var P=wa();b(x,P)},f=x=>{var P=ge(),y=fe(P);{var C=E=>{var h=ge(),M=fe(h);ye(M,17,()=>e(o),m=>m.headingId,(m,I)=>{var V=ja(),te=n(V),se=n(te,!0);i(te);var ve=l(te,2);ye(ve,17,()=>e(I).cards,X=>X.id,(X,he)=>{Ue(X,{get card(){return e(he)},get onStart(){return t.onStart},get onToggle(){return t.onToggle},get onEdit(){return t.onEdit},get onDelete(){return t.onDelete}})}),i(V),K(X=>{ae(V,"aria-labelledby",e(I).headingId),ae(te,"id",e(I).headingId),O(se,X)},[()=>e(I).project?q.all.find(X=>X.id===e(I).project)?.name||e(I).project:"Unassigned"]),b(m,V)}),b(E,h)},k=E=>{var h=ge(),M=fe(h);ye(M,17,()=>U.filtered,m=>m.id,(m,I)=>{Ue(m,{get card(){return e(I)},get onStart(){return t.onStart},get onToggle(){return t.onToggle},get onEdit(){return t.onEdit},get onDelete(){return t.onDelete}})}),b(E,h)};z(y,E=>{U.filterProject==="all"?E(C):E(k,!1)},!0)}b(x,P)};z(A,x=>{U.filtered.length===0?x(T):x(f,!1)})}i(W),i(w),K(()=>{O(B,`All (${U.all.length??""})`),O(R,`Active (${U.activeCards.length??""})`),O(v,`Completed (${U.completedCards.length??""})`)}),b(d,w),le()}ie(["change","input"]);var xa=S('<dialog open class="modal-overlay"><div class="modal-content" aria-labelledby="edit-heading" role="document"><!></div></dialog>'),Ca=S('<section class="project-detail svelte-1ykxz3w"><header><h2> </h2> <div class="actions svelte-1ykxz3w"><button class="primary" type="button">+ New Learning Item</button></div></header> <!> <!></section>');function Sa(d,t){oe(t,!0);const a=H(()=>{if(!(!q.all||!t.projectId))return q.all.find(f=>f.id===t.projectId)});ue(()=>{(!q.all||q.all.length===0)&&q.loadProjects()});function o(){we.open(ta,{initialProject:t.projectId,onSubmit:async f=>{await c(f),we.close()},onCancel:()=>we.close()})}async function c(f){const P=f.project&&String(f.project).trim().length>0?f.project:t.projectId||void 0;await U.addCard({...f,project:P}),U.closeForm()}async function s(f){let x;f.project&&(x=q.all.find(y=>y.id===f.project)?.systemPrompt),await U.runPromptWithSystem(f.prompt,x)}async function w(f,x){await U.updateCardStatus(f,x)}let _=J(null);function j(f){u(_,f,!0)}async function D(f){await U.updateCard(f),u(_,null)}function L(){u(_,null)}async function B(f){window.confirm("Are you sure you want to delete this learning card?")&&await U.deleteCard(f)}var F=Ca(),R=n(F),G=n(R),v=n(G,!0);i(G);var g=l(G,2),Q=n(g);Q.__click=o,i(g),i(R);var W=l(R,2);{var A=f=>{var x=xa();x.__click=C=>{C.target===C.currentTarget&&L()},x.__keydown=C=>C.key==="Escape"&&L();var P=n(x),y=n(P);va(y,{get card(){return e(_)},onSubmit:D,onCancel:L}),i(P),i(x),b(f,x)};z(W,f=>{e(_)&&f(A)})}var T=l(W,2);ka(T,{onStart:s,onToggle:w,onEdit:j,onDelete:B}),i(F),K(()=>O(v,e(a)?e(a).name:"Project")),b(d,F),le()}ie(["click","keydown"]);var Ea=S('<meta name="description" content="Finish what you start"/>'),Ia=S('<button class="primary" aria-label="Create project">+ New Project</button>'),Fa=S('<button class="ghost" aria-label="Back to projects">← Projects</button>'),Ta=S("<option> </option>"),qa=S('<div class="project-controls svelte-1uha8ag"><label class="project-filter svelte-1uha8ag">Project: <select aria-label="Switch project" class="svelte-1uha8ag"><option>All projects</option><!></select></label> <button class="ghost" aria-label="Back to projects">← Projects</button></div>'),La=S("<p>Loading...</p>"),Da=S('<div id="sr-announcements" class="sr-only" aria-live="polite" aria-atomic="true"></div> <div class="container"><header><h1>Learning Space</h1> <p class="subtitle">Finish what you start</p> <div class="top-actions"><!></div></header> <main id="main-content"><!></main></div>',1);function Ga(d,t){oe(t,!0),gt(()=>{(async()=>await Promise.all([U.loadCards(),q.loadProjects()]))()});function a(v){const g=v.project;q.selectProject(g)}function o(v){const Q=v.target.value;Q==="all"?q.selectAll():Q&&q.selectProject(Q)}var c=Da();kt("1uha8ag",v=>{var g=Ea();Ze(()=>{yt.title="Learning Space"}),b(v,g)});var s=l(fe(c),2),w=n(s),_=l(n(w),4),j=n(_);{var D=v=>{var g=Ia();g.__click=()=>q.selectCreateProject(),b(v,g)},L=v=>{var g=ge(),Q=fe(g);{var W=T=>{var f=Fa();f.__click=()=>q.selectProject("all"),b(T,f)},A=T=>{var f=qa(),x=n(f),P=l(n(x));P.__change=o;var y=n(P);y.value=y.__value="all";var C=l(y);ye(C,17,()=>q.all,h=>h.id,(h,M)=>{var m=Ta(),I=n(m,!0);i(m);var V={};K(()=>{O(I,e(M).name),V!==(V=e(M).id)&&(m.value=(m.__value=e(M).id)??"")}),b(h,m)}),i(P);var k;$e(P),i(x);var E=l(x,2);E.__click=()=>q.selectProject("all"),i(f),K(()=>{k!==(k=q.selectedProject)&&(P.value=(P.__value=q.selectedProject)??"",Ge(P,q.selectedProject))}),b(T,f)};z(Q,T=>{q.selectedProject==="create"?T(W):T(A,!1)},!0)}b(v,g)};z(j,v=>{q.selectedProject==="all"?v(D):v(L,!1)})}i(_),i(w);var B=l(w,2),F=n(B);{var R=v=>{var g=La();b(v,g)},G=v=>{var g=ge(),Q=fe(g);{var W=T=>{Bt(T,{onopen:f=>q.selectProject(f.projectId)})},A=T=>{var f=ge(),x=fe(f);{var P=C=>{Kt(C,{oncreated:a})},y=C=>{Sa(C,{get projectId(){return q.selectedProject}})};z(x,C=>{q.selectedProject==="create"?C(P):C(y,!1)},!0)}b(T,f)};z(Q,T=>{q.selectedProject==="all"?T(W):T(A,!1)},!0)}b(v,g)};z(F,v=>{U.isLoading||q.isLoading?v(R):v(G,!1)})}i(B),i(s),b(d,c),le()}ie(["click","change"]);export{Ga as component};
