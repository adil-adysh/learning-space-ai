import{f as L,a as E,c as _e}from"../chunks/t9XZ3s1d.js";import{k as ie,m as Nt,M as pt,g as t,_ as Mt,O as Ot,P as Rt,Q as lt,D as Qe,R as Ge,B as Be,ab as mt,aA as Bt,ai as st,F as Ee,J as et,L as Ht,ay as nt,i as ht,a9 as ct,aD as me,aH as Kt,aI as Qt,aJ as Gt,w as Je,aK as ke,G as _t,I as bt,aL as Ye,au as tt,ax as Ut,H as Wt,x as gt,aM as yt,V as wt,aN as Vt,aO as Jt,aq as zt,aP as Yt,aQ as Xt,aR as jt,S as Pt,aS as Et,aT as Zt,aU as $t,aV as ea,aW as ta,aX as aa,aF as ra,b as He,U as na,a0 as h,aE as V,$ as he,p as ue,a as Ne,q as l,v as d,s,aY as We,t as U,aG as te,o as ve,n as oe,aj as ze,aZ as kt,a_ as xt,e as at,u as ia,a$ as oa}from"../chunks/ChQVnDdA.js";import{d as Te,s as K,e as ee}from"../chunks/BJ4j-6eR.js";import{i as W,b as Me,p as Ae}from"../chunks/tYfENZ9I.js";import"../chunks/C0yemUDO.js";import{c as St,o as Ct,a as la}from"../chunks/C2rwsXmI.js";import{i as it}from"../chunks/B0M9FM8o.js";function sa(r,e){return e}function ca(r,e,a){for(var n=[],o=e.length,i,u=e.length,m=0;m<o;m++){let N=e[m];bt(N,()=>{if(i){if(i.pending.delete(N),i.done.add(N),i.pending.size===0){var T=r.outrogroups;rt(nt(i.done)),T.delete(i),T.size===0&&(r.outrogroups=null)}}else u-=1},!1)}if(u===0){var v=n.length===0&&a!==null;if(v){var k=a,w=k.parentNode;Ut(w),w.append(k),r.items.clear()}rt(e,!v)}else i={pending:new Set(e),done:new Set},(r.outrogroups??=new Set).add(i)}function rt(r,e=!0){for(var a=0;a<r.length;a++)Wt(r[a],e)}var dt;function Fe(r,e,a,n,o,i=null){var u=r,m=new Map,v=(e&yt)!==0;if(v){var k=r;u=ie?Qe(gt(k)):k.appendChild(Je())}ie&&Nt();var w=null,N=Mt(()=>{var p=a();return ht(p)?p:p==null?[]:nt(p)}),T,D=!0;function M(){c.fallback=w,da(c,T,u,e,n),w!==null&&(T.length===0?(w.f&ke)===0?_t(w):(w.f^=ke,Ke(w,null,u)):bt(w,()=>{w=null}))}var b=pt(()=>{T=t(N);var p=T.length;let j=!1;if(ie){var S=Ot(u)===Rt;S!==(p===0)&&(u=lt(),Qe(u),Ge(!1),j=!0)}for(var x=new Set,A=Ee,q=Ht(),f=0;f<p;f+=1){ie&&Be.nodeType===mt&&Be.data===Bt&&(u=Be,j=!0,Ge(!1));var g=T[f],y=n(g,f),_=D?null:m.get(y);_?(_.v&&st(_.v,g),_.i&&st(_.i,f),q&&A.skipped_effects.delete(_.e)):(_=ua(m,D?u:dt??=Je(),g,y,f,o,e,a),D||(_.e.f|=ke),m.set(y,_)),x.add(y)}if(p===0&&i&&!w&&(D?w=et(()=>i(u)):(w=et(()=>i(dt??=Je())),w.f|=ke)),ie&&p>0&&Qe(lt()),!D)if(q){for(const[C,O]of m)x.has(C)||A.skipped_effects.add(O.e);A.oncommit(M),A.ondiscard(()=>{})}else M();j&&Ge(!0),t(N)}),c={effect:b,items:m,outrogroups:null,fallback:w};D=!1,ie&&(u=Be)}function da(r,e,a,n,o){var i=(n&Vt)!==0,u=e.length,m=r.items,v=r.effect.first,k,w=null,N,T=[],D=[],M,b,c,p;if(i)for(p=0;p<u;p+=1)M=e[p],b=o(M,p),c=m.get(b).e,(c.f&ke)===0&&(c.nodes?.a?.measure(),(N??=new Set).add(c));for(p=0;p<u;p+=1){if(M=e[p],b=o(M,p),c=m.get(b).e,r.outrogroups!==null)for(const _ of r.outrogroups)_.pending.delete(c),_.done.delete(c);if((c.f&ke)!==0)if(c.f^=ke,c===v)Ke(c,null,a);else{var j=w?w.next:v;c===r.effect.last&&(r.effect.last=c.prev),c.prev&&(c.prev.next=c.next),c.next&&(c.next.prev=c.prev),Ie(r,w,c),Ie(r,c,j),Ke(c,j,a),w=c,T=[],D=[],v=w.next;continue}if((c.f&Ye)!==0&&(_t(c),i&&(c.nodes?.a?.unfix(),(N??=new Set).delete(c))),c!==v){if(k!==void 0&&k.has(c)){if(T.length<D.length){var S=D[0],x;w=S.prev;var A=T[0],q=T[T.length-1];for(x=0;x<T.length;x+=1)Ke(T[x],S,a);for(x=0;x<D.length;x+=1)k.delete(D[x]);Ie(r,A.prev,q.next),Ie(r,w,A),Ie(r,q,S),v=S,w=q,p-=1,T=[],D=[]}else k.delete(c),Ke(c,v,a),Ie(r,c.prev,c.next),Ie(r,c,w===null?r.effect.first:w.next),Ie(r,w,c),w=c;continue}for(T=[],D=[];v!==null&&v!==c;)(k??=new Set).add(v),D.push(v),v=v.next;if(v===null)continue}(c.f&ke)===0&&T.push(c),w=c,v=c.next}if(r.outrogroups!==null){for(const _ of r.outrogroups)_.pending.size===0&&(rt(nt(_.done)),r.outrogroups?.delete(_));r.outrogroups.size===0&&(r.outrogroups=null)}if(v!==null||k!==void 0){var f=[];if(k!==void 0)for(c of k)(c.f&Ye)===0&&f.push(c);for(;v!==null;)(v.f&Ye)===0&&v!==r.fallback&&f.push(v),v=v.next;var g=f.length;if(g>0){var y=(n&yt)!==0&&u===0?a:null;if(i){for(p=0;p<g;p+=1)f[p].nodes?.a?.measure();for(p=0;p<g;p+=1)f[p].nodes?.a?.fix()}ca(r,f,y)}}i&&wt(()=>{if(N!==void 0)for(c of N)c.nodes?.a?.apply()})}function ua(r,e,a,n,o,i,u,m){var v=(u&Qt)!==0?(u&Gt)===0?me(a,!1,!1):ct(a):null,k=(u&Kt)!==0?ct(o):null;return{v,i:k,e:et(()=>(i(e,v??a,k??o,m),()=>{r.delete(n)}))}}function Ke(r,e,a){if(r.nodes)for(var n=r.nodes.start,o=r.nodes.end,i=e&&(e.f&ke)===0?e.nodes.start:a;n!==null;){var u=tt(n);if(i.before(n),n===o)return;n=u}}function Ie(r,e,a){e===null?r.effect.first=a:e.next=a,a===null?r.effect.last=e:a.prev=e}function va(r,e){let a=null,n=ie;var o;if(ie){a=Be;for(var i=gt(document.head);i!==null&&(i.nodeType!==mt||i.data!==r);)i=tt(i);if(i===null)Ge(!1);else{var u=tt(i);i.remove(),Qe(u)}}ie||(o=document.head.appendChild(Je()));try{pt(()=>e(o),Jt)}finally{n&&(Ge(!0),Qe(a))}}const ut=[...` 	
\r\f \v\uFEFF`];function fa(r,e,a){var n=r==null?"":""+r;if(a){for(var o in a)if(a[o])n=n?n+" "+o:o;else if(n.length)for(var i=o.length,u=0;(u=n.indexOf(o,u))>=0;){var m=u+i;(u===0||ut.includes(n[u-1]))&&(m===n.length||ut.includes(n[m]))?n=(u===0?"":n.substring(0,u))+n.substring(m+1):u=m}}return n===""?null:n}function de(r,e,a,n,o,i){var u=r.__className;if(ie||u!==a||u===void 0){var m=fa(a,n,i);(!ie||m!==r.getAttribute("class"))&&(m==null?r.removeAttribute("class"):r.className=m),r.__className=a}else if(i&&o!==i)for(var v in i){var k=!!i[v];(o==null||k!==!!o[v])&&r.classList.toggle(v,k)}return i}function ot(r,e,a=!1){if(r.multiple){if(e==null)return;if(!ht(e))return Yt();for(var n of r.options)n.selected=e.includes(Ue(n));return}for(n of r.options){var o=Ue(n);if(Xt(o,e)){n.selected=!0;return}}(!a||e!==void 0)&&(r.selectedIndex=-1)}function It(r){var e=new MutationObserver(()=>{ot(r,r.__value)});e.observe(r,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),zt(()=>{e.disconnect()})}function Ft(r,e,a=e){var n=new WeakSet,o=!0;jt(r,"change",i=>{var u=i?"[selected]":":checked",m;if(r.multiple)m=[].map.call(r.querySelectorAll(u),Ue);else{var v=r.querySelector(u)??r.querySelector("option:not([disabled])");m=v&&Ue(v)}a(m),Ee!==null&&n.add(Ee)}),Pt(()=>{var i=e();if(r===document.activeElement){var u=Et??Ee;if(n.has(u))return}if(ot(r,i,o),o&&i===void 0){var m=r.querySelector(":checked");m!==null&&(i=Ue(m),a(i))}r.__value=i,o=!1}),It(r)}function Ue(r){return"__value"in r?r.__value:r.value}const pa=Symbol("is custom element"),ma=Symbol("is html");function be(r){if(ie){var e=!1,a=()=>{if(!e){if(e=!0,r.hasAttribute("value")){var n=r.value;re(r,"value",null),r.value=n}if(r.hasAttribute("checked")){var o=r.checked;re(r,"checked",null),r.checked=o}}};r.__on_r=a,wt(a),Zt()}}function ha(r,e){var a=Tt(r);a.checked!==(a.checked=e??void 0)&&(r.checked=e)}function re(r,e,a,n){var o=Tt(r);ie&&(o[e]=r.getAttribute(e),e==="src"||e==="srcset"||e==="href"&&r.nodeName==="LINK")||o[e]!==(o[e]=a)&&(e==="loading"&&(r[$t]=a),a==null?r.removeAttribute(e):typeof a!="string"&&_a(r).includes(e)?r[e]=a:r.setAttribute(e,a))}function Tt(r){return r.__attributes??={[pa]:r.nodeName.includes("-"),[ma]:r.namespaceURI===ea}}var vt=new Map;function _a(r){var e=r.getAttribute("is")||r.nodeName,a=vt.get(e);if(a)return a;vt.set(e,a=[]);for(var n,o=r,i=Element.prototype;i!==o;){n=aa(o);for(var u in n)n[u].set&&a.push(u);o=ta(o)}return a}function ae(r,e,a=e){var n=new WeakSet;jt(r,"input",async o=>{var i=o?r.defaultValue:r.value;if(i=Xe(r)?Ze(i):i,a(i),Ee!==null&&n.add(Ee),await ra(),i!==(i=e())){var u=r.selectionStart,m=r.selectionEnd,v=r.value.length;if(r.value=i??"",m!==null){var k=r.value.length;u===m&&m===v&&k>v?(r.selectionStart=k,r.selectionEnd=k):(r.selectionStart=u,r.selectionEnd=Math.min(m,k))}}}),(ie&&r.defaultValue!==r.value||He(e)==null&&r.value)&&(a(Xe(r)?Ze(r.value):r.value),Ee!==null&&n.add(Ee)),na(()=>{var o=e();if(r===document.activeElement){var i=Et??Ee;if(n.has(i))return}Xe(r)&&o===Ze(r.value)||r.type==="date"&&!o&&!r.value||o!==r.value&&(r.value=o??"")})}function Xe(r){var e=r.type;return e==="number"||e==="range"}function Ze(r){return r===""?null:+r}function $e(r){return function(...e){var a=e[0];return a.stopPropagation(),r?.apply(this,e)}}class ba{#e;get all(){return t(this.#e)}set all(e){h(this.#e,e,!0)}#t;get isLoading(){return t(this.#t)}set isLoading(e){h(this.#t,e,!0)}#a;get isFormOpen(){return t(this.#a)}set isFormOpen(e){h(this.#a,e,!0)}#r;get filterStatus(){return t(this.#r)}set filterStatus(e){h(this.#r,e,!0)}#n;get filterQuery(){return t(this.#n)}set filterQuery(e){h(this.#n,e,!0)}#i;get filterProject(){return t(this.#i)}set filterProject(e){h(this.#i,e,!0)}constructor(){this.#e=V(he([])),this.#t=V(!1),this.#a=V(!1),this.#r=V("all"),this.#n=V(""),this.#i=V("all")}get filtered(){let e=this.all.slice();if(this.filterStatus!=="all"&&(e=e.filter(a=>this.filterStatus==="active"?a.status==="active":a.status==="done")),this.filterProject&&this.filterProject!=="all"&&(e=e.filter(a=>(a.project||"")===this.filterProject)),this.filterQuery&&this.filterQuery.trim()!==""){const a=this.filterQuery.toLowerCase();e=e.filter(n=>(n.title||"").toLowerCase().includes(a)||(n.prompt||"").toLowerCase().includes(a)||(n.topic||"").toLowerCase().includes(a)||(n.project||"").toLowerCase().includes(a))}return e}get activeCards(){return this.all.filter(e=>e.status==="active")}get completedCards(){return this.all.filter(e=>e.status==="done")}get cardCount(){return this.all.length}async loadCards(){if(!(typeof window>"u"||!("api"in window))){this.isLoading=!0;try{const a=(await window.api.getCards()).map(n=>({...n,createdAt:new Date(n.createdAt)})).sort((n,o)=>o.createdAt.getTime()-n.createdAt.getTime());this.all=a}catch(e){console.error("Failed to load cards:",e)}finally{this.isLoading=!1}}}async addCard(e){if(!(typeof window>"u"||!("api"in window)))try{const a=await window.api.addCard(e);return this.all=[a,...this.all],a}catch(a){throw console.error("Failed to add card:",a),a}}async updateCard(e){if(!(typeof window>"u"||!("api"in window)))try{const a=await window.api.updateCard(e),n=this.all.findIndex(o=>o.id===e.id);return n!==-1&&(this.all[n]=a),a}catch(a){throw console.error("Failed to update card:",a),a}}async deleteCard(e){if(!(typeof window>"u"||!("api"in window)))try{await window.api.deleteCard(e),this.all=this.all.filter(a=>a.id!==e)}catch(a){throw console.error("Failed to delete card:",a),a}}async updateCardStatus(e,a){if(!(typeof window>"u"||!("api"in window)))try{await window.api.toggleCard(e,a);const n=this.all.findIndex(o=>o.id===e);n!==-1&&(this.all[n]={...this.all[n],status:a})}catch(n){throw console.error("Failed to update card status:",n),n}}async runPrompt(e){if(!(typeof window>"u"||!("api"in window)))try{await window.api.runPrompt(e)}catch(a){throw console.error("Failed to run prompt:",a),a}}async runPromptWithSystem(e,a){if(typeof window>"u"||!("api"in window))return;let n=e;a&&a.trim()&&(n=`${a.trim()}

${e}`);try{await window.api.runPrompt(n)}catch(o){throw console.error("Failed to run prompt:",o),o}}toggleForm(){this.isFormOpen=!this.isFormOpen}openForm(){this.isFormOpen=!0}closeForm(){this.isFormOpen=!1}setFilterStatus(e){this.filterStatus=e}setFilterQuery(e){this.filterQuery=e}setFilterProject(e){this.filterProject=e}}const z=new ba;class ga{#e;get all(){return t(this.#e)}set all(e){h(this.#e,e,!0)}#t;get isLoading(){return t(this.#t)}set isLoading(e){h(this.#t,e,!0)}#a;get viewMode(){return t(this.#a)}set viewMode(e){h(this.#a,e,!0)}#r;get selectedProjectId(){return t(this.#r)}set selectedProjectId(e){h(this.#r,e,!0)}constructor(){this.#e=V(he([])),this.#t=V(!1),this.#a=V("list"),this.#r=V(null)}get selectedProject(){return this.viewMode==="list"?"all":this.viewMode==="create"?"create":this.selectedProjectId||"all"}async loadProjects(){if(typeof window>"u"||!("api"in window)){console.warn("Window API not available, skipping project load");return}this.isLoading=!0;try{const e=await window.api.getProjects();Array.isArray(e)&&(this.all=e.slice().sort((a,n)=>a.name.localeCompare(n.name)))}catch(e){console.error("Failed to load projects from main process",e)}finally{this.isLoading=!1}}async createProject(e,a){const n=e.trim();if(!n)throw new Error("Project name is required");if(typeof window>"u"||!("api"in window))throw new Error("Window API not available - preload may not have loaded");const o=await window.api.createProject({name:n,systemPrompt:a});return this.all=[...this.all,o].sort((i,u)=>i.name.localeCompare(u.name)),o}selectAll(){this.viewMode="list",this.selectedProjectId=null,z.setFilterProject("all")}selectProject(e){if(e===null||e==="all"){this.selectAll();return}if(e==="create"){this.viewMode="create",this.selectedProjectId=null,z.setFilterProject("all");return}this.viewMode="detail",this.selectedProjectId=e,z.setFilterProject(e)}selectCreateProject(){this.viewMode="create",this.selectedProjectId=null,z.setFilterProject("all")}async updateProject(e){if(!e.id||!e.name.trim())throw new Error("Project ID and name are required");if(typeof window>"u"||!("api"in window))throw new Error("Window API not available");const a=await window.api.updateProject(e),n=this.all.findIndex(o=>o.id===e.id);return n!==-1&&(this.all[n]=a,this.all.sort((o,i)=>o.name.localeCompare(i.name))),a}async deleteProject(e){if(!e)throw new Error("Project ID is required");if(typeof window>"u"||!("api"in window))throw new Error("Window API not available");await window.api.deleteProject(e),this.all=this.all.filter(a=>a.id!==e),this.selectedProjectId===e&&this.selectAll()}findById(e){return this.all.find(a=>a.id===e)}}const R=new ga;var ya=L('<div role="alert" class="form-status error"> </div>'),wa=L('<span class="error-message"> </span>'),ja=L('<span class="hint">Pick a clear name so you can find this project fast.</span>'),Pa=L('<span class="error-message"> </span>'),Ea=L('<span class="hint">This text will auto-prepend to every card prompt in the project—great for tone, context, or guardrails. Max 500 characters.</span>'),ka=L('<section id="edit-project-section"><form aria-labelledby="edit-project-heading"><h2 id="edit-project-heading">Edit Project</h2> <!> <div class="field"><label for="edit-project-name">Project name <span class="required">*</span></label> <input id="edit-project-name" type="text" autocomplete="off" required/> <!></div> <div class="field"><label for="edit-project-system-prompt">System prompt <span class="optional">(optional)</span></label> <textarea id="edit-project-system-prompt" placeholder="Add context or constraints that should prefix every card prompt for this project." rows="6"></textarea> <!></div> <div class="form-actions"><button type="submit" class="primary"> </button> <button type="button" class="ghost">Cancel</button></div></form></section>');function xa(r,e){ue(e,!0);let a=he({name:e.project.name,systemPrompt:e.project.systemPrompt||""}),n=he({name:"",systemPrompt:""}),o=V(""),i=V(!1);Ne(()=>{const P=a.name.trim();P.length===0?n.name="Project name is required":P.length>50?n.name="Project name must be less than 50 characters":n.name=""}),Ne(()=>{a.systemPrompt.trim().length>8e3?n.systemPrompt="System prompt must be less than 8000 characters":n.systemPrompt=""});let u=te(()=>!n.name&&!n.systemPrompt&&a.name.trim().length>0),m=null;Ne(()=>{const P=document.getElementById("edit-project-name");P&&setTimeout(()=>P.focus(),0);const I=B=>{B.key==="Escape"&&e.onCancel()};return window.addEventListener("keydown",I),()=>{window.removeEventListener("keydown",I)}});async function v(P){if(P.preventDefault(),!(!t(u)||t(i))){h(i,!0),h(o,"");try{const I=a.systemPrompt.trim();await e.onSubmit({id:e.project.id,name:a.name.trim(),systemPrompt:I||void 0}),k(`Project "${a.name}" updated successfully`)}catch(I){h(o,I instanceof Error?I.message:"Failed to update project",!0),k(t(o))}finally{h(i,!1)}}}function k(P){const I=document.getElementById("sr-announcements");I&&(I.textContent=P)}var w=ka(),N=l(w),T=d(l(N),2);{var D=P=>{var I=ya(),B=l(I,!0);s(I),U(()=>K(B,t(o))),E(P,I)};W(T,P=>{t(o)&&P(D)})}var M=d(T,2),b=d(l(M),2);be(b);let c;var p=d(b,2);{var j=P=>{var I=wa(),B=l(I,!0);s(I),U(()=>K(B,n.name)),E(P,I)},S=P=>{var I=ja();E(P,I)};W(p,P=>{n.name?P(j):P(S,!1)})}s(M);var x=d(M,2),A=d(l(x),2);We(A);let q;var f=d(A,2);{var g=P=>{var I=Pa(),B=l(I,!0);s(I),U(()=>K(B,n.systemPrompt)),E(P,I)},y=P=>{var I=Ea();E(P,I)};W(f,P=>{n.systemPrompt?P(g):P(y,!1)})}s(x);var _=d(x,2),C=l(_),O=l(C,!0);s(C);var Q=d(C,2);Q.__click=function(...P){e.onCancel?.apply(this,P)},s(_),s(N),s(w),Me(w,P=>m=P,()=>m),U(()=>{b.disabled=t(i),c=de(b,1,"",null,c,{error:n.name}),A.disabled=t(i),q=de(A,1,"",null,q,{error:n.systemPrompt}),C.disabled=!t(u)||t(i),K(O,t(i)?"Saving...":"Save changes"),Q.disabled=t(i)}),ee("submit",N,v),ae(b,()=>a.name,P=>a.name=P),ae(A,()=>a.systemPrompt,P=>a.systemPrompt=P),E(r,w),ve()}Te(["click"]);var Sa=L('<div class="menu svelte-rmjvfi" role="menu"><button type="button" role="menuitem" class="svelte-rmjvfi">Edit</button> <button type="button" role="menuitem" class="danger svelte-rmjvfi">Delete</button></div>'),Ca=L('<div class="more-menu svelte-rmjvfi"><button type="button" class="more-trigger svelte-rmjvfi" aria-haspopup="true"><span aria-hidden="true">⋮</span></button> <!></div>');function At(r,e){ue(e,!1);const a=St();let n=Ae(e,"ariaLabel",8,"More actions"),o=me(!1),i=me(null),u=me(null);function m(){h(o,!t(o)),t(o)&&k()}function v(){h(o,!1),t(i)?.focus()}function k(){requestAnimationFrame(()=>{t(u)?.querySelector("button")?.focus()})}function w(j){if(t(o)&&(j.key==="Escape"&&(j.preventDefault(),v()),j.key==="ArrowDown"||j.key==="ArrowUp")){j.preventDefault();const S=Array.from(t(u)?.querySelectorAll("button")||[]);if(!S.length)return;const x=S.indexOf(document.activeElement);let A=0;j.key==="ArrowDown"?A=(x+1)%S.length:A=(x-1+S.length)%S.length,S[A].focus()}}function N(j){if(!t(o))return;const S=j.target;t(i)&&t(i).contains(S)||t(u)&&t(u).contains(S)||v()}Ct(()=>{document.addEventListener("click",N),document.addEventListener("keydown",w)}),la(()=>{document.removeEventListener("click",N),document.removeEventListener("keydown",w)});function T(){a("edit"),v()}function D(){a("delete"),v()}it();var M=Ca(),b=l(M);Me(b,j=>h(i,j),()=>t(i));var c=d(b,2);{var p=j=>{var S=Sa(),x=l(S),A=d(x,2);s(S),Me(S,q=>h(u,q),()=>t(u)),ee("click",x,T),ee("click",A,D),E(j,S)};W(c,j=>{t(o)&&j(p)})}s(M),U(()=>{re(b,"aria-expanded",t(o)),re(b,"aria-label",n())}),ee("click",b,m),E(r,M),ve()}var Ia=L('<li class="empty svelte-138d5ja">No projects yet — create one.</li>'),Fa=L('<li><div class="project-card-wrapper svelte-138d5ja"><button class="project-card svelte-138d5ja"><span class="project-name svelte-138d5ja"> </span></button> <div class="project-actions svelte-138d5ja"><!></div></div></li>'),Ta=L('<div class="modal-overlay" role="presentation" tabindex="-1"><div class="modal-content" role="dialog" tabindex="-1" aria-modal="true" aria-labelledby="edit-project-heading"><!></div></div>'),Aa=L('<section class="projects svelte-138d5ja"><header><h2>Projects</h2> <div class="actions svelte-138d5ja"><p class="hint">Create a project from the header above.</p></div></header> <ul class="project-list svelte-138d5ja"><!></ul> <!></section>');function La(r,e){ue(e,!0);function a(b){R.selectProject(b),e.onopen?.({projectId:b})}let n=V(null);function o(b){const c=R.all.find(p=>p.id===b);c&&h(n,c,!0)}async function i(b){const c=R.all.find(p=>p.id===b);window.confirm(`Are you sure you want to delete the project "${c?.name}"?

This will unassign all cards from this project.`)&&await R.deleteProject(b)}async function u(b){await R.updateProject(b),h(n,null)}function m(){h(n,null)}var v=Aa(),k=d(l(v),2),w=l(k);{var N=b=>{var c=Ia();E(b,c)},T=b=>{var c=_e(),p=oe(c);Fe(p,17,()=>R.all,j=>j.id,(j,S)=>{var x=Fa(),A=l(x),q=l(A);q.__click=()=>a(t(S).id);var f=l(q),g=l(f,!0);s(f),s(q);var y=d(q,2),_=l(y);{let C=te(()=>`More actions for project ${t(S).name}`);At(_,{get ariaLabel(){return t(C)},$$events:{edit:()=>o(t(S).id),delete:()=>i(t(S).id)}})}s(y),s(A),s(x),U(()=>{re(q,"aria-label",`Open project ${t(S).name}`),K(g,t(S).name)}),E(j,x)}),E(b,c)};W(w,b=>{R.all.length===0?b(N):b(T,!1)})}s(k);var D=d(k,2);{var M=b=>{var c=Ta();c.__click=m,c.__keydown=S=>S.key==="Escape"&&m();var p=l(c);p.__click=S=>S.stopPropagation(),p.__keydown=S=>S.key==="Escape"&&m();var j=l(p);xa(j,{get project(){return t(n)},onSubmit:u,onCancel:m}),s(p),s(c),E(b,c)};W(D,b=>{t(n)&&b(M)})}s(v),E(r,v),ve()}Te(["click","keydown"]);var qa=L('<p id="name-error" class="field-error svelte-t06kqd" role="alert"> </p>'),Da=L('<p id="system-prompt-error" class="field-error svelte-t06kqd" role="alert"> </p>'),Na=L('<p class="submission-error svelte-t06kqd" role="alert"> </p>'),Ma=L('<section class="project-create svelte-t06kqd"><h2 class="svelte-t06kqd">Create project</h2> <form class="project-form svelte-t06kqd"><label for="proj-name" class="svelte-t06kqd">Project name</label> <input id="proj-name" type="text" placeholder="e.g. JavaScript"/> <!> <p class="hint svelte-t06kqd" id="project-hint">The project name appears in the sidebar list.</p> <label for="proj-system-prompt" class="svelte-t06kqd">System prompt <span class="optional">(optional)</span></label> <textarea id="proj-system-prompt" placeholder="e.g. You are an expert JavaScript developer. Always provide code examples and explain best practices." rows="4"></textarea> <!> <p class="hint svelte-t06kqd" id="system-prompt-hint">This prompt will be prepended to all learning cards in this project when sent to ChatGPT.</p> <!> <div class="actions svelte-t06kqd"><button type="submit" class="primary svelte-t06kqd"> </button> <button type="button" class="ghost svelte-t06kqd">Cancel</button></div></form></section>');function Oa(r,e){ue(e,!0);let a=V(he({name:"",systemPrompt:""})),n=V(null),o=V(!1),i=V(he({})),u=te(()=>t(i).name?"name-error project-hint":"project-hint");function m(_){const C={};return(!_.name||_.name.trim()==="")&&(C.name="Project name is required"),_.systemPrompt&&_.systemPrompt.length>8e3&&(C.systemPrompt="System prompt must be less than 8000 characters"),C}async function v(_){if(_.preventDefault(),h(i,m(t(a)),!0),!(Object.keys(t(i)).length>0)){h(n,null),h(o,!0);try{const C=t(a).name.trim(),O=t(a).systemPrompt.trim()||void 0,Q=await R.createProject(C,O);h(a,{name:"",systemPrompt:""},!0),h(i,{},!0),e.oncreated?.({project:Q.id})}catch(C){console.error("Failed to create project",C),h(n,C instanceof Error?C.message:"Unable to create project right now. Try again in a moment.",!0)}finally{h(o,!1)}}}function k(){h(a,{name:"",systemPrompt:""},!0),h(i,{},!0),h(n,null),R.selectProject("all")}var w=Ma(),N=d(l(w),2),T=d(l(N),2);be(T);let D;var M=d(T,2);{var b=_=>{var C=qa(),O=l(C,!0);s(C),U(()=>K(O,t(i).name)),E(_,C)};W(M,_=>{t(i).name&&_(b)})}var c=d(M,6);We(c);let p;var j=d(c,2);{var S=_=>{var C=Da(),O=l(C,!0);s(C),U(()=>K(O,t(i).systemPrompt)),E(_,C)};W(j,_=>{t(i).systemPrompt&&_(S)})}var x=d(j,4);{var A=_=>{var C=Na(),O=l(C,!0);s(C),U(()=>K(O,t(n))),E(_,C)};W(x,_=>{t(n)&&_(A)})}var q=d(x,2),f=l(q),g=l(f,!0);s(f);var y=d(f,2);y.__click=k,s(q),s(N),s(w),U(()=>{re(N,"aria-describedby",t(u)),re(T,"aria-invalid",t(i).name?"true":"false"),T.disabled=t(o),D=de(T,1,"svelte-t06kqd",null,D,{error:t(i).name}),re(c,"aria-invalid",t(i).systemPrompt?"true":"false"),c.disabled=t(o),p=de(c,1,"",null,p,{error:t(i).systemPrompt}),f.disabled=t(o),K(g,t(o)?"Creating...":"Create project"),y.disabled=t(o)}),ee("submit",N,v),ae(T,()=>t(a).name,_=>t(a).name=_),ae(c,()=>t(a).systemPrompt,_=>t(a).systemPrompt=_),E(r,w),ve()}Te(["click"]);var Ra=L('<div role="status" class="form-status"> </div>'),Ba=L('<span class="error-message"> </span>'),Ha=L('<span class="hint">Give your learning card a clear, memorable name.</span>'),Ka=L("<option> </option>"),Qa=L('<span class="error-message"> </span>'),Ga=L('<span class="hint">Give your project a short, unique name.</span>'),Ua=L('<div class="field"><label for="project">New project name <span class="required">*</span></label> <input id="project" type="text" autocomplete="off"/> <!></div>'),Wa=L('<span class="error-message"> </span>'),Va=L('<span class="hint">What do you want to learn or understand?</span>'),Ja=L('<section id="add-section"><form aria-labelledby="add-heading"><h2>New Card Details</h2> <!> <div class="field"><label for="title">Title <span class="required">*</span></label> <input id="title" type="text" autocomplete="off" required/> <!></div> <div class="field"><label for="topic">Topic <span class="optional">(optional)</span></label> <input id="topic" type="text" autocomplete="off"/> <span class="hint">e.g., JavaScript, Design Patterns, Math</span></div> <div class="field"><label for="project-select">Project <span class="optional">(optional)</span></label> <select id="project-select" aria-describedby="project-hint"><option>Select a project</option><!><option>+ Create new project...</option></select> <span id="project-hint" class="hint">Assign this card to a project or create a new one.</span></div> <!> <div class="field"><label for="prompt">Learning prompt <span class="required">*</span></label> <textarea id="prompt" required placeholder="e.g. Explain the concept of closures in JavaScript"></textarea> <!></div> <div class="form-actions"><button type="submit" class="primary"> </button> <button type="button" class="ghost">Cancel</button></div></form></section>');function za(r,e){ue(e,!0);let a=V(""),n=V(""),o=V(he(R.selectedProject!=="all"&&R.selectedProject!=="create"?R.selectedProject:"")),i=V(!1),u=V(""),m=V(""),v=V(!1),k=te(()=>{const g=t(a).trim();return g.length===0?"":g.length<3?"Title must be at least 3 characters":g.length>100?"Title must be less than 100 characters":""}),w=te(()=>{const g=t(u).trim();return g.length===0?"":g.length<10?"Prompt must be at least 10 characters":g.length>8e3?"Prompt must be less than 8000 characters":""}),N=te(()=>{if(t(i)){const g=t(o).trim();if(g.length===0)return"Project name is required";if(g.length<2)return"Project name must be at least 2 characters";if(g.length>50)return"Project name must be less than 50 characters";if(R.all.some(y=>y.name.toLowerCase()===g.toLowerCase()))return"A project with this name already exists"}return""}),T=te(()=>t(a).trim().length>0&&t(u).trim().length>0&&!t(k)&&!t(w)&&!t(N)),D=null,M=null,b=null;Ne(()=>{if(!z.isFormOpen)return;const g=document.getElementById("title");g&&setTimeout(()=>g.focus(),0);const y=()=>{if(!D)return;const Q=D.querySelectorAll('input:not([disabled]), textarea:not([disabled]), button:not([disabled]), select:not([disabled]), [tabindex]:not([tabindex="-1"])');Q.length>0&&(M=Q[0],b=Q[Q.length-1])};y();const _=O=>{O.key==="Tab"&&(y(),O.shiftKey?document.activeElement===M&&(O.preventDefault(),b?.focus()):document.activeElement===b&&(O.preventDefault(),M?.focus()))},C=O=>{O.key==="Escape"&&S()};return D?.addEventListener("keydown",_),window.addEventListener("keydown",C),()=>{D?.removeEventListener("keydown",_),window.removeEventListener("keydown",C)}});async function c(g){if(g.preventDefault(),!(!t(T)||t(v))){h(v,!0),h(m,"");try{await e.onSubmit({title:t(a).trim(),prompt:t(u).trim(),topic:t(n).trim()||void 0,project:t(i)?t(o).trim()||void 0:t(o)||void 0}),j(),z.closeForm(),x(`Card "${t(a)}" added successfully`)}catch(y){h(m,y instanceof Error?y.message:"Failed to add card",!0),x(t(m))}finally{h(v,!1)}}}function p(g){const y=g.target;y.value==="__create__"?(h(i,!0),h(o,"")):(h(i,!1),h(o,y.value,!0))}function j(){h(a,""),h(n,""),h(o,""),h(i,!1),h(u,""),h(m,"")}function S(){j(),z.closeForm()}function x(g){const y=document.getElementById("sr-announcements");y&&(y.textContent=g)}var A=_e(),q=oe(A);{var f=g=>{var y=Ja(),_=l(y),C=d(l(_),2);{var O=G=>{var J=Ra(),$=l(J,!0);s(J),U(()=>K($,t(m))),E(G,J)};W(C,G=>{t(m)&&G(O)})}var Q=d(C,2),P=d(l(Q),2);be(P);let I;var B=d(P,2);{var Y=G=>{var J=Ba(),$=l(J,!0);s(J),U(()=>K($,t(k))),E(G,J)},ge=G=>{var J=Ha();E(G,J)};W(B,G=>{t(k)?G(Y):G(ge,!1)})}s(Q);var ye=d(Q,2),X=d(l(ye),2);be(X),ze(2),s(ye);var fe=d(ye,2),le=d(l(fe),2);le.__change=p;var pe=l(le);pe.value=pe.__value="";var we=d(pe);Fe(we,17,()=>R.all,G=>G.id,(G,J)=>{var $=Ka(),De=l($,!0);s($);var Ve={};U(()=>{K(De,t(J).name),Ve!==(Ve=t(J).id)&&($.value=($.__value=t(J).id)??"")}),E(G,$)});var Le=d(we);Le.value=Le.__value="__create__",s(le),ze(2),s(fe);var xe=d(fe,2);{var Oe=G=>{var J=Ua(),$=d(l(J),2);be($);let De;var Ve=d($,2);{var Lt=Ce=>{var Re=Qa(),Dt=l(Re,!0);s(Re),U(()=>K(Dt,t(N))),E(Ce,Re)},qt=Ce=>{var Re=Ga();E(Ce,Re)};W(Ve,Ce=>{t(N)?Ce(Lt):Ce(qt,!1)})}s(J),U(()=>{$.disabled=t(v),De=de($,1,"",null,De,{error:t(N)})}),ae($,()=>t(o),Ce=>h(o,Ce)),E(G,J)};W(xe,G=>{t(i)&&G(Oe)})}var je=d(xe,2),se=d(l(je),2);We(se);let qe;var Se=d(se,2);{var F=G=>{var J=Wa(),$=l(J,!0);s(J),U(()=>K($,t(w))),E(G,J)},H=G=>{var J=Va();E(G,J)};W(Se,G=>{t(w)?G(F):G(H,!1)})}s(je);var Z=d(je,2),ce=l(Z),ne=l(ce,!0);s(ce);var Pe=d(ce,2);Pe.__click=S,s(Z),s(_),s(y),Me(y,G=>D=G,()=>D),U(()=>{P.disabled=t(v),I=de(P,1,"",null,I,{error:t(k)}),X.disabled=t(v),le.disabled=t(v),se.disabled=t(v),qe=de(se,1,"",null,qe,{error:t(w)}),ce.disabled=!t(T)||t(v),K(ne,t(v)?"Saving...":"Save card"),Pe.disabled=t(v)}),ee("submit",_,c),ae(P,()=>t(a),G=>h(a,G)),ae(X,()=>t(n),G=>h(n,G)),Ft(le,()=>t(o),G=>h(o,G)),ae(se,()=>t(u),G=>h(u,G)),E(g,y)};W(q,g=>{z.isFormOpen&&g(f)})}E(r,A),ve()}Te(["change","click"]);var Ya=L('<div role="status" class="form-status"> </div>'),Xa=L('<span class="error-message"> </span>'),Za=L(`<span class="hint">Choose a short title you'll recognize later.</span>`),$a=L("<option> </option>"),er=L('<span class="error-message"> </span>'),tr=L('<span class="hint">Keep it concise and unique.</span>'),ar=L('<div class="field"><label for="edit-project">New project name <span class="required">*</span></label> <input id="edit-project" type="text" autocomplete="off"/> <!></div>'),rr=L('<span class="error-message"> </span>'),nr=L('<span class="hint">Describe what you want to learn so the AI can help.</span>'),ir=L('<section id="edit-section"><form aria-labelledby="edit-heading"><h2 id="edit-heading">Edit learning item</h2> <!> <div class="field"><label for="edit-title">Title <span class="required">*</span></label> <input id="edit-title" type="text" autocomplete="off" required/> <!></div> <div class="field"><label for="edit-topic">Topic <span class="optional">(optional)</span></label> <input id="edit-topic" type="text" autocomplete="off"/> <span class="hint">e.g., JavaScript, Design Patterns, Math</span></div> <div class="field"><label for="edit-project-select">Project <span class="optional">(optional)</span></label> <select id="edit-project-select" aria-describedby="edit-project-hint"><option>Select a project</option><!><option>+ Create new project...</option></select> <span id="edit-project-hint" class="hint">Attach to an existing project or make a new one.</span></div> <!> <div class="field"><label for="edit-prompt">Learning prompt <span class="required">*</span></label> <textarea id="edit-prompt" required placeholder="e.g. Explain the concept of closures in JavaScript"></textarea> <!></div> <div class="form-actions"><button type="submit" class="primary"> </button> <button type="button" class="ghost">Cancel</button></div></form></section>');function or(r,e){ue(e,!0);let a=V(he(e.card.title)),n=V(he(e.card.topic||"")),o=V(he(e.card.project||"")),i=V(!1),u=V(he(e.card.prompt)),m=V(""),v=V(!1),k=te(()=>{const F=t(a).trim();return F.length===0?"Title is required":F.length<3?"Title must be at least 3 characters":F.length>100?"Title must be less than 100 characters":""}),w=te(()=>{const F=t(u).trim();return F.length===0?"Prompt is required":F.length<10?"Prompt must be at least 10 characters":F.length>8e3?"Prompt must be less than 8000 characters":""}),N=te(()=>{if(t(i)){const F=t(o).trim();if(F.length===0)return"Project name is required";if(F.length<2)return"Project name must be at least 2 characters";if(F.length>50)return"Project name must be less than 50 characters";if(R.all.some(H=>H.name.toLowerCase()===F.toLowerCase()))return"A project with this name already exists"}return""}),T=te(()=>t(a).trim().length>0&&t(u).trim().length>0&&!t(k)&&!t(w)&&!t(N)),D=null,M=null,b=null;Ne(()=>{const F=document.getElementById("edit-title");F&&setTimeout(()=>F.focus(),0);const H=()=>{if(!D)return;const Pe=D.querySelectorAll('input:not([disabled]), textarea:not([disabled]), button:not([disabled]), select:not([disabled]), [tabindex]:not([tabindex="-1"])');Pe.length>0&&(M=Pe[0],b=Pe[Pe.length-1])};H();const Z=ne=>{ne.key==="Tab"&&(H(),ne.shiftKey?document.activeElement===M&&(ne.preventDefault(),b?.focus()):document.activeElement===b&&(ne.preventDefault(),M?.focus()))},ce=ne=>{ne.key==="Escape"&&e.onCancel()};return D?.addEventListener("keydown",Z),window.addEventListener("keydown",ce),()=>{D?.removeEventListener("keydown",Z),window.removeEventListener("keydown",ce)}});async function c(F){if(F.preventDefault(),!(!t(T)||t(v))){h(v,!0),h(m,"");try{await e.onSubmit({id:e.card.id,title:t(a).trim(),prompt:t(u).trim(),topic:t(n).trim()||void 0,project:t(i)?t(o).trim()||void 0:t(o)||void 0}),j(`Card "${t(a)}" updated successfully`)}catch(H){h(m,H instanceof Error?H.message:"Failed to update card",!0),j(t(m))}finally{h(v,!1)}}}function p(F){const H=F.target;H.value==="__create__"?(h(i,!0),h(o,"")):(h(i,!1),h(o,H.value,!0))}function j(F){const H=document.getElementById("sr-announcements");H&&(H.textContent=F)}var S=ir(),x=l(S),A=d(l(x),2);{var q=F=>{var H=Ya(),Z=l(H,!0);s(H),U(()=>K(Z,t(m))),E(F,H)};W(A,F=>{t(m)&&F(q)})}var f=d(A,2),g=d(l(f),2);be(g);let y;var _=d(g,2);{var C=F=>{var H=Xa(),Z=l(H,!0);s(H),U(()=>K(Z,t(k))),E(F,H)},O=F=>{var H=Za();E(F,H)};W(_,F=>{t(k)?F(C):F(O,!1)})}s(f);var Q=d(f,2),P=d(l(Q),2);be(P),ze(2),s(Q);var I=d(Q,2),B=d(l(I),2);B.__change=p;var Y=l(B);Y.value=Y.__value="";var ge=d(Y);Fe(ge,17,()=>R.all,F=>F.id,(F,H)=>{var Z=$a(),ce=l(Z,!0);s(Z);var ne={};U(()=>{K(ce,t(H).name),ne!==(ne=t(H).id)&&(Z.value=(Z.__value=t(H).id)??"")}),E(F,Z)});var ye=d(ge);ye.value=ye.__value="__create__",s(B),ze(2),s(I);var X=d(I,2);{var fe=F=>{var H=ar(),Z=d(l(H),2);be(Z);let ce;var ne=d(Z,2);{var Pe=J=>{var $=er(),De=l($,!0);s($),U(()=>K(De,t(N))),E(J,$)},G=J=>{var $=tr();E(J,$)};W(ne,J=>{t(N)?J(Pe):J(G,!1)})}s(H),U(()=>{Z.disabled=t(v),ce=de(Z,1,"",null,ce,{error:t(N)})}),ae(Z,()=>t(o),J=>h(o,J)),E(F,H)};W(X,F=>{t(i)&&F(fe)})}var le=d(X,2),pe=d(l(le),2);We(pe);let we;var Le=d(pe,2);{var xe=F=>{var H=rr(),Z=l(H,!0);s(H),U(()=>K(Z,t(w))),E(F,H)},Oe=F=>{var H=nr();E(F,H)};W(Le,F=>{t(w)?F(xe):F(Oe,!1)})}s(le);var je=d(le,2),se=l(je),qe=l(se,!0);s(se);var Se=d(se,2);Se.__click=function(...F){e.onCancel?.apply(this,F)},s(je),s(x),s(S),Me(S,F=>D=F,()=>D),U(()=>{g.disabled=t(v),y=de(g,1,"",null,y,{error:t(k)}),P.disabled=t(v),B.disabled=t(v),pe.disabled=t(v),we=de(pe,1,"",null,we,{error:t(w)}),se.disabled=!t(T)||t(v),K(qe,t(v)?"Saving...":"Save changes"),Se.disabled=t(v)}),ee("submit",x,c),ae(g,()=>t(a),F=>h(a,F)),ae(P,()=>t(n),F=>h(n,F)),Ft(B,()=>t(o),F=>h(o,F)),ae(pe,()=>t(u),F=>h(u,F)),E(r,S),ve()}Te(["change","click"]);var lr=L('<div class="modal-backdrop svelte-10arwa" role="dialog" aria-modal="true" tabindex="-1"><div class="modal svelte-10arwa" role="document"><header class="svelte-10arwa"><h2 class="svelte-10arwa"> </h2></header> <div class="body svelte-10arwa"><label class="svelte-10arwa">Title <input class="svelte-10arwa"/></label> <label class="svelte-10arwa">Content <textarea class="svelte-10arwa"></textarea></label> <label class="svelte-10arwa">Tags (comma separated) <input class="svelte-10arwa"/></label></div> <footer class="svelte-10arwa"><button type="button" class="secondary svelte-10arwa">Cancel</button> <button type="button" class="primary svelte-10arwa">Save</button></footer></div></div>');function sr(r,e){ue(e,!1);let a=Ae(e,"open",8,!1),n=Ae(e,"note",8,null),o=Ae(e,"cardId",8,null);const i=St();let u=me(""),m=me(""),v=me(""),k=me(null);Ct(()=>{});function w(){requestAnimationFrame(()=>t(k)?.focus())}function N(){i("cancel")}function T(){const p=t(v).split(",").map(j=>j.trim()).filter(Boolean);n()?i("save",{id:n().id,title:t(u),content:t(m),tags:p}):o()&&i("save",{cardId:o(),title:t(u),content:t(m),tags:p})}function D(p){p.key==="Escape"&&(p.stopPropagation(),N())}kt(()=>(at(a()),at(n())),()=>{a()&&(h(u,n()?.title||""),h(m,n()?.content||""),h(v,(n()?.tags||[]).join(", ")))}),xt(),it();var M=_e(),b=oe(M);{var c=p=>{var j=lr(),S=l(j),x=l(S),A=l(x),q=l(A,!0);s(A),s(x);var f=d(x,2),g=l(f),y=d(l(g));be(y),Me(y,Y=>h(k,Y),()=>t(k)),s(g);var _=d(g,2),C=d(l(_));We(C),re(C,"rows",8),s(_);var O=d(_,2),Q=d(l(O));be(Q),s(O),s(f);var P=d(f,2),I=l(P),B=d(I,2);s(P),s(S),s(j),U(()=>K(q,n()?"Edit Note":"New Note")),ae(y,()=>t(u),Y=>h(u,Y)),ae(C,()=>t(m),Y=>h(m,Y)),ae(Q,()=>t(v),Y=>h(v,Y)),ee("click",I,N),ee("click",B,T),ee("keydown",j,D),ee("introstart",j,w),E(p,j)};W(b,p=>{a()&&p(c)})}E(r,M),ve()}var cr=L('<div class="empty">No notes yet. Click "New Note" to add one.</div>'),dr=L('<article class="note-item svelte-1t0p0k1"><h4> </h4> <div class="meta svelte-1t0p0k1"> </div> <pre class="content svelte-1t0p0k1"> </pre> <div class="actions svelte-1t0p0k1"><button type="button">Edit</button> <button type="button" class="danger svelte-1t0p0k1">Delete</button></div></article>'),ur=L('<div class="notes-modal-backdrop svelte-1t0p0k1" role="dialog" aria-modal="true" tabindex="-1"><div class="notes-modal svelte-1t0p0k1"><header class="svelte-1t0p0k1"><h3> </h3> <button type="button" class="close svelte-1t0p0k1">✕</button></header> <div class="notes-list svelte-1t0p0k1"><!></div> <footer><button type="button" class="primary svelte-1t0p0k1">New Note</button></footer></div></div> <!>',1);function vr(r,e){ue(e,!1);let a=Ae(e,"open",12,!1),n=Ae(e,"cardId",8),o=Ae(e,"cardTitle",8),i=me([]),u=me(!1),m=me(null);async function v(){n()&&h(i,await window.api.getNotes(n()))}function k(){h(m,null),h(u,!0)}function w(p){h(m,p),h(u,!0)}async function N(p){const j=p.detail;j.id?await window.api.updateNote({id:j.id,title:j.title,content:j.content,tags:j.tags}):await window.api.createNote({cardId:n(),title:j.title,content:j.content,tags:j.tags}),h(u,!1),await v()}async function T(p){confirm("Delete this note?")&&(await window.api.deleteNote(p),await v())}function D(){a(!1)}kt(()=>at(a()),()=>{a()&&v()}),xt(),it();var M=_e(),b=oe(M);{var c=p=>{var j=ur(),S=oe(j),x=l(S),A=l(x),q=l(A),f=l(q);s(q);var g=d(q,2);s(A);var y=d(A,2),_=l(y);{var C=B=>{var Y=cr();E(B,Y)},O=B=>{var Y=_e(),ge=oe(Y);Fe(ge,1,()=>t(i),sa,(ye,X)=>{var fe=dr(),le=l(fe),pe=l(le,!0);s(le);var we=d(le,2),Le=l(we,!0);s(we);var xe=d(we,2),Oe=l(xe,!0);s(xe);var je=d(xe,2),se=l(je),qe=d(se,2);s(je),s(fe),U(Se=>{K(pe,(t(X),He(()=>t(X).title||"(untitled)"))),K(Le,Se),K(Oe,(t(X),He(()=>t(X).content)))},[()=>(t(X),He(()=>t(X).tags?.map(Se=>`#${Se}`).join(" ")))]),ee("click",se,()=>w(t(X))),ee("click",qe,()=>T(t(X).id)),E(ye,fe)}),E(B,Y)};W(_,B=>{t(i),He(()=>t(i).length===0)?B(C):B(O,!1)})}s(y);var Q=d(y,2),P=l(Q);s(Q),s(x),s(S);var I=d(S,2);sr(I,{get open(){return t(u)},get note(){return t(m)},get cardId(){return n()},$$events:{save:N,cancel:()=>h(u,!1)}}),U(()=>K(f,`Notes for ${(o()||"Card")??""}`)),ee("click",g,D),ee("click",P,k),E(p,j)};W(b,p=>{a()&&p(c)})}E(r,M),ve()}var fr=L('<p class="topic"> </p>'),pr=L('<p class="project">Project: <strong> </strong></p>'),mr=L('<article><header><h3> </h3> <!> <!></header> <section><div> </div> <pre class="prompt"> </pre></section> <footer class="card-actions"><button type="button" class="primary">Start in ChatGPT</button> <label class="check svelte-ybr5in"><input type="checkbox" class="svelte-ybr5in"/> <span class="check-label svelte-ybr5in"> </span></label> <button type="button" class="secondary open-notes">Open Notes</button> <!></footer></article> <!>',1);function ft(r,e){ue(e,!0);const a=te(()=>e.card.status==="done"),n=te(()=>t(a)?"✓ Completed":"Active"),o=te(()=>e.card.project?R.all.find(I=>I.id===e.card.project)?.name||e.card.project:"");let i=V(!1);var u=mr(),m=oe(u);let v;var k=l(m),w=l(k),N=l(w,!0);s(w);var T=d(w,2);{var D=I=>{var B=fr(),Y=l(B,!0);s(B),U(()=>K(Y,e.card.topic)),E(I,B)};W(T,I=>{e.card.topic&&I(D)})}var M=d(T,2);{var b=I=>{var B=pr(),Y=d(l(B)),ge=l(Y,!0);s(Y),s(B),U(()=>K(ge,t(o))),E(I,B)};W(M,I=>{e.card.project&&I(b)})}s(k);var c=d(k,2),p=l(c);let j;var S=l(p,!0);s(p);var x=d(p,2),A=l(x,!0);s(x),s(c);var q=d(c,2),f=l(q),g=d(f,2),y=l(g);be(y);var _=d(y,2),C=l(_,!0);s(_),s(g);var O=d(g,2),Q=d(O,2);{let I=te(()=>`More actions for ${e.card.title}`);At(Q,{get ariaLabel(){return t(I)},$$events:{edit:()=>e.onEdit?.(e.card),delete:()=>e.onDelete?.(e.card.id)}})}s(q),s(m);var P=d(m,2);vr(P,{get open(){return t(i)},get cardId(){return e.card.id},get cardTitle(){return e.card.title},$$events:{close:()=>h(i,!1)}}),U(()=>{v=de(m,1,"card svelte-ybr5in",null,v,{done:t(a)}),K(N,e.card.title),j=de(p,1,"status svelte-ybr5in",null,j,{done:t(a)}),K(S,t(n)),K(A,e.card.prompt),re(f,"aria-label",`Start chat with prompt for ${e.card.title}`),ha(y,t(a)),re(y,"aria-label",t(a)?`Mark ${e.card.title} as active`:`Mark ${e.card.title} as done`),K(C,t(a)?"Completed":"Mark done"),re(O,"aria-label",`Open notes for ${e.card.title}`)}),ee("click",f,$e(()=>e.onStart(e.card))),ee("click",y,$e(()=>e.onToggle(e.card.id,t(a)?"active":"done"))),ee("click",O,$e(()=>h(i,!0))),E(r,u),ve()}var hr=L('<p class="empty-state" role="status" aria-live="polite">No learning cards match your filters.</p>'),_r=L('<section class="project-group"><h3> </h3> <!></section>'),br=L('<section><h2>Your learning cards</h2> <div class="filters"><label class="filter">Show: <select><option> </option><option> </option><option> </option></select></label> <label class="filter search">Search: <input type="search" placeholder="Search title, prompt, topic" aria-label="Search cards"/></label></div> <div class="card-list"><!></div></section>');function gr(r,e){ue(e,!0);function a(q){const f=new Map;for(const y of q){const _=y.project||"";f.has(_)||f.set(_,[]),f.get(_).push(y)}const g=[];for(const[y,_]of f.entries())g.push({project:y,cards:_,headingId:`project-${(y||"unassigned").replace(/\s+/g,"-")}`});return g.sort((y,_)=>{const C=y.project?R.all.find(Q=>Q.id===y.project)?.name||y.project:"Unassigned",O=_.project?R.all.find(Q=>Q.id===_.project)?.name||_.project:"Unassigned";return C.localeCompare(O)}),g}const n=te(()=>z.filterProject==="all"?a(z.filtered):[]);function o(q){const f=q.target;z.setFilterStatus(f.value)}function i(q){const f=q.target;z.setFilterQuery(f.value)}var u=br(),m=d(l(u),2),v=l(m),k=d(l(v));k.__change=o;var w=l(k),N=l(w);s(w),w.value=w.__value="all";var T=d(w),D=l(T);s(T),T.value=T.__value="active";var M=d(T),b=l(M);s(M),M.value=M.__value="done",s(k),s(v);var c=d(v,2),p=d(l(c));p.__input=i,s(c),s(m);var j=d(m,2),S=l(j);{var x=q=>{var f=hr();E(q,f)},A=q=>{var f=_e(),g=oe(f);{var y=C=>{var O=_e(),Q=oe(O);Fe(Q,17,()=>t(n),P=>P.headingId,(P,I)=>{var B=_r(),Y=l(B),ge=l(Y,!0);s(Y);var ye=d(Y,2);Fe(ye,17,()=>t(I).cards,X=>X.id,(X,fe)=>{ft(X,{get card(){return t(fe)},get onStart(){return e.onStart},get onToggle(){return e.onToggle},get onEdit(){return e.onEdit},get onDelete(){return e.onDelete}})}),s(B),U(X=>{re(B,"aria-labelledby",t(I).headingId),re(Y,"id",t(I).headingId),K(ge,X)},[()=>t(I).project?R.all.find(X=>X.id===t(I).project)?.name||t(I).project:"Unassigned"]),E(P,B)}),E(C,O)},_=C=>{var O=_e(),Q=oe(O);Fe(Q,17,()=>z.filtered,P=>P.id,(P,I)=>{ft(P,{get card(){return t(I)},get onStart(){return e.onStart},get onToggle(){return e.onToggle},get onEdit(){return e.onEdit},get onDelete(){return e.onDelete}})}),E(C,O)};W(g,C=>{z.filterProject==="all"?C(y):C(_,!1)},!0)}E(q,f)};W(S,q=>{z.filtered.length===0?q(x):q(A,!1)})}s(j),s(u),U(()=>{K(N,`All (${z.all.length??""})`),K(D,`Active (${z.activeCards.length??""})`),K(b,`Completed (${z.completedCards.length??""})`)}),E(r,u),ve()}Te(["change","input"]);var yr=L('<div class="modal-overlay" role="presentation" tabindex="-1"><div class="modal-content" role="dialog" tabindex="-1" aria-modal="true" aria-labelledby="edit-heading"><!></div></div>'),wr=L('<section class="project-detail svelte-1ykxz3w"><header><h2> </h2> <div class="actions svelte-1ykxz3w"><button class="primary" aria-controls="add-section">+ New Learning Item</button></div></header> <!> <!> <!></section>');function jr(r,e){ue(e,!0);const a=te(()=>{if(!(!R.all||!e.projectId))return R.all.find(f=>f.id===e.projectId)});Ne(()=>{(!R.all||R.all.length===0)&&R.loadProjects()});function n(){z.toggleForm()}async function o(f){const y=f.project&&String(f.project).trim().length>0?f.project:e.projectId||void 0;await z.addCard({...f,project:y}),z.closeForm()}async function i(f){let g;f.project&&(g=R.all.find(_=>_.id===f.project)?.systemPrompt),await z.runPromptWithSystem(f.prompt,g)}async function u(f,g){await z.updateCardStatus(f,g)}let m=V(null);function v(f){h(m,f,!0)}async function k(f){await z.updateCard(f),h(m,null)}function w(){h(m,null)}async function N(f){window.confirm("Are you sure you want to delete this learning card?")&&await z.deleteCard(f)}var T=wr(),D=l(T),M=l(D),b=l(M,!0);s(M);var c=d(M,2),p=l(c);p.__click=n,s(c),s(D);var j=d(D,2);{var S=f=>{za(f,{onSubmit:o})};W(j,f=>{z.isFormOpen&&f(S)})}var x=d(j,2);{var A=f=>{var g=yr();g.__click=w,g.__keydown=C=>C.key==="Escape"&&w();var y=l(g);y.__click=C=>C.stopPropagation(),y.__keydown=C=>C.key==="Escape"&&w();var _=l(y);or(_,{get card(){return t(m)},onSubmit:k,onCancel:w}),s(y),s(g),E(f,g)};W(x,f=>{t(m)&&f(A)})}var q=d(x,2);gr(q,{onStart:i,onToggle:u,onEdit:v,onDelete:N}),s(T),U(()=>{K(b,t(a)?t(a).name:"Project"),re(p,"aria-expanded",z.isFormOpen)}),E(r,T),ve()}Te(["click","keydown"]);var Pr=L('<meta name="description" content="Finish what you start"/>'),Er=L('<button class="primary" aria-label="Create project">+ New Project</button>'),kr=L('<button class="ghost" aria-label="Back to projects">← Projects</button>'),xr=L("<option> </option>"),Sr=L('<div class="project-controls svelte-1uha8ag"><label class="project-filter svelte-1uha8ag">Project: <select aria-label="Switch project" class="svelte-1uha8ag"><option>All projects</option><!></select></label> <button class="ghost" aria-label="Back to projects">← Projects</button></div>'),Cr=L("<p>Loading...</p>"),Ir=L('<div id="sr-announcements" class="sr-only" aria-live="polite" aria-atomic="true"></div> <div class="container"><header><h1>Learning Space</h1> <p class="subtitle">Finish what you start</p> <div class="top-actions"><!></div></header> <main id="main-content"><!></main></div>',1);function Mr(r,e){ue(e,!0),ia(()=>{(async()=>await Promise.all([z.loadCards(),R.loadProjects()]))()});function a(b){const c=b.project;R.selectProject(c)}function n(b){const p=b.target.value;p==="all"?R.selectAll():p&&R.selectProject(p)}var o=Ir();va("1uha8ag",b=>{var c=Pr();Pt(()=>{oa.title="Learning Space"}),E(b,c)});var i=d(oe(o),2),u=l(i),m=d(l(u),4),v=l(m);{var k=b=>{var c=Er();c.__click=()=>R.selectCreateProject(),E(b,c)},w=b=>{var c=_e(),p=oe(c);{var j=x=>{var A=kr();A.__click=()=>R.selectProject("all"),E(x,A)},S=x=>{var A=Sr(),q=l(A),f=d(l(q));f.__change=n;var g=l(f);g.value=g.__value="all";var y=d(g);Fe(y,17,()=>R.all,O=>O.id,(O,Q)=>{var P=xr(),I=l(P,!0);s(P);var B={};U(()=>{K(I,t(Q).name),B!==(B=t(Q).id)&&(P.value=(P.__value=t(Q).id)??"")}),E(O,P)}),s(f);var _;It(f),s(q);var C=d(q,2);C.__click=()=>R.selectProject("all"),s(A),U(()=>{_!==(_=R.selectedProject)&&(f.value=(f.__value=R.selectedProject)??"",ot(f,R.selectedProject))}),E(x,A)};W(p,x=>{R.selectedProject==="create"?x(j):x(S,!1)},!0)}E(b,c)};W(v,b=>{R.selectedProject==="all"?b(k):b(w,!1)})}s(m),s(u);var N=d(u,2),T=l(N);{var D=b=>{var c=Cr();E(b,c)},M=b=>{var c=_e(),p=oe(c);{var j=x=>{La(x,{onopen:A=>R.selectProject(A.projectId)})},S=x=>{var A=_e(),q=oe(A);{var f=y=>{Oa(y,{oncreated:a})},g=y=>{jr(y,{get projectId(){return R.selectedProject}})};W(q,y=>{R.selectedProject==="create"?y(f):y(g,!1)},!0)}E(x,A)};W(p,x=>{R.selectedProject==="all"?x(j):x(S,!1)},!0)}E(b,c)};W(T,b=>{z.isLoading||R.isLoading?b(D):b(M,!1)})}s(N),s(i),E(r,o),ve()}Te(["click","change"]);export{Mr as component};
