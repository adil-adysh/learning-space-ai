import{f as L,a as x,c as je}from"../chunks/DURKmzXe.js";import{k as re,m as wt,M as ct,g as t,_ as Pt,O as Et,P as St,Q as rt,D as Ge,R as qe,B as Le,ab as dt,aA as kt,ai as at,F as pe,J as Ye,L as xt,ay as et,i as ut,a9 as nt,aD as Qe,aH as Ct,aI as Ft,aJ as At,w as Xe,aK as ye,G as vt,I as ft,aL as Ve,au as Ze,ax as It,H as Lt,aM as Tt,x as qt,aq as Dt,aN as Mt,aO as Nt,aP as pt,S as mt,aQ as ht,V as Ot,aR as Rt,aS as Bt,aT as Kt,aU as Qt,aV as Gt,aF as Ht,b as Ut,U as Wt,a0 as g,aE as H,$ as oe,p as ce,a as Fe,q as s,v as f,s as c,aW as Ue,t as U,aG as Z,o as de,n as me,aj as He,u as Vt,aX as Jt}from"../chunks/DFp9rl0W.js";import{d as he,s as Q,e as Ee}from"../chunks/BWm9Vurl.js";import{i as V,b as Me,p as zt}from"../chunks/CcLtpFUX.js";import"../chunks/BTXsPZ_l.js";import{c as Yt,o as Xt,a as Zt}from"../chunks/DZbSng_l.js";import{i as $t}from"../chunks/Bbe0c3zC.js";function er(a,e,r){for(var n=[],i=e.length,o,d=e.length,l=0;l<i;l++){let F=e[l];ft(F,()=>{if(o){if(o.pending.delete(F),o.done.add(F),o.pending.size===0){var N=a.outrogroups;$e(et(o.done)),N.delete(o),N.size===0&&(a.outrogroups=null)}}else d-=1},!1)}if(d===0){var u=n.length===0&&r!==null;if(u){var y=r,C=y.parentNode;It(C),C.append(y),a.items.clear()}$e(e,!u)}else o={pending:new Set(e),done:new Set},(a.outrogroups??=new Set).add(o)}function $e(a,e=!0){for(var r=0;r<a.length;r++)Lt(a[r],e)}var it;function Se(a,e,r,n,i,o=null){var d=a,l=new Map;re&&wt();var u=null,y=Pt(()=>{var v=r();return ut(v)?v:v==null?[]:et(v)}),C,F=!0;function N(){h.fallback=u,tr(h,C,d,e,n),u!==null&&(C.length===0?(u.f&ye)===0?vt(u):(u.f^=ye,Te(u,null,d)):ft(u,()=>{u=null}))}var B=ct(()=>{C=t(y);var v=C.length;let b=!1;if(re){var q=Et(d)===St;q!==(v===0)&&(d=rt(),Ge(d),qe(!1),b=!0)}for(var E=new Set,k=pe,I=xt(),A=0;A<v;A+=1){re&&Le.nodeType===dt&&Le.data===kt&&(d=Le,b=!0,qe(!1));var T=C[A],p=n(T,A),m=F?null:l.get(p);m?(m.v&&at(m.v,T),m.i&&at(m.i,A),I&&k.skipped_effects.delete(m.e)):(m=rr(l,F?d:it??=Xe(),T,p,A,i,e,r),F||(m.e.f|=ye),l.set(p,m)),E.add(p)}if(v===0&&o&&!u&&(F?u=Ye(()=>o(d)):(u=Ye(()=>o(it??=Xe())),u.f|=ye)),re&&v>0&&Ge(rt()),!F)if(I){for(const[j,_]of l)E.has(j)||k.skipped_effects.add(_.e);k.oncommit(N),k.ondiscard(()=>{})}else N();b&&qe(!0),t(y)}),h={effect:B,items:l,outrogroups:null,fallback:u};F=!1,re&&(d=Le)}function tr(a,e,r,n,i){var o=e.length,d=a.items,l=a.effect.first,u,y=null,C=[],F=[],N,B,h,v;for(v=0;v<o;v+=1){if(N=e[v],B=i(N,v),h=d.get(B).e,a.outrogroups!==null)for(const m of a.outrogroups)m.pending.delete(h),m.done.delete(h);if((h.f&ye)!==0)if(h.f^=ye,h===l)Te(h,null,r);else{var b=y?y.next:l;h===a.effect.last&&(a.effect.last=h.prev),h.prev&&(h.prev.next=h.next),h.next&&(h.next.prev=h.prev),be(a,y,h),be(a,h,b),Te(h,b,r),y=h,C=[],F=[],l=y.next;continue}if((h.f&Ve)!==0&&vt(h),h!==l){if(u!==void 0&&u.has(h)){if(C.length<F.length){var q=F[0],E;y=q.prev;var k=C[0],I=C[C.length-1];for(E=0;E<C.length;E+=1)Te(C[E],q,r);for(E=0;E<F.length;E+=1)u.delete(F[E]);be(a,k.prev,I.next),be(a,y,k),be(a,I,q),l=q,y=I,v-=1,C=[],F=[]}else u.delete(h),Te(h,l,r),be(a,h.prev,h.next),be(a,h,y===null?a.effect.first:y.next),be(a,y,h),y=h;continue}for(C=[],F=[];l!==null&&l!==h;)(u??=new Set).add(l),F.push(l),l=l.next;if(l===null)continue}(h.f&ye)===0&&C.push(h),y=h,l=h.next}if(a.outrogroups!==null){for(const m of a.outrogroups)m.pending.size===0&&($e(et(m.done)),a.outrogroups?.delete(m));a.outrogroups.size===0&&(a.outrogroups=null)}if(l!==null||u!==void 0){var A=[];if(u!==void 0)for(h of u)(h.f&Ve)===0&&A.push(h);for(;l!==null;)(l.f&Ve)===0&&l!==a.fallback&&A.push(l),l=l.next;var T=A.length;if(T>0){var p=null;er(a,A,p)}}}function rr(a,e,r,n,i,o,d,l){var u=(d&Ft)!==0?(d&At)===0?Qe(r,!1,!1):nt(r):null,y=(d&Ct)!==0?nt(i):null;return{v:u,i:y,e:Ye(()=>(o(e,u??r,y??i,l),()=>{a.delete(n)}))}}function Te(a,e,r){if(a.nodes)for(var n=a.nodes.start,i=a.nodes.end,o=e&&(e.f&ye)===0?e.nodes.start:r;n!==null;){var d=Ze(n);if(o.before(n),n===i)return;n=d}}function be(a,e,r){e===null?a.effect.first=r:e.next=r,r===null?a.effect.last=e:r.prev=e}function ar(a,e){let r=null,n=re;var i;if(re){r=Le;for(var o=qt(document.head);o!==null&&(o.nodeType!==dt||o.data!==a);)o=Ze(o);if(o===null)qe(!1);else{var d=Ze(o);o.remove(),Ge(d)}}re||(i=document.head.appendChild(Xe()));try{ct(()=>e(i),Tt)}finally{n&&(qe(!0),Ge(r))}}const ot=[...` 	
\r\f¬†\v\uFEFF`];function nr(a,e,r){var n=a==null?"":""+a;if(r){for(var i in r)if(r[i])n=n?n+" "+i:i;else if(n.length)for(var o=i.length,d=0;(d=n.indexOf(i,d))>=0;){var l=d+o;(d===0||ot.includes(n[d-1]))&&(l===n.length||ot.includes(n[l]))?n=(d===0?"":n.substring(0,d))+n.substring(l+1):d=l}}return n===""?null:n}function ie(a,e,r,n,i,o){var d=a.__className;if(re||d!==r||d===void 0){var l=nr(r,n,o);(!re||l!==a.getAttribute("class"))&&(l==null?a.removeAttribute("class"):a.className=l),a.__className=r}else if(o&&i!==o)for(var u in o){var y=!!o[u];(i==null||y!==!!i[u])&&a.classList.toggle(u,y)}return o}function tt(a,e,r=!1){if(a.multiple){if(e==null)return;if(!ut(e))return Mt();for(var n of a.options)n.selected=e.includes(De(n));return}for(n of a.options){var i=De(n);if(Nt(i,e)){n.selected=!0;return}}(!r||e!==void 0)&&(a.selectedIndex=-1)}function _t(a){var e=new MutationObserver(()=>{tt(a,a.__value)});e.observe(a,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),Dt(()=>{e.disconnect()})}function gt(a,e,r=e){var n=new WeakSet,i=!0;pt(a,"change",o=>{var d=o?"[selected]":":checked",l;if(a.multiple)l=[].map.call(a.querySelectorAll(d),De);else{var u=a.querySelector(d)??a.querySelector("option:not([disabled])");l=u&&De(u)}r(l),pe!==null&&n.add(pe)}),mt(()=>{var o=e();if(a===document.activeElement){var d=ht??pe;if(n.has(d))return}if(tt(a,o,i),i&&o===void 0){var l=a.querySelector(":checked");l!==null&&(o=De(l),r(o))}a.__value=o,i=!1}),_t(a)}function De(a){return"__value"in a?a.__value:a.value}const ir=Symbol("is custom element"),or=Symbol("is html");function we(a){if(re){var e=!1,r=()=>{if(!e){if(e=!0,a.hasAttribute("value")){var n=a.value;$(a,"value",null),a.value=n}if(a.hasAttribute("checked")){var i=a.checked;$(a,"checked",null),a.checked=i}}};a.__on_r=r,Ot(r),Rt()}}function $(a,e,r,n){var i=lr(a);re&&(i[e]=a.getAttribute(e),e==="src"||e==="srcset"||e==="href"&&a.nodeName==="LINK")||i[e]!==(i[e]=r)&&(e==="loading"&&(a[Bt]=r),r==null?a.removeAttribute(e):typeof r!="string"&&sr(a).includes(e)?a[e]=r:a.setAttribute(e,r))}function lr(a){return a.__attributes??={[ir]:a.nodeName.includes("-"),[or]:a.namespaceURI===Kt}}var lt=new Map;function sr(a){var e=a.getAttribute("is")||a.nodeName,r=lt.get(e);if(r)return r;lt.set(e,r=[]);for(var n,i=a,o=Element.prototype;o!==i;){n=Gt(i);for(var d in n)n[d].set&&r.push(d);i=Qt(i)}return r}function ne(a,e,r=e){var n=new WeakSet;pt(a,"input",async i=>{var o=i?a.defaultValue:a.value;if(o=Je(a)?ze(o):o,r(o),pe!==null&&n.add(pe),await Ht(),o!==(o=e())){var d=a.selectionStart,l=a.selectionEnd,u=a.value.length;if(a.value=o??"",l!==null){var y=a.value.length;d===l&&l===u&&y>u?(a.selectionStart=y,a.selectionEnd=y):(a.selectionStart=d,a.selectionEnd=Math.min(l,y))}}}),(re&&a.defaultValue!==a.value||Ut(e)==null&&a.value)&&(r(Je(a)?ze(a.value):a.value),pe!==null&&n.add(pe)),Wt(()=>{var i=e();if(a===document.activeElement){var o=ht??pe;if(n.has(o))return}Je(a)&&i===ze(a.value)||a.type==="date"&&!i&&!a.value||i!==a.value&&(a.value=i??"")})}function Je(a){var e=a.type;return e==="number"||e==="range"}function ze(a){return a===""?null:+a}class cr{#e;get all(){return t(this.#e)}set all(e){g(this.#e,e,!0)}#t;get isLoading(){return t(this.#t)}set isLoading(e){g(this.#t,e,!0)}#r;get isFormOpen(){return t(this.#r)}set isFormOpen(e){g(this.#r,e,!0)}#a;get filterStatus(){return t(this.#a)}set filterStatus(e){g(this.#a,e,!0)}#n;get filterQuery(){return t(this.#n)}set filterQuery(e){g(this.#n,e,!0)}#i;get filterProject(){return t(this.#i)}set filterProject(e){g(this.#i,e,!0)}constructor(){this.#e=H(oe([])),this.#t=H(!1),this.#r=H(!1),this.#a=H("all"),this.#n=H(""),this.#i=H("all")}get filtered(){let e=this.all.slice();if(this.filterStatus!=="all"&&(e=e.filter(r=>this.filterStatus==="active"?r.status==="active":r.status==="done")),this.filterProject&&this.filterProject!=="all"&&(e=e.filter(r=>(r.project||"")===this.filterProject)),this.filterQuery&&this.filterQuery.trim()!==""){const r=this.filterQuery.toLowerCase();e=e.filter(n=>(n.title||"").toLowerCase().includes(r)||(n.prompt||"").toLowerCase().includes(r)||(n.topic||"").toLowerCase().includes(r)||(n.project||"").toLowerCase().includes(r))}return e}get activeCards(){return this.all.filter(e=>e.status==="active")}get completedCards(){return this.all.filter(e=>e.status==="done")}get cardCount(){return this.all.length}async loadCards(){if(!(typeof window>"u"||!("api"in window))){this.isLoading=!0;try{const r=(await window.api.getCards()).map(n=>({...n,createdAt:new Date(n.createdAt)})).sort((n,i)=>i.createdAt.getTime()-n.createdAt.getTime());this.all=r}catch(e){console.error("Failed to load cards:",e)}finally{this.isLoading=!1}}}async addCard(e){if(!(typeof window>"u"||!("api"in window)))try{const r=await window.api.addCard(e);return this.all=[r,...this.all],r}catch(r){throw console.error("Failed to add card:",r),r}}async updateCard(e){if(!(typeof window>"u"||!("api"in window)))try{const r=await window.api.updateCard(e),n=this.all.findIndex(i=>i.id===e.id);return n!==-1&&(this.all[n]=r),r}catch(r){throw console.error("Failed to update card:",r),r}}async deleteCard(e){if(!(typeof window>"u"||!("api"in window)))try{await window.api.deleteCard(e),this.all=this.all.filter(r=>r.id!==e)}catch(r){throw console.error("Failed to delete card:",r),r}}async updateCardStatus(e,r){if(!(typeof window>"u"||!("api"in window)))try{await window.api.toggleCard(e,r);const n=this.all.findIndex(i=>i.id===e);n!==-1&&(this.all[n]={...this.all[n],status:r})}catch(n){throw console.error("Failed to update card status:",n),n}}async runPrompt(e){if(!(typeof window>"u"||!("api"in window)))try{await window.api.runPrompt(e)}catch(r){throw console.error("Failed to run prompt:",r),r}}async runPromptWithSystem(e,r){if(typeof window>"u"||!("api"in window))return;let n=e;r&&r.trim()&&(n=`${r.trim()}

${e}`);try{await window.api.runPrompt(n)}catch(i){throw console.error("Failed to run prompt:",i),i}}toggleForm(){this.isFormOpen=!this.isFormOpen}openForm(){this.isFormOpen=!0}closeForm(){this.isFormOpen=!1}setFilterStatus(e){this.filterStatus=e}setFilterQuery(e){this.filterQuery=e}setFilterProject(e){this.filterProject=e}}const J=new cr;class dr{#e;get all(){return t(this.#e)}set all(e){g(this.#e,e,!0)}#t;get isLoading(){return t(this.#t)}set isLoading(e){g(this.#t,e,!0)}#r;get viewMode(){return t(this.#r)}set viewMode(e){g(this.#r,e,!0)}#a;get selectedProjectId(){return t(this.#a)}set selectedProjectId(e){g(this.#a,e,!0)}constructor(){this.#e=H(oe([])),this.#t=H(!1),this.#r=H("list"),this.#a=H(null)}get selectedProject(){return this.viewMode==="list"?"all":this.viewMode==="create"?"create":this.selectedProjectId||"all"}async loadProjects(){if(typeof window>"u"||!("api"in window)){console.warn("Window API not available, skipping project load");return}this.isLoading=!0;try{const e=await window.api.getProjects();Array.isArray(e)&&(this.all=e.slice().sort((r,n)=>r.name.localeCompare(n.name)))}catch(e){console.error("Failed to load projects from main process",e)}finally{this.isLoading=!1}}async createProject(e,r){const n=e.trim();if(!n)throw new Error("Project name is required");if(typeof window>"u"||!("api"in window))throw new Error("Window API not available - preload may not have loaded");const i=await window.api.createProject({name:n,systemPrompt:r});return this.all=[...this.all,i].sort((o,d)=>o.name.localeCompare(d.name)),i}selectAll(){this.viewMode="list",this.selectedProjectId=null,J.setFilterProject("all")}selectProject(e){if(e===null||e==="all"){this.selectAll();return}if(e==="create"){this.viewMode="create",this.selectedProjectId=null,J.setFilterProject("all");return}this.viewMode="detail",this.selectedProjectId=e,J.setFilterProject(e)}selectCreateProject(){this.viewMode="create",this.selectedProjectId=null,J.setFilterProject("all")}async updateProject(e){if(!e.id||!e.name.trim())throw new Error("Project ID and name are required");if(typeof window>"u"||!("api"in window))throw new Error("Window API not available");const r=await window.api.updateProject(e),n=this.all.findIndex(i=>i.id===e.id);return n!==-1&&(this.all[n]=r,this.all.sort((i,o)=>i.name.localeCompare(o.name))),r}async deleteProject(e){if(!e)throw new Error("Project ID is required");if(typeof window>"u"||!("api"in window))throw new Error("Window API not available");await window.api.deleteProject(e),this.all=this.all.filter(r=>r.id!==e),this.selectedProjectId===e&&this.selectAll()}findById(e){return this.all.find(r=>r.id===e)}}const M=new dr;var ur=L('<div role="alert" class="form-status error"> </div>'),vr=L('<span class="error-message"> </span>'),fr=L('<span class="hint">Pick a clear name so you can find this project fast.</span>'),pr=L('<span class="error-message"> </span>'),mr=L('<span class="hint">This text will auto-prepend to every card prompt in the project‚Äîgreat for tone, context, or guardrails. Max 500 characters.</span>'),hr=L('<section id="edit-project-section"><form aria-labelledby="edit-project-heading"><h2 id="edit-project-heading">Edit Project</h2> <!> <div class="field"><label for="edit-project-name">Project name <span class="required">*</span></label> <input id="edit-project-name" type="text" autocomplete="off" required/> <!></div> <div class="field"><label for="edit-project-system-prompt">System prompt <span class="optional">(optional)</span></label> <textarea id="edit-project-system-prompt" placeholder="Add context or constraints that should prefix every card prompt for this project." rows="6"></textarea> <!></div> <div class="form-actions"><button type="submit" class="primary"> </button> <button type="button" class="ghost">Cancel</button></div></form></section>');function _r(a,e){ce(e,!0);let r=oe({name:e.project.name,systemPrompt:e.project.systemPrompt||""}),n=oe({name:"",systemPrompt:""}),i=H(""),o=H(!1);Fe(()=>{const S=r.name.trim();S.length===0?n.name="Project name is required":S.length>50?n.name="Project name must be less than 50 characters":n.name=""}),Fe(()=>{r.systemPrompt.trim().length>8e3?n.systemPrompt="System prompt must be less than 8000 characters":n.systemPrompt=""});let d=Z(()=>!n.name&&!n.systemPrompt&&r.name.trim().length>0),l=null;Fe(()=>{const S=document.getElementById("edit-project-name");S&&setTimeout(()=>S.focus(),0);const D=z=>{z.key==="Escape"&&e.onCancel()};return window.addEventListener("keydown",D),()=>{window.removeEventListener("keydown",D)}});async function u(S){if(S.preventDefault(),!(!t(d)||t(o))){g(o,!0),g(i,"");try{const D=r.systemPrompt.trim();await e.onSubmit({id:e.project.id,name:r.name.trim(),systemPrompt:D||void 0}),y(`Project "${r.name}" updated successfully`)}catch(D){g(i,D instanceof Error?D.message:"Failed to update project",!0),y(t(i))}finally{g(o,!1)}}}function y(S){const D=document.getElementById("sr-announcements");D&&(D.textContent=S)}var C=hr(),F=s(C),N=f(s(F),2);{var B=S=>{var D=ur(),z=s(D,!0);c(D),U(()=>Q(z,t(i))),x(S,D)};V(N,S=>{t(i)&&S(B)})}var h=f(N,2),v=f(s(h),2);we(v);let b;var q=f(v,2);{var E=S=>{var D=vr(),z=s(D,!0);c(D),U(()=>Q(z,n.name)),x(S,D)},k=S=>{var D=fr();x(S,D)};V(q,S=>{n.name?S(E):S(k,!1)})}c(h);var I=f(h,2),A=f(s(I),2);Ue(A);let T;var p=f(A,2);{var m=S=>{var D=pr(),z=s(D,!0);c(D),U(()=>Q(z,n.systemPrompt)),x(S,D)},j=S=>{var D=mr();x(S,D)};V(p,S=>{n.systemPrompt?S(m):S(j,!1)})}c(I);var _=f(I,2),w=s(_),O=s(w,!0);c(w);var W=f(w,2);W.__click=function(...S){e.onCancel?.apply(this,S)},c(_),c(F),c(C),Me(C,S=>l=S,()=>l),U(()=>{v.disabled=t(o),b=ie(v,1,"",null,b,{error:n.name}),A.disabled=t(o),T=ie(A,1,"",null,T,{error:n.systemPrompt}),w.disabled=!t(d)||t(o),Q(O,t(o)?"Saving...":"Save changes"),W.disabled=t(o)}),Ee("submit",F,u),ne(v,()=>r.name,S=>r.name=S),ne(A,()=>r.systemPrompt,S=>r.systemPrompt=S),x(a,C),de()}he(["click"]);var gr=L('<li class="empty svelte-138d5ja">No projects yet ‚Äî create one.</li>'),br=L('<li><div class="project-card-wrapper svelte-138d5ja"><button class="project-card svelte-138d5ja"><span class="project-name svelte-138d5ja"> </span></button> <div class="project-actions svelte-138d5ja"><button class="icon-btn svelte-138d5ja" title="Edit project">‚úèÔ∏è</button> <button class="icon-btn danger svelte-138d5ja" title="Delete project">üóëÔ∏è</button></div></div></li>'),yr=L('<div class="modal-overlay" role="presentation" tabindex="-1"><div class="modal-content" role="dialog" aria-modal="true" aria-labelledby="edit-project-heading"><!></div></div>'),jr=L('<section class="projects svelte-138d5ja"><header><h2>Projects</h2> <div class="actions svelte-138d5ja"><p class="hint">Create a project from the header above.</p></div></header> <ul class="project-list svelte-138d5ja"><!></ul> <!></section>');function wr(a,e){ce(e,!0);function r(v){M.selectProject(v),e.onopen?.({projectId:v})}async function n(v,b){v.stopPropagation();const q=M.all.find(E=>E.id===b);window.confirm(`Are you sure you want to delete the project "${q?.name}"?

This will unassign all cards from this project.`)&&await M.deleteProject(b)}let i=H(null);function o(v,b){v.stopPropagation();const q=M.all.find(E=>E.id===b);q&&g(i,q,!0)}async function d(v){await M.updateProject(v),g(i,null)}function l(){g(i,null)}var u=jr(),y=f(s(u),2),C=s(y);{var F=v=>{var b=gr();x(v,b)},N=v=>{var b=je(),q=me(b);Se(q,17,()=>M.all,E=>E.id,(E,k)=>{var I=br(),A=s(I),T=s(A);T.__click=()=>r(t(k).id);var p=s(T),m=s(p,!0);c(p),c(T);var j=f(T,2),_=s(j);_.__click=O=>o(O,t(k).id);var w=f(_,2);w.__click=O=>n(O,t(k).id),c(j),c(A),c(I),U(()=>{$(T,"aria-label",`Open project ${t(k).name}`),Q(m,t(k).name),$(_,"aria-label",`Edit project ${t(k).name}`),$(w,"aria-label",`Delete project ${t(k).name}`)}),x(E,I)}),x(v,b)};V(C,v=>{M.all.length===0?v(F):v(N,!1)})}c(y);var B=f(y,2);{var h=v=>{var b=yr();b.__click=l,b.__keydown=k=>k.key==="Escape"&&l();var q=s(b);q.__click=k=>k.stopPropagation(),q.__keydown=k=>k.key==="Escape"&&l();var E=s(q);_r(E,{get project(){return t(i)},onSubmit:d,onCancel:l}),c(q),c(b),x(v,b)};V(B,v=>{t(i)&&v(h)})}c(u),x(a,u),de()}he(["click","keydown"]);var Pr=L('<p id="name-error" class="field-error svelte-t06kqd" role="alert"> </p>'),Er=L('<p id="system-prompt-error" class="field-error svelte-t06kqd" role="alert"> </p>'),Sr=L('<p class="submission-error svelte-t06kqd" role="alert"> </p>'),kr=L('<section class="project-create svelte-t06kqd"><h2 class="svelte-t06kqd">Create project</h2> <form class="project-form svelte-t06kqd"><label for="proj-name" class="svelte-t06kqd">Project name</label> <input id="proj-name" type="text" placeholder="e.g. JavaScript"/> <!> <p class="hint svelte-t06kqd" id="project-hint">The project name appears in the sidebar list.</p> <label for="proj-system-prompt" class="svelte-t06kqd">System prompt <span class="optional">(optional)</span></label> <textarea id="proj-system-prompt" placeholder="e.g. You are an expert JavaScript developer. Always provide code examples and explain best practices." rows="4"></textarea> <!> <p class="hint svelte-t06kqd" id="system-prompt-hint">This prompt will be prepended to all learning cards in this project when sent to ChatGPT.</p> <!> <div class="actions svelte-t06kqd"><button type="submit" class="primary svelte-t06kqd"> </button> <button type="button" class="ghost svelte-t06kqd">Cancel</button></div></form></section>');function xr(a,e){ce(e,!0);let r=H(oe({name:"",systemPrompt:""})),n=H(null),i=H(!1),o=H(oe({})),d=Z(()=>t(o).name?"name-error project-hint":"project-hint");function l(_){const w={};return(!_.name||_.name.trim()==="")&&(w.name="Project name is required"),_.systemPrompt&&_.systemPrompt.length>8e3&&(w.systemPrompt="System prompt must be less than 8000 characters"),w}async function u(_){if(_.preventDefault(),g(o,l(t(r)),!0),!(Object.keys(t(o)).length>0)){g(n,null),g(i,!0);try{const w=t(r).name.trim(),O=t(r).systemPrompt.trim()||void 0,W=await M.createProject(w,O);g(r,{name:"",systemPrompt:""},!0),g(o,{},!0),e.oncreated?.({project:W.id})}catch(w){console.error("Failed to create project",w),g(n,w instanceof Error?w.message:"Unable to create project right now. Try again in a moment.",!0)}finally{g(i,!1)}}}function y(){g(r,{name:"",systemPrompt:""},!0),g(o,{},!0),g(n,null),M.selectProject("all")}var C=kr(),F=f(s(C),2),N=f(s(F),2);we(N);let B;var h=f(N,2);{var v=_=>{var w=Pr(),O=s(w,!0);c(w),U(()=>Q(O,t(o).name)),x(_,w)};V(h,_=>{t(o).name&&_(v)})}var b=f(h,6);Ue(b);let q;var E=f(b,2);{var k=_=>{var w=Er(),O=s(w,!0);c(w),U(()=>Q(O,t(o).systemPrompt)),x(_,w)};V(E,_=>{t(o).systemPrompt&&_(k)})}var I=f(E,4);{var A=_=>{var w=Sr(),O=s(w,!0);c(w),U(()=>Q(O,t(n))),x(_,w)};V(I,_=>{t(n)&&_(A)})}var T=f(I,2),p=s(T),m=s(p,!0);c(p);var j=f(p,2);j.__click=y,c(T),c(F),c(C),U(()=>{$(F,"aria-describedby",t(d)),$(N,"aria-invalid",t(o).name?"true":"false"),N.disabled=t(i),B=ie(N,1,"svelte-t06kqd",null,B,{error:t(o).name}),$(b,"aria-invalid",t(o).systemPrompt?"true":"false"),b.disabled=t(i),q=ie(b,1,"",null,q,{error:t(o).systemPrompt}),p.disabled=t(i),Q(m,t(i)?"Creating...":"Create project"),j.disabled=t(i)}),Ee("submit",F,u),ne(N,()=>t(r).name,_=>t(r).name=_),ne(b,()=>t(r).systemPrompt,_=>t(r).systemPrompt=_),x(a,C),de()}he(["click"]);var Cr=L('<div role="status" class="form-status"> </div>'),Fr=L('<span class="error-message"> </span>'),Ar=L('<span class="hint">Give your learning card a clear, memorable name.</span>'),Ir=L("<option> </option>"),Lr=L('<span class="error-message"> </span>'),Tr=L('<span class="hint">Give your project a short, unique name.</span>'),qr=L('<div class="field"><label for="project">New project name <span class="required">*</span></label> <input id="project" type="text" autocomplete="off"/> <!></div>'),Dr=L('<span class="error-message"> </span>'),Mr=L('<span class="hint">What do you want to learn or understand?</span>'),Nr=L('<section id="add-section"><form aria-labelledby="add-heading"><h2>New Card Details</h2> <!> <div class="field"><label for="title">Title <span class="required">*</span></label> <input id="title" type="text" autocomplete="off" required/> <!></div> <div class="field"><label for="topic">Topic <span class="optional">(optional)</span></label> <input id="topic" type="text" autocomplete="off"/> <span class="hint">e.g., JavaScript, Design Patterns, Math</span></div> <div class="field"><label for="project-select">Project <span class="optional">(optional)</span></label> <select id="project-select" aria-describedby="project-hint"><option>Select a project</option><!><option>+ Create new project...</option></select> <span id="project-hint" class="hint">Assign this card to a project or create a new one.</span></div> <!> <div class="field"><label for="prompt">Learning prompt <span class="required">*</span></label> <textarea id="prompt" required placeholder="e.g. Explain the concept of closures in JavaScript"></textarea> <!></div> <div class="form-actions"><button type="submit" class="primary"> </button> <button type="button" class="ghost">Cancel</button></div></form></section>');function Or(a,e){ce(e,!0);let r=H(""),n=H(""),i=H(oe(M.selectedProject!=="all"&&M.selectedProject!=="create"?M.selectedProject:"")),o=H(!1),d=H(""),l=H(""),u=H(!1),y=Z(()=>{const m=t(r).trim();return m.length===0?"":m.length<3?"Title must be at least 3 characters":m.length>100?"Title must be less than 100 characters":""}),C=Z(()=>{const m=t(d).trim();return m.length===0?"":m.length<10?"Prompt must be at least 10 characters":m.length>8e3?"Prompt must be less than 8000 characters":""}),F=Z(()=>{if(t(o)){const m=t(i).trim();if(m.length===0)return"Project name is required";if(m.length<2)return"Project name must be at least 2 characters";if(m.length>50)return"Project name must be less than 50 characters";if(M.all.some(j=>j.name.toLowerCase()===m.toLowerCase()))return"A project with this name already exists"}return""}),N=Z(()=>t(r).trim().length>0&&t(d).trim().length>0&&!t(y)&&!t(C)&&!t(F)),B=null,h=null,v=null;Fe(()=>{if(!J.isFormOpen)return;const m=document.getElementById("title");m&&setTimeout(()=>m.focus(),0);const j=()=>{if(!B)return;const W=B.querySelectorAll('input:not([disabled]), textarea:not([disabled]), button:not([disabled]), select:not([disabled]), [tabindex]:not([tabindex="-1"])');W.length>0&&(h=W[0],v=W[W.length-1])};j();const _=O=>{O.key==="Tab"&&(j(),O.shiftKey?document.activeElement===h&&(O.preventDefault(),v?.focus()):document.activeElement===v&&(O.preventDefault(),h?.focus()))},w=O=>{O.key==="Escape"&&k()};return B?.addEventListener("keydown",_),window.addEventListener("keydown",w),()=>{B?.removeEventListener("keydown",_),window.removeEventListener("keydown",w)}});async function b(m){if(m.preventDefault(),!(!t(N)||t(u))){g(u,!0),g(l,"");try{await e.onSubmit({title:t(r).trim(),prompt:t(d).trim(),topic:t(n).trim()||void 0,project:t(o)?t(i).trim()||void 0:t(i)||void 0}),E(),J.closeForm(),I(`Card "${t(r)}" added successfully`)}catch(j){g(l,j instanceof Error?j.message:"Failed to add card",!0),I(t(l))}finally{g(u,!1)}}}function q(m){const j=m.target;j.value==="__create__"?(g(o,!0),g(i,"")):(g(o,!1),g(i,j.value,!0))}function E(){g(r,""),g(n,""),g(i,""),g(o,!1),g(d,""),g(l,"")}function k(){E(),J.closeForm()}function I(m){const j=document.getElementById("sr-announcements");j&&(j.textContent=m)}var A=je(),T=me(A);{var p=m=>{var j=Nr(),_=s(j),w=f(s(_),2);{var O=K=>{var G=Cr(),X=s(G,!0);c(G),U(()=>Q(X,t(l))),x(K,G)};V(w,K=>{t(l)&&K(O)})}var W=f(w,2),S=f(s(W),2);we(S);let D;var z=f(S,2);{var le=K=>{var G=Fr(),X=s(G,!0);c(G),U(()=>Q(X,t(y))),x(K,G)},ke=K=>{var G=Ar();x(K,G)};V(z,K=>{t(y)?K(le):K(ke,!1)})}c(W);var _e=f(W,2),ee=f(s(_e),2);we(ee),He(2),c(_e);var Pe=f(_e,2),ue=f(s(Pe),2);ue.__change=q;var ve=s(ue);ve.value=ve.__value="";var Ae=f(ve);Se(Ae,17,()=>M.all,K=>K.id,(K,G)=>{var X=Ir(),Ce=s(X,!0);c(X);var Ke={};U(()=>{Q(Ce,t(G).name),Ke!==(Ke=t(G).id)&&(X.value=(X.__value=t(G).id)??"")}),x(K,X)});var Ne=f(Ae);Ne.value=Ne.__value="__create__",c(ue),He(2),c(Pe);var Oe=f(Pe,2);{var We=K=>{var G=qr(),X=f(s(G),2);we(X);let Ce;var Ke=f(X,2);{var bt=ge=>{var Ie=Lr(),jt=s(Ie,!0);c(Ie),U(()=>Q(jt,t(F))),x(ge,Ie)},yt=ge=>{var Ie=Tr();x(ge,Ie)};V(Ke,ge=>{t(F)?ge(bt):ge(yt,!1)})}c(G),U(()=>{X.disabled=t(u),Ce=ie(X,1,"",null,Ce,{error:t(F)})}),ne(X,()=>t(i),ge=>g(i,ge)),x(K,G)};V(Oe,K=>{t(o)&&K(We)})}var xe=f(Oe,2),se=f(s(xe),2);Ue(se);let Re;var Be=f(se,2);{var P=K=>{var G=Dr(),X=s(G,!0);c(G),U(()=>Q(X,t(C))),x(K,G)},R=K=>{var G=Mr();x(K,G)};V(Be,K=>{t(C)?K(P):K(R,!1)})}c(xe);var Y=f(xe,2),ae=s(Y),te=s(ae,!0);c(ae);var fe=f(ae,2);fe.__click=k,c(Y),c(_),c(j),Me(j,K=>B=K,()=>B),U(()=>{S.disabled=t(u),D=ie(S,1,"",null,D,{error:t(y)}),ee.disabled=t(u),ue.disabled=t(u),se.disabled=t(u),Re=ie(se,1,"",null,Re,{error:t(C)}),ae.disabled=!t(N)||t(u),Q(te,t(u)?"Saving...":"Save card"),fe.disabled=t(u)}),Ee("submit",_,b),ne(S,()=>t(r),K=>g(r,K)),ne(ee,()=>t(n),K=>g(n,K)),gt(ue,()=>t(i),K=>g(i,K)),ne(se,()=>t(d),K=>g(d,K)),x(m,j)};V(T,m=>{J.isFormOpen&&m(p)})}x(a,A),de()}he(["change","click"]);var Rr=L('<div role="status" class="form-status"> </div>'),Br=L('<span class="error-message"> </span>'),Kr=L(`<span class="hint">Choose a short title you'll recognize later.</span>`),Qr=L("<option> </option>"),Gr=L('<span class="error-message"> </span>'),Hr=L('<span class="hint">Keep it concise and unique.</span>'),Ur=L('<div class="field"><label for="edit-project">New project name <span class="required">*</span></label> <input id="edit-project" type="text" autocomplete="off"/> <!></div>'),Wr=L('<span class="error-message"> </span>'),Vr=L('<span class="hint">Describe what you want to learn so the AI can help.</span>'),Jr=L('<section id="edit-section"><form aria-labelledby="edit-heading"><h2 id="edit-heading">Edit learning item</h2> <!> <div class="field"><label for="edit-title">Title <span class="required">*</span></label> <input id="edit-title" type="text" autocomplete="off" required/> <!></div> <div class="field"><label for="edit-topic">Topic <span class="optional">(optional)</span></label> <input id="edit-topic" type="text" autocomplete="off"/> <span class="hint">e.g., JavaScript, Design Patterns, Math</span></div> <div class="field"><label for="edit-project-select">Project <span class="optional">(optional)</span></label> <select id="edit-project-select" aria-describedby="edit-project-hint"><option>Select a project</option><!><option>+ Create new project...</option></select> <span id="edit-project-hint" class="hint">Attach to an existing project or make a new one.</span></div> <!> <div class="field"><label for="edit-prompt">Learning prompt <span class="required">*</span></label> <textarea id="edit-prompt" required placeholder="e.g. Explain the concept of closures in JavaScript"></textarea> <!></div> <div class="form-actions"><button type="submit" class="primary"> </button> <button type="button" class="ghost">Cancel</button></div></form></section>');function zr(a,e){ce(e,!0);let r=H(oe(e.card.title)),n=H(oe(e.card.topic||"")),i=H(oe(e.card.project||"")),o=H(!1),d=H(oe(e.card.prompt)),l=H(""),u=H(!1),y=Z(()=>{const P=t(r).trim();return P.length===0?"Title is required":P.length<3?"Title must be at least 3 characters":P.length>100?"Title must be less than 100 characters":""}),C=Z(()=>{const P=t(d).trim();return P.length===0?"Prompt is required":P.length<10?"Prompt must be at least 10 characters":P.length>8e3?"Prompt must be less than 8000 characters":""}),F=Z(()=>{if(t(o)){const P=t(i).trim();if(P.length===0)return"Project name is required";if(P.length<2)return"Project name must be at least 2 characters";if(P.length>50)return"Project name must be less than 50 characters";if(M.all.some(R=>R.name.toLowerCase()===P.toLowerCase()))return"A project with this name already exists"}return""}),N=Z(()=>t(r).trim().length>0&&t(d).trim().length>0&&!t(y)&&!t(C)&&!t(F)),B=null,h=null,v=null;Fe(()=>{const P=document.getElementById("edit-title");P&&setTimeout(()=>P.focus(),0);const R=()=>{if(!B)return;const fe=B.querySelectorAll('input:not([disabled]), textarea:not([disabled]), button:not([disabled]), select:not([disabled]), [tabindex]:not([tabindex="-1"])');fe.length>0&&(h=fe[0],v=fe[fe.length-1])};R();const Y=te=>{te.key==="Tab"&&(R(),te.shiftKey?document.activeElement===h&&(te.preventDefault(),v?.focus()):document.activeElement===v&&(te.preventDefault(),h?.focus()))},ae=te=>{te.key==="Escape"&&e.onCancel()};return B?.addEventListener("keydown",Y),window.addEventListener("keydown",ae),()=>{B?.removeEventListener("keydown",Y),window.removeEventListener("keydown",ae)}});async function b(P){if(P.preventDefault(),!(!t(N)||t(u))){g(u,!0),g(l,"");try{await e.onSubmit({id:e.card.id,title:t(r).trim(),prompt:t(d).trim(),topic:t(n).trim()||void 0,project:t(o)?t(i).trim()||void 0:t(i)||void 0}),E(`Card "${t(r)}" updated successfully`)}catch(R){g(l,R instanceof Error?R.message:"Failed to update card",!0),E(t(l))}finally{g(u,!1)}}}function q(P){const R=P.target;R.value==="__create__"?(g(o,!0),g(i,"")):(g(o,!1),g(i,R.value,!0))}function E(P){const R=document.getElementById("sr-announcements");R&&(R.textContent=P)}var k=Jr(),I=s(k),A=f(s(I),2);{var T=P=>{var R=Rr(),Y=s(R,!0);c(R),U(()=>Q(Y,t(l))),x(P,R)};V(A,P=>{t(l)&&P(T)})}var p=f(A,2),m=f(s(p),2);we(m);let j;var _=f(m,2);{var w=P=>{var R=Br(),Y=s(R,!0);c(R),U(()=>Q(Y,t(y))),x(P,R)},O=P=>{var R=Kr();x(P,R)};V(_,P=>{t(y)?P(w):P(O,!1)})}c(p);var W=f(p,2),S=f(s(W),2);we(S),He(2),c(W);var D=f(W,2),z=f(s(D),2);z.__change=q;var le=s(z);le.value=le.__value="";var ke=f(le);Se(ke,17,()=>M.all,P=>P.id,(P,R)=>{var Y=Qr(),ae=s(Y,!0);c(Y);var te={};U(()=>{Q(ae,t(R).name),te!==(te=t(R).id)&&(Y.value=(Y.__value=t(R).id)??"")}),x(P,Y)});var _e=f(ke);_e.value=_e.__value="__create__",c(z),He(2),c(D);var ee=f(D,2);{var Pe=P=>{var R=Ur(),Y=f(s(R),2);we(Y);let ae;var te=f(Y,2);{var fe=G=>{var X=Gr(),Ce=s(X,!0);c(X),U(()=>Q(Ce,t(F))),x(G,X)},K=G=>{var X=Hr();x(G,X)};V(te,G=>{t(F)?G(fe):G(K,!1)})}c(R),U(()=>{Y.disabled=t(u),ae=ie(Y,1,"",null,ae,{error:t(F)})}),ne(Y,()=>t(i),G=>g(i,G)),x(P,R)};V(ee,P=>{t(o)&&P(Pe)})}var ue=f(ee,2),ve=f(s(ue),2);Ue(ve);let Ae;var Ne=f(ve,2);{var Oe=P=>{var R=Wr(),Y=s(R,!0);c(R),U(()=>Q(Y,t(C))),x(P,R)},We=P=>{var R=Vr();x(P,R)};V(Ne,P=>{t(C)?P(Oe):P(We,!1)})}c(ue);var xe=f(ue,2),se=s(xe),Re=s(se,!0);c(se);var Be=f(se,2);Be.__click=function(...P){e.onCancel?.apply(this,P)},c(xe),c(I),c(k),Me(k,P=>B=P,()=>B),U(()=>{m.disabled=t(u),j=ie(m,1,"",null,j,{error:t(y)}),S.disabled=t(u),z.disabled=t(u),ve.disabled=t(u),Ae=ie(ve,1,"",null,Ae,{error:t(C)}),se.disabled=!t(N)||t(u),Q(Re,t(u)?"Saving...":"Save changes"),Be.disabled=t(u)}),Ee("submit",I,b),ne(m,()=>t(r),P=>g(r,P)),ne(S,()=>t(n),P=>g(n,P)),gt(z,()=>t(i),P=>g(i,P)),ne(ve,()=>t(d),P=>g(d,P)),x(a,k),de()}he(["change","click"]);var Yr=L('<div class="menu svelte-rmjvfi" role="menu"><button type="button" role="menuitem" class="svelte-rmjvfi">Edit</button> <button type="button" role="menuitem" class="danger svelte-rmjvfi">Delete</button></div>'),Xr=L('<div class="more-menu svelte-rmjvfi"><button type="button" class="more-trigger svelte-rmjvfi" aria-haspopup="true"><span aria-hidden="true">‚ãÆ</span></button> <!></div>');function Zr(a,e){ce(e,!1);const r=Yt();let n=zt(e,"ariaLabel",8,"More actions"),i=Qe(!1),o=Qe(null),d=Qe(null);function l(){g(i,!t(i)),t(i)&&y()}function u(){g(i,!1),t(o)?.focus()}function y(){requestAnimationFrame(()=>{t(d)?.querySelector("button")?.focus()})}function C(E){if(t(i)&&(E.key==="Escape"&&(E.preventDefault(),u()),E.key==="ArrowDown"||E.key==="ArrowUp")){E.preventDefault();const k=Array.from(t(d)?.querySelectorAll("button")||[]);if(!k.length)return;const I=k.indexOf(document.activeElement);let A=0;E.key==="ArrowDown"?A=(I+1)%k.length:A=(I-1+k.length)%k.length,k[A].focus()}}function F(E){if(!t(i))return;const k=E.target;t(o)&&t(o).contains(k)||t(d)&&t(d).contains(k)||u()}Xt(()=>{document.addEventListener("click",F),document.addEventListener("keydown",C)}),Zt(()=>{document.removeEventListener("click",F),document.removeEventListener("keydown",C)});function N(){r("edit"),u()}function B(){r("delete"),u()}$t();var h=Xr(),v=s(h);Me(v,E=>g(o,E),()=>t(o));var b=f(v,2);{var q=E=>{var k=Yr(),I=s(k),A=f(I,2);c(k),Me(k,T=>g(d,T),()=>t(d)),Ee("click",I,N),Ee("click",A,B),x(E,k)};V(b,E=>{t(i)&&E(q)})}c(h),U(()=>{$(v,"aria-expanded",t(i)),$(v,"aria-label",n())}),Ee("click",v,l),x(a,h),de()}var $r=L('<p class="topic"> </p>'),ea=L('<p class="project">Project: <strong> </strong></p>'),ta=L('<article><header><h3> </h3> <!> <!></header> <section><div> </div> <pre class="prompt"> </pre></section> <footer class="card-actions"><button type="button" class="primary">Start in ChatGPT</button> <button type="button" class="ghost"> </button> <!></footer></article>');function st(a,e){ce(e,!0);const r=Z(()=>e.card.status==="done"),n=Z(()=>t(r)?"Mark active":"Mark done"),i=Z(()=>t(r)?"‚úì Completed":"Active"),o=Z(()=>e.card.project?M.all.find(_=>_.id===e.card.project)?.name||e.card.project:"");var d=ta();let l;var u=s(d),y=s(u),C=s(y,!0);c(y);var F=f(y,2);{var N=_=>{var w=$r(),O=s(w,!0);c(w),U(()=>Q(O,e.card.topic)),x(_,w)};V(F,_=>{e.card.topic&&_(N)})}var B=f(F,2);{var h=_=>{var w=ea(),O=f(s(w)),W=s(O,!0);c(O),c(w),U(()=>Q(W,t(o))),x(_,w)};V(B,_=>{e.card.project&&_(h)})}c(u);var v=f(u,2),b=s(v);let q;var E=s(b,!0);c(b);var k=f(b,2),I=s(k,!0);c(k),c(v);var A=f(v,2),T=s(A);T.__click=()=>e.onStart(e.card);var p=f(T,2);p.__click=()=>e.onToggle(e.card.id,t(r)?"active":"done");var m=s(p,!0);c(p);var j=f(p,2);{let _=Z(()=>`More actions for ${e.card.title}`);Zr(j,{get ariaLabel(){return t(_)},$$events:{edit:()=>e.onEdit?.(e.card),delete:()=>e.onDelete?.(e.card.id)}})}c(A),c(d),U(()=>{l=ie(d,1,"card svelte-ybr5in",null,l,{done:t(r)}),Q(C,e.card.title),q=ie(b,1,"status svelte-ybr5in",null,q,{done:t(r)}),Q(E,t(i)),Q(I,e.card.prompt),$(T,"aria-label",`Start chat with prompt for ${e.card.title}`),$(p,"aria-pressed",t(r)),$(p,"aria-label",t(r)?`Mark ${e.card.title} as active`:`Mark ${e.card.title} as done`),Q(m,t(n))}),x(a,d),de()}he(["click"]);var ra=L('<p class="empty-state" role="status" aria-live="polite">No learning cards match your filters.</p>'),aa=L('<section class="project-group"><h3> </h3> <!></section>'),na=L('<section><h2>Your learning cards</h2> <div class="filters"><label class="filter">Show: <select><option> </option><option> </option><option> </option></select></label> <label class="filter search">Search: <input type="search" placeholder="Search title, prompt, topic" aria-label="Search cards"/></label></div> <div class="card-list"><!></div></section>');function ia(a,e){ce(e,!0);function r(T){const p=new Map;for(const j of T){const _=j.project||"";p.has(_)||p.set(_,[]),p.get(_).push(j)}const m=[];for(const[j,_]of p.entries())m.push({project:j,cards:_,headingId:`project-${(j||"unassigned").replace(/\s+/g,"-")}`});return m.sort((j,_)=>{const w=j.project?M.all.find(W=>W.id===j.project)?.name||j.project:"Unassigned",O=_.project?M.all.find(W=>W.id===_.project)?.name||_.project:"Unassigned";return w.localeCompare(O)}),m}const n=Z(()=>J.filterProject==="all"?r(J.filtered):[]);function i(T){const p=T.target;J.setFilterStatus(p.value)}function o(T){const p=T.target;J.setFilterQuery(p.value)}var d=na(),l=f(s(d),2),u=s(l),y=f(s(u));y.__change=i;var C=s(y),F=s(C);c(C),C.value=C.__value="all";var N=f(C),B=s(N);c(N),N.value=N.__value="active";var h=f(N),v=s(h);c(h),h.value=h.__value="done",c(y),c(u);var b=f(u,2),q=f(s(b));q.__input=o,c(b),c(l);var E=f(l,2),k=s(E);{var I=T=>{var p=ra();x(T,p)},A=T=>{var p=je(),m=me(p);{var j=w=>{var O=je(),W=me(O);Se(W,17,()=>t(n),S=>S.headingId,(S,D)=>{var z=aa(),le=s(z),ke=s(le,!0);c(le);var _e=f(le,2);Se(_e,17,()=>t(D).cards,ee=>ee.id,(ee,Pe)=>{st(ee,{get card(){return t(Pe)},get onStart(){return e.onStart},get onToggle(){return e.onToggle},get onEdit(){return e.onEdit},get onDelete(){return e.onDelete}})}),c(z),U(ee=>{$(z,"aria-labelledby",t(D).headingId),$(le,"id",t(D).headingId),Q(ke,ee)},[()=>t(D).project?M.all.find(ee=>ee.id===t(D).project)?.name||t(D).project:"Unassigned"]),x(S,z)}),x(w,O)},_=w=>{var O=je(),W=me(O);Se(W,17,()=>J.filtered,S=>S.id,(S,D)=>{st(S,{get card(){return t(D)},get onStart(){return e.onStart},get onToggle(){return e.onToggle},get onEdit(){return e.onEdit},get onDelete(){return e.onDelete}})}),x(w,O)};V(m,w=>{J.filterProject==="all"?w(j):w(_,!1)},!0)}x(T,p)};V(k,T=>{J.filtered.length===0?T(I):T(A,!1)})}c(E),c(d),U(()=>{Q(F,`All (${J.all.length??""})`),Q(B,`Active (${J.activeCards.length??""})`),Q(v,`Completed (${J.completedCards.length??""})`)}),x(a,d),de()}he(["change","input"]);var oa=L('<div class="modal-overlay" role="presentation" tabindex="-1"><div class="modal-content" role="dialog" aria-modal="true" aria-labelledby="edit-heading"><!></div></div>'),la=L('<section class="project-detail svelte-1ykxz3w"><header><h2> </h2> <div class="actions svelte-1ykxz3w"><button class="primary" aria-controls="add-section">+ New Learning Item</button></div></header> <!> <!> <!></section>');function sa(a,e){ce(e,!0);const r=Z(()=>{if(!(!M.all||!e.projectId))return M.all.find(p=>p.id===e.projectId)});Fe(()=>{(!M.all||M.all.length===0)&&M.loadProjects()});function n(){J.toggleForm()}async function i(p){const j=p.project&&String(p.project).trim().length>0?p.project:e.projectId||void 0;await J.addCard({...p,project:j}),J.closeForm()}async function o(p){let m;p.project&&(m=M.all.find(_=>_.id===p.project)?.systemPrompt),await J.runPromptWithSystem(p.prompt,m)}async function d(p,m){await J.updateCardStatus(p,m)}let l=H(null);function u(p){g(l,p,!0)}async function y(p){await J.updateCard(p),g(l,null)}function C(){g(l,null)}async function F(p){window.confirm("Are you sure you want to delete this learning card?")&&await J.deleteCard(p)}var N=la(),B=s(N),h=s(B),v=s(h,!0);c(h);var b=f(h,2),q=s(b);q.__click=n,c(b),c(B);var E=f(B,2);{var k=p=>{Or(p,{onSubmit:i})};V(E,p=>{J.isFormOpen&&p(k)})}var I=f(E,2);{var A=p=>{var m=oa();m.__click=C,m.__keydown=w=>w.key==="Escape"&&C();var j=s(m);j.__click=w=>w.stopPropagation(),j.__keydown=w=>w.key==="Escape"&&C();var _=s(j);zr(_,{get card(){return t(l)},onSubmit:y,onCancel:C}),c(j),c(m),x(p,m)};V(I,p=>{t(l)&&p(A)})}var T=f(I,2);ia(T,{onStart:o,onToggle:d,onEdit:u,onDelete:F}),c(N),U(()=>{Q(v,t(r)?t(r).name:"Project"),$(q,"aria-expanded",J.isFormOpen)}),x(a,N),de()}he(["click","keydown"]);var ca=L('<meta name="description" content="Finish what you start"/>'),da=L('<button class="primary" aria-label="Create project">+ New Project</button>'),ua=L('<button class="ghost" aria-label="Back to projects">‚Üê Projects</button>'),va=L("<option> </option>"),fa=L('<div class="project-controls svelte-1uha8ag"><label class="project-filter svelte-1uha8ag">Project: <select aria-label="Switch project" class="svelte-1uha8ag"><option>All projects</option><!></select></label> <button class="ghost" aria-label="Back to projects">‚Üê Projects</button></div>'),pa=L("<p>Loading...</p>"),ma=L('<div id="sr-announcements" class="sr-only" aria-live="polite" aria-atomic="true"></div> <div class="container"><header><h1>Learning Space</h1> <p class="subtitle">Finish what you start</p> <div class="top-actions"><!></div></header> <main id="main-content"><!></main></div>',1);function Pa(a,e){ce(e,!0),Vt(()=>{(async()=>await Promise.all([J.loadCards(),M.loadProjects()]))()});function r(v){const b=v.project;M.selectProject(b)}function n(v){const q=v.target.value;q==="all"?M.selectAll():q&&M.selectProject(q)}var i=ma();ar("1uha8ag",v=>{var b=ca();mt(()=>{Jt.title="Learning Space"}),x(v,b)});var o=f(me(i),2),d=s(o),l=f(s(d),4),u=s(l);{var y=v=>{var b=da();b.__click=()=>M.selectCreateProject(),x(v,b)},C=v=>{var b=je(),q=me(b);{var E=I=>{var A=ua();A.__click=()=>M.selectProject("all"),x(I,A)},k=I=>{var A=fa(),T=s(A),p=f(s(T));p.__change=n;var m=s(p);m.value=m.__value="all";var j=f(m);Se(j,17,()=>M.all,O=>O.id,(O,W)=>{var S=va(),D=s(S,!0);c(S);var z={};U(()=>{Q(D,t(W).name),z!==(z=t(W).id)&&(S.value=(S.__value=t(W).id)??"")}),x(O,S)}),c(p);var _;_t(p),c(T);var w=f(T,2);w.__click=()=>M.selectProject("all"),c(A),U(()=>{_!==(_=M.selectedProject)&&(p.value=(p.__value=M.selectedProject)??"",tt(p,M.selectedProject))}),x(I,A)};V(q,I=>{M.selectedProject==="create"?I(E):I(k,!1)},!0)}x(v,b)};V(u,v=>{M.selectedProject==="all"?v(y):v(C,!1)})}c(l),c(d);var F=f(d,2),N=s(F);{var B=v=>{var b=pa();x(v,b)},h=v=>{var b=je(),q=me(b);{var E=I=>{wr(I,{onopen:A=>M.selectProject(A.projectId)})},k=I=>{var A=je(),T=me(A);{var p=j=>{xr(j,{oncreated:r})},m=j=>{sa(j,{get projectId(){return M.selectedProject}})};V(T,j=>{M.selectedProject==="create"?j(p):j(m,!1)},!0)}x(I,A)};V(q,I=>{M.selectedProject==="all"?I(E):I(k,!1)},!0)}x(v,b)};V(N,v=>{J.isLoading||M.isLoading?v(B):v(h,!1)})}c(F),c(o),x(a,i),de()}he(["click","change"]);export{Pa as component};
